/*! For license information please see main.f5fc18ca.js.LICENSE.txt */
(()=>{"use strict";var e={4:(e,t,n)=>{var r=n(853),i=n(43),s=n(950);function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(l(e)!==e)throw Error(o(188))}function h(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=h(e)))return t;e=e.sibling}return null}var d=Object.assign,f=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),b=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),S=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),k=Symbol.for("react.lazy");Symbol.for("react.scope");var C=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var N=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var x=Symbol.iterator;function A(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=x&&e[x]||e["@@iterator"])?e:null}var P=Symbol.for("react.client.reference");function R(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===P?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case m:return"Fragment";case v:return"Profiler";case y:return"StrictMode";case I:return"Suspense";case S:return"SuspenseList";case C:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case g:return"Portal";case b:return(e.displayName||"Context")+".Provider";case w:return(e._context.displayName||"Context")+".Consumer";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case E:return null!==(t=e.displayName||null)?t:R(e.type)||"Memo";case k:t=e._payload,e=e._init;try{return R(e(t))}catch(Ic){}}return null}var D=Array.isArray,O=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M={pending:!1,data:null,method:null,action:null},F=[],U=-1;function j(e){return{current:e}}function V(e){0>U||(e.current=F[U],F[U]=null,U--)}function z(e,t){U++,F[U]=e.current,e.current=t}var q=j(null),B=j(null),H=j(null),W=j(null);function K(e,t){switch(z(H,t),z(B,e),z(q,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?sh(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=oh(t=sh(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}V(q),z(q,e)}function G(){V(q),V(B),V(H)}function Q(e){null!==e.memoizedState&&z(W,e);var t=q.current,n=oh(t,e.type);t!==n&&(z(B,e),z(q,n))}function Y(e){B.current===e&&(V(q),V(B)),W.current===e&&(V(W),Yh._currentValue=M)}var $=Object.prototype.hasOwnProperty,J=r.unstable_scheduleCallback,X=r.unstable_cancelCallback,Z=r.unstable_shouldYield,ee=r.unstable_requestPaint,te=r.unstable_now,ne=r.unstable_getCurrentPriorityLevel,re=r.unstable_ImmediatePriority,ie=r.unstable_UserBlockingPriority,se=r.unstable_NormalPriority,oe=r.unstable_LowPriority,ae=r.unstable_IdlePriority,le=r.log,ce=r.unstable_setDisableYieldValue,ue=null,he=null;function de(e){if("function"===typeof le&&ce(e),he&&"function"===typeof he.setStrictMode)try{he.setStrictMode(ue,e)}catch(t){}}var fe=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(pe(e)/ge|0)|0},pe=Math.log,ge=Math.LN2;var me=256,ye=4194304;function ve(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function _e(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var i=0,s=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var a=134217727&r;return 0!==a?0!==(r=a&~s)?i=ve(r):0!==(o&=a)?i=ve(o):n||0!==(n=a&~e)&&(i=ve(n)):0!==(a=r&~s)?i=ve(a):0!==o?i=ve(o):n||0!==(n=r&~e)&&(i=ve(n)),0===i?0:0!==t&&t!==i&&0===(t&s)&&((s=i&-i)>=(n=t&-t)||32===s&&0!==(4194048&n))?t:i}function we(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function be(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Te(){var e=me;return 0===(4194048&(me<<=1))&&(me=256),e}function Ie(){var e=ye;return 0===(62914560&(ye<<=1))&&(ye=4194304),e}function Se(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ee(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ke(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-fe(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194090&n}function Ce(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-fe(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function Ne(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function xe(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Ae(){var e=L.p;return 0!==e?e:void 0===(e=window.event)?32:ud(e.type)}var Pe=Math.random().toString(36).slice(2),Re="__reactFiber$"+Pe,De="__reactProps$"+Pe,Oe="__reactContainer$"+Pe,Le="__reactEvents$"+Pe,Me="__reactListeners$"+Pe,Fe="__reactHandles$"+Pe,Ue="__reactResources$"+Pe,je="__reactMarker$"+Pe;function Ve(e){delete e[Re],delete e[De],delete e[Le],delete e[Me],delete e[Fe]}function ze(e){var t=e[Re];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Oe]||n[Re]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=wh(e);null!==e;){if(n=e[Re])return n;e=wh(e)}return t}n=(e=n).parentNode}return null}function qe(e){if(e=e[Re]||e[Oe]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function Be(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(o(33))}function He(e){var t=e[Ue];return t||(t=e[Ue]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function We(e){e[je]=!0}var Ke=new Set,Ge={};function Qe(e,t){Ye(e,t),Ye(e+"Capture",t)}function Ye(e,t){for(Ge[e]=t,e=0;e<t.length;e++)Ke.add(t[e])}var $e,Je,Xe=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ze={},et={};function tt(e,t,n){if(i=t,$.call(et,i)||!$.call(Ze,i)&&(Xe.test(i)?et[i]=!0:(Ze[i]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var i}function nt(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function rt(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function it(e){if(void 0===$e)try{throw Error()}catch(Ic){var t=Ic.stack.trim().match(/\n( *(at )?)/);$e=t&&t[1]||"",Je=-1<Ic.stack.indexOf("\n    at")?" (<anonymous>)":-1<Ic.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+$e+e+Je}var st=!1;function ot(e,t){if(!e||st)return"";st=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(Ic){var r=Ic}Reflect.construct(e,[],n)}else{try{n.call()}catch(i){r=i}e.call(n.prototype)}}else{try{throw Error()}catch(s){r=s}(n=e())&&"function"===typeof n.catch&&n.catch((function(){}))}}catch(o){if(o&&r&&"string"===typeof o.stack)return[o.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=r.DetermineComponentFrameRoot(),o=s[0],a=s[1];if(o&&a){var l=o.split("\n"),c=a.split("\n");for(i=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;i<c.length&&!c[i].includes("DetermineComponentFrameRoot");)i++;if(r===l.length||i===c.length)for(r=l.length-1,i=c.length-1;1<=r&&0<=i&&l[r]!==c[i];)i--;for(;1<=r&&0<=i;r--,i--)if(l[r]!==c[i]){if(1!==r||1!==i)do{if(r--,0>--i||l[r]!==c[i]){var u="\n"+l[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=i);break}}}finally{st=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?it(n):""}function at(e){switch(e.tag){case 26:case 27:case 5:return it(e.type);case 16:return it("Lazy");case 13:return it("Suspense");case 19:return it("SuspenseList");case 0:case 15:return ot(e.type,!1);case 11:return ot(e.type.render,!1);case 1:return ot(e.type,!0);case 31:return it("Activity");default:return""}}function lt(e){try{var t="";do{t+=at(e),e=e.return}while(e);return t}catch(Ic){return"\nError generating stack: "+Ic.message+"\n"+Ic.stack}}function ct(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ut(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ht(e){e._valueTracker||(e._valueTracker=function(e){var t=ut(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function dt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ut(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function ft(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(WM){return e.body}}var pt=/[\n"\\]/g;function gt(e){return e.replace(pt,(function(e){return"\\"+e.charCodeAt(0).toString(16)+" "}))}function mt(e,t,n,r,i,s,o,a){e.name="",null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.type=o:e.removeAttribute("type"),null!=t?"number"===o?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ct(t)):e.value!==""+ct(t)&&(e.value=""+ct(t)):"submit"!==o&&"reset"!==o||e.removeAttribute("value"),null!=t?vt(e,o,ct(t)):null!=n?vt(e,o,ct(n)):null!=r&&e.removeAttribute("value"),null==i&&null!=s&&(e.defaultChecked=!!s),null!=i&&(e.checked=i&&"function"!==typeof i&&"symbol"!==typeof i),null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.name=""+ct(a):e.removeAttribute("name")}function yt(e,t,n,r,i,s,o,a){if(null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s&&(e.type=s),null!=t||null!=n){if(!("submit"!==s&&"reset"!==s||void 0!==t&&null!==t))return;n=null!=n?""+ct(n):"",t=null!=t?""+ct(t):n,a||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:i)&&"symbol"!==typeof r&&!!r,e.checked=a?e.checked:!!r,e.defaultChecked=!!r,null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o&&(e.name=o)}function vt(e,t,n){"number"===t&&ft(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function _t(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ct(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function wt(e,t,n){null==t||((t=""+ct(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ct(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function bt(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(o(92));if(D(r)){if(1<r.length)throw Error(o(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=ct(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r)}function Tt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var It=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function St(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||It.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Et(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(o(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var i in t)r=t[i],t.hasOwnProperty(i)&&n[i]!==r&&St(e,i,r)}else for(var s in t)t.hasOwnProperty(s)&&St(e,s,t[s])}function kt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ct=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Nt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function xt(e){return Nt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var At=null;function Pt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Rt=null,Dt=null;function Ot(e){var t=qe(e);if(t&&(e=t.stateNode)){var n=e[De]||null;e:switch(e=t.stateNode,t.type){case"input":if(mt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+gt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=r[De]||null;if(!i)throw Error(o(90));mt(r,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&dt(r)}break e;case"textarea":wt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&_t(e,!!n.multiple,t,!1)}}}var Lt=!1;function Mt(e,t,n){if(Lt)return e(t,n);Lt=!0;try{return e(t)}finally{if(Lt=!1,(null!==Rt||null!==Dt)&&(qc(),Rt&&(t=Rt,e=Dt,Dt=Rt=null,Ot(t),e)))for(t=0;t<e.length;t++)Ot(e[t])}}function Ft(e,t){var n=e.stateNode;if(null===n)return null;var r=n[De]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Ut=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),jt=!1;if(Ut)try{var Vt={};Object.defineProperty(Vt,"passive",{get:function(){jt=!0}}),window.addEventListener("test",Vt,Vt),window.removeEventListener("test",Vt,Vt)}catch(WM){jt=!1}var zt=null,qt=null,Bt=null;function Ht(){if(Bt)return Bt;var e,t,n=qt,r=n.length,i="value"in zt?zt.value:zt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Bt=i.slice(e,1<t?1-t:void 0)}function Wt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Kt(){return!0}function Gt(){return!1}function Qt(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?Kt:Gt,this.isPropagationStopped=Gt,this}return d(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Kt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Kt)},persist:function(){},isPersistent:Kt}),t}var Yt,$t,Jt,Xt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zt=Qt(Xt),en=d({},Xt,{view:0,detail:0}),tn=Qt(en),nn=d({},en,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Jt&&(Jt&&"mousemove"===e.type?(Yt=e.screenX-Jt.screenX,$t=e.screenY-Jt.screenY):$t=Yt=0,Jt=e),Yt)},movementY:function(e){return"movementY"in e?e.movementY:$t}}),rn=Qt(nn),sn=Qt(d({},nn,{dataTransfer:0})),on=Qt(d({},en,{relatedTarget:0})),an=Qt(d({},Xt,{animationName:0,elapsedTime:0,pseudoElement:0})),ln=Qt(d({},Xt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),cn=Qt(d({},Xt,{data:0})),un={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=dn[e])&&!!t[e]}function pn(){return fn}var gn=Qt(d({},en,{key:function(e){if(e.key){var t=un[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Wt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?hn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pn,charCode:function(e){return"keypress"===e.type?Wt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Wt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),mn=Qt(d({},nn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),yn=Qt(d({},en,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pn})),vn=Qt(d({},Xt,{propertyName:0,elapsedTime:0,pseudoElement:0})),_n=Qt(d({},nn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),wn=Qt(d({},Xt,{newState:0,oldState:0})),bn=[9,13,27,32],Tn=Ut&&"CompositionEvent"in window,In=null;Ut&&"documentMode"in document&&(In=document.documentMode);var Sn=Ut&&"TextEvent"in window&&!In,En=Ut&&(!Tn||In&&8<In&&11>=In),kn=String.fromCharCode(32),Cn=!1;function Nn(e,t){switch(e){case"keyup":return-1!==bn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var An=!1;var Pn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Pn[e.type]:"textarea"===t}function Dn(e,t,n,r){Rt?Dt?Dt.push(r):Dt=[r]:Rt=r,0<(t=Wu(t,"onChange")).length&&(n=new Zt("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var On=null,Ln=null;function Mn(e){Fu(e,0)}function Fn(e){if(dt(Be(e)))return e}function Un(e,t){if("change"===e)return t}var jn=!1;if(Ut){var Vn;if(Ut){var zn="oninput"in document;if(!zn){var qn=document.createElement("div");qn.setAttribute("oninput","return;"),zn="function"===typeof qn.oninput}Vn=zn}else Vn=!1;jn=Vn&&(!document.documentMode||9<document.documentMode)}function Bn(){On&&(On.detachEvent("onpropertychange",Hn),Ln=On=null)}function Hn(e){if("value"===e.propertyName&&Fn(Ln)){var t=[];Dn(t,Ln,e,Pt(e)),Mt(Mn,t)}}function Wn(e,t,n){"focusin"===e?(Bn(),Ln=n,(On=t).attachEvent("onpropertychange",Hn)):"focusout"===e&&Bn()}function Kn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Fn(Ln)}function Gn(e,t){if("click"===e)return Fn(t)}function Qn(e,t){if("input"===e||"change"===e)return Fn(t)}var Yn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function $n(e,t){if(Yn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!$.call(t,i)||!Yn(e[i],t[i]))return!1}return!0}function Jn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Xn(e,t){var n,r=Jn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Jn(r)}}function Zn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Zn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function er(e){for(var t=ft((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=ft((e=t.contentWindow).document)}return t}function tr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var nr=Ut&&"documentMode"in document&&11>=document.documentMode,rr=null,ir=null,sr=null,or=!1;function ar(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;or||null==rr||rr!==ft(r)||("selectionStart"in(r=rr)&&tr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},sr&&$n(sr,r)||(sr=r,0<(r=Wu(ir,"onSelect")).length&&(t=new Zt("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=rr)))}function lr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var cr={animationend:lr("Animation","AnimationEnd"),animationiteration:lr("Animation","AnimationIteration"),animationstart:lr("Animation","AnimationStart"),transitionrun:lr("Transition","TransitionRun"),transitionstart:lr("Transition","TransitionStart"),transitioncancel:lr("Transition","TransitionCancel"),transitionend:lr("Transition","TransitionEnd")},ur={},hr={};function dr(e){if(ur[e])return ur[e];if(!cr[e])return e;var t,n=cr[e];for(t in n)if(n.hasOwnProperty(t)&&t in hr)return ur[e]=n[t];return e}Ut&&(hr=document.createElement("div").style,"AnimationEvent"in window||(delete cr.animationend.animation,delete cr.animationiteration.animation,delete cr.animationstart.animation),"TransitionEvent"in window||delete cr.transitionend.transition);var fr=dr("animationend"),pr=dr("animationiteration"),gr=dr("animationstart"),mr=dr("transitionrun"),yr=dr("transitionstart"),vr=dr("transitioncancel"),_r=dr("transitionend"),wr=new Map,br="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Tr(e,t){wr.set(e,t),Qe(t,[e])}br.push("scrollEnd");var Ir=new WeakMap;function Sr(e,t){if("object"===typeof e&&null!==e){var n=Ir.get(e);return void 0!==n?n:(t={value:e,source:t,stack:lt(t)},Ir.set(e,t),t)}return{value:e,source:t,stack:lt(t)}}var Er=[],kr=0,Cr=0;function Nr(){for(var e=kr,t=Cr=kr=0;t<e;){var n=Er[t];Er[t++]=null;var r=Er[t];Er[t++]=null;var i=Er[t];Er[t++]=null;var s=Er[t];if(Er[t++]=null,null!==r&&null!==i){var o=r.pending;null===o?i.next=i:(i.next=o.next,o.next=i),r.pending=i}0!==s&&Rr(n,i,s)}}function xr(e,t,n,r){Er[kr++]=e,Er[kr++]=t,Er[kr++]=n,Er[kr++]=r,Cr|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Ar(e,t,n,r){return xr(e,t,n,r),Dr(e)}function Pr(e,t){return xr(e,null,null,t),Dr(e)}function Rr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var i=!1,s=e.return;null!==s;)s.childLanes|=n,null!==(r=s.alternate)&&(r.childLanes|=n),22===s.tag&&(null===(e=s.stateNode)||1&e._visibility||(i=!0)),e=s,s=s.return;return 3===e.tag?(s=e.stateNode,i&&null!==t&&(i=31-fe(n),null===(r=(e=s.hiddenUpdates)[i])?e[i]=[t]:r.push(t),t.lane=536870912|n),s):null}function Dr(e){if(50<Dc)throw Dc=0,Oc=null,Error(o(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Or={};function Lr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mr(e,t,n,r){return new Lr(e,t,n,r)}function Fr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ur(e,t){var n=e.alternate;return null===n?((n=Mr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function jr(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Vr(e,t,n,r,i,s){var a=0;if(r=e,"function"===typeof e)Fr(e)&&(a=1);else if("string"===typeof e)a=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,q.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case C:return(e=Mr(31,n,t,i)).elementType=C,e.lanes=s,e;case m:return zr(n.children,i,s,t);case y:a=8,i|=24;break;case v:return(e=Mr(12,n,t,2|i)).elementType=v,e.lanes=s,e;case I:return(e=Mr(13,n,t,i)).elementType=I,e.lanes=s,e;case S:return(e=Mr(19,n,t,i)).elementType=S,e.lanes=s,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case _:case b:a=10;break e;case w:a=9;break e;case T:a=11;break e;case E:a=14;break e;case k:a=16,r=null;break e}a=29,n=Error(o(130,null===e?"null":typeof e,"")),r=null}return(t=Mr(a,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function zr(e,t,n,r){return(e=Mr(7,e,r,t)).lanes=n,e}function qr(e,t,n){return(e=Mr(6,e,null,t)).lanes=n,e}function Br(e,t,n){return(t=Mr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Hr=[],Wr=0,Kr=null,Gr=0,Qr=[],Yr=0,$r=null,Jr=1,Xr="";function Zr(e,t){Hr[Wr++]=Gr,Hr[Wr++]=Kr,Kr=e,Gr=t}function ei(e,t,n){Qr[Yr++]=Jr,Qr[Yr++]=Xr,Qr[Yr++]=$r,$r=e;var r=Jr;e=Xr;var i=32-fe(r)-1;r&=~(1<<i),n+=1;var s=32-fe(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Jr=1<<32-fe(t)+i|n<<i|r,Xr=s+e}else Jr=1<<s|n<<i|r,Xr=e}function ti(e){null!==e.return&&(Zr(e,1),ei(e,1,0))}function ni(e){for(;e===Kr;)Kr=Hr[--Wr],Hr[Wr]=null,Gr=Hr[--Wr],Hr[Wr]=null;for(;e===$r;)$r=Qr[--Yr],Qr[Yr]=null,Xr=Qr[--Yr],Qr[Yr]=null,Jr=Qr[--Yr],Qr[Yr]=null}var ri=null,ii=null,si=!1,oi=null,ai=!1,li=Error(o(519));function ci(e){throw gi(Sr(Error(o(418,"")),e)),li}function ui(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Re]=e,t[De]=r,n){case"dialog":Uu("cancel",t),Uu("close",t);break;case"iframe":case"object":case"embed":Uu("load",t);break;case"video":case"audio":for(n=0;n<Lu.length;n++)Uu(Lu[n],t);break;case"source":Uu("error",t);break;case"img":case"image":case"link":Uu("error",t),Uu("load",t);break;case"details":Uu("toggle",t);break;case"input":Uu("invalid",t),yt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),ht(t);break;case"select":Uu("invalid",t);break;case"textarea":Uu("invalid",t),bt(t,r.value,r.defaultValue,r.children),ht(t)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||Ju(t.textContent,n)?(null!=r.popover&&(Uu("beforetoggle",t),Uu("toggle",t)),null!=r.onScroll&&Uu("scroll",t),null!=r.onScrollEnd&&Uu("scrollend",t),null!=r.onClick&&(t.onclick=Xu),t=!0):t=!1,t||ci(e)}function hi(e){for(ri=e.return;ri;)switch(ri.tag){case 5:case 13:return void(ai=!1);case 27:case 3:return void(ai=!0);default:ri=ri.return}}function di(e){if(e!==ri)return!1;if(!si)return hi(e),si=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||ah(e.type,e.memoizedProps)),t=!t),t&&ii&&ci(e),hi(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){ii=vh(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}ii=null}}else 27===n?(n=ii,ph(e.type)?(e=_h,_h=null,ii=e):ii=n):ii=ri?vh(e.stateNode.nextSibling):null;return!0}function fi(){ii=ri=null,si=!1}function pi(){var e=oi;return null!==e&&(null===_c?_c=e:_c.push.apply(_c,e),oi=null),e}function gi(e){null===oi?oi=[e]:oi.push(e)}var mi=j(null),yi=null,vi=null;function _i(e,t,n){z(mi,t._currentValue),t._currentValue=n}function wi(e){e._currentValue=mi.current,V(mi)}function bi(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ti(e,t,n,r){var i=e.child;for(null!==i&&(i.return=e);null!==i;){var s=i.dependencies;if(null!==s){var a=i.child;s=s.firstContext;e:for(;null!==s;){var l=s;s=i;for(var c=0;c<t.length;c++)if(l.context===t[c]){s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),bi(s.return,n,e),r||(a=null);break e}s=l.next}}else if(18===i.tag){if(null===(a=i.return))throw Error(o(341));a.lanes|=n,null!==(s=a.alternate)&&(s.lanes|=n),bi(a,n,e),a=null}else a=i.child;if(null!==a)a.return=i;else for(a=i;null!==a;){if(a===e){a=null;break}if(null!==(i=a.sibling)){i.return=a.return,a=i;break}a=a.return}i=a}}function Ii(e,t,n,r){e=null;for(var i=t,s=!1;null!==i;){if(!s)if(0!==(524288&i.flags))s=!0;else if(0!==(262144&i.flags))break;if(10===i.tag){var a=i.alternate;if(null===a)throw Error(o(387));if(null!==(a=a.memoizedProps)){var l=i.type;Yn(i.pendingProps.value,a.value)||(null!==e?e.push(l):e=[l])}}else if(i===W.current){if(null===(a=i.alternate))throw Error(o(387));a.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(null!==e?e.push(Yh):e=[Yh])}i=i.return}null!==e&&Ti(t,e,n,r),t.flags|=262144}function Si(e){for(e=e.firstContext;null!==e;){if(!Yn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ei(e){yi=e,vi=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function ki(e){return Ni(yi,e)}function Ci(e,t){return null===yi&&Ei(e),Ni(e,t)}function Ni(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===vi){if(null===e)throw Error(o(308));vi=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else vi=vi.next=t;return n}var xi="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach((function(e){return e()}))}},Ai=r.unstable_scheduleCallback,Pi=r.unstable_NormalPriority,Ri={$$typeof:b,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Di(){return{controller:new xi,data:new Map,refCount:0}}function Oi(e){e.refCount--,0===e.refCount&&Ai(Pi,(function(){e.controller.abort()}))}var Li=null,Mi=0,Fi=0,Ui=null;function ji(){if(0===--Mi&&null!==Li){null!==Ui&&(Ui.status="fulfilled");var e=Li;Li=null,Fi=0,Ui=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Vi=O.S;O.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Li){var n=Li=[];Mi=0,Fi=Au(),Ui={status:"pending",value:void 0,then:function(e){n.push(e)}}}Mi++,t.then(ji,ji)}(0,t),null!==Vi&&Vi(e,t)};var zi=j(null);function qi(){var e=zi.current;return null!==e?e:rc.pooledCache}function Bi(e,t){z(zi,null===t?zi.current:t.pool)}function Hi(){var e=qi();return null===e?null:{parent:Ri._currentValue,pool:e}}var Wi=Error(o(460)),Ki=Error(o(474)),Gi=Error(o(542)),Qi={then:function(){}};function Yi(e){return"fulfilled"===(e=e.status)||"rejected"===e}function $i(){}function Ji(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then($i,$i),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw es(e=t.reason),e;default:if("string"===typeof t.status)t.then($i,$i);else{if(null!==(e=rc)&&100<e.shellSuspendCounter)throw Error(o(482));(e=t).status="pending",e.then((function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}}),(function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}}))}switch(t.status){case"fulfilled":return t.value;case"rejected":throw es(e=t.reason),e}throw Xi=t,Wi}}var Xi=null;function Zi(){if(null===Xi)throw Error(o(459));var e=Xi;return Xi=null,e}function es(e){if(e===Wi||e===Gi)throw Error(o(483))}var ts=!1;function ns(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function rs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function is(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ss(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&nc)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=Dr(e),Rr(e,null,n),t}return xr(e,r,t,n),Dr(e)}function os(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ce(e,n)}}function as(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var ls=!1;function cs(){if(ls){if(null!==Ui)throw Ui}}function us(e,t,n,r){ls=!1;var i=e.updateQueue;ts=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==s){var h=i.baseState;for(o=0,u=c=l=null,a=s;;){var f=-536870913&a.lane,p=f!==a.lane;if(p?(sc&f)===f:(r&f)===f){0!==f&&f===Fi&&(ls=!0),null!==u&&(u=u.next={lane:0,tag:a.tag,payload:a.payload,callback:null,next:null});e:{var g=e,m=a;f=t;var y=n;switch(m.tag){case 1:if("function"===typeof(g=m.payload)){h=g.call(y,h,f);break e}h=g;break e;case 3:g.flags=-65537&g.flags|128;case 0:if(null===(f="function"===typeof(g=m.payload)?g.call(y,h,f):g)||void 0===f)break e;h=d({},h,f);break e;case 2:ts=!0}}null!==(f=a.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=i.callbacks)?i.callbacks=[f]:p.push(f))}else p={lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=p,l=h):u=u.next=p,o|=f;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(p=a).next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null===s&&(i.shared.lanes=0),fc|=o,e.lanes=o,e.memoizedState=h}}function hs(e,t){if("function"!==typeof e)throw Error(o(191,e));e.call(t)}function ds(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)hs(n[e],t)}var fs=j(null),ps=j(0);function gs(e,t){z(ps,e=hc),z(fs,t),hc=e|t.baseLanes}function ms(){z(ps,hc),z(fs,fs.current)}function ys(){hc=ps.current,V(fs),V(ps)}var vs=0,_s=null,ws=null,bs=null,Ts=!1,Is=!1,Ss=!1,Es=0,ks=0,Cs=null,Ns=0;function xs(){throw Error(o(321))}function As(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Yn(e[n],t[n]))return!1;return!0}function Ps(e,t,n,r,i,s){return vs=s,_s=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,O.H=null===e||null===e.memoizedState?Ko:Go,Ss=!1,s=n(r,i),Ss=!1,Is&&(s=Ds(t,n,r,i)),Rs(e),s}function Rs(e){O.H=Wo;var t=null!==ws&&null!==ws.next;if(vs=0,bs=ws=_s=null,Ts=!1,ks=0,Cs=null,t)throw Error(o(300));null===e||Ca||null!==(e=e.dependencies)&&Si(e)&&(Ca=!0)}function Ds(e,t,n,r){_s=e;var i=0;do{if(Is&&(Cs=null),ks=0,Is=!1,25<=i)throw Error(o(301));if(i+=1,bs=ws=null,null!=e.updateQueue){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,null!=s.memoCache&&(s.memoCache.index=0)}O.H=Qo,s=t(n,r)}while(Is);return s}function Os(){var e=O.H,t=e.useState()[0];return t="function"===typeof t.then?Vs(t):t,e=e.useState()[0],(null!==ws?ws.memoizedState:null)!==e&&(_s.flags|=1024),t}function Ls(){var e=0!==Es;return Es=0,e}function Ms(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Fs(e){if(Ts){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Ts=!1}vs=0,bs=ws=_s=null,Is=!1,ks=Es=0,Cs=null}function Us(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===bs?_s.memoizedState=bs=e:bs=bs.next=e,bs}function js(){if(null===ws){var e=_s.alternate;e=null!==e?e.memoizedState:null}else e=ws.next;var t=null===bs?_s.memoizedState:bs.next;if(null!==t)bs=t,ws=e;else{if(null===e){if(null===_s.alternate)throw Error(o(467));throw Error(o(310))}e={memoizedState:(ws=e).memoizedState,baseState:ws.baseState,baseQueue:ws.baseQueue,queue:ws.queue,next:null},null===bs?_s.memoizedState=bs=e:bs=bs.next=e}return bs}function Vs(e){var t=ks;return ks+=1,null===Cs&&(Cs=[]),e=Ji(Cs,e,t),t=_s,null===(null===bs?t.memoizedState:bs.next)&&(t=t.alternate,O.H=null===t||null===t.memoizedState?Ko:Go),e}function zs(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return Vs(e);if(e.$$typeof===b)return ki(e)}throw Error(o(438,String(e)))}function qs(e){var t=null,n=_s.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=_s.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map((function(e){return e.slice()})),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},_s.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=N;return t.index++,n}function Bs(e,t){return"function"===typeof t?t(e):t}function Hs(e){return Ws(js(),ws,e)}function Ws(e,t,n){var r=e.queue;if(null===r)throw Error(o(311));r.lastRenderedReducer=n;var i=e.baseQueue,s=r.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}t.baseQueue=i=s,r.pending=null}if(s=e.baseState,null===i)e.memoizedState=s;else{var l=a=null,c=null,u=t=i.next,h=!1;do{var d=-536870913&u.lane;if(d!==u.lane?(sc&d)===d:(vs&d)===d){var f=u.revertLane;if(0===f)null!==c&&(c=c.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),d===Fi&&(h=!0);else{if((vs&f)===f){u=u.next,f===Fi&&(h=!0);continue}d={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=d,a=s):c=c.next=d,_s.lanes|=f,fc|=f}d=u.action,Ss&&n(s,d),s=u.hasEagerState?u.eagerState:n(s,d)}else f={lane:d,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=f,a=s):c=c.next=f,_s.lanes|=d,fc|=d;u=u.next}while(null!==u&&u!==t);if(null===c?a=s:c.next=l,!Yn(s,e.memoizedState)&&(Ca=!0,h&&null!==(n=Ui)))throw n;e.memoizedState=s,e.baseState=a,e.baseQueue=c,r.lastRenderedState=s}return null===i&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Ks(e){var t=js(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);Yn(s,t.memoizedState)||(Ca=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Gs(e,t,n){var r=_s,i=js(),s=si;if(s){if(void 0===n)throw Error(o(407));n=n()}else n=t();var a=!Yn((ws||i).memoizedState,n);if(a&&(i.memoizedState=n,Ca=!0),i=i.queue,yo(2048,8,$s.bind(null,r,i,e),[e]),i.getSnapshot!==t||a||null!==bs&&1&bs.memoizedState.tag){if(r.flags|=2048,po(9,{destroy:void 0,resource:void 0},Ys.bind(null,r,i,n,t),null),null===rc)throw Error(o(349));s||0!==(124&vs)||Qs(r,t,n)}return n}function Qs(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=_s.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},_s.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ys(e,t,n,r){t.value=n,t.getSnapshot=r,Js(t)&&Xs(e)}function $s(e,t,n){return n((function(){Js(t)&&Xs(e)}))}function Js(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Yn(e,n)}catch(MS){return!0}}function Xs(e){var t=Pr(e,2);null!==t&&Fc(t,e,2)}function Zs(e){var t=Us();if("function"===typeof e){var n=e;if(e=n(),Ss){de(!0);try{n()}finally{de(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bs,lastRenderedState:e},t}function eo(e,t,n,r){return e.baseState=n,Ws(e,ws,"function"===typeof r?r:Bs)}function to(e,t,n,r,i){if(qo(e))throw Error(o(485));if(null!==(e=t.action)){var s={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){s.listeners.push(e)}};null!==O.T?n(!0):s.isTransition=!1,r(s),null===(n=t.pending)?(s.next=t.pending=s,no(t,s)):(s.next=n.next,t.pending=n.next=s)}}function no(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var s=O.T,o={};O.T=o;try{var a=n(i,r),l=O.S;null!==l&&l(o,a),ro(e,t,a)}catch(MS){so(e,t,MS)}finally{O.T=s}}else try{ro(e,t,s=n(i,r))}catch(c){so(e,t,c)}}function ro(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then((function(n){io(e,t,n)}),(function(n){return so(e,t,n)})):io(e,t,n)}function io(e,t,n){t.status="fulfilled",t.value=n,oo(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,no(e,n)))}function so(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,oo(t),t=t.next}while(t!==r)}e.action=null}function oo(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function ao(e,t){return t}function lo(e,t){if(si){var n=rc.formState;if(null!==n){e:{var r=_s;if(si){if(ii){t:{for(var i=ii,s=ai;8!==i.nodeType;){if(!s){i=null;break t}if(null===(i=vh(i.nextSibling))){i=null;break t}}i="F!"===(s=i.data)||"F"===s?i:null}if(i){ii=vh(i.nextSibling),r="F!"===i.data;break e}}ci(r)}r=!1}r&&(t=n[0])}}return(n=Us()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ao,lastRenderedState:t},n.queue=r,n=jo.bind(null,_s,r),r.dispatch=n,r=Zs(!1),s=zo.bind(null,_s,!1,r.queue),i={state:t,dispatch:null,action:e,pending:null},(r=Us()).queue=i,n=to.bind(null,_s,i,s,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function co(e){return uo(js(),ws,e)}function uo(e,t,n){if(t=Ws(e,t,ao)[0],e=Hs(Bs)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var r=Vs(t)}catch(Ic){if(Ic===Wi)throw Gi;throw Ic}else r=t;var i=(t=js()).queue,s=i.dispatch;return n!==t.memoizedState&&(_s.flags|=2048,po(9,{destroy:void 0,resource:void 0},ho.bind(null,i,n),null)),[r,s,e]}function ho(e,t){e.action=t}function fo(e){var t=js(),n=ws;if(null!==n)return uo(t,n,e);js(),t=t.memoizedState;var r=(n=js()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function po(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=_s.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},_s.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function go(){return js().memoizedState}function mo(e,t,n,r){var i=Us();r=void 0===r?null:r,_s.flags|=e,i.memoizedState=po(1|t,{destroy:void 0,resource:void 0},n,r)}function yo(e,t,n,r){var i=js();r=void 0===r?null:r;var s=i.memoizedState.inst;null!==ws&&null!==r&&As(r,ws.memoizedState.deps)?i.memoizedState=po(t,s,n,r):(_s.flags|=e,i.memoizedState=po(1|t,s,n,r))}function vo(e,t){mo(8390656,8,e,t)}function _o(e,t){yo(2048,8,e,t)}function wo(e,t){return yo(4,2,e,t)}function bo(e,t){return yo(4,4,e,t)}function To(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function Io(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,yo(4,4,To.bind(null,t,e),n)}function So(){}function Eo(e,t){var n=js();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&As(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function ko(e,t){var n=js();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&As(t,r[1]))return r[0];if(r=e(),Ss){de(!0);try{e()}finally{de(!1)}}return n.memoizedState=[r,t],r}function Co(e,t,n){return void 0===n||0!==(1073741824&vs)?e.memoizedState=t:(e.memoizedState=n,e=Mc(),_s.lanes|=e,fc|=e,n)}function No(e,t,n,r){return Yn(n,t)?n:null!==fs.current?(e=Co(e,n,r),Yn(e,t)||(Ca=!0),e):0===(42&vs)?(Ca=!0,e.memoizedState=n):(e=Mc(),_s.lanes|=e,fc|=e,t)}function xo(e,t,n,r,i){var s=L.p;L.p=0!==s&&8>s?s:8;var o=O.T,a={};O.T=a,zo(e,!1,t,n);try{var l=i(),c=O.S;if(null!==c&&c(a,l),null!==l&&"object"===typeof l&&"function"===typeof l.then){var u=function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then((function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)}),(function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)})),r}(l,r);Vo(e,t,u,Lc())}else Vo(e,t,r,Lc())}catch(MS){Vo(e,t,{then:function(){},status:"rejected",reason:MS},Lc())}finally{L.p=s,O.T=o}}function Ao(){}function Po(e,t,n,r){if(5!==e.tag)throw Error(o(476));var i=Ro(e).queue;xo(e,i,t,M,null===n?Ao:function(){return Do(e),n(r)})}function Ro(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:M,baseState:M,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bs,lastRenderedState:M},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bs,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Do(e){Vo(e,Ro(e).next.queue,{},Lc())}function Oo(){return ki(Yh)}function Lo(){return js().memoizedState}function Mo(){return js().memoizedState}function Fo(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Lc(),r=ss(t,e=is(n),n);return null!==r&&(Fc(r,t,n),os(r,t,n)),t={cache:Di()},void(e.payload=t)}t=t.return}}function Uo(e,t,n){var r=Lc();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},qo(e)?Bo(t,n):null!==(n=Ar(e,t,n,r))&&(Fc(n,e,r),Ho(n,t,r))}function jo(e,t,n){Vo(e,t,n,Lc())}function Vo(e,t,n,r){var i={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(qo(e))Bo(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Yn(a,o))return xr(e,t,i,0),null===rc&&Nr(),!1}catch(MS){}if(null!==(n=Ar(e,t,i,r)))return Fc(n,e,r),Ho(n,t,r),!0}return!1}function zo(e,t,n,r){if(r={lane:2,revertLane:Au(),action:r,hasEagerState:!1,eagerState:null,next:null},qo(e)){if(t)throw Error(o(479))}else null!==(t=Ar(e,n,r,2))&&Fc(t,e,2)}function qo(e){var t=e.alternate;return e===_s||null!==t&&t===_s}function Bo(e,t){Is=Ts=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ho(e,t,n){if(0!==(4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ce(e,n)}}var Wo={readContext:ki,use:zs,useCallback:xs,useContext:xs,useEffect:xs,useImperativeHandle:xs,useLayoutEffect:xs,useInsertionEffect:xs,useMemo:xs,useReducer:xs,useRef:xs,useState:xs,useDebugValue:xs,useDeferredValue:xs,useTransition:xs,useSyncExternalStore:xs,useId:xs,useHostTransitionStatus:xs,useFormState:xs,useActionState:xs,useOptimistic:xs,useMemoCache:xs,useCacheRefresh:xs},Ko={readContext:ki,use:zs,useCallback:function(e,t){return Us().memoizedState=[e,void 0===t?null:t],e},useContext:ki,useEffect:vo,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,mo(4194308,4,To.bind(null,t,e),n)},useLayoutEffect:function(e,t){return mo(4194308,4,e,t)},useInsertionEffect:function(e,t){mo(4,2,e,t)},useMemo:function(e,t){var n=Us();t=void 0===t?null:t;var r=e();if(Ss){de(!0);try{e()}finally{de(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=Us();if(void 0!==n){var i=n(t);if(Ss){de(!0);try{n(t)}finally{de(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=Uo.bind(null,_s,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Us().memoizedState=e},useState:function(e){var t=(e=Zs(e)).queue,n=jo.bind(null,_s,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:So,useDeferredValue:function(e,t){return Co(Us(),e,t)},useTransition:function(){var e=Zs(!1);return e=xo.bind(null,_s,e.queue,!0,!1),Us().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=_s,i=Us();if(si){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===rc)throw Error(o(349));0!==(124&sc)||Qs(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,vo($s.bind(null,r,s,e),[e]),r.flags|=2048,po(9,{destroy:void 0,resource:void 0},Ys.bind(null,r,s,n,t),null),n},useId:function(){var e=Us(),t=rc.identifierPrefix;if(si){var n=Xr;t="\xab"+t+"R"+(n=(Jr&~(1<<32-fe(Jr)-1)).toString(32)+n),0<(n=Es++)&&(t+="H"+n.toString(32)),t+="\xbb"}else t="\xab"+t+"r"+(n=Ns++).toString(32)+"\xbb";return e.memoizedState=t},useHostTransitionStatus:Oo,useFormState:lo,useActionState:lo,useOptimistic:function(e){var t=Us();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=zo.bind(null,_s,!0,n),n.dispatch=t,[e,t]},useMemoCache:qs,useCacheRefresh:function(){return Us().memoizedState=Fo.bind(null,_s)}},Go={readContext:ki,use:zs,useCallback:Eo,useContext:ki,useEffect:_o,useImperativeHandle:Io,useInsertionEffect:wo,useLayoutEffect:bo,useMemo:ko,useReducer:Hs,useRef:go,useState:function(){return Hs(Bs)},useDebugValue:So,useDeferredValue:function(e,t){return No(js(),ws.memoizedState,e,t)},useTransition:function(){var e=Hs(Bs)[0],t=js().memoizedState;return["boolean"===typeof e?e:Vs(e),t]},useSyncExternalStore:Gs,useId:Lo,useHostTransitionStatus:Oo,useFormState:co,useActionState:co,useOptimistic:function(e,t){return eo(js(),0,e,t)},useMemoCache:qs,useCacheRefresh:Mo},Qo={readContext:ki,use:zs,useCallback:Eo,useContext:ki,useEffect:_o,useImperativeHandle:Io,useInsertionEffect:wo,useLayoutEffect:bo,useMemo:ko,useReducer:Ks,useRef:go,useState:function(){return Ks(Bs)},useDebugValue:So,useDeferredValue:function(e,t){var n=js();return null===ws?Co(n,e,t):No(n,ws.memoizedState,e,t)},useTransition:function(){var e=Ks(Bs)[0],t=js().memoizedState;return["boolean"===typeof e?e:Vs(e),t]},useSyncExternalStore:Gs,useId:Lo,useHostTransitionStatus:Oo,useFormState:fo,useActionState:fo,useOptimistic:function(e,t){var n=js();return null!==ws?eo(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:qs,useCacheRefresh:Mo},Yo=null,$o=0;function Jo(e){var t=$o;return $o+=1,null===Yo&&(Yo=[]),Ji(Yo,e,t)}function Xo(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function Zo(e,t){if(t.$$typeof===f)throw Error(o(525));throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ea(e){return(0,e._init)(e._payload)}function ta(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(e,t){return(e=Ur(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=qr(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===m?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===k&&ea(s)===t.type)?(Xo(t=i(t,n.props),n),t.return=e,t):(Xo(t=Vr(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Br(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=zr(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=qr(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case p:return Xo(n=Vr(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case g:return(t=Br(t,e.mode,n)).return=e,t;case k:return d(e,t=(0,t._init)(t._payload),n)}if(D(t)||A(t))return(t=zr(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return d(e,Jo(t),n);if(t.$$typeof===b)return d(e,Ci(e,t),n);Zo(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case p:return n.key===i?c(e,t,n,r):null;case g:return n.key===i?u(e,t,n,r):null;case k:return f(e,t,n=(i=n._init)(n._payload),r)}if(D(n)||A(n))return null!==i?null:h(e,t,n,r,null);if("function"===typeof n.then)return f(e,t,Jo(n),r);if(n.$$typeof===b)return f(e,t,Ci(e,n),r);Zo(e,n)}return null}function y(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case p:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case g:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case k:return y(e,t,n,r=(0,r._init)(r._payload),i)}if(D(r)||A(r))return h(t,e=e.get(n)||null,r,i,null);if("function"===typeof r.then)return y(e,t,n,Jo(r),i);if(r.$$typeof===b)return y(e,t,n,Ci(t,r),i);Zo(t,r)}return null}function v(l,c,u,h){if("object"===typeof u&&null!==u&&u.type===m&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case p:e:{for(var _=u.key;null!==c;){if(c.key===_){if((_=u.type)===m){if(7===c.tag){n(l,c.sibling),(h=i(c,u.props.children)).return=l,l=h;break e}}else if(c.elementType===_||"object"===typeof _&&null!==_&&_.$$typeof===k&&ea(_)===c.type){n(l,c.sibling),Xo(h=i(c,u.props),u),h.return=l,l=h;break e}n(l,c);break}t(l,c),c=c.sibling}u.type===m?((h=zr(u.props.children,l.mode,h,u.key)).return=l,l=h):(Xo(h=Vr(u.type,u.key,u.props,null,l.mode,h),u),h.return=l,l=h)}return a(l);case g:e:{for(_=u.key;null!==c;){if(c.key===_){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(h=i(c,u.children||[])).return=l,l=h;break e}n(l,c);break}t(l,c),c=c.sibling}(h=Br(u,l.mode,h)).return=l,l=h}return a(l);case k:return v(l,c,u=(_=u._init)(u._payload),h)}if(D(u))return function(i,o,a,l){for(var c=null,u=null,h=o,p=o=0,g=null;null!==h&&p<a.length;p++){h.index>p?(g=h,h=null):g=h.sibling;var m=f(i,h,a[p],l);if(null===m){null===h&&(h=g);break}e&&h&&null===m.alternate&&t(i,h),o=s(m,o,p),null===u?c=m:u.sibling=m,u=m,h=g}if(p===a.length)return n(i,h),si&&Zr(i,p),c;if(null===h){for(;p<a.length;p++)null!==(h=d(i,a[p],l))&&(o=s(h,o,p),null===u?c=h:u.sibling=h,u=h);return si&&Zr(i,p),c}for(h=r(h);p<a.length;p++)null!==(g=y(h,i,p,a[p],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?p:g.key),o=s(g,o,p),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach((function(e){return t(i,e)})),si&&Zr(i,p),c}(l,c,u,h);if(A(u)){if("function"!==typeof(_=A(u)))throw Error(o(150));return function(i,a,l,c){if(null==l)throw Error(o(151));for(var u=null,h=null,p=a,g=a=0,m=null,v=l.next();null!==p&&!v.done;g++,v=l.next()){p.index>g?(m=p,p=null):m=p.sibling;var _=f(i,p,v.value,c);if(null===_){null===p&&(p=m);break}e&&p&&null===_.alternate&&t(i,p),a=s(_,a,g),null===h?u=_:h.sibling=_,h=_,p=m}if(v.done)return n(i,p),si&&Zr(i,g),u;if(null===p){for(;!v.done;g++,v=l.next())null!==(v=d(i,v.value,c))&&(a=s(v,a,g),null===h?u=v:h.sibling=v,h=v);return si&&Zr(i,g),u}for(p=r(p);!v.done;g++,v=l.next())null!==(v=y(p,i,g,v.value,c))&&(e&&null!==v.alternate&&p.delete(null===v.key?g:v.key),a=s(v,a,g),null===h?u=v:h.sibling=v,h=v);return e&&p.forEach((function(e){return t(i,e)})),si&&Zr(i,g),u}(l,c,u=_.call(u),h)}if("function"===typeof u.then)return v(l,c,Jo(u),h);if(u.$$typeof===b)return v(l,c,Ci(l,u),h);Zo(l,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(h=i(c,u)).return=l,l=h):(n(l,c),(h=qr(u,l.mode,h)).return=l,l=h),a(l)):n(l,c)}return function(e,t,n,r){try{$o=0;var i=v(e,t,n,r);return Yo=null,i}catch(Ic){if(Ic===Wi||Ic===Gi)throw Ic;var s=Mr(29,Ic,null,e.mode);return s.lanes=r,s.return=e,s}}}var na=ta(!0),ra=ta(!1),ia=j(null),sa=null;function oa(e){var t=e.alternate;z(ua,1&ua.current),z(ia,e),null===sa&&(null===t||null!==fs.current||null!==t.memoizedState)&&(sa=e)}function aa(e){if(22===e.tag){if(z(ua,ua.current),z(ia,e),null===sa){var t=e.alternate;null!==t&&null!==t.memoizedState&&(sa=e)}}else la()}function la(){z(ua,ua.current),z(ia,ia.current)}function ca(e){V(ia),sa===e&&(sa=null),V(ua)}var ua=j(0);function ha(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||yh(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function da(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:d({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var fa={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Lc(),i=is(r);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=ss(e,i,r))&&(Fc(t,e,r),os(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Lc(),i=is(r);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=ss(e,i,r))&&(Fc(t,e,r),os(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Lc(),r=is(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=ss(e,r,n))&&(Fc(t,e,n),os(t,e,n))}};function pa(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!$n(n,r)||!$n(i,s))}function ga(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&fa.enqueueReplaceState(t,t.state,null)}function ma(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=d({},n)),e)void 0===n[i]&&(n[i]=e[i]);return n}var ya="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function va(e){ya(e)}function _a(e){console.error(e)}function wa(e){ya(e)}function ba(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout((function(){throw n}))}}function Ta(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout((function(){throw r}))}}function Ia(e,t,n){return(n=is(n)).tag=3,n.payload={element:null},n.callback=function(){ba(e,t)},n}function Sa(e){return(e=is(e)).tag=3,e}function Ea(e,t,n,r){var i=n.type.getDerivedStateFromError;if("function"===typeof i){var s=r.value;e.payload=function(){return i(s)},e.callback=function(){Ta(t,n,r)}}var o=n.stateNode;null!==o&&"function"===typeof o.componentDidCatch&&(e.callback=function(){Ta(t,n,r),"function"!==typeof i&&(null===Ec?Ec=new Set([this]):Ec.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var ka=Error(o(461)),Ca=!1;function Na(e,t,n,r){t.child=null===e?ra(t,null,n,r):na(t,e.child,n,r)}function xa(e,t,n,r,i){n=n.render;var s=t.ref;if("ref"in r){var o={};for(var a in r)"ref"!==a&&(o[a]=r[a])}else o=r;return Ei(t),r=Ps(e,t,n,o,s,i),a=Ls(),null===e||Ca?(si&&a&&ti(t),t.flags|=1,Na(e,t,r,i),t.child):(Ms(e,t,i),Ya(e,t,i))}function Aa(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Fr(s)||void 0!==s.defaultProps||null!==n.compare?((e=Vr(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Pa(e,t,s,r,i))}if(s=e.child,!$a(e,i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:$n)(o,r)&&e.ref===t.ref)return Ya(e,t,i)}return t.flags|=1,(e=Ur(s,r)).ref=t.ref,e.return=t,t.child=e}function Pa(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if($n(s,r)&&e.ref===t.ref){if(Ca=!1,t.pendingProps=r=s,!$a(e,i))return t.lanes=e.lanes,Ya(e,t,i);0!==(131072&e.flags)&&(Ca=!0)}}return La(e,t,n,r,i)}function Ra(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode){if(0!==(128&t.flags)){if(r=null!==s?s.baseLanes|n:n,null!==e){for(i=t.child=e.child,s=0;null!==i;)s=s|i.lanes|i.childLanes,i=i.sibling;t.childLanes=s&~r}else t.childLanes=0,t.child=null;return Da(e,t,r,n)}if(0===(536870912&n))return t.lanes=t.childLanes=536870912,Da(e,t,null!==s?s.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Bi(0,null!==s?s.cachePool:null),null!==s?gs(t,s):ms(),aa(t)}else null!==s?(Bi(0,s.cachePool),gs(t,s),la(),t.memoizedState=null):(null!==e&&Bi(0,null),ms(),la());return Na(e,t,i,n),t.child}function Da(e,t,n,r){var i=qi();return i=null===i?null:{parent:Ri._currentValue,pool:i},t.memoizedState={baseLanes:n,cachePool:i},null!==e&&Bi(0,null),ms(),aa(t),null!==e&&Ii(e,t,r,!0),null}function Oa(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(o(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function La(e,t,n,r,i){return Ei(t),n=Ps(e,t,n,r,void 0,i),r=Ls(),null===e||Ca?(si&&r&&ti(t),t.flags|=1,Na(e,t,n,i),t.child):(Ms(e,t,i),Ya(e,t,i))}function Ma(e,t,n,r,i,s){return Ei(t),t.updateQueue=null,n=Ds(t,r,n,i),Rs(e),r=Ls(),null===e||Ca?(si&&r&&ti(t),t.flags|=1,Na(e,t,n,s),t.child):(Ms(e,t,s),Ya(e,t,s))}function Fa(e,t,n,r,i){if(Ei(t),null===t.stateNode){var s=Or,o=n.contextType;"object"===typeof o&&null!==o&&(s=ki(o)),s=new n(r,s),t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,s.updater=fa,t.stateNode=s,s._reactInternals=t,(s=t.stateNode).props=r,s.state=t.memoizedState,s.refs={},ns(t),o=n.contextType,s.context="object"===typeof o&&null!==o?ki(o):Or,s.state=t.memoizedState,"function"===typeof(o=n.getDerivedStateFromProps)&&(da(t,n,o,r),s.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(o=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),o!==s.state&&fa.enqueueReplaceState(s,s.state,null),us(t,r,s,i),cs(),s.state=t.memoizedState),"function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){s=t.stateNode;var a=t.memoizedProps,l=ma(n,a);s.props=l;var c=s.context,u=n.contextType;o=Or,"object"===typeof u&&null!==u&&(o=ki(u));var h=n.getDerivedStateFromProps;u="function"===typeof h||"function"===typeof s.getSnapshotBeforeUpdate,a=t.pendingProps!==a,u||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a||c!==o)&&ga(t,s,r,o),ts=!1;var d=t.memoizedState;s.state=d,us(t,r,s,i),cs(),c=t.memoizedState,a||d!==c||ts?("function"===typeof h&&(da(t,n,h,r),c=t.memoizedState),(l=ts||pa(t,n,l,r,d,c,o))?(u||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),s.props=r,s.state=c,s.context=o,r=l):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,rs(e,t),u=ma(n,o=t.memoizedProps),s.props=u,h=t.pendingProps,d=s.context,c=n.contextType,l=Or,"object"===typeof c&&null!==c&&(l=ki(c)),(c="function"===typeof(a=n.getDerivedStateFromProps)||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==h||d!==l)&&ga(t,s,r,l),ts=!1,d=t.memoizedState,s.state=d,us(t,r,s,i),cs();var f=t.memoizedState;o!==h||d!==f||ts||null!==e&&null!==e.dependencies&&Si(e.dependencies)?("function"===typeof a&&(da(t,n,a,r),f=t.memoizedState),(u=ts||pa(t,n,u,r,d,f,l)||null!==e&&null!==e.dependencies&&Si(e.dependencies))?(c||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,f,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),s.props=r,s.state=f,s.context=l,r=u):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return s=r,Oa(e,t),r=0!==(128&t.flags),s||r?(s=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:s.render(),t.flags|=1,null!==e&&r?(t.child=na(t,e.child,null,i),t.child=na(t,null,n,i)):Na(e,t,n,i),t.memoizedState=s.state,e=t.child):e=Ya(e,t,i),e}function Ua(e,t,n,r){return fi(),t.flags|=256,Na(e,t,n,r),t.child}var ja={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Va(e){return{baseLanes:e,cachePool:Hi()}}function za(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=mc),e}function qa(e,t,n){var r,i=t.pendingProps,s=!1,a=0!==(128&t.flags);if((r=a)||(r=(null===e||null!==e.memoizedState)&&0!==(2&ua.current)),r&&(s=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(si){if(s?oa(t):la(),si){var l,c=ii;if(l=c){e:{for(l=c,c=ai;8!==l.nodeType;){if(!c){c=null;break e}if(null===(l=vh(l.nextSibling))){c=null;break e}}c=l}null!==c?(t.memoizedState={dehydrated:c,treeContext:null!==$r?{id:Jr,overflow:Xr}:null,retryLane:536870912,hydrationErrors:null},(l=Mr(18,null,null,0)).stateNode=c,l.return=t,t.child=l,ri=t,ii=null,l=!0):l=!1}l||ci(t)}if(null!==(c=t.memoizedState)&&null!==(c=c.dehydrated))return yh(c)?t.lanes=32:t.lanes=536870912,null;ca(t)}return c=i.children,i=i.fallback,s?(la(),c=Ha({mode:"hidden",children:c},s=t.mode),i=zr(i,s,n,null),c.return=t,i.return=t,c.sibling=i,t.child=c,(s=t.child).memoizedState=Va(n),s.childLanes=za(e,r,n),t.memoizedState=ja,i):(oa(t),Ba(t,c))}if(null!==(l=e.memoizedState)&&null!==(c=l.dehydrated)){if(a)256&t.flags?(oa(t),t.flags&=-257,t=Wa(e,t,n)):null!==t.memoizedState?(la(),t.child=e.child,t.flags|=128,t=null):(la(),s=i.fallback,c=t.mode,i=Ha({mode:"visible",children:i.children},c),(s=zr(s,c,n,null)).flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,na(t,e.child,null,n),(i=t.child).memoizedState=Va(n),i.childLanes=za(e,r,n),t.memoizedState=ja,t=s);else if(oa(t),yh(c)){if(r=c.nextSibling&&c.nextSibling.dataset)var u=r.dgst;r=u,(i=Error(o(419))).stack="",i.digest=r,gi({value:i,source:null,stack:null}),t=Wa(e,t,n)}else if(Ca||Ii(e,t,n,!1),r=0!==(n&e.childLanes),Ca||r){if(null!==(r=rc)&&(0!==(i=0!==((i=0!==(42&(i=n&-n))?1:Ne(i))&(r.suspendedLanes|n))?0:i)&&i!==l.retryLane))throw l.retryLane=i,Pr(e,i),Fc(r,e,i),ka;"$?"===c.data||Qc(),t=Wa(e,t,n)}else"$?"===c.data?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,ii=vh(c.nextSibling),ri=t,si=!0,oi=null,ai=!1,null!==e&&(Qr[Yr++]=Jr,Qr[Yr++]=Xr,Qr[Yr++]=$r,Jr=e.id,Xr=e.overflow,$r=t),(t=Ba(t,i.children)).flags|=4096);return t}return s?(la(),s=i.fallback,c=t.mode,u=(l=e.child).sibling,(i=Ur(l,{mode:"hidden",children:i.children})).subtreeFlags=65011712&l.subtreeFlags,null!==u?s=Ur(u,s):(s=zr(s,c,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,null===(c=e.child.memoizedState)?c=Va(n):(null!==(l=c.cachePool)?(u=Ri._currentValue,l=l.parent!==u?{parent:u,pool:u}:l):l=Hi(),c={baseLanes:c.baseLanes|n,cachePool:l}),s.memoizedState=c,s.childLanes=za(e,r,n),t.memoizedState=ja,i):(oa(t),e=(n=e.child).sibling,(n=Ur(n,{mode:"visible",children:i.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function Ba(e,t){return(t=Ha({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Ha(e,t){return(e=Mr(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Wa(e,t,n){return na(t,e.child,null,n),(e=Ba(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ka(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),bi(e.return,t,n)}function Ga(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Qa(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Na(e,t,r.children,n),0!==(2&(r=ua.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ka(e,n,t);else if(19===e.tag)Ka(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(z(ua,r),i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ha(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ga(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ha(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ga(t,!0,n,null,s);break;case"together":Ga(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ya(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),fc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Ii(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Ur(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ur(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function $a(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Si(e))}function Ja(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Ca=!0;else{if(!$a(e,n)&&0===(128&t.flags))return Ca=!1,function(e,t,n){switch(t.tag){case 3:K(t,t.stateNode.containerInfo),_i(0,Ri,e.memoizedState.cache),fi();break;case 27:case 5:Q(t);break;case 4:K(t,t.stateNode.containerInfo);break;case 10:_i(0,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(oa(t),t.flags|=128,null):0!==(n&t.child.childLanes)?qa(e,t,n):(oa(t),null!==(e=Ya(e,t,n))?e.sibling:null);oa(t);break;case 19:var i=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(Ii(e,t,n,!1),r=0!==(n&t.childLanes)),i){if(r)return Qa(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),z(ua,ua.current),r)break;return null;case 22:case 23:return t.lanes=0,Ra(e,t,n);case 24:_i(0,Ri,e.memoizedState.cache)}return Ya(e,t,n)}(e,t,n);Ca=0!==(131072&e.flags)}else Ca=!1,si&&0!==(1048576&t.flags)&&ei(t,Gr,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,i=r._init;if(r=i(r._payload),t.type=r,"function"!==typeof r){if(void 0!==r&&null!==r){if((i=r.$$typeof)===T){t.tag=11,t=xa(null,t,r,e,n);break e}if(i===E){t.tag=14,t=Aa(null,t,r,e,n);break e}}throw t=R(r)||r,Error(o(306,t,""))}Fr(r)?(e=ma(r,e),t.tag=1,t=Fa(null,t,r,e,n)):(t.tag=0,t=La(null,t,r,e,n))}return t;case 0:return La(e,t,t.type,t.pendingProps,n);case 1:return Fa(e,t,r=t.type,i=ma(r,t.pendingProps),n);case 3:e:{if(K(t,t.stateNode.containerInfo),null===e)throw Error(o(387));r=t.pendingProps;var s=t.memoizedState;i=s.element,rs(e,t),us(t,r,null,n);var a=t.memoizedState;if(r=a.cache,_i(0,Ri,r),r!==s.cache&&Ti(t,[Ri],n,!0),cs(),r=a.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:a.cache},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Ua(e,t,r,n);break e}if(r!==i){gi(i=Sr(Error(o(424)),t)),t=Ua(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(ii=vh(e.firstChild),ri=t,si=!0,oi=null,ai=!0,n=ra(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fi(),r===i){t=Ya(e,t,n);break e}Na(e,t,r,n)}t=t.child}return t;case 26:return Oa(e,t),null===e?(n=xh(t.type,null,t.pendingProps,null))?t.memoizedState=n:si||(n=t.type,e=t.pendingProps,(r=ih(H.current).createElement(n))[Re]=t,r[De]=e,th(r,n,e),We(r),t.stateNode=r):t.memoizedState=xh(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Q(t),null===e&&si&&(r=t.stateNode=bh(t.type,t.pendingProps,H.current),ri=t,ai=!0,i=ii,ph(t.type)?(_h=i,ii=vh(r.firstChild)):ii=i),Na(e,t,t.pendingProps.children,n),Oa(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&si&&((i=r=ii)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[je])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(s=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(s!==i.rel||e.getAttribute("href")!==(null==i.href||""===i.href?null:i.href)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin)||e.getAttribute("title")!==(null==i.title?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((s=e.getAttribute("src"))!==(null==i.src?null:i.src)||e.getAttribute("type")!==(null==i.type?null:i.type)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var s=null==i.name?null:""+i.name;if("hidden"===i.type&&e.getAttribute("name")===s)return e}if(null===(e=vh(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,ai))?(t.stateNode=r,ri=t,ii=vh(r.firstChild),ai=!1,i=!0):i=!1),i||ci(t)),Q(t),i=t.type,s=t.pendingProps,a=null!==e?e.memoizedProps:null,r=s.children,ah(i,s)?r=null:null!==a&&ah(i,a)&&(t.flags|=32),null!==t.memoizedState&&(i=Ps(e,t,Os,null,null,n),Yh._currentValue=i),Oa(e,t),Na(e,t,r,n),t.child;case 6:return null===e&&si&&((e=n=ii)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=vh(e.nextSibling)))return null}return e}(n,t.pendingProps,ai))?(t.stateNode=n,ri=t,ii=null,e=!0):e=!1),e||ci(t)),null;case 13:return qa(e,t,n);case 4:return K(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=na(t,null,r,n):Na(e,t,r,n),t.child;case 11:return xa(e,t,t.type,t.pendingProps,n);case 7:return Na(e,t,t.pendingProps,n),t.child;case 8:case 12:return Na(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,_i(0,t.type,r.value),Na(e,t,r.children,n),t.child;case 9:return i=t.type._context,r=t.pendingProps.children,Ei(t),r=r(i=ki(i)),t.flags|=1,Na(e,t,r,n),t.child;case 14:return Aa(e,t,t.type,t.pendingProps,n);case 15:return Pa(e,t,t.type,t.pendingProps,n);case 19:return Qa(e,t,n);case 31:return r=t.pendingProps,n=t.mode,r={mode:r.mode,children:r.children},null===e?((n=Ha(r,n)).ref=t.ref,t.child=n,n.return=t,t=n):((n=Ur(e.child,r)).ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return Ra(e,t,n);case 24:return Ei(t),r=ki(Ri),null===e?(null===(i=qi())&&(i=rc,s=Di(),i.pooledCache=s,s.refCount++,null!==s&&(i.pooledCacheLanes|=n),i=s),t.memoizedState={parent:r,cache:i},ns(t),_i(0,Ri,i)):(0!==(e.lanes&n)&&(rs(e,t),us(t,null,null,n),cs()),i=e.memoizedState,s=t.memoizedState,i.parent!==r?(i={parent:r,cache:r},t.memoizedState=i,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=i),_i(0,Ri,r)):(r=s.cache,_i(0,Ri,r),r!==i.cache&&Ti(t,[Ri],n,!0))),Na(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function Xa(e){e.flags|=4}function Za(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!qh(t)){if(null!==(t=ia.current)&&((4194048&sc)===sc?null!==sa:(62914560&sc)!==sc&&0===(536870912&sc)||t!==sa))throw Xi=Qi,Ki;e.flags|=8192}}function el(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Ie():536870912,e.lanes|=t,yc|=t)}function tl(e,t){if(!si)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function nl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=65011712&i.subtreeFlags,r|=65011712&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function rl(e,t,n){var r=t.pendingProps;switch(ni(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return nl(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),wi(Ri),G(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(di(t)?Xa(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,pi())),nl(t),null;case 26:return n=t.memoizedState,null===e?(Xa(t),null!==n?(nl(t),Za(t,n)):(nl(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Xa(t),nl(t),Za(t,n)):(nl(t),t.flags&=-16777217):(e.memoizedProps!==r&&Xa(t),nl(t),t.flags&=-16777217),null;case 27:Y(t),n=H.current;var i=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Xa(t);else{if(!r){if(null===t.stateNode)throw Error(o(166));return nl(t),null}e=q.current,di(t)?ui(t):(e=bh(i,r,n),t.stateNode=e,Xa(t))}return nl(t),null;case 5:if(Y(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Xa(t);else{if(!r){if(null===t.stateNode)throw Error(o(166));return nl(t),null}if(e=q.current,di(t))ui(t);else{switch(i=ih(H.current),e){case 1:e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=i.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof r.is?i.createElement("select",{is:r.is}):i.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e="string"===typeof r.is?i.createElement(n,{is:r.is}):i.createElement(n)}}e[Re]=t,e[De]=r;e:for(i=t.child;null!==i;){if(5===i.tag||6===i.tag)e.appendChild(i.stateNode);else if(4!==i.tag&&27!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;null===i.sibling;){if(null===i.return||i.return===t)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}t.stateNode=e;e:switch(th(e,n,r),n){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Xa(t)}}return nl(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&Xa(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(e=H.current,di(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(i=ri))switch(i.tag){case 27:case 5:r=i.memoizedProps}e[Re]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||Ju(e.nodeValue,n)))||ci(t)}else(e=ih(e).createTextNode(r))[Re]=t,t.stateNode=e}return nl(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(i=di(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(o(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(o(317));i[Re]=t}else fi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;nl(t),i=!1}else i=pi(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return 256&t.flags?(ca(t),t):(ca(t),null)}if(ca(t),0!==(128&t.flags))return t.lanes=n,t;if(n=null!==r,e=null!==e&&null!==e.memoizedState,n){i=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(i=r.alternate.memoizedState.cachePool.pool);var s=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(s=r.memoizedState.cachePool.pool),s!==i&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),el(t,t.updateQueue),nl(t),null;case 4:return G(),null===e&&zu(t.stateNode.containerInfo),nl(t),null;case 10:return wi(t.type),nl(t),null;case 19:if(V(ua),null===(i=t.memoizedState))return nl(t),null;if(r=0!==(128&t.flags),null===(s=i.rendering))if(r)tl(i,!1);else{if(0!==dc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=ha(e))){for(t.flags|=128,tl(i,!1),e=s.updateQueue,t.updateQueue=e,el(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)jr(n,e),n=n.sibling;return z(ua,1&ua.current|2),t.child}e=e.sibling}null!==i.tail&&te()>Tc&&(t.flags|=128,r=!0,tl(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ha(s))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,el(t,e),tl(i,!0),null===i.tail&&"hidden"===i.tailMode&&!s.alternate&&!si)return nl(t),null}else 2*te()-i.renderingStartTime>Tc&&536870912!==n&&(t.flags|=128,r=!0,tl(i,!1),t.lanes=4194304);i.isBackwards?(s.sibling=t.child,t.child=s):(null!==(e=i.last)?e.sibling=s:t.child=s,i.last=s)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=te(),t.sibling=null,e=ua.current,z(ua,r?1&e|2:1&e),t):(nl(t),null);case 22:case 23:return ca(t),ys(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(nl(t),6&t.subtreeFlags&&(t.flags|=8192)):nl(t),null!==(n=t.updateQueue)&&el(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&V(zi),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),wi(Ri),nl(t),null;case 25:case 30:return null}throw Error(o(156,t.tag))}function il(e,t){switch(ni(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return wi(Ri),G(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return Y(t),null;case 13:if(ca(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));fi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return V(ua),null;case 4:return G(),null;case 10:return wi(t.type),null;case 22:case 23:return ca(t),ys(),null!==e&&V(zi),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return wi(Ri),null;default:return null}}function sl(e,t){switch(ni(t),t.tag){case 3:wi(Ri),G();break;case 26:case 27:case 5:Y(t);break;case 4:G();break;case 13:ca(t);break;case 19:V(ua);break;case 10:wi(t.type);break;case 22:case 23:ca(t),ys(),null!==e&&V(zi);break;case 24:wi(Ri)}}function ol(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var s=n.create,o=n.inst;r=s(),o.destroy=r}n=n.next}while(n!==i)}}catch(MS){hu(t,t.return,MS)}}function al(e,t,n){try{var r=t.updateQueue,i=null!==r?r.lastEffect:null;if(null!==i){var s=i.next;r=s;do{if((r.tag&e)===e){var o=r.inst,a=o.destroy;if(void 0!==a){o.destroy=void 0,i=t;var l=n,c=a;try{c()}catch(MS){hu(i,l,MS)}}}r=r.next}while(r!==s)}}catch(MS){hu(t,t.return,MS)}}function ll(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{ds(t,n)}catch(MS){hu(e,e.return,MS)}}}function cl(e,t,n){n.props=ma(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(MS){hu(e,t,MS)}}function ul(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"===typeof n?e.refCleanup=n(r):n.current=r}}catch(MS){hu(e,t,MS)}}function hl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(MS){hu(e,t,MS)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(i){hu(e,t,i)}else n.current=null}function dl(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(MS){hu(e,e.return,MS)}}function fl(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,s=null,a=null,l=null,c=null,u=null,h=null;for(p in n){var d=n[p];if(n.hasOwnProperty(p)&&null!=d)switch(p){case"checked":case"value":break;case"defaultValue":c=d;default:r.hasOwnProperty(p)||Zu(e,t,p,null,r,d)}}for(var f in r){var p=r[f];if(d=n[f],r.hasOwnProperty(f)&&(null!=p||null!=d))switch(f){case"type":s=p;break;case"name":i=p;break;case"checked":u=p;break;case"defaultChecked":h=p;break;case"value":a=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(o(137,t));break;default:p!==d&&Zu(e,t,f,p,r,d)}}return void mt(e,a,l,c,u,h,s,i);case"select":for(s in p=a=l=f=null,n)if(c=n[s],n.hasOwnProperty(s)&&null!=c)switch(s){case"value":break;case"multiple":p=c;default:r.hasOwnProperty(s)||Zu(e,t,s,null,r,c)}for(i in r)if(s=r[i],c=n[i],r.hasOwnProperty(i)&&(null!=s||null!=c))switch(i){case"value":f=s;break;case"defaultValue":l=s;break;case"multiple":a=s;default:s!==c&&Zu(e,t,i,s,r,c)}return t=l,n=a,r=p,void(null!=f?_t(e,!!n,f,!1):!!r!==!!n&&(null!=t?_t(e,!!n,t,!0):_t(e,!!n,n?[]:"",!1)));case"textarea":for(l in p=f=null,n)if(i=n[l],n.hasOwnProperty(l)&&null!=i&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:Zu(e,t,l,null,r,i)}for(a in r)if(i=r[a],s=n[a],r.hasOwnProperty(a)&&(null!=i||null!=s))switch(a){case"value":f=i;break;case"defaultValue":p=i;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=i)throw Error(o(91));break;default:i!==s&&Zu(e,t,a,i,r,s)}return void wt(e,f,p);case"option":for(var g in n)if(f=n[g],n.hasOwnProperty(g)&&null!=f&&!r.hasOwnProperty(g))if("selected"===g)e.selected=!1;else Zu(e,t,g,null,r,f);for(c in r)if(f=r[c],p=n[c],r.hasOwnProperty(c)&&f!==p&&(null!=f||null!=p))if("selected"===c)e.selected=f&&"function"!==typeof f&&"symbol"!==typeof f;else Zu(e,t,c,f,r,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var m in n)f=n[m],n.hasOwnProperty(m)&&null!=f&&!r.hasOwnProperty(m)&&Zu(e,t,m,null,r,f);for(u in r)if(f=r[u],p=n[u],r.hasOwnProperty(u)&&f!==p&&(null!=f||null!=p))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(o(137,t));break;default:Zu(e,t,u,f,r,p)}return;default:if(kt(t)){for(var y in n)f=n[y],n.hasOwnProperty(y)&&void 0!==f&&!r.hasOwnProperty(y)&&eh(e,t,y,void 0,r,f);for(h in r)f=r[h],p=n[h],!r.hasOwnProperty(h)||f===p||void 0===f&&void 0===p||eh(e,t,h,f,r,p);return}}for(var v in n)f=n[v],n.hasOwnProperty(v)&&null!=f&&!r.hasOwnProperty(v)&&Zu(e,t,v,null,r,f);for(d in r)f=r[d],p=n[d],!r.hasOwnProperty(d)||f===p||null==f&&null==p||Zu(e,t,d,f,r,p)}(r,e.type,n,t),r[De]=t}catch(MS){hu(e,e.return,MS)}}function pl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&ph(e.type)||4===e.tag}function gl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||pl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&ph(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ml(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Xu));else if(4!==r&&(27===r&&ph(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(ml(e,t,n),e=e.sibling;null!==e;)ml(e,t,n),e=e.sibling}function yl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&ph(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(yl(e,t,n),e=e.sibling;null!==e;)yl(e,t,n),e=e.sibling}function vl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);th(t,r,n),t[Re]=e,t[De]=n}catch(MS){hu(e,e.return,MS)}}var _l=!1,wl=!1,bl=!1,Tl="function"===typeof WeakSet?WeakSet:Set,Il=null;function Sl(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Fl(e,n),4&r&&ol(5,n);break;case 1:if(Fl(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(MS){hu(n,n.return,MS)}else{var i=ma(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){hu(n,n.return,o)}}64&r&&ll(n),512&r&&ul(n,n.return);break;case 3:if(Fl(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{ds(e,t)}catch(MS){hu(n,n.return,MS)}}break;case 27:null===t&&4&r&&vl(n);case 26:case 5:Fl(e,n),null===t&&4&r&&dl(n),512&r&&ul(n,n.return);break;case 12:Fl(e,n);break;case 13:Fl(e,n),4&r&&Al(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$?"!==e.data||"complete"===n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=gu.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||_l)){t=null!==t&&null!==t.memoizedState||wl,i=_l;var s=wl;_l=r,(wl=t)&&!s?jl(e,n,0!==(8772&n.subtreeFlags)):Fl(e,n),_l=i,wl=s}break;case 30:break;default:Fl(e,n)}}function El(e){var t=e.alternate;null!==t&&(e.alternate=null,El(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Ve(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var kl=null,Cl=!1;function Nl(e,t,n){for(n=n.child;null!==n;)xl(e,t,n),n=n.sibling}function xl(e,t,n){if(he&&"function"===typeof he.onCommitFiberUnmount)try{he.onCommitFiberUnmount(ue,n)}catch(s){}switch(n.tag){case 26:wl||hl(n,t),Nl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:wl||hl(n,t);var r=kl,i=Cl;ph(n.type)&&(kl=n.stateNode,Cl=!1),Nl(e,t,n),Th(n.stateNode),kl=r,Cl=i;break;case 5:wl||hl(n,t);case 6:if(r=kl,i=Cl,kl=null,Nl(e,t,n),Cl=i,null!==(kl=r))if(Cl)try{(9===kl.nodeType?kl.body:"HTML"===kl.nodeName?kl.ownerDocument.body:kl).removeChild(n.stateNode)}catch(MS){hu(n,t,MS)}else try{kl.removeChild(n.stateNode)}catch(MS){hu(n,t,MS)}break;case 18:null!==kl&&(Cl?(gh(9===(e=kl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Nd(e)):gh(kl,n.stateNode));break;case 4:r=kl,i=Cl,kl=n.stateNode.containerInfo,Cl=!0,Nl(e,t,n),kl=r,Cl=i;break;case 0:case 11:case 14:case 15:wl||al(2,n,t),wl||al(4,n,t),Nl(e,t,n);break;case 1:wl||(hl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&cl(n,t,r)),Nl(e,t,n);break;case 21:Nl(e,t,n);break;case 22:wl=(r=wl)||null!==n.memoizedState,Nl(e,t,n),wl=r;break;default:Nl(e,t,n)}}function Al(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Nd(e)}catch(MS){hu(t,t.return,MS)}}function Pl(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Tl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Tl),t;default:throw Error(o(435,e.tag))}}(e);t.forEach((function(t){var r=mu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}function Rl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r],s=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 27:if(ph(l.type)){kl=l.stateNode,Cl=!1;break e}break;case 5:kl=l.stateNode,Cl=!1;break e;case 3:case 4:kl=l.stateNode.containerInfo,Cl=!0;break e}l=l.return}if(null===kl)throw Error(o(160));xl(s,a,i),kl=null,Cl=!1,null!==(s=i.alternate)&&(s.return=null),i.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Ol(t,e),t=t.sibling}var Dl=null;function Ol(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Rl(t,e),Ll(e),4&r&&(al(3,e,e.return),ol(3,e),al(5,e,e.return));break;case 1:Rl(t,e),Ll(e),512&r&&(wl||null===n||hl(n,n.return)),64&r&&_l&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var i=Dl;if(Rl(t,e),Ll(e),512&r&&(wl||null===n||hl(n,n.return)),4&r){var s=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,i=i.ownerDocument||i;t:switch(r){case"title":(!(s=i.getElementsByTagName("title")[0])||s[je]||s[Re]||"http://www.w3.org/2000/svg"===s.namespaceURI||s.hasAttribute("itemprop"))&&(s=i.createElement(r),i.head.insertBefore(s,i.querySelector("head > title"))),th(s,r,n),s[Re]=e,We(s),r=s;break e;case"link":var a=Vh("link","href",i).get(r+(n.href||""));if(a)for(var l=0;l<a.length;l++)if((s=a[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&s.getAttribute("rel")===(null==n.rel?null:n.rel)&&s.getAttribute("title")===(null==n.title?null:n.title)&&s.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){a.splice(l,1);break t}th(s=i.createElement(r),r,n),i.head.appendChild(s);break;case"meta":if(a=Vh("meta","content",i).get(r+(n.content||"")))for(l=0;l<a.length;l++)if((s=a[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&s.getAttribute("name")===(null==n.name?null:n.name)&&s.getAttribute("property")===(null==n.property?null:n.property)&&s.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&s.getAttribute("charset")===(null==n.charSet?null:n.charSet)){a.splice(l,1);break t}th(s=i.createElement(r),r,n),i.head.appendChild(s);break;default:throw Error(o(468,r))}s[Re]=e,We(s),r=s}e.stateNode=r}else zh(i,e.type,e.stateNode);else e.stateNode=Lh(i,r,e.memoizedProps);else s!==r?(null===s?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):s.count--,null===r?zh(i,e.type,e.stateNode):Lh(i,r,e.memoizedProps)):null===r&&null!==e.stateNode&&fl(e,e.memoizedProps,n.memoizedProps)}break;case 27:Rl(t,e),Ll(e),512&r&&(wl||null===n||hl(n,n.return)),null!==n&&4&r&&fl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Rl(t,e),Ll(e),512&r&&(wl||null===n||hl(n,n.return)),32&e.flags){i=e.stateNode;try{Tt(i,"")}catch(MS){hu(e,e.return,MS)}}4&r&&null!=e.stateNode&&fl(e,i=e.memoizedProps,null!==n?n.memoizedProps:i),1024&r&&(bl=!0);break;case 6:if(Rl(t,e),Ll(e),4&r){if(null===e.stateNode)throw Error(o(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(MS){hu(e,e.return,MS)}}break;case 3:if(jh=null,i=Dl,Dl=Eh(t.containerInfo),Rl(t,e),Dl=i,Ll(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Nd(t.containerInfo)}catch(MS){hu(e,e.return,MS)}bl&&(bl=!1,Ml(e));break;case 4:r=Dl,Dl=Eh(e.stateNode.containerInfo),Rl(t,e),Ll(e),Dl=r;break;case 12:default:Rl(t,e),Ll(e);break;case 13:Rl(t,e),Ll(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(bc=te()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Pl(e,r)));break;case 22:i=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=_l,h=wl;if(_l=u||i,wl=h||c,Rl(t,e),wl=h,_l=u,Ll(e),8192&r)e:for(t=e.stateNode,t._visibility=i?-2&t._visibility:1|t._visibility,i&&(null===n||c||_l||wl||Ul(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(s=c.stateNode,i)"function"===typeof(a=s.style).setProperty?a.setProperty("display","none","important"):a.display="none";else{l=c.stateNode;var d=c.memoizedProps.style,f=void 0!==d&&null!==d&&d.hasOwnProperty("display")?d.display:null;l.style.display=null==f||"boolean"===typeof f?"":(""+f).trim()}}catch(MS){hu(c,c.return,MS)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=i?"":c.memoizedProps}catch(MS){hu(c,c.return,MS)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,Pl(e,n))));break;case 19:Rl(t,e),Ll(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Pl(e,r)));case 30:case 21:}}function Ll(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(pl(r)){n=r;break}r=r.return}if(null==n)throw Error(o(160));switch(n.tag){case 27:var i=n.stateNode;yl(e,gl(e),i);break;case 5:var s=n.stateNode;32&n.flags&&(Tt(s,""),n.flags&=-33),yl(e,gl(e),s);break;case 3:case 4:var a=n.stateNode.containerInfo;ml(e,gl(e),a);break;default:throw Error(o(161))}}catch(MS){hu(e,e.return,MS)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Ml(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Ml(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Fl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Sl(e,t.alternate,t),t=t.sibling}function Ul(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:al(4,t,t.return),Ul(t);break;case 1:hl(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&cl(t,t.return,n),Ul(t);break;case 27:Th(t.stateNode);case 26:case 5:hl(t,t.return),Ul(t);break;case 22:null===t.memoizedState&&Ul(t);break;default:Ul(t)}e=e.sibling}}function jl(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,i=e,s=t,o=s.flags;switch(s.tag){case 0:case 11:case 15:jl(i,s,n),ol(4,s);break;case 1:if(jl(i,s,n),"function"===typeof(i=(r=s).stateNode).componentDidMount)try{i.componentDidMount()}catch(MS){hu(r,r.return,MS)}if(null!==(i=(r=s).updateQueue)){var a=r.stateNode;try{var l=i.shared.hiddenCallbacks;if(null!==l)for(i.shared.hiddenCallbacks=null,i=0;i<l.length;i++)hs(l[i],a)}catch(MS){hu(r,r.return,MS)}}n&&64&o&&ll(s),ul(s,s.return);break;case 27:vl(s);case 26:case 5:jl(i,s,n),n&&null===r&&4&o&&dl(s),ul(s,s.return);break;case 12:jl(i,s,n);break;case 13:jl(i,s,n),n&&4&o&&Al(i,s);break;case 22:null===s.memoizedState&&jl(i,s,n),ul(s,s.return);break;case 30:break;default:jl(i,s,n)}t=t.sibling}}function Vl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Oi(n))}function zl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Oi(e))}function ql(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Bl(e,t,n,r),t=t.sibling}function Bl(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:ql(e,t,n,r),2048&i&&ol(9,t);break;case 1:case 13:default:ql(e,t,n,r);break;case 3:ql(e,t,n,r),2048&i&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Oi(e)));break;case 12:if(2048&i){ql(e,t,n,r),e=t.stateNode;try{var s=t.memoizedProps,o=s.id,a=s.onPostCommit;"function"===typeof a&&a(o,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(MS){hu(t,t.return,MS)}}else ql(e,t,n,r);break;case 23:break;case 22:s=t.stateNode,o=t.alternate,null!==t.memoizedState?2&s._visibility?ql(e,t,n,r):Wl(e,t):2&s._visibility?ql(e,t,n,r):(s._visibility|=2,Hl(e,t,n,r,0!==(10256&t.subtreeFlags))),2048&i&&Vl(o,t);break;case 24:ql(e,t,n,r),2048&i&&zl(t.alternate,t)}}function Hl(e,t,n,r,i){for(i=i&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var s=e,o=t,a=n,l=r,c=o.flags;switch(o.tag){case 0:case 11:case 15:Hl(s,o,a,l,i),ol(8,o);break;case 23:break;case 22:var u=o.stateNode;null!==o.memoizedState?2&u._visibility?Hl(s,o,a,l,i):Wl(s,o):(u._visibility|=2,Hl(s,o,a,l,i)),i&&2048&c&&Vl(o.alternate,o);break;case 24:Hl(s,o,a,l,i),i&&2048&c&&zl(o.alternate,o);break;default:Hl(s,o,a,l,i)}t=t.sibling}}function Wl(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:Wl(n,r),2048&i&&Vl(r.alternate,r);break;case 24:Wl(n,r),2048&i&&zl(r.alternate,r);break;default:Wl(n,r)}t=t.sibling}}var Kl=8192;function Gl(e){if(e.subtreeFlags&Kl)for(e=e.child;null!==e;)Ql(e),e=e.sibling}function Ql(e){switch(e.tag){case 26:Gl(e),e.flags&Kl&&null!==e.memoizedState&&function(e,t,n){if(null===Bh)throw Error(o(475));var r=Bh;if("stylesheet"===t.type&&("string"!==typeof n.media||!1!==matchMedia(n.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var i=Ah(n.href),s=e.querySelector(Ph(i));if(s)return null!==(e=s._p)&&"object"===typeof e&&"function"===typeof e.then&&(r.count++,r=Wh.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=s,void We(s);s=e.ownerDocument||e,n=Rh(n),(i=Ih.get(i))&&Fh(n,i),We(s=s.createElement("link"));var a=s;a._p=new Promise((function(e,t){a.onload=e,a.onerror=t})),th(s,"link",n),t.instance=s}null===r.stylesheets&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(r.count++,t=Wh.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}(Dl,e.memoizedState,e.memoizedProps);break;case 5:default:Gl(e);break;case 3:case 4:var t=Dl;Dl=Eh(e.stateNode.containerInfo),Gl(e),Dl=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Kl,Kl=16777216,Gl(e),Kl=t):Gl(e))}}function Yl(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function $l(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Il=r,Zl(r,e)}Yl(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Jl(e),e=e.sibling}function Jl(e){switch(e.tag){case 0:case 11:case 15:$l(e),2048&e.flags&&al(9,e,e.return);break;case 3:case 12:default:$l(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,Xl(e)):$l(e)}}function Xl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Il=r,Zl(r,e)}Yl(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:al(8,t,t.return),Xl(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,Xl(t));break;default:Xl(t)}e=e.sibling}}function Zl(e,t){for(;null!==Il;){var n=Il;switch(n.tag){case 0:case 11:case 15:al(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Oi(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,Il=r;else e:for(n=e;null!==Il;){var i=(r=Il).sibling,s=r.return;if(El(r),r===n){Il=null;break e}if(null!==i){i.return=s,Il=i;break e}Il=s}}}var ec={getCacheForType:function(e){var t=ki(Ri),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},tc="function"===typeof WeakMap?WeakMap:Map,nc=0,rc=null,ic=null,sc=0,oc=0,ac=null,lc=!1,cc=!1,uc=!1,hc=0,dc=0,fc=0,pc=0,gc=0,mc=0,yc=0,vc=null,_c=null,wc=!1,bc=0,Tc=1/0,Sc=null,Ec=null,kc=0,Cc=null,Nc=null,xc=0,Ac=0,Pc=null,Rc=null,Dc=0,Oc=null;function Lc(){if(0!==(2&nc)&&0!==sc)return sc&-sc;if(null!==O.T){return 0!==Fi?Fi:Au()}return Ae()}function Mc(){0===mc&&(mc=0===(536870912&sc)||si?Te():536870912);var e=ia.current;return null!==e&&(e.flags|=32),mc}function Fc(e,t,n){(e!==rc||2!==oc&&9!==oc)&&null===e.cancelPendingCommit||(Hc(e,0),zc(e,sc,mc,!1)),Ee(e,n),0!==(2&nc)&&e===rc||(e===rc&&(0===(2&nc)&&(pc|=n),4===dc&&zc(e,sc,mc,!1)),Iu(e))}function Uc(e,t,n){if(0!==(6&nc))throw Error(o(327));for(var r=!n&&0===(124&t)&&0===(t&e.expiredLanes)||we(e,t),i=r?function(e,t){var n=nc;nc|=2;var r=Kc(),i=Gc();rc!==e||sc!==t?(Sc=null,Tc=te()+500,Hc(e,t)):cc=we(e,t);e:for(;;)try{if(0!==oc&&null!==ic){t=ic;var s=ac;t:switch(oc){case 1:oc=0,ac=null,eu(e,t,s,1);break;case 2:case 9:if(Yi(s)){oc=0,ac=null,Zc(t);break}t=function(){2!==oc&&9!==oc||rc!==e||(oc=7),Iu(e)},s.then(t,t);break e;case 3:oc=7;break e;case 4:oc=5;break e;case 7:Yi(s)?(oc=0,ac=null,Zc(t)):(oc=0,ac=null,eu(e,t,s,7));break;case 5:var a=null;switch(ic.tag){case 26:a=ic.memoizedState;case 5:case 27:var l=ic;if(!a||qh(a)){oc=0,ac=null;var c=l.sibling;if(null!==c)ic=c;else{var u=l.return;null!==u?(ic=u,tu(u)):ic=null}break t}}oc=0,ac=null,eu(e,t,s,5);break;case 6:oc=0,ac=null,eu(e,t,s,6);break;case 8:Bc(),dc=6;break e;default:throw Error(o(462))}}Jc();break}catch(h){Wc(e,h)}return vi=yi=null,O.H=r,O.A=i,nc=n,null!==ic?0:(rc=null,sc=0,Nr(),dc)}(e,t):Yc(e,t,!0),s=r;;){if(0===i){cc&&!r&&zc(e,t,0,!1);break}if(n=e.current.alternate,!s||Vc(n)){if(2===i){if(s=t,e.errorRecoveryDisabledLanes&s)var a=0;else a=0!==(a=-536870913&e.pendingLanes)?a:536870912&a?536870912:0;if(0!==a){t=a;e:{var l=e;i=vc;var c=l.current.memoizedState.isDehydrated;if(c&&(Hc(l,a).flags|=256),2!==(a=Yc(l,a,!1))){if(uc&&!c){l.errorRecoveryDisabledLanes|=s,pc|=s,i=4;break e}s=_c,_c=i,null!==s&&(null===_c?_c=s:_c.push.apply(_c,s))}i=a}if(s=!1,2!==i)continue}}if(1===i){Hc(e,0),zc(e,t,0,!0);break}e:{switch(r=e,s=i){case 0:case 1:throw Error(o(345));case 4:if((4194048&t)!==t)break;case 6:zc(r,t,mc,!lc);break e;case 2:_c=null;break;case 3:case 5:break;default:throw Error(o(329))}if((62914560&t)===t&&10<(i=bc+300-te())){if(zc(r,t,mc,!lc),0!==_e(r,0,!0))break e;r.timeoutHandle=ch(jc.bind(null,r,n,_c,Sc,wc,t,mc,pc,yc,lc,s,2,-0,0),i)}else jc(r,n,_c,Sc,wc,t,mc,pc,yc,lc,s,0,-0,0)}break}i=Yc(e,t,!1),s=!1}Iu(e)}function jc(e,t,n,r,i,s,a,l,c,u,h,d,f,p){if(e.timeoutHandle=-1,(8192&(d=t.subtreeFlags)||16785408===(16785408&d))&&(Bh={stylesheets:null,count:0,unsuspend:Hh},Ql(t),null!==(d=function(){if(null===Bh)throw Error(o(475));var e=Bh;return e.stylesheets&&0===e.count&&Gh(e,e.stylesheets),0<e.count?function(t){var n=setTimeout((function(){if(e.stylesheets&&Gh(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}}),6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=d(ru.bind(null,e,t,s,n,r,i,a,l,c,h,1,f,p)),void zc(e,s,a,!u);ru(e,t,s,n,r,i,a,l,c)}function Vc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Yn(s(),i))return!1}catch(MS){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function zc(e,t,n,r){t&=~gc,t&=~pc,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var s=31-fe(i),o=1<<s;r[s]=-1,i&=~o}0!==n&&ke(e,n,t)}function qc(){return 0!==(6&nc)||(Su(0,!1),!1)}function Bc(){if(null!==ic){if(0===oc)var e=ic.return;else vi=yi=null,Fs(e=ic),Yo=null,$o=0,e=ic;for(;null!==e;)sl(e.alternate,e),e=e.return;ic=null}}function Hc(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,uh(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Bc(),rc=e,ic=n=Ur(e.current,null),sc=t,oc=0,ac=null,lc=!1,cc=we(e,t),uc=!1,yc=mc=gc=pc=fc=dc=0,_c=vc=null,wc=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var i=31-fe(r),s=1<<i;t|=e[i],r&=~s}return hc=t,Nr(),n}function Wc(e,t){_s=null,O.H=Wo,t===Wi||t===Gi?(t=Zi(),oc=3):t===Ki?(t=Zi(),oc=4):oc=t===ka?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,ac=t,null===ic&&(dc=1,ba(e,Sr(t,e.current)))}function Kc(){var e=O.H;return O.H=Wo,null===e?Wo:e}function Gc(){var e=O.A;return O.A=ec,e}function Qc(){dc=4,lc||(4194048&sc)!==sc&&null!==ia.current||(cc=!0),0===(134217727&fc)&&0===(134217727&pc)||null===rc||zc(rc,sc,mc,!1)}function Yc(e,t,n){var r=nc;nc|=2;var i=Kc(),s=Gc();rc===e&&sc===t||(Sc=null,Hc(e,t)),t=!1;var o=dc;e:for(;;)try{if(0!==oc&&null!==ic){var a=ic,l=ac;switch(oc){case 8:Bc(),o=6;break e;case 3:case 2:case 9:case 6:null===ia.current&&(t=!0);var c=oc;if(oc=0,ac=null,eu(e,a,l,c),n&&cc){o=0;break e}break;default:c=oc,oc=0,ac=null,eu(e,a,l,c)}}$c(),o=dc;break}catch(u){Wc(e,u)}return t&&e.shellSuspendCounter++,vi=yi=null,nc=r,O.H=i,O.A=s,null===ic&&(rc=null,sc=0,Nr()),o}function $c(){for(;null!==ic;)Xc(ic)}function Jc(){for(;null!==ic&&!Z();)Xc(ic)}function Xc(e){var t=Ja(e.alternate,e,hc);e.memoizedProps=e.pendingProps,null===t?tu(e):ic=t}function Zc(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Ma(n,t,t.pendingProps,t.type,void 0,sc);break;case 11:t=Ma(n,t,t.pendingProps,t.type.render,t.ref,sc);break;case 5:Fs(t);default:sl(n,t),t=Ja(n,t=ic=jr(t,hc),hc)}e.memoizedProps=e.pendingProps,null===t?tu(e):ic=t}function eu(e,t,n,r){vi=yi=null,Fs(t),Yo=null,$o=0;var i=t.return;try{if(function(e,t,n,r,i){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&Ii(t,n,i,!0),null!==(n=ia.current)){switch(n.tag){case 13:return null===sa?Qc():null===n.alternate&&0===dc&&(dc=3),n.flags&=-257,n.flags|=65536,n.lanes=i,r===Qi?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),du(e,r,i)),!1;case 22:return n.flags|=65536,r===Qi?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),du(e,r,i)),!1}throw Error(o(435,n.tag))}return du(e,r,i),Qc(),!1}if(si)return null!==(t=ia.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=i,r!==li&&gi(Sr(e=Error(o(422),{cause:r}),n))):(r!==li&&gi(Sr(t=Error(o(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,i&=-i,e.lanes|=i,r=Sr(r,n),as(e,i=Ia(e.stateNode,r,i)),4!==dc&&(dc=2)),!1;var s=Error(o(520),{cause:r});if(s=Sr(s,n),null===vc?vc=[s]:vc.push(s),4!==dc&&(dc=2),null===t)return!0;r=Sr(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=i&-i,n.lanes|=e,as(n,e=Ia(n.stateNode,r,e)),!1;case 1:if(t=n.type,s=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==s&&"function"===typeof s.componentDidCatch&&(null===Ec||!Ec.has(s))))return n.flags|=65536,i&=-i,n.lanes|=i,Ea(i=Sa(i),e,n,r),as(n,i),!1}n=n.return}while(null!==n);return!1}(e,i,t,n,sc))return dc=1,ba(e,Sr(n,e.current)),void(ic=null)}catch(MS){if(null!==i)throw ic=i,MS;return dc=1,ba(e,Sr(n,e.current)),void(ic=null)}32768&t.flags?(si||1===r?e=!0:cc||0!==(536870912&sc)?e=!1:(lc=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=ia.current)&&13===r.tag&&(r.flags|=16384))),nu(t,e)):tu(t)}function tu(e){var t=e;do{if(0!==(32768&t.flags))return void nu(t,lc);e=t.return;var n=rl(t.alternate,t,hc);if(null!==n)return void(ic=n);if(null!==(t=t.sibling))return void(ic=t);ic=t=e}while(null!==t);0===dc&&(dc=5)}function nu(e,t){do{var n=il(e.alternate,e);if(null!==n)return n.flags&=32767,void(ic=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(ic=e);ic=e=n}while(null!==e);dc=6,ic=null}function ru(e,t,n,r,i,s,a,l,c){e.cancelPendingCommit=null;do{lu()}while(0!==kc);if(0!==(6&nc))throw Error(o(327));if(null!==t){if(t===e.current)throw Error(o(177));if(s=t.lanes|t.childLanes,function(e,t,n,r,i,s){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var a=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=o&~n;0<n;){var u=31-fe(n),h=1<<u;a[u]=0,l[u]=-1;var d=c[u];if(null!==d)for(c[u]=null,u=0;u<d.length;u++){var f=d[u];null!==f&&(f.lane&=-536870913)}n&=~h}0!==r&&ke(e,r,0),0!==s&&0===i&&0!==e.tag&&(e.suspendedLanes|=s&~(o&~t))}(e,n,s|=Cr,a,l,c),e===rc&&(ic=rc=null,sc=0),Nc=t,Cc=e,xc=n,Ac=s,Pc=i,Rc=r,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,J(se,(function(){return cu(),null}))):(e.callbackNode=null,e.callbackPriority=0),r=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||r){r=O.T,O.T=null,i=L.p,L.p=2,a=nc,nc|=4;try{!function(e,t){if(e=e.containerInfo,nh=rd,tr(e=er(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(m){n=null;break e}var a=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=a+i),d!==s||0!==r&&3!==d.nodeType||(c=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===i&&(l=a),f===s&&++h===r&&(c=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(rh={focusedElem:e,selectionRange:n},rd=!1,Il=t;null!==Il;)if(e=(t=Il).child,0!==(1024&t.subtreeFlags)&&null!==e)e.return=t,Il=e;else for(;null!==Il;){switch(s=(t=Il).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==s){e=void 0,n=t,i=s.memoizedProps,s=s.memoizedState,r=n.stateNode;try{var g=ma(n.type,i,(n.elementType,n.type));e=r.getSnapshotBeforeUpdate(g,s),r.__reactInternalSnapshotBeforeUpdate=e}catch(MS){hu(n,n.return,MS)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))mh(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":mh(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(o(163))}if(null!==(e=t.sibling)){e.return=t.return,Il=e;break}Il=t.return}}(e,t)}finally{nc=a,L.p=i,O.T=r}}kc=1,iu(),su(),ou()}}function iu(){if(1===kc){kc=0;var e=Cc,t=Nc,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=O.T,O.T=null;var r=L.p;L.p=2;var i=nc;nc|=4;try{Ol(t,e);var s=rh,o=er(e.containerInfo),a=s.focusedElem,l=s.selectionRange;if(o!==a&&a&&a.ownerDocument&&Zn(a.ownerDocument.documentElement,a)){if(null!==l&&tr(a)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in a)a.selectionStart=c,a.selectionEnd=Math.min(u,a.value.length);else{var h=a.ownerDocument||document,d=h&&h.defaultView||window;if(d.getSelection){var f=d.getSelection(),p=a.textContent.length,g=Math.min(l.start,p),m=void 0===l.end?g:Math.min(l.end,p);!f.extend&&g>m&&(o=m,m=g,g=o);var y=Xn(a,g),v=Xn(a,m);if(y&&v&&(1!==f.rangeCount||f.anchorNode!==y.node||f.anchorOffset!==y.offset||f.focusNode!==v.node||f.focusOffset!==v.offset)){var _=h.createRange();_.setStart(y.node,y.offset),f.removeAllRanges(),g>m?(f.addRange(_),f.extend(v.node,v.offset)):(_.setEnd(v.node,v.offset),f.addRange(_))}}}}for(h=[],f=a;f=f.parentNode;)1===f.nodeType&&h.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"===typeof a.focus&&a.focus(),a=0;a<h.length;a++){var w=h[a];w.element.scrollLeft=w.left,w.element.scrollTop=w.top}}rd=!!nh,rh=nh=null}finally{nc=i,L.p=r,O.T=n}}e.current=t,kc=2}}function su(){if(2===kc){kc=0;var e=Cc,t=Nc,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=O.T,O.T=null;var r=L.p;L.p=2;var i=nc;nc|=4;try{Sl(e,t.alternate,t)}finally{nc=i,L.p=r,O.T=n}}kc=3}}function ou(){if(4===kc||3===kc){kc=0,ee();var e=Cc,t=Nc,n=xc,r=Rc;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?kc=5:(kc=0,Nc=Cc=null,au(e,e.pendingLanes));var i=e.pendingLanes;if(0===i&&(Ec=null),xe(n),t=t.stateNode,he&&"function"===typeof he.onCommitFiberRoot)try{he.onCommitFiberRoot(ue,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==r){t=O.T,i=L.p,L.p=2,O.T=null;try{for(var s=e.onRecoverableError,o=0;o<r.length;o++){var a=r[o];s(a.value,{componentStack:a.stack})}}finally{O.T=t,L.p=i}}0!==(3&xc)&&lu(),Iu(e),i=e.pendingLanes,0!==(4194090&n)&&0!==(42&i)?e===Oc?Dc++:(Dc=0,Oc=e):Dc=0,Su(0,!1)}}function au(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Oi(t)))}function lu(e){return iu(),su(),ou(),cu()}function cu(){if(5!==kc)return!1;var e=Cc,t=Ac;Ac=0;var n=xe(xc),r=O.T,i=L.p;try{L.p=32>n?32:n,O.T=null,n=Pc,Pc=null;var s=Cc,a=xc;if(kc=0,Nc=Cc=null,xc=0,0!==(6&nc))throw Error(o(331));var l=nc;if(nc|=4,Jl(s.current),Bl(s,s.current,a,n),nc=l,Su(0,!1),he&&"function"===typeof he.onPostCommitFiberRoot)try{he.onPostCommitFiberRoot(ue,s)}catch(c){}return!0}finally{L.p=i,O.T=r,au(e,t)}}function uu(e,t,n){t=Sr(n,t),null!==(e=ss(e,t=Ia(e.stateNode,t,2),2))&&(Ee(e,2),Iu(e))}function hu(e,t,n){if(3===e.tag)uu(e,e,n);else for(;null!==t;){if(3===t.tag){uu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ec||!Ec.has(r))){e=Sr(n,e),null!==(r=ss(t,n=Sa(2),2))&&(Ea(n,r,t,e),Ee(r,2),Iu(r));break}}t=t.return}}function du(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new tc;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(uc=!0,i.add(n),e=fu.bind(null,e,t,n),t.then(e,e))}function fu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,rc===e&&(sc&n)===n&&(4===dc||3===dc&&(62914560&sc)===sc&&300>te()-bc?0===(2&nc)&&Hc(e,0):gc|=n,yc===sc&&(yc=0)),Iu(e)}function pu(e,t){0===t&&(t=Ie()),null!==(e=Pr(e,t))&&(Ee(e,t),Iu(e))}function gu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),pu(e,n)}function mu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(o(314))}null!==r&&r.delete(t),pu(e,n)}var yu=null,vu=null,_u=!1,wu=!1,bu=!1,Tu=0;function Iu(e){e!==vu&&null===e.next&&(null===vu?yu=vu=e:vu=vu.next=e),wu=!0,_u||(_u=!0,dh((function(){0!==(6&nc)?J(re,Eu):ku()})))}function Su(e,t){if(!bu&&wu){bu=!0;do{for(var n=!1,r=yu;null!==r;){if(!t)if(0!==e){var i=r.pendingLanes;if(0===i)var s=0;else{var o=r.suspendedLanes,a=r.pingedLanes;s=(1<<31-fe(42|e)+1)-1,s=201326741&(s&=i&~(o&~a))?201326741&s|1:s?2|s:0}0!==s&&(n=!0,xu(r,s))}else s=sc,0===(3&(s=_e(r,r===rc?s:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||we(r,s)||(n=!0,xu(r,s));r=r.next}}while(n);bu=!1}}function Eu(){ku()}function ku(){wu=_u=!1;var e=0;0!==Tu&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==lh&&(lh=e,!0);return lh=null,!1}()&&(e=Tu),Tu=0);for(var t=te(),n=null,r=yu;null!==r;){var i=r.next,s=Cu(r,t);0===s?(r.next=null,null===n?yu=i:n.next=i,null===i&&(vu=n)):(n=r,(0!==e||0!==(3&s))&&(wu=!0)),r=i}Su(e,!1)}function Cu(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=-62914561&e.pendingLanes;0<s;){var o=31-fe(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=be(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}if(n=sc,n=_e(e,e===(t=rc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===oc||9===oc)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&X(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||we(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&X(r),xe(n)){case 2:case 8:n=ie;break;case 32:default:n=se;break;case 268435456:n=ae}return r=Nu.bind(null,e),n=J(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&X(r),e.callbackPriority=2,e.callbackNode=null,2}function Nu(e,t){if(0!==kc&&5!==kc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(lu()&&e.callbackNode!==n)return null;var r=sc;return 0===(r=_e(e,e===rc?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Uc(e,r,t),Cu(e,te()),null!=e.callbackNode&&e.callbackNode===n?Nu.bind(null,e):null)}function xu(e,t){if(lu())return null;Uc(e,t,!0)}function Au(){return 0===Tu&&(Tu=Te()),Tu}function Pu(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:xt(""+e)}function Ru(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Du=0;Du<br.length;Du++){var Ou=br[Du];Tr(Ou.toLowerCase(),"on"+(Ou[0].toUpperCase()+Ou.slice(1)))}Tr(fr,"onAnimationEnd"),Tr(pr,"onAnimationIteration"),Tr(gr,"onAnimationStart"),Tr("dblclick","onDoubleClick"),Tr("focusin","onFocus"),Tr("focusout","onBlur"),Tr(mr,"onTransitionRun"),Tr(yr,"onTransitionStart"),Tr(vr,"onTransitionCancel"),Tr(_r,"onTransitionEnd"),Ye("onMouseEnter",["mouseout","mouseover"]),Ye("onMouseLeave",["mouseout","mouseover"]),Ye("onPointerEnter",["pointerout","pointerover"]),Ye("onPointerLeave",["pointerout","pointerover"]),Qe("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Qe("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Qe("onBeforeInput",["compositionend","keypress","textInput","paste"]),Qe("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Qe("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Qe("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mu=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Lu));function Fu(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;s=a,i.currentTarget=c;try{s(i)}catch(MS){ya(MS)}i.currentTarget=null,s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;s=a,i.currentTarget=c;try{s(i)}catch(MS){ya(MS)}i.currentTarget=null,s=l}}}}function Uu(e,t){var n=t[Le];void 0===n&&(n=t[Le]=new Set);var r=e+"__bubble";n.has(r)||(qu(t,e,2,!1),n.add(r))}function ju(e,t,n){var r=0;t&&(r|=4),qu(n,e,r,t)}var Vu="_reactListening"+Math.random().toString(36).slice(2);function zu(e){if(!e[Vu]){e[Vu]=!0,Ke.forEach((function(t){"selectionchange"!==t&&(Mu.has(t)||ju(t,!1,e),ju(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vu]||(t[Vu]=!0,ju("selectionchange",!1,t))}}function qu(e,t,n,r){switch(ud(t)){case 2:var i=id;break;case 8:i=sd;break;default:i=od}n=i.bind(null,t,n,e),i=void 0,!jt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Bu(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i)break;if(4===o)for(o=r.return;null!==o;){var c=o.tag;if((3===c||4===c)&&o.stateNode.containerInfo===i)return;o=o.return}for(;null!==a;){if(null===(o=ze(a)))return;if(5===(c=o.tag)||6===c||26===c||27===c){r=s=o;continue e}a=a.parentNode}}r=r.return}Mt((function(){var r=s,i=Pt(n),o=[];e:{var a=wr.get(e);if(void 0!==a){var c=Zt,u=e;switch(e){case"keypress":if(0===Wt(n))break e;case"keydown":case"keyup":c=gn;break;case"focusin":u="focus",c=on;break;case"focusout":u="blur",c=on;break;case"beforeblur":case"afterblur":c=on;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=rn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=sn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=yn;break;case fr:case pr:case gr:c=an;break;case _r:c=vn;break;case"scroll":case"scrollend":c=tn;break;case"wheel":c=_n;break;case"copy":case"cut":case"paste":c=ln;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=mn;break;case"toggle":case"beforetoggle":c=wn}var h=0!==(4&t),d=!h&&("scroll"===e||"scrollend"===e),f=h?null!==a?a+"Capture":null:a;h=[];for(var p,g=r;null!==g;){var m=g;if(p=m.stateNode,5!==(m=m.tag)&&26!==m&&27!==m||null===p||null===f||null!=(m=Ft(g,f))&&h.push(Hu(g,m,p)),d)break;g=g.return}0<h.length&&(a=new c(a,u,null,n,i),o.push({event:a,listeners:h}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===At||!(u=n.relatedTarget||n.fromElement)||!ze(u)&&!u[Oe])&&(c||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?ze(u):null)&&(d=l(u),h=u.tag,u!==d||5!==h&&27!==h&&6!==h)&&(u=null)):(c=null,u=r),c!==u)){if(h=rn,m="onMouseLeave",f="onMouseEnter",g="mouse","pointerout"!==e&&"pointerover"!==e||(h=mn,m="onPointerLeave",f="onPointerEnter",g="pointer"),d=null==c?a:Be(c),p=null==u?a:Be(u),(a=new h(m,g+"leave",c,n,i)).target=d,a.relatedTarget=p,m=null,ze(i)===r&&((h=new h(f,g+"enter",u,n,i)).target=p,h.relatedTarget=d,m=h),d=m,c&&u)e:{for(f=u,g=0,p=h=c;p;p=Ku(p))g++;for(p=0,m=f;m;m=Ku(m))p++;for(;0<g-p;)h=Ku(h),g--;for(;0<p-g;)f=Ku(f),p--;for(;g--;){if(h===f||null!==f&&h===f.alternate)break e;h=Ku(h),f=Ku(f)}h=null}else h=null;null!==c&&Gu(o,a,c,h,!1),null!==u&&null!==d&&Gu(o,d,u,h,!0)}if("select"===(c=(a=r?Be(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===c&&"file"===a.type)var y=Un;else if(Rn(a))if(jn)y=Qn;else{y=Kn;var v=Wn}else!(c=a.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==a.type&&"radio"!==a.type?r&&kt(r.elementType)&&(y=Un):y=Gn;switch(y&&(y=y(e,r))?Dn(o,y,n,i):(v&&v(e,a,r),"focusout"===e&&r&&"number"===a.type&&null!=r.memoizedProps.value&&vt(a,"number",a.value)),v=r?Be(r):window,e){case"focusin":(Rn(v)||"true"===v.contentEditable)&&(rr=v,ir=r,sr=null);break;case"focusout":sr=ir=rr=null;break;case"mousedown":or=!0;break;case"contextmenu":case"mouseup":case"dragend":or=!1,ar(o,n,i);break;case"selectionchange":if(nr)break;case"keydown":case"keyup":ar(o,n,i)}var _;if(Tn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else An?Nn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(En&&"ko"!==n.locale&&(An||"onCompositionStart"!==w?"onCompositionEnd"===w&&An&&(_=Ht()):(qt="value"in(zt=i)?zt.value:zt.textContent,An=!0)),0<(v=Wu(r,w)).length&&(w=new cn(w,e,null,n,i),o.push({event:w,listeners:v}),_?w.data=_:null!==(_=xn(n))&&(w.data=_))),(_=Sn?function(e,t){switch(e){case"compositionend":return xn(t);case"keypress":return 32!==t.which?null:(Cn=!0,kn);case"textInput":return(e=t.data)===kn&&Cn?null:e;default:return null}}(e,n):function(e,t){if(An)return"compositionend"===e||!Tn&&Nn(e,t)?(e=Ht(),Bt=qt=zt=null,An=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return En&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(w=Wu(r,"onBeforeInput")).length&&(v=new cn("onBeforeInput","beforeinput",null,n,i),o.push({event:v,listeners:w}),v.data=_)),function(e,t,n,r,i){if("submit"===t&&n&&n.stateNode===i){var s=Pu((i[De]||null).action),o=r.submitter;o&&null!==(t=(t=o[De]||null)?Pu(t.formAction):o.getAttribute("formAction"))&&(s=t,o=null);var a=new Zt("action","action",null,r,i);e.push({event:a,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==Tu){var e=o?Ru(i,o):new FormData(i);Po(n,{pending:!0,data:e,method:i.method,action:s},null,e)}}else"function"===typeof s&&(a.preventDefault(),e=o?Ru(i,o):new FormData(i),Po(n,{pending:!0,data:e,method:i.method,action:s},s,e))},currentTarget:i}]})}}(o,e,r,n,i)}Fu(o,t)}))}function Hu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wu(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;if(5!==(i=i.tag)&&26!==i&&27!==i||null===s||(null!=(i=Ft(e,n))&&r.unshift(Hu(e,i,s)),null!=(i=Ft(e,t))&&r.push(Hu(e,i,s))),3===e.tag)return r;e=e.return}return[]}function Ku(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Gu(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(a=a.tag,null!==l&&l===r)break;5!==a&&26!==a&&27!==a||null===c||(l=c,i?null!=(c=Ft(n,s))&&o.unshift(Hu(n,c,l)):i||null!=(c=Ft(n,s))&&o.push(Hu(n,c,l))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Qu=/\r\n?/g,Yu=/\u0000|\uFFFD/g;function $u(e){return("string"===typeof e?e:""+e).replace(Qu,"\n").replace(Yu,"")}function Ju(e,t){return t=$u(t),$u(e)===t}function Xu(){}function Zu(e,t,n,r,i,s){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||Tt(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&Tt(e,""+r);break;case"className":nt(e,"class",r);break;case"tabIndex":nt(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":nt(e,n,r);break;case"style":Et(e,r,s);break;case"data":if("object"!==t){nt(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=xt(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof s&&("formAction"===n?("input"!==t&&Zu(e,t,"name",i.name,i,null),Zu(e,t,"formEncType",i.formEncType,i,null),Zu(e,t,"formMethod",i.formMethod,i,null),Zu(e,t,"formTarget",i.formTarget,i,null)):(Zu(e,t,"encType",i.encType,i,null),Zu(e,t,"method",i.method,i,null),Zu(e,t,"target",i.target,i,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=xt(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=Xu);break;case"onScroll":null!=r&&Uu("scroll",e);break;case"onScrollEnd":null!=r&&Uu("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(o(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(o(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=xt(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Uu("beforetoggle",e),Uu("toggle",e),tt(e,"popover",r);break;case"xlinkActuate":rt(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":rt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":rt(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":rt(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":rt(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":rt(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":rt(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":rt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":rt(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":tt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&tt(e,n=Ct.get(n)||n,r)}}function eh(e,t,n,r,i,s){switch(n){case"style":Et(e,r,s);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(o(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(o(60));e.innerHTML=n}}break;case"children":"string"===typeof r?Tt(e,r):("number"===typeof r||"bigint"===typeof r)&&Tt(e,""+r);break;case"onScroll":null!=r&&Uu("scroll",e);break;case"onScrollEnd":null!=r&&Uu("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Xu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Ge.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(i=n.endsWith("Capture"),t=n.slice(2,i?n.length-7:void 0),"function"===typeof(s=null!=(s=e[De]||null)?s[n]:null)&&e.removeEventListener(t,s,i),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):tt(e,n,r):("function"!==typeof s&&null!==s&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,i)))}}function th(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Uu("error",e),Uu("load",e);var r,i=!1,s=!1;for(r in n)if(n.hasOwnProperty(r)){var a=n[r];if(null!=a)switch(r){case"src":i=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Zu(e,t,r,a,n,null)}}return s&&Zu(e,t,"srcSet",n.srcSet,n,null),void(i&&Zu(e,t,"src",n.src,n,null));case"input":Uu("invalid",e);var l=r=a=s=null,c=null,u=null;for(i in n)if(n.hasOwnProperty(i)){var h=n[i];if(null!=h)switch(i){case"name":s=h;break;case"type":a=h;break;case"checked":c=h;break;case"defaultChecked":u=h;break;case"value":r=h;break;case"defaultValue":l=h;break;case"children":case"dangerouslySetInnerHTML":if(null!=h)throw Error(o(137,t));break;default:Zu(e,t,i,h,n,null)}}return yt(e,r,l,c,u,a,s,!1),void ht(e);case"select":for(s in Uu("invalid",e),i=a=r=null,n)if(n.hasOwnProperty(s)&&null!=(l=n[s]))switch(s){case"value":r=l;break;case"defaultValue":a=l;break;case"multiple":i=l;default:Zu(e,t,s,l,n,null)}return t=r,n=a,e.multiple=!!i,void(null!=t?_t(e,!!i,t,!1):null!=n&&_t(e,!!i,n,!0));case"textarea":for(a in Uu("invalid",e),r=s=i=null,n)if(n.hasOwnProperty(a)&&null!=(l=n[a]))switch(a){case"value":i=l;break;case"defaultValue":s=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(o(91));break;default:Zu(e,t,a,l,n,null)}return bt(e,i,s,r),void ht(e);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(i=n[c]))if("selected"===c)e.selected=i&&"function"!==typeof i&&"symbol"!==typeof i;else Zu(e,t,c,i,n,null);return;case"dialog":Uu("beforetoggle",e),Uu("toggle",e),Uu("cancel",e),Uu("close",e);break;case"iframe":case"object":Uu("load",e);break;case"video":case"audio":for(i=0;i<Lu.length;i++)Uu(Lu[i],e);break;case"image":Uu("error",e),Uu("load",e);break;case"details":Uu("toggle",e);break;case"embed":case"source":case"link":Uu("error",e),Uu("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(i=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Zu(e,t,u,i,n,null)}return;default:if(kt(t)){for(h in n)n.hasOwnProperty(h)&&(void 0!==(i=n[h])&&eh(e,t,h,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(i=n[l])&&Zu(e,t,l,i,n,null))}var nh=null,rh=null;function ih(e){return 9===e.nodeType?e:e.ownerDocument}function sh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function oh(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function ah(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var lh=null;var ch="function"===typeof setTimeout?setTimeout:void 0,uh="function"===typeof clearTimeout?clearTimeout:void 0,hh="function"===typeof Promise?Promise:void 0,dh="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof hh?function(e){return hh.resolve(null).then(e).catch(fh)}:ch;function fh(e){setTimeout((function(){throw e}))}function ph(e){return"head"===e}function gh(e,t){var n=t,r=0,i=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0<r&&8>r){n=r;var o=e.ownerDocument;if(1&n&&Th(o.documentElement),2&n&&Th(o.body),4&n)for(Th(n=o.head),o=n.firstChild;o;){var a=o.nextSibling,l=o.nodeName;o[je]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===o.rel.toLowerCase()||n.removeChild(o),o=a}}if(0===i)return e.removeChild(s),void Nd(t);i--}else"$"===n||"$?"===n||"$!"===n?i++:r=n.charCodeAt(0)-48;else r=0;n=s}while(n);Nd(t)}function mh(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":mh(n),Ve(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function yh(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function vh(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var _h=null;function wh(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function bh(e,t,n){switch(t=ih(n),e){case"html":if(!(e=t.documentElement))throw Error(o(452));return e;case"head":if(!(e=t.head))throw Error(o(453));return e;case"body":if(!(e=t.body))throw Error(o(454));return e;default:throw Error(o(451))}}function Th(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ve(e)}var Ih=new Map,Sh=new Set;function Eh(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var kh=L.d;L.d={f:function(){var e=kh.f(),t=qc();return e||t},r:function(e){var t=qe(e);null!==t&&5===t.tag&&"form"===t.type?Do(t):kh.r(e)},D:function(e){kh.D(e),Nh("dns-prefetch",e,null)},C:function(e,t){kh.C(e,t),Nh("preconnect",e,t)},L:function(e,t,n){kh.L(e,t,n);var r=Ch;if(r&&e&&t){var i='link[rel="preload"][as="'+gt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(i+='[imagesrcset="'+gt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(i+='[imagesizes="'+gt(n.imageSizes)+'"]')):i+='[href="'+gt(e)+'"]';var s=i;switch(t){case"style":s=Ah(e);break;case"script":s=Dh(e)}Ih.has(s)||(e=d({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),Ih.set(s,e),null!==r.querySelector(i)||"style"===t&&r.querySelector(Ph(s))||"script"===t&&r.querySelector(Oh(s))||(th(t=r.createElement("link"),"link",e),We(t),r.head.appendChild(t)))}},m:function(e,t){kh.m(e,t);var n=Ch;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",i='link[rel="modulepreload"][as="'+gt(r)+'"][href="'+gt(e)+'"]',s=i;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=Dh(e)}if(!Ih.has(s)&&(e=d({rel:"modulepreload",href:e},t),Ih.set(s,e),null===n.querySelector(i))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Oh(s)))return}th(r=n.createElement("link"),"link",e),We(r),n.head.appendChild(r)}}},X:function(e,t){kh.X(e,t);var n=Ch;if(n&&e){var r=He(n).hoistableScripts,i=Dh(e),s=r.get(i);s||((s=n.querySelector(Oh(i)))||(e=d({src:e,async:!0},t),(t=Ih.get(i))&&Uh(e,t),We(s=n.createElement("script")),th(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}},S:function(e,t,n){kh.S(e,t,n);var r=Ch;if(r&&e){var i=He(r).hoistableStyles,s=Ah(e);t=t||"default";var o=i.get(s);if(!o){var a={loading:0,preload:null};if(o=r.querySelector(Ph(s)))a.loading=5;else{e=d({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Ih.get(s))&&Fh(e,n);var l=o=r.createElement("link");We(l),th(l,"link",e),l._p=new Promise((function(e,t){l.onload=e,l.onerror=t})),l.addEventListener("load",(function(){a.loading|=1})),l.addEventListener("error",(function(){a.loading|=2})),a.loading|=4,Mh(o,t,r)}o={type:"stylesheet",instance:o,count:1,state:a},i.set(s,o)}}},M:function(e,t){kh.M(e,t);var n=Ch;if(n&&e){var r=He(n).hoistableScripts,i=Dh(e),s=r.get(i);s||((s=n.querySelector(Oh(i)))||(e=d({src:e,async:!0,type:"module"},t),(t=Ih.get(i))&&Uh(e,t),We(s=n.createElement("script")),th(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}}};var Ch="undefined"===typeof document?null:document;function Nh(e,t,n){var r=Ch;if(r&&"string"===typeof t&&t){var i=gt(t);i='link[rel="'+e+'"][href="'+i+'"]',"string"===typeof n&&(i+='[crossorigin="'+n+'"]'),Sh.has(i)||(Sh.add(i),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(i)&&(th(t=r.createElement("link"),"link",e),We(t),r.head.appendChild(t)))}}function xh(e,t,n,r){var i,s,a,l,c=(c=H.current)?Eh(c):null;if(!c)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Ah(n.href),(r=(n=He(c).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Ah(n.href);var u=He(c).hoistableStyles,h=u.get(e);if(h||(c=c.ownerDocument||c,h={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,h),(u=c.querySelector(Ph(e)))&&!u._p&&(h.instance=u,h.state.loading=5),Ih.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Ih.set(e,n),u||(i=c,s=e,a=n,l=h.state,i.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=i.createElement("link"),l.preload=s,s.addEventListener("load",(function(){return l.loading|=1})),s.addEventListener("error",(function(){return l.loading|=2})),th(s,"link",a),We(s),i.head.appendChild(s))))),t&&null===r)throw Error(o(528,""));return h}if(t&&null!==r)throw Error(o(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Dh(n),(r=(n=He(c).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function Ah(e){return'href="'+gt(e)+'"'}function Ph(e){return'link[rel="stylesheet"]['+e+"]"}function Rh(e){return d({},e,{"data-precedence":e.precedence,precedence:null})}function Dh(e){return'[src="'+gt(e)+'"]'}function Oh(e){return"script[async]"+e}function Lh(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+gt(n.href)+'"]');if(r)return t.instance=r,We(r),r;var i=d({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return We(r=(e.ownerDocument||e).createElement("style")),th(r,"style",i),Mh(r,n.precedence,e),t.instance=r;case"stylesheet":i=Ah(n.href);var s=e.querySelector(Ph(i));if(s)return t.state.loading|=4,t.instance=s,We(s),s;r=Rh(n),(i=Ih.get(i))&&Fh(r,i),We(s=(e.ownerDocument||e).createElement("link"));var a=s;return a._p=new Promise((function(e,t){a.onload=e,a.onerror=t})),th(s,"link",r),t.state.loading|=4,Mh(s,n.precedence,e),t.instance=s;case"script":return s=Dh(n.src),(i=e.querySelector(Oh(s)))?(t.instance=i,We(i),i):(r=n,(i=Ih.get(s))&&Uh(r=d({},n),i),We(i=(e=e.ownerDocument||e).createElement("script")),th(i,"link",r),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(o(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Mh(r,n.precedence,e));return t.instance}function Mh(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=r.length?r[r.length-1]:null,s=i,o=0;o<r.length;o++){var a=r[o];if(a.dataset.precedence===t)s=a;else if(s!==i)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Fh(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Uh(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var jh=null;function Vh(e,t,n){if(null===jh){var r=new Map,i=jh=new Map;i.set(n,r)}else(r=(i=jh).get(n))||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var s=n[i];if(!(s[je]||s[Re]||"link"===e&&"stylesheet"===s.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==s.namespaceURI){var o=s.getAttribute(t)||"";o=e+o;var a=r.get(o);a?a.push(s):r.set(o,[s])}}return r}function zh(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function qh(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var Bh=null;function Hh(){}function Wh(){if(this.count--,0===this.count)if(this.stylesheets)Gh(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Kh=null;function Gh(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Kh=new Map,t.forEach(Qh,e),Kh=null,Wh.call(e))}function Qh(e,t){if(!(4&t.state.loading)){var n=Kh.get(e);if(n)var r=n.get(null);else{n=new Map,Kh.set(e,n);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<i.length;s++){var o=i[s];"LINK"!==o.nodeName&&"not all"===o.getAttribute("media")||(n.set(o.dataset.precedence,o),r=o)}r&&n.set(null,r)}o=(i=t.instance).getAttribute("data-precedence"),(s=n.get(o)||r)===r&&n.set(null,i),n.set(o,i),this.count++,r=Wh.bind(this),i.addEventListener("load",r),i.addEventListener("error",r),s?s.parentNode.insertBefore(i,s.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(i,e.firstChild),t.state.loading|=4}}var Yh={$$typeof:b,Provider:null,Consumer:null,_currentValue:M,_currentValue2:M,_threadCount:0};function $h(e,t,n,r,i,s,o,a){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Se(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Se(0),this.hiddenUpdates=Se(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=s,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=a,this.incompleteTransitions=new Map}function Jh(e,t,n,r,i,s,o,a,l,c,u,h){return e=new $h(e,t,n,o,a,l,c,h),t=1,!0===s&&(t|=24),s=Mr(3,null,null,t),e.current=s,s.stateNode=e,(t=Di()).refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:r,isDehydrated:n,cache:t},ns(s),e}function Xh(e){return e?e=Or:Or}function Zh(e,t,n,r,i,s){i=Xh(i),null===r.context?r.context=i:r.pendingContext=i,(r=is(t)).payload={element:n},null!==(s=void 0===s?null:s)&&(r.callback=s),null!==(n=ss(e,r,t))&&(Fc(n,0,t),os(n,e,t))}function ed(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function td(e,t){ed(e,t),(e=e.alternate)&&ed(e,t)}function nd(e){if(13===e.tag){var t=Pr(e,67108864);null!==t&&Fc(t,0,67108864),td(e,67108864)}}var rd=!0;function id(e,t,n,r){var i=O.T;O.T=null;var s=L.p;try{L.p=2,od(e,t,n,r)}finally{L.p=s,O.T=i}}function sd(e,t,n,r){var i=O.T;O.T=null;var s=L.p;try{L.p=8,od(e,t,n,r)}finally{L.p=s,O.T=i}}function od(e,t,n,r){if(rd){var i=ad(r);if(null===i)Bu(e,t,r,ld,n),_d(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return dd=wd(dd,e,t,n,r,i),!0;case"dragenter":return fd=wd(fd,e,t,n,r,i),!0;case"mouseover":return pd=wd(pd,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return gd.set(s,wd(gd.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,md.set(s,wd(md.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(_d(e,r),4&t&&-1<vd.indexOf(e)){for(;null!==i;){var s=qe(i);if(null!==s)switch(s.tag){case 3:if((s=s.stateNode).current.memoizedState.isDehydrated){var o=ve(s.pendingLanes);if(0!==o){var a=s;for(a.pendingLanes|=2,a.entangledLanes|=2;o;){var l=1<<31-fe(o);a.entanglements[1]|=l,o&=~l}Iu(s),0===(6&nc)&&(Tc=te()+500,Su(0,!1))}}break;case 13:null!==(a=Pr(s,2))&&Fc(a,0,2),qc(),td(s,2)}if(null===(s=ad(r))&&Bu(e,t,r,ld,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Bu(e,t,r,null,n)}}function ad(e){return cd(e=Pt(e))}var ld=null;function cd(e){if(ld=null,null!==(e=ze(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return ld=e,null}function ud(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ne()){case re:return 2;case ie:return 8;case se:case oe:return 32;case ae:return 268435456;default:return 32}default:return 32}}var hd=!1,dd=null,fd=null,pd=null,gd=new Map,md=new Map,yd=[],vd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function _d(e,t){switch(e){case"focusin":case"focusout":dd=null;break;case"dragenter":case"dragleave":fd=null;break;case"mouseover":case"mouseout":pd=null;break;case"pointerover":case"pointerout":gd.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":md.delete(t.pointerId)}}function wd(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=qe(t))&&nd(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function bd(e){var t=ze(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void function(e,t){var n=L.p;try{return L.p=e,t()}finally{L.p=n}}(e.priority,(function(){if(13===n.tag){var e=Lc();e=Ne(e);var t=Pr(n,e);null!==t&&Fc(t,0,e),td(n,e)}}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Td(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=ad(e.nativeEvent);if(null!==n)return null!==(t=qe(n))&&nd(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);At=r,n.target.dispatchEvent(r),At=null,t.shift()}return!0}function Id(e,t,n){Td(e)&&n.delete(t)}function Sd(){hd=!1,null!==dd&&Td(dd)&&(dd=null),null!==fd&&Td(fd)&&(fd=null),null!==pd&&Td(pd)&&(pd=null),gd.forEach(Id),md.forEach(Id)}function Ed(e,t){e.blockedOn===t&&(e.blockedOn=null,hd||(hd=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Sd)))}var kd=null;function Cd(e){kd!==e&&(kd=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,(function(){kd===e&&(kd=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],i=e[t+2];if("function"!==typeof r){if(null===cd(r||n))continue;break}var s=qe(n);null!==s&&(e.splice(t,3),t-=3,Po(s,{pending:!0,data:i,method:n.method,action:r},r,i))}})))}function Nd(e){function t(t){return Ed(t,e)}null!==dd&&Ed(dd,e),null!==fd&&Ed(fd,e),null!==pd&&Ed(pd,e),gd.forEach(t),md.forEach(t);for(var n=0;n<yd.length;n++){var r=yd[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<yd.length&&null===(n=yd[0]).blockedOn;)bd(n),null===n.blockedOn&&yd.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var i=n[r],s=n[r+1],o=i[De]||null;if("function"===typeof s)o||Cd(n);else if(o){var a=null;if(s&&s.hasAttribute("formAction")){if(i=s,o=s[De]||null)a=o.formAction;else if(null!==cd(i))continue}else a=o.action;"function"===typeof a?n[r+1]=a:(n.splice(r,3),r-=3),Cd(n)}}}function xd(e){this._internalRoot=e}function Ad(e){this._internalRoot=e}Ad.prototype.render=xd.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Zh(t.current,Lc(),e,t,null,null)},Ad.prototype.unmount=xd.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Zh(e.current,2,null,e,null,null),qc(),t[Oe]=null}},Ad.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ae();e={blockedOn:null,target:e,priority:t};for(var n=0;n<yd.length&&0!==t&&t<yd[n].priority;n++);yd.splice(n,0,e),0===n&&bd(e)}};var Pd=i.version;if("19.1.0"!==Pd)throw Error(o(527,Pd,"19.1.0"));L.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return u(i),e;if(s===r)return u(i),t;s=s.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,c=i.child;c;){if(c===n){a=!0,n=i,r=s;break}if(c===r){a=!0,r=i,n=s;break}c=c.sibling}if(!a){for(c=s.child;c;){if(c===n){a=!0,n=s,r=i;break}if(c===r){a=!0,r=s,n=i;break}c=c.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?h(e):null)?null:e.stateNode};var Rd={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.1.0"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Dd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dd.isDisabled&&Dd.supportsFiber)try{ue=Dd.inject(Rd),he=Dd}catch(Od){}}t.createRoot=function(e,t){if(!a(e))throw Error(o(299));var n=!1,r="",i=va,s=_a,l=wa;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(i=t.onUncaughtError),void 0!==t.onCaughtError&&(s=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Jh(e,1,!1,null,0,n,r,i,s,l,0,null),e[Oe]=t.current,zu(e),new xd(t)}},43:(e,t,n)=>{e.exports=n(288)},288:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function v(){}function _(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var w=_.prototype=new v;w.constructor=_,g(w,y.prototype),w.isPureReactComponent=!0;var b=Array.isArray,T={H:null,A:null,T:null,S:null,V:null},I=Object.prototype.hasOwnProperty;function S(e,t,r,i,s,o){return r=o.ref,{$$typeof:n,type:e,key:t,ref:void 0!==r?r:null,props:o}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var k=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(){}function x(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(a){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0;break;case d:return x((u=e._init)(e._payload),t,i,s,o)}}if(u)return o=o(e),u=""===s?"."+C(e,0):s,b(o)?(i="",null!=u&&(i=u.replace(k,"$&/")+"/"),x(o,t,i,"",(function(e){return e}))):null!=o&&(E(o)&&(l=o,c=i+(null==o.key||e&&e.key===o.key?"":(""+o.key).replace(k,"$&/")+"/")+u,o=S(l.type,c,void 0,0,0,l.props)),t.push(o)),1;u=0;var h,p=""===s?".":s+":";if(b(e))for(var g=0;g<e.length;g++)u+=x(s=e[g],t,i,a=p+C(s,g),o);else if("function"===typeof(g=null===(h=e)||"object"!==typeof h?null:"function"===typeof(h=f&&h[f]||h["@@iterator"])?h:null))for(e=g.call(e),g=0;!(s=e.next()).done;)u+=x(s=s.value,t,i,a=p+C(s,g++),o);else if("object"===a){if("function"===typeof e.then)return x(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(N,N):(e.status="pending",e.then((function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)}),(function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)}))),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,i,s,o);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function A(e,t,n){if(null==e)return e;var r=[],i=0;return x(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function D(){}t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=_,t.StrictMode=s,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=T,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return T.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=g({},e.props),i=e.key;if(null!=t)for(s in void 0!==t.ref&&void 0,void 0!==t.key&&(i=""+t.key),t)!I.call(t,s)||"key"===s||"__self"===s||"__source"===s||"ref"===s&&void 0===t.ref||(r[s]=t[s]);var s=arguments.length-2;if(1===s)r.children=n;else if(1<s){for(var o=Array(s),a=0;a<s;a++)o[a]=arguments[a+2];r.children=o}return S(e.type,i,void 0,0,0,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:a,_context:e},e},t.createElement=function(e,t,n){var r,i={},s=null;if(null!=t)for(r in void 0!==t.key&&(s=""+t.key),t)I.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(i[r]=t[r]);var o=arguments.length-2;if(1===o)i.children=n;else if(1<o){for(var a=Array(o),l=0;l<o;l++)a[l]=arguments[l+2];i.children=a}if(e&&e.defaultProps)for(r in o=e.defaultProps)void 0===i[r]&&(i[r]=o[r]);return S(e,s,void 0,0,0,i)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=T.T,n={};T.T=n;try{var r=e(),i=T.S;null!==i&&i(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(D,R)}catch(MS){R(MS)}finally{T.T=t}},t.unstable_useCacheRefresh=function(){return T.H.useCacheRefresh()},t.use=function(e){return T.H.use(e)},t.useActionState=function(e,t,n){return T.H.useActionState(e,t,n)},t.useCallback=function(e,t){return T.H.useCallback(e,t)},t.useContext=function(e){return T.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return T.H.useDeferredValue(e,t)},t.useEffect=function(e,t,n){var r=T.H;if("function"===typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(e,t)},t.useId=function(){return T.H.useId()},t.useImperativeHandle=function(e,t,n){return T.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return T.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return T.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return T.H.useMemo(e,t)},t.useOptimistic=function(e,t){return T.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return T.H.useReducer(e,t,n)},t.useRef=function(e){return T.H.useRef(e)},t.useState=function(e){return T.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return T.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return T.H.useTransition()},t.version="19.1.0"},358:(e,t)=>{const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,r=/^[\u0021-\u003A\u003C-\u007E]*$/,i=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,a=(()=>{const e=function(){};return e.prototype=Object.create(null),e})();function l(e,t,n){do{const n=e.charCodeAt(t);if(32!==n&&9!==n)return t}while(++t<n);return n}function c(e,t,n){for(;t>n;){const n=e.charCodeAt(--t);if(32!==n&&9!==n)return t+1}return n}function u(e){if(-1===e.indexOf("%"))return e;try{return decodeURIComponent(e)}catch(WM){return e}}},391:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},579:(e,t,n)=>{e.exports=n(799)},672:(e,t,n)=>{var r=n(43);function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var o={d:{f:s,r:function(){throw Error(i(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},a=Symbol.for("react.portal");var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(i(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:a,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=o.p;try{if(l.T=null,o.p=2,e)return e()}finally{l.T=t,o.p=n,o.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,o.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&o.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin),i="string"===typeof t.integrity?t.integrity:void 0,s="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?o.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:i,fetchPriority:s}):"script"===n&&o.d.X(e,{crossOrigin:r,integrity:i,fetchPriority:s,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);o.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&o.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin);o.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);o.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else o.d.m(e)},t.requestFormReset=function(e){o.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.1.0"},799:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function i(e,t,r){var i=null;if(void 0!==r&&(i=""+r),void 0!==t.key&&(i=""+t.key),"key"in t)for(var s in r={},t)"key"!==s&&(r[s]=t[s]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:i,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=i,t.jsxs=i},853:(e,t,n)=>{e.exports=n(896)},896:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,g=!1,m=!1,y=!1,v="function"===typeof setTimeout?setTimeout:null,_="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function T(e){if(m=!1,b(e),!g)if(null!==r(c))g=!0,S||(S=!0,I());else{var t=r(u);null!==t&&R(T,t.startTime-e)}}var I,S=!1,E=-1,k=5,C=-1;function N(){return!!y||!(t.unstable_now()-C<k)}function x(){if(y=!1,S){var e=t.unstable_now();C=e;var n=!0;try{e:{g=!1,m&&(m=!1,_(E),E=-1),p=!0;var s=f;try{t:{for(b(e),d=r(c);null!==d&&!(d.expirationTime>e&&N());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof a){d.callback=a,b(e),n=!0;break t}d===r(c)&&i(c),b(e)}else i(c);d=r(c)}if(null!==d)n=!0;else{var l=r(u);null!==l&&R(T,l.startTime-e),n=!1}}break e}finally{d=null,f=s,p=!1}n=void 0}}finally{n?I():S=!1}}}if("function"===typeof w)I=function(){w(x)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,P=A.port2;A.port1.onmessage=x,I=function(){P.postMessage(null)}}else I=function(){v(x,0)};function R(e,n){E=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_requestPaint=function(){y=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(m?(_(E),E=-1):m=!0,R(T,s-o))):(e.sortIndex=a,n(c,e),g||p||(g=!0,S||(S=!0,I()))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(WM){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/Volpan28/LetsAchive4.github.io/";var r={};n.r(r),n.d(r,{FirebaseError:()=>an,SDK_VERSION:()=>ti,_DEFAULT_ENTRY_NAME:()=>Ur,_addComponent:()=>Br,_addOrOverwriteComponent:()=>Hr,_apps:()=>Vr,_clearComponents:()=>$r,_components:()=>qr,_getProvider:()=>Kr,_isFirebaseApp:()=>Qr,_isFirebaseServerApp:()=>Yr,_registerComponent:()=>Wr,_removeServiceInstance:()=>Gr,_serverApps:()=>zr,deleteApp:()=>oi,getApp:()=>ii,getApps:()=>si,initializeApp:()=>ni,initializeServerApp:()=>ri,onLog:()=>li,registerVersion:()=>ai,setLogLevel:()=>ci});var i=n(43),s=n(391);function o(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function l(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}function c(e,t,n){return(t=l(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n(358);const d=["sri"],f=["page"],p=["page","matches"],g=["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],m=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],y=["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"];var v="popstate";function _(){return k((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return I("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:S(t)}),null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function w(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function b(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(WM){}}}function T(e,t){return{usr:e.state,key:e.key,idx:t}}function I(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return h(h({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?E(t):t),{},{state:n,key:t&&t.key||r||Math.random().toString(36).substring(2,10)})}function S(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function E(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function k(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a="POP",l=null,c=u();function u(){return(o.state||{idx:null}).idx}function d(){a="POP";let e=u(),t=null==e?null:e-c;c=e,l&&l({action:a,location:p.location,delta:t})}function f(e){return C(e)}null==c&&(c=0,o.replaceState(h(h({},o.state),{},{idx:c}),""));let p={get action(){return a},get location(){return e(i,o)},listen(e){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(v,d),l=e,()=>{i.removeEventListener(v,d),l=null}},createHref:e=>t(i,e),createURL:f,encodeLocation(e){let t=f(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){a="PUSH";let r=I(p.location,e,t);n&&n(r,e),c=u()+1;let h=T(r,c),d=p.createHref(r);try{o.pushState(h,"",d)}catch(MS){if(MS instanceof DOMException&&"DataCloneError"===MS.name)throw MS;i.location.assign(d)}s&&l&&l({action:a,location:p.location,delta:1})},replace:function(e,t){a="REPLACE";let r=I(p.location,e,t);n&&n(r,e),c=u();let i=T(r,c),h=p.createHref(r);o.replaceState(i,"",h),s&&l&&l({action:a,location:p.location,delta:0})},go:e=>o.go(e)};return p}function C(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="http://localhost";"undefined"!==typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href),w(n,"No window.location.(origin|href) available to create URL");let r="string"===typeof e?e:S(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}new WeakMap;function N(e,t){return x(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function x(e,t,n,r){let i=H(("string"===typeof t?E(t):t).pathname||"/",n);if(null==i)return null;let s=A(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(s);let o=null;for(let a=0;null==o&&a<s.length;++a){let e=B(i);o=V(s[a],e,r)}return o}function A(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=(e,i,s)=>{let o={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(w(o.relativePath.startsWith(r),'Absolute route path "'.concat(o.relativePath,'" nested under path "').concat(r,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),o.relativePath=o.relativePath.slice(r.length));let a=Y([r,o.relativePath]),l=n.concat(o);e.children&&e.children.length>0&&(w(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(a,'".')),A(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:j(a,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!==(n=e.path)&&void 0!==n&&n.includes("?"))for(let r of P(e.path))i(e,t,r);else i(e,t)})),t}function P(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let o=P(r.join("/")),a=[];return a.push(...o.map((e=>""===e?s:[s,e].join("/")))),i&&a.push(...o),a.map((t=>e.startsWith("/")&&""===t?"/":t))}var R=/^:[\w-]+$/,D=3,O=2,L=1,M=10,F=-2,U=e=>"*"===e;function j(e,t){let n=e.split("/"),r=n.length;return n.some(U)&&(r+=F),t&&(r+=O),n.filter((e=>!U(e))).reduce(((e,t)=>e+(R.test(t)?D:""===t?L:M)),r)}function V(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:r}=e,i={},s="/",o=[];for(let a=0;a<r.length;++a){let e=r[a],l=a===r.length-1,c="/"===s?t:t.slice(s.length)||"/",u=z({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),h=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=z({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),o.push({params:i,pathname:Y([s,u.pathname]),pathnameBase:$(Y([s,u.pathnameBase])),route:h}),"/"!==u.pathnameBase&&(s=Y([s,u.pathnameBase]))}return o}function z(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=q(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{}),pathname:s,pathnameBase:o,pattern:e}}function q(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];b("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));return e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function B(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(MS){return b(!1,'The URL path "'.concat(e,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(MS,").")),e}}function H(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function W(e,t,n,r){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(t,"` field [").concat(JSON.stringify(r),"].  Please separate it out to the `to.").concat(n,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function K(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function G(e){let t=K(e);return t.map(((e,n)=>n===t.length-1?e.pathname:e.pathnameBase))}function Q(e,t,n){let r,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?r=E(e):(r=h({},e),w(!r.pathname||!r.pathname.includes("?"),W("?","pathname","search",r)),w(!r.pathname||!r.pathname.includes("#"),W("#","pathname","hash",r)),w(!r.search||!r.search.includes("#"),W("#","search","hash",r)));let s,o=""===e||""===r.pathname,a=o?"/":r.pathname;if(null==a)s=n;else{let e=t.length-1;if(!i&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}s=e>=0?t[e]:"/"}let l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:n,search:r="",hash:i=""}="string"===typeof e?E(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:J(r),hash:X(i)}}(r,s),c=a&&"/"!==a&&a.endsWith("/"),u=(o||"."===a)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}var Y=e=>e.join("/").replace(/\/\/+/g,"/"),$=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),J=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",X=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function Z(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var ee=["POST","PUT","PATCH","DELETE"],te=(new Set(ee),["GET",...ee]);new Set(te),Symbol("ResetLoaderData");var ne=i.createContext(null);ne.displayName="DataRouter";var re=i.createContext(null);re.displayName="DataRouterState";var ie=i.createContext({isTransitioning:!1});ie.displayName="ViewTransition";var se=i.createContext(new Map);se.displayName="Fetchers";var oe=i.createContext(null);oe.displayName="Await";var ae=i.createContext(null);ae.displayName="Navigation";var le=i.createContext(null);le.displayName="Location";var ce=i.createContext({outlet:null,matches:[],isDataRoute:!1});ce.displayName="Route";var ue=i.createContext(null);ue.displayName="RouteError";function he(){return null!=i.useContext(le)}function de(){return w(he(),"useLocation() may be used only in the context of a <Router> component."),i.useContext(le).location}var fe="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function pe(e){i.useContext(ae).static||i.useLayoutEffect(e)}function ge(){let{isDataRoute:e}=i.useContext(ce);return e?function(){let{router:e}=Se("useNavigate"),t=ke("useNavigate"),n=i.useRef(!1);pe((()=>{n.current=!0}));let r=i.useCallback((async function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};b(n.current,fe),n.current&&("number"===typeof r?e.navigate(r):await e.navigate(r,h({fromRouteId:t},i)))}),[e,t]);return r}():function(){w(he(),"useNavigate() may be used only in the context of a <Router> component.");let e=i.useContext(ne),{basename:t,navigator:n}=i.useContext(ae),{matches:r}=i.useContext(ce),{pathname:s}=de(),o=JSON.stringify(G(r)),a=i.useRef(!1);pe((()=>{a.current=!0}));let l=i.useCallback((function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(b(a.current,fe),!a.current)return;if("number"===typeof r)return void n.go(r);let l=Q(r,JSON.parse(o),s,"path"===i.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:Y([t,l.pathname])),(i.replace?n.replace:n.push)(l,i.state,i)}),[t,n,o,s,e]);return l}()}i.createContext(null);function me(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:n}=i.useContext(ce),{pathname:r}=de(),s=JSON.stringify(G(n));return i.useMemo((()=>Q(e,JSON.parse(s),r,"path"===t)),[e,s,r,t])}function ye(e,t,n,r){w(he(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s,static:o}=i.useContext(ae),{matches:a}=i.useContext(ce),l=a[a.length-1],c=l?l.params:{},u=l?l.pathname:"/",d=l?l.pathnameBase:"/",f=l&&l.route;{let e=f&&f.path||"";xe(u,!f||e.endsWith("*")||e.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(u,'" (under <Route path="').concat(e,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(e,'"> to <Route path="').concat("/"===e?"*":"".concat(e,"/*"),'">.'))}let p,g=de();if(t){var m;let e="string"===typeof t?E(t):t;w("/"===d||(null===(m=e.pathname)||void 0===m?void 0:m.startsWith(d)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(d,'" but pathname "').concat(e.pathname,'" was given in the `location` prop.')),p=e}else p=g;let y=p.pathname||"/",v=y;if("/"!==d){let e=d.replace(/^\//,"").split("/");v="/"+y.replace(/^\//,"").split("/").slice(e.length).join("/")}let _=!o&&n&&n.matches&&n.matches.length>0?n.matches:N(e,{pathname:v});b(f||null!=_,'No routes matched location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" ')),b(null==_||void 0!==_[_.length-1].route.element||void 0!==_[_.length-1].route.Component||void 0!==_[_.length-1].route.lazy,'Matched leaf route at location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let T=Te(_&&_.map((e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:Y([d,s.encodeLocation?s.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:Y([d,s.encodeLocation?s.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),a,n,r);return t&&T?i.createElement(le.Provider,{value:{location:h({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:"POP"}},T):T}function ve(){let e=Ce(),t=Z(e)?"".concat(e.status," ").concat(e.statusText):e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},a=null;return console.error("Error handled by React Router default ErrorBoundary:",e),a=i.createElement(i.Fragment,null,i.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),i.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",i.createElement("code",{style:o},"ErrorBoundary")," or"," ",i.createElement("code",{style:o},"errorElement")," prop on your route.")),i.createElement(i.Fragment,null,i.createElement("h2",null,"Unexpected Application Error!"),i.createElement("h3",{style:{fontStyle:"italic"}},t),n?i.createElement("pre",{style:s},n):null,a)}var _e=i.createElement(ve,null),we=class extends i.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?i.createElement(ce.Provider,{value:this.props.routeContext},i.createElement(ue.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function be(e){let{routeContext:t,match:n,children:r}=e,s=i.useContext(ne);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),i.createElement(ce.Provider,{value:t},r)}function Te(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null==e){if(!n)return null;if(n.errors)e=n.matches;else{if(0!==t.length||n.initialized||!(n.matches.length>0))return null;e=n.matches}}let r=e,s=null===n||void 0===n?void 0:n.errors;if(null!=s){let e=r.findIndex((e=>e.route.id&&void 0!==(null===s||void 0===s?void 0:s[e.route.id])));w(e>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(s).join(","))),r=r.slice(0,Math.min(r.length,e+1))}let o=!1,a=-1;if(n)for(let i=0;i<r.length;i++){let e=r[i];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(a=i),e.route.id){let{loaderData:t,errors:i}=n,s=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!i||void 0===i[e.route.id]);if(e.route.lazy||s){o=!0,r=a>=0?r.slice(0,a+1):[r[0]];break}}}return r.reduceRight(((e,l,c)=>{let u,h=!1,d=null,f=null;n&&(u=s&&l.route.id?s[l.route.id]:void 0,d=l.route.errorElement||_e,o&&(a<0&&0===c?(xe("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,f=null):a===c&&(h=!0,f=l.route.hydrateFallbackElement||null)));let p=t.concat(r.slice(0,c+1)),g=()=>{let t;return t=u?d:h?f:l.route.Component?i.createElement(l.route.Component,null):l.route.element?l.route.element:e,i.createElement(be,{match:l,routeContext:{outlet:e,matches:p,isDataRoute:null!=n},children:t})};return n&&(l.route.ErrorBoundary||l.route.errorElement||0===c)?i.createElement(we,{location:n.location,revalidation:n.revalidation,component:d,error:u,children:g(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):g()}),null)}function Ie(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function Se(e){let t=i.useContext(ne);return w(t,Ie(e)),t}function Ee(e){let t=i.useContext(re);return w(t,Ie(e)),t}function ke(e){let t=function(e){let t=i.useContext(ce);return w(t,Ie(e)),t}(e),n=t.matches[t.matches.length-1];return w(n.route.id,"".concat(e,' can only be used on routes that contain a unique "id"')),n.route.id}function Ce(){var e;let t=i.useContext(ue),n=Ee("useRouteError"),r=ke("useRouteError");return void 0!==t?t:null===(e=n.errors)||void 0===e?void 0:e[r]}var Ne={};function xe(e,t,n){t||Ne[e]||(Ne[e]=!0,b(!1,n))}i.memo((function(e){let{routes:t,future:n,state:r}=e;return ye(t,void 0,r,n)}));function Ae(e){let{to:t,replace:n,state:r,relative:s}=e;w(he(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=i.useContext(ae);b(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=i.useContext(ce),{pathname:l}=de(),c=ge(),u=Q(t,G(a),l,"path"===s),h=JSON.stringify(u);return i.useEffect((()=>{c(JSON.parse(h),{replace:n,state:r,relative:s})}),[c,h,s,n,r]),null}function Pe(e){w(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Re(e){let{basename:t="/",children:n=null,location:r,navigationType:s="POP",navigator:o,static:a=!1}=e;w(!he(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),c=i.useMemo((()=>({basename:l,navigator:o,static:a,future:{}})),[l,o,a]);"string"===typeof r&&(r=E(r));let{pathname:u="/",search:h="",hash:d="",state:f=null,key:p="default"}=r,g=i.useMemo((()=>{let e=H(u,l);return null==e?null:{location:{pathname:e,search:h,hash:d,state:f,key:p},navigationType:s}}),[l,u,h,d,f,p,s]);return b(null!=g,'<Router basename="'.concat(l,'"> is not able to match the URL "').concat(u).concat(h).concat(d,"\" because it does not start with the basename, so the <Router> won't render anything.")),null==g?null:i.createElement(ae.Provider,{value:c},i.createElement(le.Provider,{children:n,value:g}))}function De(e){let{children:t,location:n}=e;return ye(Oe(t),n)}i.Component;function Oe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];return i.Children.forEach(e,((e,r)=>{if(!i.isValidElement(e))return;let s=[...t,r];if(e.type===i.Fragment)return void n.push.apply(n,Oe(e.props.children,s));w(e.type===Pe,"[".concat("string"===typeof e.type?e.type:e.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),w(!e.props.index||!e.props.children,"An index route cannot have child routes.");let o={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=Oe(e.props.children,s)),n.push(o)})),n}var Le="get",Me="application/x-www-form-urlencoded";function Fe(e){return null!=e&&"string"===typeof e.tagName}var Ue=null;var je=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ve(e){return null==e||je.has(e)?e:(b(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(Me,'"')),null)}function ze(e,t){let n,r,i,s,o;if(Fe(a=e)&&"form"===a.tagName.toLowerCase()){let o=e.getAttribute("action");r=o?H(o,t):null,n=e.getAttribute("method")||Le,i=Ve(e.getAttribute("enctype"))||Me,s=new FormData(e)}else if(function(e){return Fe(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return Fe(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let o=e.form;if(null==o)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let a=e.getAttribute("formaction")||o.getAttribute("action");if(r=a?H(a,t):null,n=e.getAttribute("formmethod")||o.getAttribute("method")||Le,i=Ve(e.getAttribute("formenctype"))||Ve(o.getAttribute("enctype"))||Me,s=new FormData(o,e),!function(){if(null===Ue)try{new FormData(document.createElement("form"),0),Ue=!1}catch(WM){Ue=!0}return Ue}()){let{name:t,type:n,value:r}=e;if("image"===n){let e=t?"".concat(t,"."):"";s.append("".concat(e,"x"),"0"),s.append("".concat(e,"y"),"0")}else t&&s.append(t,r)}}else{if(Fe(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Le,r=null,i=Me,o=e}var a;return s&&"text/plain"===i&&(o=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:o}}function qe(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}async function Be(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(MS){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(MS),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise((()=>{}))}}function He(e){return null!=e&&"string"===typeof e.page}function We(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function Ke(e,t,n,r,i,s){let o=(e,t)=>!n[t]||e.route.id!==n[t].route.id,a=(e,t)=>{var r;return n[t].pathname!==e.pathname||(null===(r=n[t].route.path)||void 0===r?void 0:r.endsWith("*"))&&n[t].params["*"]!==e.params["*"]};return"assets"===s?t.filter(((e,t)=>o(e,t)||a(e,t))):"data"===s?t.filter(((t,s)=>{let l=r.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(o(t,s)||a(t,s))return!0;if(t.route.shouldRevalidate){var c;let r=t.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:(null===(c=n[0])||void 0===c?void 0:c.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof r)return r}return!0})):[]}function Ge(e,t){let{includeHydrateFallback:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=e.map((e=>{let r=t.routes[e.route.id];if(!r)return[];let i=[r.module];return r.clientActionModule&&(i=i.concat(r.clientActionModule)),r.clientLoaderModule&&(i=i.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(i=i.concat(r.hydrateFallbackModule)),r.imports&&(i=i.concat(r.imports)),i})).flat(1),[...new Set(r)];var r}function Qe(e,t){let n=new Set,r=new Set(t);return e.reduce(((e,i)=>{if(t&&!He(i)&&"script"===i.as&&i.href&&r.has(i.href))return e;let s=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}(i));return n.has(s)||(n.add(s),e.push({key:s,link:i})),e}),[])}function Ye(e){return{__html:e}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;Symbol("SingleFetchRedirect");var $e=new Set([100,101,204,205]);function Je(e,t){let n="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===n.pathname?n.pathname="_root.data":t&&"/"===H(n.pathname,t)?n.pathname="".concat(t.replace(/\/$/,""),"/_root.data"):n.pathname="".concat(n.pathname.replace(/\/$/,""),".data"),n}i.Component;function Xe(e){let{error:t,isOutsideRemixApp:n}=e;console.error(t);let r,s=i.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if(Z(t))return i.createElement(Ze,{title:"Unhandled Thrown Response!"},i.createElement("h1",{style:{fontSize:"24px"}},t.status," ",t.statusText),s);if(t instanceof Error)r=t;else{let e=null==t?"Unknown Error":"object"===typeof t&&"toString"in t?t.toString():JSON.stringify(t);r=new Error(e)}return i.createElement(Ze,{title:"Application Error!",isOutsideRemixApp:n},i.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),i.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},r.stack),s)}function Ze(e){var t;let{title:n,renderScripts:r,isOutsideRemixApp:s,children:o}=e,{routeModules:a}=it();return null!==(t=a.root)&&void 0!==t&&t.Layout&&!s?o:i.createElement("html",{lang:"en"},i.createElement("head",null,i.createElement("meta",{charSet:"utf-8"}),i.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),i.createElement("title",null,n)),i.createElement("body",null,i.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},o,r?i.createElement(ht,null):null)))}function et(e,t){return"lazy"===e.mode&&!0===t}function tt(){let e=i.useContext(ne);return qe(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function nt(){let e=i.useContext(re);return qe(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var rt=i.createContext(void 0);function it(){let e=i.useContext(rt);return qe(e,"You must render this element inside a <HydratedRouter> element"),e}function st(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function ot(e,t,n){if(n&&!ut)return[e[0]];if(t){let n=e.findIndex((e=>void 0!==t[e.route.id]));return e.slice(0,n+1)}return e}function at(e){let{page:t}=e,n=o(e,f),{router:r}=tt(),s=i.useMemo((()=>N(r.routes,t,r.basename)),[r.routes,t,r.basename]);return s?i.createElement(ct,h({page:t,matches:s},n)):null}function lt(e){let{manifest:t,routeModules:n}=it(),[r,s]=i.useState([]);return i.useEffect((()=>{let r=!1;return async function(e,t,n){return Qe((await Promise.all(e.map((async e=>{let r=t.routes[e.route.id];if(r){let e=await Be(r,n);return e.links?e.links():[]}return[]})))).flat(1).filter(We).filter((e=>"stylesheet"===e.rel||"preload"===e.rel)).map((e=>"stylesheet"===e.rel?h(h({},e),{},{rel:"prefetch",as:"style"}):h(h({},e),{},{rel:"prefetch"}))))}(e,t,n).then((e=>{r||s(e)})),()=>{r=!0}}),[e,t,n]),r}function ct(e){let{page:t,matches:n}=e,r=o(e,p),s=de(),{manifest:a,routeModules:l}=it(),{basename:c}=tt(),{loaderData:u,matches:d}=nt(),f=i.useMemo((()=>Ke(t,n,d,a,s,"data")),[t,n,d,a,s]),g=i.useMemo((()=>Ke(t,n,d,a,s,"assets")),[t,n,d,a,s]),m=i.useMemo((()=>{if(t===s.pathname+s.search+s.hash)return[];let e=new Set,r=!1;if(n.forEach((t=>{var n;let i=a.routes[t.route.id];i&&i.hasLoader&&(!f.some((e=>e.route.id===t.route.id))&&t.route.id in u&&null!==(n=l[t.route.id])&&void 0!==n&&n.shouldRevalidate||i.hasClientLoader?r=!0:e.add(t.route.id))})),0===e.size)return[];let i=Je(t,c);return r&&e.size>0&&i.searchParams.set("_routes",n.filter((t=>e.has(t.route.id))).map((e=>e.route.id)).join(",")),[i.pathname+i.search]}),[c,u,s,a,f,n,t,l]),y=i.useMemo((()=>Ge(g,a)),[g,a]),v=lt(g);return i.createElement(i.Fragment,null,m.map((e=>i.createElement("link",h({key:e,rel:"prefetch",as:"fetch",href:e},r)))),y.map((e=>i.createElement("link",h({key:e,rel:"modulepreload",href:e},r)))),v.map((e=>{let{key:t,link:n}=e;return i.createElement("link",h({key:t},n))})))}rt.displayName="FrameworkContext";var ut=!1;function ht(e){let{manifest:t,serverHandoffString:n,isSpaMode:r,renderMeta:s,routeDiscovery:a,ssr:l}=it(),{router:c,static:u,staticContext:f}=tt(),{matches:p}=nt(),g=et(a,l);s&&(s.didRenderScripts=!0);let m=ot(p,null,r);i.useEffect((()=>{ut=!0}),[]);let y=i.useMemo((()=>{var r;let s=f?"window.__reactRouterContext = ".concat(n,";").concat("window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());"):" ",a=u?"".concat(null!==(r=t.hmr)&&void 0!==r&&r.runtime?"import ".concat(JSON.stringify(t.hmr.runtime),";"):"").concat(g?"":"import ".concat(JSON.stringify(t.url)),";\n").concat(m.map(((e,n)=>{let r="route".concat(n),i=t.routes[e.route.id];qe(i,"Route ".concat(e.route.id," not found in manifest"));let{clientActionModule:s,clientLoaderModule:o,clientMiddlewareModule:a,hydrateFallbackModule:l,module:c}=i,u=[...s?[{module:s,varName:"".concat(r,"_clientAction")}]:[],...o?[{module:o,varName:"".concat(r,"_clientLoader")}]:[],...a?[{module:a,varName:"".concat(r,"_clientMiddleware")}]:[],...l?[{module:l,varName:"".concat(r,"_HydrateFallback")}]:[],{module:c,varName:"".concat(r,"_main")}];return 1===u.length?"import * as ".concat(r," from ").concat(JSON.stringify(c),";"):[u.map((e=>"import * as ".concat(e.varName,' from "').concat(e.module,'";'))).join("\n"),"const ".concat(r," = {").concat(u.map((e=>"...".concat(e.varName))).join(","),"};")].join("\n")})).join("\n"),"\n  ").concat(g?"window.__reactRouterManifest = ".concat(JSON.stringify(function(e,t){let{sri:n}=e,r=o(e,d),i=new Set(t.state.matches.map((e=>e.route.id))),s=t.state.location.pathname.split("/").filter(Boolean),a=["/"];for(s.pop();s.length>0;)a.push("/".concat(s.join("/"))),s.pop();a.forEach((e=>{let n=N(t.routes,e,t.basename);n&&n.forEach((e=>i.add(e.route.id)))}));let l=[...i].reduce(((e,t)=>Object.assign(e,{[t]:r.routes[t]})),{});return h(h({},r),{},{routes:l,sri:!!n||void 0})}(t,c),null,2),";"):"","\n  window.__reactRouterRouteModules = {").concat(m.map(((e,t)=>"".concat(JSON.stringify(e.route.id),":route").concat(t))).join(","),"};\n\nimport(").concat(JSON.stringify(t.entry.module),");"):" ";return i.createElement(i.Fragment,null,i.createElement("script",h(h({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:Ye(s),type:void 0})),i.createElement("script",h(h({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:Ye(a),type:"module",async:!0})))}),[]),v=ut?[]:(_=t.entry.imports.concat(Ge(m,t,{includeHydrateFallback:!0})),[...new Set(_)]);var _;let w="object"===typeof t.sri?t.sri:{};return ut?null:i.createElement(i.Fragment,null,"object"===typeof t.sri?i.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:w})}}):null,g?null:i.createElement("link",{rel:"modulepreload",href:t.url,crossOrigin:e.crossOrigin,integrity:w[t.url],suppressHydrationWarning:!0}),i.createElement("link",{rel:"modulepreload",href:t.entry.module,crossOrigin:e.crossOrigin,integrity:w[t.entry.module],suppressHydrationWarning:!0}),v.map((t=>i.createElement("link",{key:t,rel:"modulepreload",href:t,crossOrigin:e.crossOrigin,integrity:w[t],suppressHydrationWarning:!0}))),y)}function dt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach((t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)}))}}var ft="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{ft&&(window.__reactRouterVersion="7.6.0")}catch(WM){}function pt(e){let{basename:t,children:n,window:r}=e,s=i.useRef();null==s.current&&(s.current=_({window:r,v5Compat:!0}));let o=s.current,[a,l]=i.useState({action:o.action,location:o.location}),c=i.useCallback((e=>{i.startTransition((()=>l(e)))}),[l]);return i.useLayoutEffect((()=>o.listen(c)),[o,c]),i.createElement(Re,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:o})}var gt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,mt=i.forwardRef((function(e,t){let n,{onClick:r,discover:s="render",prefetch:a="none",relative:l,reloadDocument:c,replace:u,state:d,target:f,to:p,preventScrollReset:m,viewTransition:y}=e,v=o(e,g),{basename:_}=i.useContext(ae),T="string"===typeof p&&gt.test(p),I=!1;if("string"===typeof p&&T&&(n=p,ft))try{let e=new URL(window.location.href),t=p.startsWith("//")?new URL(e.protocol+p):new URL(p),n=H(t.pathname,_);t.origin===e.origin&&null!=n?p=n+t.search+t.hash:I=!0}catch(WM){b(!1,'<Link to="'.concat(p,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}let E=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};w(he(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=i.useContext(ae),{hash:s,pathname:o,search:a}=me(e,{relative:t}),l=o;return"/"!==n&&(l="/"===o?n:Y([n,o])),r.createHref({pathname:l,search:a,hash:s})}(p,{relative:l}),[k,C,N]=function(e,t){let n=i.useContext(rt),[r,s]=i.useState(!1),[o,a]=i.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:h,onTouchStart:d}=t,f=i.useRef(null);i.useEffect((()=>{if("render"===e&&a(!0),"viewport"===e){let e=new IntersectionObserver((e=>{e.forEach((e=>{a(e.isIntersecting)}))}),{threshold:.5});return f.current&&e.observe(f.current),()=>{e.disconnect()}}}),[e]),i.useEffect((()=>{if(r){let e=setTimeout((()=>{a(!0)}),100);return()=>{clearTimeout(e)}}}),[r]);let p=()=>{s(!0)},g=()=>{s(!1),a(!1)};return n?"intent"!==e?[o,f,{}]:[o,f,{onFocus:st(l,p),onBlur:st(c,g),onMouseEnter:st(u,p),onMouseLeave:st(h,g),onTouchStart:st(d,p)}]:[!1,f,{}]}(a,v),x=function(e){let{target:t,replace:n,state:r,preventScrollReset:s,relative:o,viewTransition:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=ge(),c=de(),u=me(e,{relative:o});return i.useCallback((i=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(i,t)){i.preventDefault();let t=void 0!==n?n:S(c)===S(u);l(e,{replace:t,state:r,preventScrollReset:s,relative:o,viewTransition:a})}}),[c,l,u,n,r,t,e,s,o,a])}(p,{replace:u,state:d,target:f,preventScrollReset:m,relative:l,viewTransition:y});let A=i.createElement("a",h(h(h({},v),N),{},{href:n||E,onClick:I||c?r:function(e){r&&r(e),e.defaultPrevented||x(e)},ref:dt(t,C),target:f,"data-discover":T||"render"!==s?void 0:"true"}));return k&&!T?i.createElement(i.Fragment,null,A,i.createElement(at,{page:E})):A}));mt.displayName="Link";var yt=i.forwardRef((function(e,t){let{"aria-current":n="page",caseSensitive:r=!1,className:s="",end:a=!1,style:l,to:c,viewTransition:u,children:d}=e,f=o(e,m),p=me(c,{relative:f.relative}),g=de(),y=i.useContext(re),{navigator:v,basename:_}=i.useContext(ae),b=null!=y&&function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=i.useContext(ie);w(null!=n,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=wt("useViewTransitionState"),s=me(e,{relative:t.relative});if(!n.isTransitioning)return!1;let o=H(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=H(n.nextLocation.pathname,r)||n.nextLocation.pathname;return null!=z(s.pathname,a)||null!=z(s.pathname,o)}(p)&&!0===u,T=v.encodeLocation?v.encodeLocation(p).pathname:p.pathname,I=g.pathname,S=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;r||(I=I.toLowerCase(),S=S?S.toLowerCase():null,T=T.toLowerCase()),S&&_&&(S=H(S,_)||S);const E="/"!==T&&T.endsWith("/")?T.length-1:T.length;let k,C=I===T||!a&&I.startsWith(T)&&"/"===I.charAt(E),N=null!=S&&(S===T||!a&&S.startsWith(T)&&"/"===S.charAt(T.length)),x={isActive:C,isPending:N,isTransitioning:b},A=C?n:void 0;k="function"===typeof s?s(x):[s,C?"active":null,N?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let P="function"===typeof l?l(x):l;return i.createElement(mt,h(h({},f),{},{"aria-current":A,className:k,ref:t,style:P,to:c,viewTransition:u}),"function"===typeof d?d(x):d)}));yt.displayName="NavLink";var vt=i.forwardRef(((e,t)=>{let{discover:n="render",fetcherKey:r,navigate:s,reloadDocument:a,replace:l,state:c,method:u=Le,action:d,onSubmit:f,relative:p,preventScrollReset:g,viewTransition:m}=e,v=o(e,y),_=It(),b=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:n}=i.useContext(ae),r=i.useContext(ce);w(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),o=h({},me(e||".",{relative:t})),a=de();if(null==e){o.search=a.search;let e=new URLSearchParams(o.search),t=e.getAll("index"),n=t.some((e=>""===e));if(n){e.delete("index"),t.filter((e=>e)).forEach((t=>e.append("index",t)));let n=e.toString();o.search=n?"?".concat(n):""}}e&&"."!==e||!s.route.index||(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index");"/"!==n&&(o.pathname="/"===o.pathname?n:Y([n,o.pathname]));return S(o)}(d,{relative:p}),T="get"===u.toLowerCase()?"get":"post",I="string"===typeof d&&gt.test(d);return i.createElement("form",h(h({ref:t,method:T,action:b,onSubmit:a?f:e=>{if(f&&f(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,n=(null===t||void 0===t?void 0:t.getAttribute("formmethod"))||u;_(t||e.currentTarget,{fetcherKey:r,method:n,navigate:s,replace:l,state:c,relative:p,preventScrollReset:g,viewTransition:m})}},v),{},{"data-discover":I||"render"!==n?void 0:"true"}))}));function _t(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function wt(e){let t=i.useContext(ne);return w(t,_t(e)),t}vt.displayName="Form";var bt=0,Tt=()=>"__".concat(String(++bt),"__");function It(){let{router:e}=wt("useSubmit"),{basename:t}=i.useContext(ae),n=ke("useRouteId");return i.useCallback((async function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:s,method:o,encType:a,formData:l,body:c}=ze(r,t);if(!1===i.navigate){let t=i.fetcherKey||Tt();await e.fetch(t,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||o,formEncType:i.encType||a,flushSync:i.flushSync})}else await e.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||o,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})}),[e,t,n])}const St=!1,Et=!1,kt="${JSCORE_VERSION}",Ct=function(e,t){if(!e)throw Nt(t)},Nt=function(e){return new Error("Firebase Database ("+kt+") INTERNAL ASSERT FAILED: "+e)},xt=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},At={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),r.push(n[c],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(xt(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new Pt;const l=t<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Pt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Rt=function(e){const t=xt(e);return At.encodeByteArray(t,!0)},Dt=function(e){return Rt(e).replace(/\./g,"")},Ot=function(e){try{return At.decodeString(e,!0)}catch(WM){console.error("base64Decode failed: ",WM)}return null};function Lt(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Lt(e[n],t[n]));return e}function Mt(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const Ft=()=>{try{return Mt().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/Volpan28/LetsAchive4.github.io",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(WM){return}const t=e&&Ot(e[1]);return t&&JSON.parse(t)})()}catch(WM){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(WM))}},Ut=e=>{var t,n;return null===(n=null===(t=Ft())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},jt=()=>{var e;return null===(e=Ft())||void 0===e?void 0:e.config},Vt=e=>{var t;return null===(t=Ft())||void 0===t?void 0:t["_".concat(e)]};class zt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function qt(e){return e.endsWith(".cloudworkstations.dev")}async function Bt(e){return(await fetch(e,{credentials:"include"})).ok}function Ht(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Dt(JSON.stringify({alg:"none",type:"JWT"})),Dt(JSON.stringify(s)),""].join(".")}const Wt={};let Kt=!1;function Gt(e,t){if("undefined"===typeof window||"undefined"===typeof document||!qt(window.location.host)||Wt[e]===t||Wt[e]||Kt)return;function n(e){return"__firebase__banner__".concat(e)}Wt[e]=t;const r="__firebase__banner",i=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(Wt))Wt[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function s(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{Kt=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function o(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),o=document.getElementById(t)||document.createElement("span"),a=n("learnmore"),l=document.getElementById(a)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,a);const n=s();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,o,l,n),document.body.appendChild(t)}i?(o.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',o.innerText="Preview backend running in this workspace."),o.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",o):o()}function Qt(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Yt(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qt())}function $t(){var e;const t=null===(e=Ft())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(WM){return!1}}function Jt(){return"undefined"!==typeof WorkerGlobalScope&&"undefined"!==typeof self&&self instanceof WorkerGlobalScope}function Xt(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Zt(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function en(){const e=Qt();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function tn(){return!0===St||!0===Et}function nn(){return!$t()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function rn(){try{return"object"===typeof indexedDB}catch(WM){return!1}}function sn(){return new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(MS){t(MS)}}))}function on(){return!("undefined"===typeof navigator||!navigator.cookieEnabled)}class an extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,an.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ln.prototype.create)}}class ln{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(cn,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new an(n,s,t)}}const cn=/\{\$([^}]+)}/g;function un(e){return JSON.parse(e)}function hn(e){return JSON.stringify(e)}const dn=function(e){let t={},n={},r={},i="";try{const s=e.split(".");t=un(Ot(s[0])||""),n=un(Ot(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch(WM){}return{header:t,claims:n,data:r,signature:i}};function fn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function pn(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function gn(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function mn(e,t,n){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function yn(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(vn(n)&&vn(s)){if(!yn(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function vn(e){return null!==e&&"object"===typeof e}function _n(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function wn(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function bn(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class Tn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"===typeof e)for(let u=0;u<16;u++)n[u]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let u=0;u<16;u++)n[u]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let u=16;u<80;u++){const e=n[u-3]^n[u-8]^n[u-14]^n[u-16];n[u]=4294967295&(e<<1|e>>>31)}let r,i,s=this.chain_[0],o=this.chain_[1],a=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(let u=0;u<80;u++){u<40?u<20?(r=l^o&(a^l),i=1518500249):(r=o^a^l,i=1859775393):u<60?(r=o&a|l&(o|a),i=2400959708):(r=o^a^l,i=3395469782);const e=(s<<5|s>>>27)+r+c+i+n[u]&4294967295;c=l,l=a,a=4294967295&(o<<30|o>>>2),o=s,s=e}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let r=0;const i=this.buf_;let s=this.inbuf_;for(;r<t;){if(0===s)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[s]=e.charCodeAt(r),++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}else for(;r<t;)if(i[s]=e[r],++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let r=0;r<5;r++)for(let t=24;t>=0;t-=8)e[n]=this.chain_[r]>>t&255,++n;return e}}function In(e,t){const n=new Sn(e,t);return n.subscribe.bind(n)}class Sn{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=En),void 0===r.error&&(r.error=En),void 0===r.complete&&(r.complete=En);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(WM){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(WM){"undefined"!==typeof console&&console.error&&console.error(WM)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function En(){}const kn=function(e,t,n,r){let i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i){throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")}};function Cn(e,t){return"".concat(e," failed: ").concat(t," argument ")}function Nn(e,t,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(Cn(e,t)+"must be a valid function.")}function xn(e,t,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(Cn(e,t)+"must be a valid context object.")}const An=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function Pn(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3)*Math.pow(t,e),r=Math.round(.5*n*(Math.random()-.5)*2);return Math.min(144e5,n+r)}function Rn(e){return e&&e._delegate?e._delegate:e}class Dn{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const On="[DEFAULT]";class Ln{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new zt;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(WM){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(WM){if(r)return null;throw WM}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:On})}catch(WM){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(WM){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:On;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:On;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:On;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===On?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:On;return this.component?this.component.multipleInstances?e:On:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Mn{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Ln(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Fn=[];var Un;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Un||(Un={}));const jn={debug:Un.DEBUG,verbose:Un.VERBOSE,info:Un.INFO,warn:Un.WARN,error:Un.ERROR,silent:Un.SILENT},Vn=Un.INFO,zn={[Un.DEBUG]:"log",[Un.VERBOSE]:"log",[Un.INFO]:"info",[Un.WARN]:"warn",[Un.ERROR]:"error"},qn=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=zn[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class Bn{constructor(e){this.name=e,this._logLevel=Vn,this._logHandler=qn,this._userLogHandler=null,Fn.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Un))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?jn[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Un.DEBUG,...t),this._logHandler(this,Un.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Un.VERBOSE,...t),this._logHandler(this,Un.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Un.INFO,...t),this._logHandler(this,Un.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Un.WARN,...t),this._logHandler(this,Un.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Un.ERROR,...t),this._logHandler(this,Un.ERROR,...t)}}let Hn,Wn;const Kn=new WeakMap,Gn=new WeakMap,Qn=new WeakMap,Yn=new WeakMap,$n=new WeakMap;let Jn={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Gn.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Qn.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return er(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Xn(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Wn||(Wn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(tr(this),n),er(Kn.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return er(e.apply(tr(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(tr(this),t,...r);return Qn.set(s,t.sort?t.sort():[t]),er(s)}}function Zn(e){return"function"===typeof e?Xn(e):(e instanceof IDBTransaction&&function(e){if(Gn.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));Gn.set(e,t)}(e),t=e,(Hn||(Hn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,Jn):e);var t}function er(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(er(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&Kn.set(t,e)})).catch((()=>{})),$n.set(t,e),t}(e);if(Yn.has(e))return Yn.get(e);const t=Zn(e);return t!==e&&(Yn.set(e,t),$n.set(t,e)),t}const tr=e=>$n.get(e);function nr(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=er(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(er(o.result),e.oldVersion,e.newVersion,er(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}function rr(e){let{blocked:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",(e=>t(e.oldVersion,e))),er(n).then((()=>{}))}const ir=["get","getKey","getAll","getAllKeys","count"],sr=["put","add","delete","clear"],or=new Map;function ar(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(or.get(t))return or.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=sr.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!ir.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return or.set(t,s),s}Jn=(e=>h(h({},e),{},{get:(t,n,r)=>ar(t,n)||e.get(t,n,r),has:(t,n)=>!!ar(t,n)||e.has(t,n)}))(Jn);class lr{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const cr="@firebase/app",ur="0.12.3",hr=new Bn("@firebase/app"),dr="@firebase/app-compat",fr="@firebase/analytics-compat",pr="@firebase/analytics",gr="@firebase/app-check-compat",mr="@firebase/app-check",yr="@firebase/auth",vr="@firebase/auth-compat",_r="@firebase/database",wr="@firebase/data-connect",br="@firebase/database-compat",Tr="@firebase/functions",Ir="@firebase/functions-compat",Sr="@firebase/installations",Er="@firebase/installations-compat",kr="@firebase/messaging",Cr="@firebase/messaging-compat",Nr="@firebase/performance",xr="@firebase/performance-compat",Ar="@firebase/remote-config",Pr="@firebase/remote-config-compat",Rr="@firebase/storage",Dr="@firebase/storage-compat",Or="@firebase/firestore",Lr="@firebase/vertexai",Mr="@firebase/firestore-compat",Fr="firebase",Ur="[DEFAULT]",jr={[cr]:"fire-core",[dr]:"fire-core-compat",[pr]:"fire-analytics",[fr]:"fire-analytics-compat",[mr]:"fire-app-check",[gr]:"fire-app-check-compat",[yr]:"fire-auth",[vr]:"fire-auth-compat",[_r]:"fire-rtdb",[wr]:"fire-data-connect",[br]:"fire-rtdb-compat",[Tr]:"fire-fn",[Ir]:"fire-fn-compat",[Sr]:"fire-iid",[Er]:"fire-iid-compat",[kr]:"fire-fcm",[Cr]:"fire-fcm-compat",[Nr]:"fire-perf",[xr]:"fire-perf-compat",[Ar]:"fire-rc",[Pr]:"fire-rc-compat",[Rr]:"fire-gcs",[Dr]:"fire-gcs-compat",[Or]:"fire-fst",[Mr]:"fire-fst-compat",[Lr]:"fire-vertex","fire-js":"fire-js",[Fr]:"fire-js-all"},Vr=new Map,zr=new Map,qr=new Map;function Br(e,t){try{e.container.addComponent(t)}catch(WM){hr.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),WM)}}function Hr(e,t){e.container.addOrOverwriteComponent(t)}function Wr(e){const t=e.name;if(qr.has(t))return hr.debug("There were multiple attempts to register component ".concat(t,".")),!1;qr.set(t,e);for(const n of Vr.values())Br(n,e);for(const n of zr.values())Br(n,e);return!0}function Kr(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Gr(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ur;Kr(e,t).clearInstance(n)}function Qr(e){return void 0!==e.options}function Yr(e){return null!==e&&void 0!==e&&void 0!==e.settings}function $r(){qr.clear()}const Jr=new ln("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Xr{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Dn("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Jr.create("app-deleted",{appName:this._name})}}function Zr(e,t){const n=Ot(e.split(".")[1]);if(null===n)return void console.error("FirebaseServerApp ".concat(t," is invalid: second part could not be parsed."));if(void 0===JSON.parse(n).exp)return void console.error("FirebaseServerApp ".concat(t," is invalid: expiration claim could not be parsed"));1e3*JSON.parse(n).exp-(new Date).getTime()<=0&&console.error("FirebaseServerApp ".concat(t," is invalid: the token has expired."))}class ei extends Xr{constructor(e,t,n,r){const i=void 0!==t.automaticDataCollectionEnabled&&t.automaticDataCollectionEnabled,s={name:n,automaticDataCollectionEnabled:i};if(void 0!==e.apiKey)super(e,s,r);else{super(e.options,s,r)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:i},t),this._serverConfig.authIdToken&&Zr(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&Zr(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,"undefined"!==typeof FinalizationRegistry&&(this._finalizationRegistry=new FinalizationRegistry((()=>{this.automaticCleanup()}))),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,ai(cr,ur,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,void 0!==e&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){oi(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Jr.create("server-app-deleted")}}const ti="11.7.3";function ni(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Ur,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Jr.create("bad-app-name",{appName:String(i)});if(n||(n=jt()),!n)throw Jr.create("no-options");const s=Vr.get(i);if(s){if(yn(n,s.options)&&yn(r,s.config))return s;throw Jr.create("duplicate-app",{appName:i})}const o=new Mn(i);for(const l of qr.values())o.addComponent(l);const a=new Xr(n,r,o);return Vr.set(i,a),a}function ri(e,t){if(("undefined"!==typeof window||Jt())&&!Jt())throw Jr.create("invalid-server-app-environment");let n;void 0===t.automaticDataCollectionEnabled&&(t.automaticDataCollectionEnabled=!1),n=Qr(e)?e.options:e;const r=Object.assign(Object.assign({},t),n);void 0!==r.releaseOnDeref&&delete r.releaseOnDeref;if(void 0!==t.releaseOnDeref&&"undefined"===typeof FinalizationRegistry)throw Jr.create("finalization-registry-not-supported",{});const i=""+(e=>[...e].reduce(((e,t)=>Math.imul(31,e)+t.charCodeAt(0)|0),0))(JSON.stringify(r)),s=zr.get(i);if(s)return s.incRefCount(t.releaseOnDeref),s;const o=new Mn(i);for(const l of qr.values())o.addComponent(l);const a=new ei(n,t,i,o);return zr.set(i,a),a}function ii(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ur;const t=Vr.get(e);if(!t&&e===Ur&&jt())return ni();if(!t)throw Jr.create("no-app",{appName:e});return t}function si(){return Array.from(Vr.values())}async function oi(e){let t=!1;const n=e.name;if(Vr.has(n))t=!0,Vr.delete(n);else if(zr.has(n)){e.decRefCount()<=0&&(zr.delete(n),t=!0)}t&&(await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function ai(e,t,n){var r;let i=null!==(r=jr[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void hr.warn(e.join(" "))}Wr(new Dn("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}function li(e,t){if(null!==e&&"function"!==typeof e)throw Jr.create("invalid-log-argument");!function(e,t){for(const n of Fn){let r=null;t&&t.level&&(r=jn[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];const a=s.map((e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((e=>e)).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:Un[n].toLowerCase(),message:a,args:s,type:t.name})}}}(e,t)}function ci(e){var t;t=e,Fn.forEach((e=>{e.setLogLevel(t)}))}const ui="firebase-heartbeat-store";let hi=null;function di(){return hi||(hi=nr("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(ui)}catch(WM){console.warn(WM)}}}).catch((e=>{throw Jr.create("idb-open",{originalErrorMessage:e.message})}))),hi}async function fi(e,t){try{const n=(await di()).transaction(ui,"readwrite"),r=n.objectStore(ui);await r.put(t,pi(e)),await n.done}catch(WM){if(WM instanceof an)hr.warn(WM.message);else{const t=Jr.create("idb-set",{originalErrorMessage:null===WM||void 0===WM?void 0:WM.message});hr.warn(t.message)}}}function pi(e){return"".concat(e.name,"!").concat(e.options.appId)}class gi{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new yi(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=mi();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(WM){hr.warn(WM)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=mi(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),vi(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),vi(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=Dt(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(WM){return hr.warn(WM),""}}}function mi(){return(new Date).toISOString().substring(0,10)}class yi{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!rn()&&sn().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await di()).transaction(ui),n=await t.objectStore(ui).get(pi(e));return await t.done,n}catch(WM){if(WM instanceof an)hr.warn(WM.message);else{const t=Jr.create("idb-get",{originalErrorMessage:null===WM||void 0===WM?void 0:WM.message});hr.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return fi(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return fi(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function vi(e){return Dt(JSON.stringify({version:2,heartbeats:e})).length}var _i;_i="",Wr(new Dn("platform-logger",(e=>new lr(e)),"PRIVATE")),Wr(new Dn("heartbeat",(e=>new gi(e)),"PRIVATE")),ai(cr,ur,_i),ai(cr,ur,"esm2017"),ai("fire-js","");function wi(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;const bi="facebook.com",Ti="github.com",Ii="google.com",Si="password",Ei="twitter.com",ki="EMAIL_SIGNIN",Ci="PASSWORD_RESET",Ni="RECOVER_EMAIL",xi="REVERT_SECOND_FACTOR_ADDITION",Ai="VERIFY_AND_CHANGE_EMAIL",Pi="VERIFY_EMAIL";function Ri(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Di=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}},Oi=Ri,Li=new ln("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Mi=new Bn("@firebase/auth");function Fi(e){if(Mi.logLevel<=Un.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Mi.error("Auth (".concat(ti,"): ").concat(e),...n)}}function Ui(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Bi(e,...n)}function ji(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Bi(e,...n)}function Vi(e,t,n){const r=Object.assign(Object.assign({},Oi()),{[t]:n});return new ln("auth","Firebase",r).create(t,{appName:e.name})}function zi(e){return Vi(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function qi(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Ui(e,"argument-error"),Vi(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Bi(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Li.create(e,...n)}function Hi(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Bi(t,...r)}}function Wi(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Fi(t),new Error(t)}function Ki(e,t){e||Wi(t)}function Gi(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Qi(){return"http:"===Yi()||"https:"===Yi()}function Yi(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class $i{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ki(t>e,"Short delay should be less than long delay!"),this.isMobile=Yt()||Zt()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Qi()||Xt()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Ji(e,t){Ki(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class Xi{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Wi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Wi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Wi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Zi={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},es=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ts=new $i(3e4,6e4);function ns(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function rs(e,t,n,r){return is(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=_n(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:a},i);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),e.emulatorConfig&&qt(e.emulatorConfig.host)&&(l.credentials="include"),Xi.fetch()(await os(e,e.config.apiHost,n,o),l)}))}async function is(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Zi),t);try{const t=new ls(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw cs(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw cs(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw cs(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw cs(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw Vi(e,a,o);Ui(e,a)}}catch(WM){if(WM instanceof an)throw WM;Ui(e,"network-request-failed",{message:String(WM)})}}async function ss(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await rs(e,t,n,r,i);return"mfaPendingCredential"in s&&Ui(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function os(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r),s=e,o=s.config.emulator?Ji(e.config,i):"".concat(e.config.apiScheme,"://").concat(i);if(es.includes(n)&&(await s._persistenceManagerAvailable,"COOKIE"===s._getPersistenceType())){return s._getPersistence()._getFinalTarget(o).toString()}return o}function as(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ls{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(ji(this.auth,"network-request-failed"))),ts.get())}))}}function cs(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=ji(e,t,r);return i.customData._tokenResponse=n,i}function us(e){return void 0!==e&&void 0!==e.getResponse}function hs(e){return void 0!==e&&void 0!==e.enterprise}class ds{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return as(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function fs(e,t){return rs(e,"GET","/v2/recaptchaConfig",ns(e,t))}async function ps(e,t){return rs(e,"POST","/v1/accounts:lookup",t)}function gs(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(WM){}}function ms(e){return 1e3*Number(e)}function ys(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Fi("JWT malformed, contained fewer than 3 sections"),null;try{const e=Ot(n);return e?JSON.parse(e):(Fi("Failed to decode base64 JWT payload"),null)}catch(WM){return Fi("Caught error parsing JWT payload as JSON",null===WM||void 0===WM?void 0:WM.toString()),null}}function vs(e){const t=ys(e);return Hi(t,"internal-error"),Hi("undefined"!==typeof t.exp,"internal-error"),Hi("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function _s(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(WM){throw WM instanceof an&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(WM)&&e.auth.currentUser===e&&await e.auth.signOut(),WM}}class ws{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(WM){return void((null===WM||void 0===WM?void 0:WM.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class bs{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=gs(this.lastLoginAt),this.creationTime=gs(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Ts(e){var t;const n=e.auth,r=await e.getIdToken(),i=await _s(e,ps(n,{idToken:r}));Hi(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?Is(s.providerUserInfo):[],a=function(e,t){const n=e.filter((e=>!t.some((t=>t.providerId===e.providerId))));return[...n,...t]}(e.providerData,o),l=e.isAnonymous,c=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),u=!!l&&c,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new bs(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(e,h)}function Is(e){return e.map((e=>{var{providerId:t}=e,n=wi(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class Ss{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Hi(e.idToken,"internal-error"),Hi("undefined"!==typeof e.idToken,"internal-error"),Hi("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):vs(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Hi(0!==e.length,"internal-error");const t=vs(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(Hi(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await is(e,{},(async()=>{const n=_n({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=await os(e,r,"/v1/token","key=".concat(i)),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",Xi.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new Ss;return n&&(Hi("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(Hi("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(Hi("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ss,this.toJSON())}_performRefresh(){return Wi("not implemented")}}function Es(e,t){Hi("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class ks{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=wi(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ws(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new bs(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await _s(this,this.stsTokenManager.getToken(this.auth,e));return Hi(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Rn(e),r=await n.getIdToken(t),i=ys(r);Hi(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:gs(ms(i.auth_time)),issuedAtTime:gs(ms(i.iat)),expirationTime:gs(ms(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Rn(e);await Ts(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Hi(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ks(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Hi(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Ts(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Yr(this.auth.app))return Promise.reject(zi(this.auth));const e=await this.getIdToken();return await _s(this,async function(e,t){return rs(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,g=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,m=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:_,isAnonymous:w,providerData:b,stsTokenManager:T}=t;Hi(v&&T,e,"internal-error");const I=Ss.fromJSON(this.name,T);Hi("string"===typeof v,e,"internal-error"),Es(u,e.name),Es(h,e.name),Hi("boolean"===typeof _,e,"internal-error"),Hi("boolean"===typeof w,e,"internal-error"),Es(d,e.name),Es(f,e.name),Es(p,e.name),Es(g,e.name),Es(m,e.name),Es(y,e.name);const S=new ks({uid:v,auth:e,email:h,emailVerified:_,displayName:u,isAnonymous:w,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:I,createdAt:m,lastLoginAt:y});return b&&Array.isArray(b)&&(S.providerData=b.map((e=>Object.assign({},e)))),g&&(S._redirectEventId=g),S}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Ss;r.updateFromServerResponse(t);const i=new ks({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Ts(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Hi(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?Is(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),o=new Ss;o.updateFromIdToken(n);const a=new ks({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new bs(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(a,l),a}}const Cs=new Map;function Ns(e){Ki(e instanceof Function,"Expected a class definition");let t=Cs.get(e);return t?(Ki(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Cs.set(e,t),t)}class xs{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}xs.type="NONE";const As=xs;function Ps(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class Rs{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Ps(this.userKey,r.apiKey,i),this.fullPersistenceKey=Ps("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await ps(this.auth,{idToken:e}).catch((()=>{}));return t?ks._fromGetAccountInfoResponse(this.auth,t,e):null}return ks._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Rs(Ns(As),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||Ns(As);const s=Ps(n,e.config.apiKey,e.name);let o=null;for(const c of t)try{const t=await c._get(s);if(t){let n;if("string"===typeof t){const r=await ps(e,{idToken:t}).catch((()=>{}));if(!r)break;n=await ks._fromGetAccountInfoResponse(e,r,t)}else n=ks._fromJSON(e,t);c!==i&&(o=n),i=c;break}}catch(l){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(l){}}))),new Rs(i,e,n)):new Rs(i,e,n)}}function Ds(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Fs(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Os(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(js(t))return"Blackberry";if(Vs(t))return"Webos";if(Ls(t))return"Safari";if((t.includes("chrome/")||Ms(t))&&!t.includes("edge/"))return"Chrome";if(Us(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Os(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qt();return/firefox\//i.test(e)}function Ls(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qt()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ms(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qt();return/crios\//i.test(e)}function Fs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qt();return/iemobile/i.test(e)}function Us(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qt();return/android/i.test(e)}function js(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qt();return/blackberry/i.test(e)}function Vs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qt();return/webos/i.test(e)}function zs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qt();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function qs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qt();return zs(e)||Us(e)||Vs(e)||js(e)||/windows phone/i.test(e)||Fs(e)}function Bs(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Ds(Qt());break;case"Worker":t="".concat(Ds(Qt()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(ti,"/").concat(r)}class Hs{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(WM){r(WM)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(WM){t.reverse();for(const n of t)try{n()}catch(DF){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===WM||void 0===WM?void 0:WM.message})}}}class Ws{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class Ks{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Qs(this),this.idTokenSubscription=new Qs(this),this.beforeStateQueue=new Hs(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Li,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise((e=>this._resolvePersistenceManagerAvailable=e))}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ns(t)),this._initializationPromise=this.queue((async()=>{var n,r,i;if(!this._deleted&&(this.persistenceManager=await Rs.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null===(r=this._popupRedirectResolver)||void 0===r?void 0:r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(WM){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await ps(this,{idToken:e}),n=await ks._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Yr(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(WM){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(WM)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Hi(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(WM){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Ts(e)}catch(WM){if((null===WM||void 0===WM?void 0:WM.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Yr(this.app))return Promise.reject(zi(this));const t=e?Rn(e):null;return t&&Hi(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Hi(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return Yr(this.app)?Promise.reject(zi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Yr(this.app)?Promise.reject(zi(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(Ns(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return rs(e,"GET","/v2/passwordPolicy",ns(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Ws(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ln("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return rs(e,"POST","/v2/accounts:revokeToken",ns(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ns(e)||this._popupRedirectResolver;Hi(t,this,"argument-error"),this.redirectPersistenceManager=await Rs.create(this,[Ns(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Hi(o,this,"internal-error"),o.then((()=>{s||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Hi(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Bs(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(Yr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Mi.logLevel<=Un.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Mi.warn("Auth (".concat(ti,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Gs(e){return Rn(e)}class Qs{constructor(e){this.auth=e,this.observer=null,this.addObserver=In((e=>this.observer=e))}get next(){return Hi(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Ys={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $s(e){return Ys.loadJS(e)}function Js(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}const Xs=1e12;class Zs{constructor(e){this.auth=e,this.counter=Xs,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new no(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||Xs;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||Xs;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||Xs;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class eo{constructor(){this.enterprise=new to}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class to{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class no{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"===typeof e?document.getElementById(e):e;Hi(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(WM){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(WM){}this.isVisible&&this.execute()}),6e4)}),500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ro="NO_RECAPTCHA";class io{constructor(e){this.type="recaptcha-enterprise",this.auth=Gs(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;hs(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n(ro)}))})):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new eo).execute("siteKey",{action:"verify"})}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{fs(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new ds(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&hs(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Ys.recaptchaEnterpriseScript;0!==t.length&&(t+=i),$s(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function so(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=new io(e);let o;if(i)o=ro;else try{o=await s.verify(n)}catch(MS){o=await s.verify(n,!0)}const a=Object.assign({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in a){const e=a.phoneEnrollmentInfo.phoneNumber,t=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const e=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function oo(e,t,n,r,i){var s,o;if("EMAIL_PASSWORD_PROVIDER"===i){if(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await so(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await so(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}if("PHONE_PROVIDER"===i){if(null===(o=e._getRecaptchaConfig())||void 0===o?void 0:o.isProviderEnabled("PHONE_PROVIDER")){const i=await so(e,t,n);return r(e,i).catch((async i=>{var s;if("AUDIT"===(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.getProviderEnforcementState("PHONE_PROVIDER"))&&(i.code==="auth/".concat("missing-recaptcha-token")||i.code==="auth/".concat("invalid-app-credential"))){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(n," flow."));const i=await so(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)}))}{const i=await so(e,t,n,!1,!0);return r(e,i)}}return Promise.reject(i+" provider is not supported.")}async function ao(e){const t=Gs(e),n=await fs(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new ds(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new io(t).verify()}}function lo(e,t,n){const r=Gs(e);Hi(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=co(t),{host:o,port:a}=function(e){const t=co(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:uo(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:uo(t)}}}(t),l=null===a?"":":".concat(a),c={url:"".concat(s,"//").concat(o).concat(l,"/")},u=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return Hi(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void Hi(yn(c,r.config.emulator)&&yn(u,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,qt(o)?(Gt("Auth",!0),Bt("".concat(s,"//").concat(o).concat(l))):i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function co(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function uo(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class ho{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Wi("not implemented")}_getIdTokenResponse(e){return Wi("not implemented")}_linkToIdToken(e,t){return Wi("not implemented")}_getReauthenticationResolver(e){return Wi("not implemented")}}async function fo(e,t){return rs(e,"POST","/v1/accounts:resetPassword",ns(e,t))}async function po(e,t){return rs(e,"POST","/v1/accounts:signUp",t)}async function go(e,t){return ss(e,"POST","/v1/accounts:signInWithPassword",ns(e,t))}async function mo(e,t){return rs(e,"POST","/v1/accounts:sendOobCode",ns(e,t))}async function yo(e,t){return mo(e,t)}async function vo(e,t){return mo(e,t)}class _o extends ho{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new _o(e,t,"password")}static _fromEmailAndCode(e,t){return new _o(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return oo(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",go,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return ss(e,"POST","/v1/accounts:signInWithEmailLink",ns(e,t))}(e,{email:this._email,oobCode:this._password});default:Ui(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return oo(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",po,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return ss(e,"POST","/v1/accounts:signInWithEmailLink",ns(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Ui(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function wo(e,t){return ss(e,"POST","/v1/accounts:signInWithIdp",ns(e,t))}class bo extends ho{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new bo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ui("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=wi(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new bo(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return wo(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,wo(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,wo(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=_n(t)}return e}}async function To(e,t){return rs(e,"POST","/v1/accounts:sendVerificationCode",ns(e,t))}const Io={USER_NOT_FOUND:"user-not-found"};class So extends ho{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new So({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new So({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return ss(e,"POST","/v1/accounts:signInWithPhoneNumber",ns(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await ss(e,"POST","/v1/accounts:signInWithPhoneNumber",ns(e,t));if(n.temporaryProof)throw cs(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return ss(e,"POST","/v1/accounts:signInWithPhoneNumber",ns(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Io)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new So({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Eo{constructor(e){var t,n,r,i,s,o;const a=wn(bn(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);Hi(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.lang)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=wn(bn(e)).link,n=t?wn(bn(t)).deep_link_id:null,r=wn(bn(e)).deep_link_id;return(r?wn(bn(r)).link:null)||r||n||t||e}(e);try{return new Eo(t)}catch(n){return null}}}class ko{constructor(){this.providerId=ko.PROVIDER_ID}static credential(e,t){return _o._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Eo.parseLink(t);return Hi(n,"argument-error"),_o._fromEmailAndCode(e,n.code,n.tenantId)}}ko.PROVIDER_ID="password",ko.EMAIL_PASSWORD_SIGN_IN_METHOD="password",ko.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Co{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class No extends Co{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class xo extends No{static credentialFromJSON(e){const t="string"===typeof e?JSON.parse(e):e;return Hi("providerId"in t&&"signInMethod"in t,"argument-error"),bo._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return Hi(e.idToken||e.accessToken,"argument-error"),bo._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return xo.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return xo.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=t;if(!r&&!i&&!n&&!s)return null;if(!a)return null;try{return new xo(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch(WM){return null}}}class Ao extends No{constructor(){super("facebook.com")}static credential(e){return bo._fromParams({providerId:Ao.PROVIDER_ID,signInMethod:Ao.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ao.credentialFromTaggedObject(e)}static credentialFromError(e){return Ao.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Ao.credential(t.oauthAccessToken)}catch(n){return null}}}Ao.FACEBOOK_SIGN_IN_METHOD="facebook.com",Ao.PROVIDER_ID="facebook.com";class Po extends No{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return bo._fromParams({providerId:Po.PROVIDER_ID,signInMethod:Po.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Po.credentialFromTaggedObject(e)}static credentialFromError(e){return Po.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Po.credential(n,r)}catch(i){return null}}}Po.GOOGLE_SIGN_IN_METHOD="google.com",Po.PROVIDER_ID="google.com";class Ro extends No{constructor(){super("github.com")}static credential(e){return bo._fromParams({providerId:Ro.PROVIDER_ID,signInMethod:Ro.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ro.credentialFromTaggedObject(e)}static credentialFromError(e){return Ro.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Ro.credential(t.oauthAccessToken)}catch(n){return null}}}Ro.GITHUB_SIGN_IN_METHOD="github.com",Ro.PROVIDER_ID="github.com";class Do extends ho{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return wo(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,wo(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,wo(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new Do(n,i):null}static _create(e,t){return new Do(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Oo extends Co{constructor(e){Hi(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return Oo.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Oo.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=Do.fromJSON(e);return Hi(t,"argument-error"),t}static samlCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{pendingToken:n,providerId:r}=t;if(!n||!r)return null;try{return Do._create(r,n)}catch(WM){return null}}}class Lo extends No{constructor(){super("twitter.com")}static credential(e,t){return bo._fromParams({providerId:Lo.PROVIDER_ID,signInMethod:Lo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Lo.credentialFromTaggedObject(e)}static credentialFromError(e){return Lo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Lo.credential(n,r)}catch(i){return null}}}async function Mo(e,t){return ss(e,"POST","/v1/accounts:signUp",ns(e,t))}Lo.TWITTER_SIGN_IN_METHOD="twitter.com",Lo.PROVIDER_ID="twitter.com";class Fo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await ks._fromIdTokenResponse(e,n,r),s=Uo(n);return new Fo({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Uo(n);return new Fo({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Uo(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class jo extends an{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,jo.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new jo(e,t,n,r)}}function Vo(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw jo._fromErrorAndOperation(e,n,t,r);throw n}))}function zo(e){return new Set(e.map((e=>{let{providerId:t}=e;return t})).filter((e=>!!e)))}async function qo(e,t){const n=Rn(e);await Ho(!0,n,t);const{providerUserInfo:r}=await async function(e,t){return rs(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),i=zo(r||[]);return n.providerData=n.providerData.filter((e=>i.has(e.providerId))),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function Bo(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await _s(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Fo._forOperation(e,"link",r)}async function Ho(e,t,n){await Ts(t);const r=!1===e?"provider-already-linked":"no-such-provider";Hi(zo(t.providerData).has(n)===e,t.auth,r)}async function Wo(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(Yr(r.app))return Promise.reject(zi(r));const i="reauthenticate";try{const s=await _s(e,Vo(r,i,t,e),n);Hi(s.idToken,r,"internal-error");const o=ys(s.idToken);Hi(o,r,"internal-error");const{sub:a}=o;return Hi(e.uid===a,r,"user-mismatch"),Fo._forOperation(e,i,s)}catch(WM){throw(null===WM||void 0===WM?void 0:WM.code)==="auth/".concat("user-not-found")&&Ui(r,"user-mismatch"),WM}}async function Ko(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Yr(e.app))return Promise.reject(zi(e));const r="signIn",i=await Vo(e,r,t),s=await Fo._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function Go(e,t){return Ko(Gs(e),t)}async function Qo(e,t){const n=Rn(e);return await Ho(!1,n,t.providerId),Bo(n,t)}async function Yo(e,t){return Wo(Rn(e),t)}async function $o(e,t){if(Yr(e.app))return Promise.reject(zi(e));const n=Gs(e),r=await async function(e,t){return ss(e,"POST","/v1/accounts:signInWithCustomToken",ns(e,t))}(n,{token:t,returnSecureToken:!0}),i=await Fo._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}class Jo{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?Xo._fromServerResponse(e,t):"totpInfo"in t?Zo._fromServerResponse(e,t):Ui(e,"internal-error")}}class Xo extends Jo{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new Xo(t)}}class Zo extends Jo{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new Zo(t)}}function ea(e,t,n){var r;Hi((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Hi("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),Hi("undefined"===typeof n.linkDomain||n.linkDomain.length>0,e,"invalid-hosting-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.linkDomain=n.linkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Hi(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Hi(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function ta(e){const t=Gs(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function na(e,t){await async function(e,t){return rs(e,"POST","/v1/accounts:update",ns(e,t))}(Rn(e),{oobCode:t})}async function ra(e,t){const n=Rn(e),r=await fo(n,{oobCode:t}),i=r.requestType;switch(Hi(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Hi(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Hi(r.mfaInfo,n,"internal-error");default:Hi(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=Jo._fromServerResponse(Gs(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function ia(e,t,n){if(Yr(e.app))return Promise.reject(zi(e));const r=Gs(e),i=oo(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Mo,"EMAIL_PASSWORD_PROVIDER"),s=await i.catch((t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&ta(e),t})),o=await Fo._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}function sa(e,t,n){return Yr(e.app)?Promise.reject(zi(e)):Go(Rn(e),ko.credential(t,n)).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&ta(e),t}))}async function oa(e,t){const n={identifier:t,continueUri:Qi()?Gi():"http://localhost"},{signinMethods:r}=await async function(e,t){return rs(e,"POST","/v1/accounts:createAuthUri",ns(e,t))}(Rn(e),n);return r||[]}async function aa(e,t){const n=Rn(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&ea(n.auth,r,t);const{email:i}=await async function(e,t){return mo(e,t)}(n.auth,r);i!==e.email&&await e.reload()}async function la(e,t,n){const r=Rn(e),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&ea(r.auth,i,n);const{email:s}=await async function(e,t){return mo(e,t)}(r.auth,i);s!==e.email&&await e.reload()}async function ca(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=Rn(e),s={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},o=await _s(i,async function(e,t){return rs(e,"POST","/v1/accounts:update",t)}(i.auth,s));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const a=i.providerData.find((e=>{let{providerId:t}=e;return"password"===t}));a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(o)}async function ua(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=await _s(e,async function(e,t){return rs(e,"POST","/v1/accounts:update",t)}(r,i));await e._updateTokensIfNecessary(s,!0)}class ha{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.isNewUser=e,this.providerId=t,this.profile=n}}class da extends ha{constructor(e,t,n,r){super(e,t,n),this.username=r}}class fa extends ha{constructor(e,t){super(e,"facebook.com",t)}}class pa extends da{constructor(e,t){super(e,"github.com",t,"string"===typeof(null===t||void 0===t?void 0:t.login)?null===t||void 0===t?void 0:t.login:null)}}class ga extends ha{constructor(e,t){super(e,"google.com",t)}}class ma extends da{constructor(e,t,n){super(e,"twitter.com",t,n)}}function ya(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){const r=null===(n=null===(t=ys(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new ha(s,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new fa(s,i);case"github.com":return new pa(s,i);case"google.com":return new ga(s,i);case"twitter.com":return new ma(s,i,e.screenName||null);case"custom":case"anonymous":return new ha(s,null);default:return new ha(s,r,i)}}(n)}function va(e,t,n,r){return Rn(e).onAuthStateChanged(t,n,r)}class _a{constructor(e,t,n){this.type=e,this.credential=t,this.user=n}static _fromIdtoken(e,t){return new _a("enroll",e,t)}static _fromMfaPendingCredential(e){return new _a("signin",e)}toJSON(){const e="enroll"===this.type?"idToken":"pendingCredential";return{multiFactorSession:{[e]:this.credential}}}static fromJSON(e){var t,n;if(null===e||void 0===e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return _a._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return _a._fromIdtoken(e.multiFactorSession.idToken)}return null}}class wa{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=Gs(e),r=t.customData._serverResponse,i=(r.mfaInfo||[]).map((e=>Jo._fromServerResponse(n,e)));Hi(r.mfaPendingCredential,n,"internal-error");const s=_a._fromMfaPendingCredential(r.mfaPendingCredential);return new wa(s,i,(async e=>{const i=await e._process(n,s);delete r.mfaInfo,delete r.mfaPendingCredential;const o=Object.assign(Object.assign({},r),{idToken:i.idToken,refreshToken:i.refreshToken});switch(t.operationType){case"signIn":const e=await Fo._fromIdTokenResponse(n,t.operationType,o);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return Hi(t.user,n,"internal-error"),Fo._forOperation(t.user,t.operationType,o);default:Ui(n,"internal-error")}}))}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function ba(e,t){return rs(e,"POST","/v2/accounts/mfaEnrollment:start",ns(e,t))}class Ta{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload((t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map((t=>Jo._fromServerResponse(e.auth,t))))}))}static _fromUser(e){return new Ta(e)}async getSession(){return _a._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const n=e,r=await this.getSession(),i=await _s(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const t="string"===typeof e?e:e.uid,n=await this.user.getIdToken();try{const e=await _s(this.user,function(e,t){return rs(e,"POST","/v2/accounts/mfaEnrollment:withdraw",ns(e,t))}(this.user.auth,{idToken:n,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter((e=>{let{uid:n}=e;return n!==t})),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(WM){throw WM}}}const Ia=new WeakMap;const Sa="__sak";class Ea{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Sa,"1"),this.storage.removeItem(Sa),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class ka extends Ea{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=qs(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);en()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}ka.type="LOCAL";const Ca=ka;function Na(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),i=RegExp("".concat(r,"=([^;]+)"));return null!==(n=null===(t=document.cookie.match(i))||void 0===t?void 0:t[1])&&void 0!==n?n:null}function xa(e){const t="http:"===window.location.protocol;return"".concat(t?"__dev_":"__HOST-","FIREBASE_").concat(e.split(":")[3])}class Aa{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL("".concat(window.location.origin,"/__cookies__"));return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=xa(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return Na(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=xa(e);document.cookie="".concat(t,"=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High"),await fetch("/__cookies__",{method:"DELETE"}).catch((()=>{}))}_addListener(e,t){if(!this._isAvailable())return;const n=xa(e);if(window.cookieStore){const e=e=>{const r=e.changed.find((e=>e.name===n));r&&t(r.value);e.deleted.find((e=>e.name===n))&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=Na(n);const i=setInterval((()=>{const e=Na(n);e!==r&&(t(e),r=e)}),1e3);this.listenerUnsubscribes.set(t,(()=>clearInterval(i)))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}Aa.type="COOKIE";class Pa extends Ea{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Pa.type="SESSION";const Ra=Pa;class Da{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Da(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Oa(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Da.receivers=[];class La{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const l=Oa("",20);r.port1.start();const c=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function Ma(){return window}function Fa(){return"undefined"!==typeof Ma().WorkerGlobalScope&&"function"===typeof Ma().importScripts}const Ua="firebaseLocalStorageDb",ja="firebaseLocalStorage",Va="fbase_key";class za{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function qa(e,t){return e.transaction([ja],t?"readwrite":"readonly").objectStore(ja)}function Ba(){const e=indexedDB.open(Ua,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(ja,{keyPath:Va})}catch(WM){n(WM)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(ja)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Ua);return new za(e).toPromise()}(),t(await Ba()))}))}))}async function Ha(e,t,n){const r=qa(e,!0).put({[Va]:t,value:n});return new za(r).toPromise()}function Wa(e,t){const n=qa(e,!0).delete(t);return new za(n).toPromise()}class Ka{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Ba()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(WM){if(t++>3)throw WM;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Fa()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Da._getInstance(Fa()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new La(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ba();return await Ha(e,Sa,"1"),await Wa(e,Sa),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>Ha(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=qa(e,!1).get(t),r=await new za(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Wa(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=qa(e,!1).getAll();return new za(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Ka.type="LOCAL";const Ga=Ka;function Qa(e,t){return rs(e,"POST","/v2/accounts/mfaSignIn:start",ns(e,t))}const Ya=Js("rcb"),$a=new $i(3e4,6e4);class Ja{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=Ma().grecaptcha)||void 0===e?void 0:e.render)}load(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Hi(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&us(Ma().grecaptcha)?Promise.resolve(Ma().grecaptcha):new Promise(((n,r)=>{const i=Ma().setTimeout((()=>{r(ji(e,"network-request-failed"))}),$a.get());Ma()[Ya]=()=>{Ma().clearTimeout(i),delete Ma()[Ya];const s=Ma().grecaptcha;if(!s||!us(s))return void r(ji(e,"internal-error"));const o=s.render;s.render=(e,t)=>{const n=o(e,t);return this.counter++,n},this.hostLanguage=t,n(s)};$s("".concat(Ys.recaptchaV2Script,"?").concat(_n({onload:Ya,render:"explicit",hl:t}))).catch((()=>{clearTimeout(i),r(ji(e,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(null===(t=Ma().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Xa{async load(e){return new Zs(e)}clearedOneInstance(){}}const Za="recaptcha",el={theme:"light",type:"image"};class tl{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.assign({},el);this.parameters=n,this.type=Za,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Gs(e),this.isInvisible="invisible"===this.parameters.size,Hi("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"===typeof t?document.getElementById(t):t;Hi(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Xa:new Ja,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise((n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)}))}render(){try{this.assertNotDestroyed()}catch(WM){return Promise.reject(WM)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((e=>{throw this.renderPromise=null,e}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((e=>{this.container.removeChild(e)}))}validateStartingState(){Hi(!this.parameters.sitekey,this.auth,"argument-error"),Hi(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Hi("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach((e=>e(t))),"function"===typeof e)e(t);else if("string"===typeof e){const n=Ma()[e];"function"===typeof n&&n(t)}}}assertNotDestroyed(){Hi(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){Hi(Qi()&&!Fa(),this.auth,"internal-error"),await function(){let e=null;return new Promise((t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()})).catch((t=>{throw e&&window.removeEventListener("load",e),t}))}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await rs(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);Hi(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return Hi(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class nl{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=So._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function rl(e,t,n){var r;if(!e._getRecaptchaConfig())try{await ao(e)}catch(MS){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){Hi("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},s=oo(e,r,"mfaSmsEnrollment",(async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===ro){Hi((null===n||void 0===n?void 0:n.type)===Za,e,"argument-error");return ba(e,await il(e,t,n))}return ba(e,t)}),"PHONE_PROVIDER"),o=await s.catch((e=>Promise.reject(e)));return o.phoneSessionInfo.sessionInfo}{Hi("signin"===t.type,e,"internal-error");const s=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;Hi(s,e,"missing-multi-factor-info");const o={mfaPendingCredential:t.credential,mfaEnrollmentId:s,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},a=oo(e,o,"mfaSmsSignIn",(async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===ro){Hi((null===n||void 0===n?void 0:n.type)===Za,e,"argument-error");return Qa(e,await il(e,t,n))}return Qa(e,t)}),"PHONE_PROVIDER"),l=await a.catch((e=>Promise.reject(e)));return l.phoneResponseInfo.sessionInfo}}{const t={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=oo(e,t,"sendVerificationCode",(async(e,t)=>{if(t.captchaResponse===ro){Hi((null===n||void 0===n?void 0:n.type)===Za,e,"argument-error");return To(e,await il(e,t,n))}return To(e,t)}),"PHONE_PROVIDER"),s=await r.catch((e=>Promise.reject(e)));return s.sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function il(e,t,n){Hi(n.type===Za,e,"argument-error");const r=await n.verify();Hi("string"===typeof r,e,"argument-error");const i=Object.assign({},t);if("phoneEnrollmentInfo"in i){const e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,s=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:s}}),i}if("phoneSignInInfo"in i){const e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}return Object.assign(i,{recaptchaToken:r}),i}class sl{constructor(e){this.providerId=sl.PROVIDER_ID,this.auth=Gs(e)}verifyPhoneNumber(e,t){return rl(this.auth,e,Rn(t))}static credential(e,t){return So._fromVerification(e,t)}static credentialFromResult(e){const t=e;return sl.credentialFromTaggedObject(t)}static credentialFromError(e){return sl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?So._fromTokenResponse(n,r):null}}function ol(e,t){return t?Ns(t):(Hi(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}sl.PROVIDER_ID="phone",sl.PHONE_SIGN_IN_METHOD="phone";class al extends ho{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return wo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return wo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return wo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function ll(e){return Ko(e.auth,new al(e),e.bypassAuthState)}function cl(e){const{auth:t,user:n}=e;return Hi(n,t,"internal-error"),Wo(n,new al(e),e.bypassAuthState)}async function ul(e){const{auth:t,user:n}=e;return Hi(n,t,"internal-error"),Bo(n,new al(e),e.bypassAuthState)}class hl{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(WM){this.reject(WM)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(WM){this.reject(WM)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ll;case"linkViaPopup":case"linkViaRedirect":return ul;case"reauthViaPopup":case"reauthViaRedirect":return cl;default:Ui(this.auth,"internal-error")}}resolve(e){Ki(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ki(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const dl=new $i(2e3,1e4);class fl extends hl{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,fl.currentPopupAction&&fl.currentPopupAction.cancel(),fl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Hi(e,this.auth,"internal-error"),e}async onExecution(){Ki(1===this.filter.length,"Popup operations only handle one event");const e=Oa();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(ji(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(ji(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,fl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(ji(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,dl.get())};e()}}fl.currentPopupAction=null;const pl=new Map;class gl extends hl{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=pl.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=_l(t),r=vl(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(WM){e=()=>Promise.reject(WM)}pl.set(this.auth._key(),e)}return this.bypassAuthState||pl.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function ml(e,t){return vl(e)._set(_l(t),"true")}function yl(e,t){pl.set(e._key(),t)}function vl(e){return Ns(e._redirectPersistence)}function _l(e){return Ps("pendingRedirect",e.config.apiKey,e.name)}function wl(e,t,n){return async function(e,t,n){if(Yr(e.app))return Promise.reject(zi(e));const r=Gs(e);qi(e,t,Co),await r._initializationPromise;const i=ol(r,n);return await ml(i,r),i._openRedirect(r,t,"signInViaRedirect")}(e,t,n)}function bl(e,t,n){return async function(e,t,n){const r=Rn(e);if(qi(r.auth,t,Co),Yr(r.auth.app))return Promise.reject(zi(r.auth));await r.auth._initializationPromise;const i=ol(r.auth,n);await ml(i,r.auth);const s=await Sl(r);return i._openRedirect(r.auth,t,"reauthViaRedirect",s)}(e,t,n)}function Tl(e,t,n){return async function(e,t,n){const r=Rn(e);qi(r.auth,t,Co),await r.auth._initializationPromise;const i=ol(r.auth,n);await Ho(!1,r,t.providerId),await ml(i,r.auth);const s=await Sl(r);return i._openRedirect(r.auth,t,"linkViaRedirect",s)}(e,t,n)}async function Il(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Yr(e.app))return Promise.reject(zi(e));const r=Gs(e),i=ol(r,t),s=new gl(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}async function Sl(e){const t=Oa("".concat(e.uid,":::"));return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class El{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Cl(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Cl(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(ji(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(kl(e))}saveEventToCache(e){this.cachedEventUids.add(kl(e)),this.lastProcessedEventTime=Date.now()}}function kl(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function Cl(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}async function Nl(e){return rs(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}const xl=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Al=/^https?/;function Pl(e){const t=Gi(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Al.test(n))return!1;if(xl.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Rl=new $i(3e4,6e4);function Dl(){const e=Ma().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Ol(e){return new Promise(((t,n)=>{var r,i,s;function o(){Dl(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Dl(),n(ji(e,"network-request-failed"))},timeout:Rl.get()})}if(null===(i=null===(r=Ma().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Ma().gapi)||void 0===s?void 0:s.load)){const t=Js("iframefcb");return Ma()[t]=()=>{gapi.load?o():n(ji(e,"network-request-failed"))},$s("".concat(Ys.gapiScript,"?onload=").concat(t)).catch((e=>n(e)))}o()}})).catch((e=>{throw Ll=null,e}))}let Ll=null;const Ml=new $i(5e3,15e3),Fl={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ul=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function jl(e){const t=e.config;Hi(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Ji(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:ti},i=Ul.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(_n(r).slice(1))}async function Vl(e){const t=await function(e){return Ll=Ll||Ol(e),Ll}(e),n=Ma().gapi;return Hi(n,e,"internal-error"),t.open({where:document.body,url:jl(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Fl,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=ji(e,"network-request-failed"),s=Ma().setTimeout((()=>{r(i)}),Ml.get());function o(){Ma().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}const zl={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ql{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(WM){}}}function Bl(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},zl),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Qt().toLowerCase();n&&(a=Ms(c)?"_blank":n),Os(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return zs(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qt())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new ql(null);const h=window.open(t||"",a,u);Hi(h,e,"popup-blocked");try{h.focus()}catch(WM){}return new ql(h)}const Hl="__/auth/handler",Wl="emulator/auth/handler",Kl=encodeURIComponent("fac");async function Gl(e,t,n,r,i,s){Hi(e.config.authDomain,e,"auth-domain-config-required"),Hi(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:ti,eventId:i};if(t instanceof Co){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",gn(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof No){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?"#".concat(Kl,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Hl);return Ji(t,Wl)}(e),"?").concat(_n(a).slice(1)).concat(c)}const Ql="webStorageSupport";const Yl=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ra,this._completeRedirectFn=Il,this._overrideRedirectResult=yl}async _openPopup(e,t,n,r){var i;Ki(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Bl(e,await Gl(e,t,n,Gi(),r),Oa())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Ma().location.href=e}(await Gl(e,t,n,Gi(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Ki(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await Vl(e),n=new El(e);return t.register("authEvent",(t=>{Hi(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ql,{type:Ql},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Ql];void 0!==i&&t(!!i),Ui(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await Nl(e);for(const r of t)try{if(Pl(r))return}catch(n){}Ui(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return qs()||Ls()||zs()}};class $l{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Wi("unexpected MultiFactorSessionType")}}}class Jl extends $l{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Jl(e)}_finalizeEnroll(e,t,n){return function(e,t){return rs(e,"POST","/v2/accounts/mfaEnrollment:finalize",ns(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return rs(e,"POST","/v2/accounts/mfaSignIn:finalize",ns(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class Xl{constructor(){}static assertion(e){return Jl._fromCredential(e)}}Xl.FACTOR_ID="phone";var Zl="@firebase/auth",ec="1.10.4";class tc{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Hi(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const nc=Vt("authIdTokenMaxAge")||300;let rc=null;var ic;!function(e){Ys=e}({loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=ji("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),ic="Browser",Wr(new Dn("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Hi(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:ic,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Bs(ic)},c=new Ks(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ns);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),Wr(new Dn("auth-internal",(e=>(e=>new tc(e))(Gs(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),ai(Zl,ec,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(ic)),ai(Zl,ec,"esm2017");ai("firebase","11.7.3","app");var sc,oc,ac="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},lc={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,(function(){this.blockSize=-1})),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,s=this.h,o=0;o<t;){if(0==s)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(i[s++]=e.charCodeAt(o++),s==this.blockSize){n(this,i),s=0;break}}else for(;o<t;)if(i[s++]=e[o++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function s(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new r([0|e],0>e?-1:0)})):new r([0|e],0>e?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return a;if(0>e)return d(o(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var a=s(0),l=s(1),c=s(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function h(e){return-1==e.h}function d(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(l)}function f(e,t){return e.add(d(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function g(e,t){this.g=e,this.h=t}function m(e,t){if(u(t))throw Error("division by zero");if(u(e))return new g(a,a);if(h(e))return t=m(d(e),t),new g(d(t.g),d(t.h));if(h(t))return t=m(e,d(t)),new g(d(t.g),t.h);if(30<e.g.length){if(h(e)||h(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=y(n),r=y(r);var i=v(n,1),s=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var c=s.add(r);0>=c.l(e)&&(i=i.add(n),s=c),r=v(r,1),n=v(n,1)}return t=f(e,i.j(t)),new g(i,t)}for(i=a;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(s=o(n)).j(t);h(c)||0<c.l(e);)c=(s=o(n-=r)).j(t);u(s)&&(s=l),i=i.add(s),e=f(e,c)}return new g(i,e)}function y(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function v(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,s=[],o=0;o<i;o++)s[o]=0<t?e.i(o+n)>>>t|e.i(o+n+1)<<32-t:e.i(o+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(h(this))return-d(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(h(this))return"-"+d(this).toString(e);for(var t=o(Math.pow(e,6)),n=this,r="";;){var i=m(n,t).g,s=((0<(n=f(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return h(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return h(this)?d(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,s=0;s<=t;s++){var o=i+(65535&this.i(s))+(65535&e.i(s)),a=(o>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);i=a>>>16,o&=65535,a&=65535,n[s]=a<<16|o}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return a;if(h(this))return h(e)?d(this).j(d(e)):d(d(this).j(e));if(h(e))return d(this.j(d(e)));if(0>this.l(c)&&0>e.l(c))return o(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<e.g.length;s++){var l=this.i(i)>>>16,f=65535&this.i(i),g=e.i(s)>>>16,m=65535&e.i(s);n[2*i+2*s]+=f*m,p(n,2*i+2*s),n[2*i+2*s+1]+=l*m,p(n,2*i+2*s+1),n[2*i+2*s+1]+=f*g,p(n,2*i+2*s+1),n[2*i+2*s+2]+=l*g,p(n,2*i+2*s+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return m(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,oc=lc.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=o,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=o(Math.pow(n,8)),i=a,s=0;s<t.length;s+=8){var l=Math.min(8,t.length-s),c=parseInt(t.substring(s,s+l),n);8>l?(l=o(Math.pow(n,l)),i=i.j(l).add(o(c))):i=(i=i.j(r)).add(o(c))}return i},sc=lc.Integer=r}).apply("undefined"!==typeof ac?ac:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var cc,uc,hc,dc,fc,pc,gc,mc,yc="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},vc={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof yc&&yc];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var o=e[s];if(!(o in i))break e;i=i[o]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e,t){return t}))}}));var r=r||{},i=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function h(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function d(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function g(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function m(e){return m[" "](e),e}m[" "]=function(){};var y=-1!=g().indexOf("Gecko")&&!(-1!=g().toLowerCase().indexOf("webkit")&&-1==g().indexOf("Edge"))&&!(-1!=g().indexOf("Trident")||-1!=g().indexOf("MSIE"))&&-1==g().indexOf("Edge");function v(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function _(e){const t={};for(const n in e)t[n]=e[n];return t}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<w.length;t++)n=w[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function T(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function I(e){i.setTimeout((()=>{throw e}),0)}function S(){var e=x;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var E=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new k),(e=>e.reset()));class k{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let C,N=!1,x=new class{constructor(){this.h=this.g=null}add(e,t){const n=E.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},A=()=>{const e=i.Promise.resolve(void 0);C=()=>{e.then(P)}};var P=()=>{for(var e;e=S();){try{e.h.call(e.g)}catch(JM){I(JM)}var t=E;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}N=!1};function R(){this.s=this.s,this.C=this.C}function D(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}R.prototype.s=!1,R.prototype.ma=function(){this.s||(this.s=!0,this.N())},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},D.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(JM){}return e}();function L(e,t){if(D.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{m(t.nodeName);var i=!0;break e}catch(eF){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:M[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&L.aa.h.call(this)}}h(L,D);var M={2:"touch",3:"pen",4:"mouse"};L.prototype.h=function(){L.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var F="closure_listenable_"+(1e6*Math.random()|0),U=0;function j(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++U,this.da=this.fa=!1}function V(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function z(e){this.src=e,this.g={},this.h=0}function q(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(V(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function B(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}z.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=B(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new j(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var H="closure_lm_"+(1e6*Math.random()|0),W={};function K(e,t,n,r,i){if(r&&r.once)return Q(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)K(e,t[s],n,r,i);return null}return n=te(n),e&&e[F]?e.K(t,n,o(r)?!!r.capture:!!r,i):G(e,t,n,!1,r,i)}function G(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var a=o(i)?!!i.capture:!!i,l=Z(e);if(l||(e[H]=l=new z(e)),(n=l.add(t,n,r,a,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=X;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)O||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(J(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Q(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Q(e,t[s],n,r,i);return null}return n=te(n),e&&e[F]?e.L(t,n,o(r)?!!r.capture:!!r,i):G(e,t,n,!0,r,i)}function Y(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Y(e,t[s],n,r,i);else r=o(r)?!!r.capture:!!r,n=te(n),e&&e[F]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=B(s=e.g[t],n,r,i))&&(V(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=B(t,n,r,i)),(n=-1<e?t[e]:null)&&$(n))}function $(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[F])q(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(J(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(q(n,e),0==n.h&&(n.src=null,t[H]=null)):V(e)}}}function J(e){return e in W?W[e]:W[e]="on"+e}function X(e,t){if(e.da)e=!0;else{t=new L(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&$(e),e=n.call(r,t)}return e}function Z(e){return(e=e[H])instanceof z?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){R.call(this),this.i=new z(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new D(t,e);else if(t instanceof D)t.target=t.target||e;else{var i=t;b(t=new D(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=ie(o,r,!0,t)&&i}if(i=ie(o=t.g=e,r,!0,t)&&i,i=ie(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ie(o=t.g=n[s],r,!1,t)&&i}function ie(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.da&&o.capture==n){var a=o.listener,l=o.ha||o.src;o.fa&&q(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}function se(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function oe(e){e.g=se((()=>{e.g=null,e.i&&(e.i=!1,oe(e))}),e.l);const t=e.h;e.h=null,e.m.apply(null,t)}h(ne,R),ne.prototype[F]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Y(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)V(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class ae extends R{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:oe(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){R.call(this),this.h=e,this.g={}}h(le,R);var ce=[];function ue(e){v(e.g,(function(e,t){this.g.hasOwnProperty(t)&&$(e)}),e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var he=i.JSON.stringify,de=i.JSON.parse,fe=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function pe(){}function ge(e){return e.h||(e.h=e.i())}function me(){}pe.prototype.h=null;var ye={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ve(){D.call(this,"d")}function _e(){D.call(this,"c")}h(ve,D),h(_e,D);var we={},be=null;function Te(){return be=be||new ne}function Ie(e){D.call(this,we.La,e)}function Se(e){const t=Te();re(t,new Ie(t))}function Ee(e,t){D.call(this,we.STAT_EVENT,e),this.stat=t}function ke(e){const t=Te();re(t,new Ee(t,e))}function Ce(e,t){D.call(this,we.Ma,e),this.size=t}function Ne(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout((function(){e()}),t)}function xe(){this.g=!0}function Ae(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return he(n)}catch(rF){return t}}(e,n)+(r?" "+r:"")}))}we.La="serverreachability",h(Ie,D),we.STAT_EVENT="statevent",h(Ee,D),we.Ma="timingevent",h(Ce,D),xe.prototype.xa=function(){this.g=!1},xe.prototype.info=function(){};var Pe,Re={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},De={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Oe(){}function Le(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Me}function Me(){this.i=null,this.g="",this.h=!1}h(Oe,pe),Oe.prototype.g=function(){return new XMLHttpRequest},Oe.prototype.i=function(){return{}},Pe=new Oe;var Fe={},Ue={};function je(e,t,n){e.L=1,e.v=ht(ot(t)),e.m=n,e.P=!0,Ve(e,null)}function Ve(e,t){e.F=Date.now(),Be(e),e.A=ot(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),St(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Me,e.g=dn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ae(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ce[0]=i.toString()),i=ce);for(var s=0;s<i.length;s++){var o=K(n,i[s],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}t=e.H?_(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Se(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.i,e.u,e.A,e.l,e.R,e.m)}function ze(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function qe(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ue:(n=Number(t.substring(n,r)),isNaN(n)?Fe:(r+=1)+n>t.length?Ue:(t=t.slice(r,r+n),e.C=r+n,t))}function Be(e){e.S=Date.now()+e.I,He(e,e.I)}function He(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ne(c(e.ba,e),t)}function We(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function Ke(e){0==e.j.G||e.J||an(e.j,e)}function Ge(e){We(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Qe(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(nF){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;on(n),Yt(n)}nn(n),ke(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ne(c(n.Za,n),6e3));if(1>=Xe(n.h)&&n.ca){try{n.ca()}catch(nF){}n.ca=void 0}}else cn(n,11)}else if((e.K||n.g==e)&&on(n),!p(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=c[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(et(s,s.h),s.h=null))}if(r.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ut(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=e;if((r=n).qa=hn(r,r.J?r.ia:null,r.W),o.K){tt(r.h,o);var a=o,l=r.L;l&&(a.I=l),a.B&&(We(a),Be(a)),r.g=o}else tn(r);0<n.i.length&&Jt(n)}else"stop"!=c[0]&&"close"!=c[0]||cn(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?cn(n,7):Qt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Se()}catch(nF){}}Le.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Ht(e)?t.j():this.Y(e)},Le.prototype.Y=function(e){try{if(e==this.g)e:{const d=Ht(this.g);var t=this.g.Ba();this.g.Z();if(!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||Wt(this.g)))){this.J||4!=d||7==t||Se(),We(this);var n=this.g.Z();this.X=n;t:if(ze(this)){var r=Wt(this.g);e="";var s=r.length,o=4==Ht(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ge(this),Ke(this);var a="";break t}this.h.i=new i.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(o&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,ke(12),Ge(this),Ke(this);break e}Ae(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qe(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<a.length;){if(e=qe(this,a),e==Ue){4==d&&(this.s=4,ke(14),n=!1),Ae(this.i,this.l,null,"[Incomplete Response]");break}if(e==Fe){this.s=4,ke(15),Ae(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}Ae(this.i,this.l,e,null),Qe(this,e)}if(ze(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=a.length||this.h.h||(this.s=1,ke(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var h=this.j;h.g==this&&h.ba&&!h.M&&(h.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),rn(h),h.M=!0,ke(11))}}else Ae(this.i,this.l,a,"[Invalid Chunked Response]"),Ge(this),Ke(this)}else Ae(this.i,this.l,a,null),Qe(this,a);4==d&&Ge(this),this.o&&!this.J&&(4==d?an(this.j,this):(this.o=!1,Be(this)))}else(function(e){const t={};e=(e.g&&2<=Ht(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=T(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,ke(12)):(this.s=0,ke(13)),Ge(this),Ke(this)}}}catch(d){}},Le.prototype.cancel=function(){this.J=!0,Ge(this)},Le.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.i,this.A),2!=this.L&&(Se(),ke(17)),Ge(this),this.s=2,Ke(this)):He(this,this.S-e)};var Ye=class{constructor(e,t){this.g=e,this.map=t}};function $e(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Je(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Xe(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return d(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(s(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}$e.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var it=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function st(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof st){this.h=e.h,at(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new wt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(it))?(this.h=!1,at(this,t[1]||"",!0),this.o=dt(t[2]||""),this.g=dt(t[3]||"",!0),lt(this,t[4]),this.l=dt(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=dt(t[7]||"")):(this.h=!1,this.i=new wt(null,this.h))}function ot(e){return new st(e)}function at(e,t,n){e.j=n?dt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof wt?(e.i=t,function(e,t){t&&!e.j&&(bt(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Tt(this,t),St(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=ft(t,vt)),e.i=new wt(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function ht(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function dt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ft(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,pt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function pt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}st.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ft(t,gt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ft(t,gt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ft(n,"/"==n.charAt(0)?yt:mt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ft(n,_t)),e.join("")};var gt=/[#\/\?@]/g,mt=/[#\?:]/g,yt=/[#\?]/g,vt=/[#\?@]/g,_t=/#/g;function wt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function bt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Tt(e,t){bt(e),t=Et(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function It(e,t){return bt(e),t=Et(e,t),e.g.has(t)}function St(e,t,n){Tt(e,t),0<n.length&&(e.i=null,e.g.set(Et(e,t),d(n)),e.h+=n.length)}function Et(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function kt(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(eF){}}function Ct(){this.g=new fe}function Nt(e,t,n){const r=n||"";try{rt(e,(function(e,n){let i=e;o(e)&&(i=he(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(WM){throw t.push(r+"type="+encodeURIComponent("_badmap")),WM}}function xt(e){this.l=e.Ub||null,this.j=e.eb||!1}function At(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Pt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Rt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Dt(e)}function Dt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Ot(e){let t="";return v(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Lt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Ot(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function Mt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=wt.prototype).add=function(e,t){bt(this),this.i=null,e=Et(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){bt(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},e.na=function(){bt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){bt(this);let t=[];if("string"===typeof e)It(this,e)&&(t=t.concat(this.g.get(Et(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return bt(this),this.i=null,It(this,e=Et(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.V(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")},h(xt,pe),xt.prototype.g=function(){return new At(this.l,this.j)},xt.prototype.i=function(e){return function(){return e}}({}),h(At,ne),(e=At.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Dt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Rt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Dt(this)),this.g&&(this.readyState=3,Dt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Pt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Rt(this):Dt(this),3==this.readyState&&Pt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Rt(this))},e.Qa=function(e){this.g&&(this.response=e,Rt(this))},e.ga=function(){this.g&&Rt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(At.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),h(Mt,ne);var Ft=/^https?$/i,Ut=["POST","PUT"];function jt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Vt(e),qt(e)}function Vt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function zt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=Ht(e)||2!=e.Z()))if(e.u&&4==Ht(e))se(e.Ea,0,e);else if(re(e,"readystatechange"),4==Ht(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var o=String(e.D).match(it)[1]||null;!o&&i.self&&i.self.location&&(o=i.self.location.protocol.slice(0,-1)),s=!Ft.test(o?o.toLowerCase():"")}n=s}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var a=2<Ht(e)?e.g.statusText:""}catch(rF){a=""}e.l=a+" ["+e.Z()+"]",Vt(e)}}finally{qt(e)}}}function qt(e,t){if(e.g){Bt(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{n.onreadystatechange=r}catch(WM){}}}function Bt(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function Ht(e){return e.g?e.g.readyState:0}function Wt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(dF){return null}}function Kt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Gt(e){this.Aa=0,this.i=[],this.j=new xe,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Kt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Kt("baseRetryDelayMs",5e3,e),this.cb=Kt("retryDelaySeedMs",1e4,e),this.Wa=Kt("forwardChannelMaxRetries",2,e),this.wa=Kt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new $e(e&&e.concurrentRequestLimit),this.Da=new Ct,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Qt(e){if($t(e),3==e.G){var t=e.U++,n=ot(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),Zt(e,n),(t=new Le(e,e.j,t)).L=2,t.v=ht(ot(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(tF){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=dn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),Be(t)}un(e)}function Yt(e){e.g&&(rn(e),e.g.cancel(),e.g=null)}function $t(e){Yt(e),e.u&&(i.clearTimeout(e.u),e.u=null),on(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function Jt(e){if(!Je(e.h)&&!e.s){e.s=!0;var t=e.Ga;C||A(),N||(C(),N=!0),x.add(t,e),e.B=0}}function Xt(e,t){var n;n=t?t.l:e.U++;const r=ot(e.I);ut(r,"SID",e.K),ut(r,"RID",n),ut(r,"AID",e.T),Zt(e,r),e.m&&e.o&&Lt(r,e.m,e.o),n=new Le(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=en(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),je(n,r,t)}function Zt(e,t){e.H&&v(e.H,(function(e,n){ut(t,n,e)})),e.l&&rt({},(function(e,n){ut(t,n,e)}))}function en(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let a=0;a<n;a++){let n=i[a].g;const l=i[a].map;if(n-=t,0>n)t=Math.max(0,i[a].g-100),o=!1;else try{Nt(l,e,"req"+n+"_")}catch(s){r&&r(l)}}if(o){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function tn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;C||A(),N||(C(),N=!0),x.add(t,e),e.v=0}}function nn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Ne(c(e.Fa,e),ln(e,e.v)),e.v++,!0)}function rn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function sn(e){e.g=new Le(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=ot(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),Zt(e,t),e.m&&e.o&&Lt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=ht(ot(t)),n.m=null,n.P=!0,Ve(n,e)}function on(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function an(e,t){var n=null;if(e.g==t){on(e),rn(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;re(r=Te(),new Ce(r,n)),Jt(e)}else tn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(Xe(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Ne(c(e.Ga,e,t),ln(e,e.B)),e.B++,!0))}(e,t)||2==r&&nn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:cn(e,5);break;case 4:cn(e,10);break;case 3:cn(e,6);break;default:cn(e,2)}}function ln(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function cn(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new st(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||at(r,"https"),ht(r),t?function(e,t){const n=new xe;if(i.Image){const r=new Image;r.onload=u(kt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(kt,n,"TestLoadImage: error",!1,t,r),r.onabort=u(kt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(kt,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new xe;const n=new AbortController,r=setTimeout((()=>{n.abort(),kt(0,0,!1,t)}),1e4);fetch(e,{signal:n.signal}).then((e=>{clearTimeout(r),e.ok?kt(0,0,!0,t):kt(0,0,!1,t)})).catch((()=>{clearTimeout(r),kt(0,0,!1,t)}))}(r.toString(),n)}else ke(2);e.G=0,e.l&&e.l.sa(t),un(e),$t(e)}function un(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.ra()}}function hn(e,t,n){var r=n instanceof st?ot(n):new st(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var o=new st(null);r&&at(o,r),t&&(o.g=t),s&&lt(o,s),n&&(o.l=n),r=o}return n=e.D,t=e.ya,n&&t&&ut(r,n,t),ut(r,"VER",e.la),Zt(e,r),r}function dn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Mt(new xt({eb:n})):new Mt(e.pa)).Ha(e.J),t}function fn(){}function pn(){}function gn(e,t){ne.call(this),this.g=new Gt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new vn(this)}function mn(e){ve.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function yn(){_e.call(this),this.status=1}function vn(e){this.g=e}(e=Mt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Pe.g(),this.v=this.o?ge(this.o):ge(Pe),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(eF){return void jt(this,eF)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),s=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Ut,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Bt(this),this.u=!0,this.g.send(e),this.u=!1}catch(eF){jt(this,eF)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),qt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qt(this,!0)),Mt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?zt(this):this.bb())},e.bb=function(){zt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Ht(this)?this.g.status:-1}catch(YM){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(YM){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),de(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Gt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){ke(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=hn(this,null,this.W),Jt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new Le(this,this.j,e);let s=this.o;if(this.S&&(s?(s=_(s),b(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=en(this,i,t),ut(n=ot(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),Zt(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Ot(s)))+"&"+t:this.m&&Lt(n,this.m,s)),et(this.h,i),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),i.T=!0,je(i,n,null)):je(i,n,t),this.G=2}}else 3==this.G&&(e?Xt(this,e):0==this.i.length||Je(this.h)||Xt(this))},e.Fa=function(){if(this.u=null,sn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ne(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ke(10),Yt(this),sn(this))},e.Za=function(){null!=this.C&&(this.C=null,Yt(this),nn(this),ke(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),ke(2)):(this.j.info("Failed to ping google.com"),ke(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=fn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},pn.prototype.g=function(e,t){return new gn(e,t)},h(gn,ne),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Qt(this.g)},gn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=he(e),e=n);t.i.push(new Ye(t.Ya++,e)),3==t.G&&Jt(t)},gn.prototype.N=function(){this.g.l=null,delete this.j,Qt(this.g),delete this.g,gn.aa.N.call(this)},h(mn,ve),h(yn,_e),h(vn,fn),vn.prototype.ua=function(){re(this.g,"a")},vn.prototype.ta=function(e){re(this.g,new mn(e))},vn.prototype.sa=function(e){re(this.g,new yn)},vn.prototype.ra=function(){re(this.g,"b")},pn.prototype.createWebChannel=pn.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,mc=vc.createWebChannelTransport=function(){return new pn},gc=vc.getStatEventTarget=function(){return Te()},pc=vc.Event=we,fc=vc.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Re.NO_ERROR=0,Re.TIMEOUT=8,Re.HTTP_ERROR=6,dc=vc.ErrorCode=Re,De.COMPLETE="complete",hc=vc.EventType=De,me.EventType=ye,ye.OPEN="a",ye.CLOSE="b",ye.ERROR="c",ye.MESSAGE="d",ne.prototype.listen=ne.prototype.K,uc=vc.WebChannel=me,vc.FetchXmlHttpFactory=xt,Mt.prototype.listenOnce=Mt.prototype.L,Mt.prototype.getLastError=Mt.prototype.Ka,Mt.prototype.getLastErrorCode=Mt.prototype.Ba,Mt.prototype.getStatus=Mt.prototype.Z,Mt.prototype.getResponseJson=Mt.prototype.Oa,Mt.prototype.getResponseText=Mt.prototype.oa,Mt.prototype.send=Mt.prototype.ea,Mt.prototype.setWithCredentials=Mt.prototype.Ha,cc=vc.XhrIo=Mt}).apply("undefined"!==typeof yc?yc:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const _c="@firebase/firestore",wc="4.7.14";class bc{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}bc.UNAUTHENTICATED=new bc(null),bc.GOOGLE_CREDENTIALS=new bc("google-credentials-uid"),bc.FIRST_PARTY=new bc("first-party-uid"),bc.MOCK_USER=new bc("mock-user");let Tc="11.7.3";const Ic=new Bn("@firebase/firestore");function Sc(){return Ic.logLevel}function Ec(e){if(Ic.logLevel<=Un.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Nc);Ic.debug("Firestore (".concat(Tc,"): ").concat(e),...i)}}function kc(e){if(Ic.logLevel<=Un.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Nc);Ic.error("Firestore (".concat(Tc,"): ").concat(e),...i)}}function Cc(e){if(Ic.logLevel<=Un.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Nc);Ic.warn("Firestore (".concat(Tc,"): ").concat(e),...i)}}function Nc(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(HM){return e}}function xc(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,Ac(e,r,n)}function Ac(e,t,n){let r="FIRESTORE (".concat(Tc,") INTERNAL ASSERTION FAILED: ").concat(t," (ID: ").concat(e.toString(16),")");if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw kc(r),new Error(r)}function Pc(e,t,n,r){let i="Unexpected state";"string"==typeof n?i=n:r=n,e||Ac(t,i,r)}function Rc(e,t){return e}const Dc={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Oc extends an{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Lc{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Mc{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Fc{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(bc.UNAUTHENTICATED)))}shutdown(){}}class Uc{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class jc{constructor(e){this.t=e,this.currentUser=bc.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Pc(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Lc;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Lc,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{Ec("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Ec("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Lc)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Ec("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Pc("string"==typeof t.accessToken,31837,{l:t}),new Mc(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Pc(null===e||"string"==typeof e,2055,{h:e}),new bc(e)}}class Vc{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=bc.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class zc{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new Vc(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(bc.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class qc{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Bc{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Yr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Pc(void 0===this.o,3512);const n=e=>{null!=e.error&&Ec("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.m;return this.m=e.token,Ec("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{Ec("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):Ec("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new qc(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Pc("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new qc(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Hc(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}function Wc(){return new TextEncoder}class Kc{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=Hc(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function Gc(e,t){return e<t?-1:e>t?1:0}function Qc(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),i=t.codePointAt(n);if(r!==i){if(r<128&&i<128)return Gc(r,i);{const s=Wc(),o=$c(s.encode(Yc(e,n)),s.encode(Yc(t,n)));return 0!==o?o:Gc(r,i)}}n+=r>65535?2:1}return Gc(e.length,t.length)}function Yc(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function $c(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return Gc(e[n],t[n]);return Gc(e.length,t.length)}function Jc(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function Xc(e){return e+"\0"}const Zc=-62135596800,eu=1e6;class tu{static now(){return tu.fromMillis(Date.now())}static fromDate(e){return tu.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*eu);return new tu(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Oc(Dc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Oc(Dc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Zc)throw new Oc(Dc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Oc(Dc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/eu}_compareTo(e){return this.seconds===e.seconds?Gc(this.nanoseconds,e.nanoseconds):Gc(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Zc;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class nu{static fromTimestamp(e){return new nu(e)}static min(){return new nu(new tu(0,0))}static max(){return new nu(new tu(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const ru="__name__";class iu{constructor(e,t,n){void 0===t?t=0:t>e.length&&xc(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&xc(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===iu.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof iu?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=iu.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return Gc(e.length,t.length)}static compareSegments(e,t){const n=iu.isNumericId(e),r=iu.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?iu.extractNumericId(e).compare(iu.extractNumericId(t)):Qc(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return sc.fromString(e.substring(4,e.length-2))}}class su extends iu{construct(e,t,n){return new su(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Oc(Dc.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new su(e)}static emptyPath(){return new su([])}}const ou=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class au extends iu{construct(e,t,n){return new au(e,t,n)}static isValidIdentifier(e){return ou.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),au.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===ru}static keyField(){return new au([ru])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Oc(Dc.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Oc(Dc.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Oc(Dc.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Oc(Dc.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new au(t)}static emptyPath(){return new au([])}}class lu{constructor(e){this.path=e}static fromPath(e){return new lu(su.fromString(e))}static fromName(e){return new lu(su.fromString(e).popFirst(5))}static empty(){return new lu(su.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===su.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return su.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new lu(new su(e.slice()))}}const cu=-1;class uu{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function hu(e){return e.fields.find((e=>2===e.kind))}function du(e){return e.fields.filter((e=>2!==e.kind))}uu.UNKNOWN_ID=-1;class fu{constructor(e,t){this.fieldPath=e,this.kind=t}}class pu{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new pu(0,yu.min())}}function gu(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=nu.fromTimestamp(1e9===r?new tu(n+1,0):new tu(n,r));return new yu(i,lu.empty(),t)}function mu(e){return new yu(e.readTime,e.key,cu)}class yu{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new yu(nu.min(),lu.empty(),cu)}static max(){return new yu(nu.max(),lu.empty(),cu)}}function vu(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=lu.comparator(e.documentKey,t.documentKey),0!==n?n:Gc(e.largestBatchId,t.largestBatchId))}const _u="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class wu{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function bu(e){if(e.code!==Dc.FAILED_PRECONDITION||e.message!==_u)throw e;Ec("LocalStore","Unexpectedly lost primary lease")}class Tu{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&xc(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Tu(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Tu?t:Tu.resolve(t)}catch(e){return Tu.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Tu.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Tu.reject(t)}static resolve(e){return new Tu(((t,n)=>{t(e)}))}static reject(e){return new Tu(((t,n)=>{n(e)}))}static waitFor(e){return new Tu(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=Tu.resolve(!1);for(const n of e)t=t.next((e=>e?Tu.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new Tu(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{s[l]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new Tu(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}const Iu="SimpleDb";class Su{static open(e,t,n,r){try{return new Su(t,e.transaction(r,n))}catch(e){throw new Nu(t,e)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Lc,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Nu(e,t.error)):this.S.resolve()},this.transaction.onerror=t=>{const n=Du(t.target.error);this.S.reject(new Nu(e,n))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(Ec(Iu,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}v(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Au(t)}}class Eu{static delete(e){return Ec(Iu,"Removing database:",e),Pu(Mt().indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!rn())return!1;if(Eu.F())return!0;const e=Qt(),t=Eu.M(e),n=0<t&&t<10,r=ku(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static F(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.O)}static N(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}constructor(e,t,n){this.name=e,this.version=t,this.B=n,this.L=null,12.2===Eu.M(Qt())&&kc("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async k(e){return this.db||(Ec(Iu,"Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new Nu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new Oc(Dc.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new Oc(Dc.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new Nu(e,r))},r.onupgradeneeded=e=>{Ec(Iu,'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;if(null!==this.L&&this.L!==e.oldVersion)throw new Error('refusing to open IndexedDB database due to potential corruption of the IndexedDB database data; this corruption could be caused by clicking the "clear site data" button in a web browser; try reloading the web page to re-initialize the IndexedDB database: lastClosedDbVersion='.concat(this.L,", event.oldVersion=").concat(e.oldVersion,", event.newVersion=").concat(e.newVersion,", db.version=").concat(t.version));this.B.q(t,r.transaction,e.oldVersion,this.version).next((()=>{Ec(Iu,"Database upgrade to version "+this.version+" complete")}))}})),this.db.addEventListener("close",(e=>{const t=e.target;this.L=t.version}),{passive:!0})),this.$&&(this.db.onversionchange=e=>this.$(e)),this.db}U(e){this.$=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.k(e);const t=Su.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next((e=>(t.v(),e))).catch((e=>(t.abort(e),Tu.reject(e)))).toPromise();return s.catch((()=>{})),await t.D,s}catch(e){const t=e,n="FirebaseError"!==t.name&&s<3;if(Ec(Iu,"Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}function ku(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class Cu{constructor(e){this.K=e,this.W=!1,this.G=null}get isDone(){return this.W}get j(){return this.G}set cursor(e){this.K=e}done(){this.W=!0}H(e){this.G=e}delete(){return Pu(this.K.delete())}}class Nu extends Oc{constructor(e,t){super(Dc.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function xu(e){return"IndexedDbTransactionError"===e.name}class Au{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(Ec(Iu,"PUT",this.store.name,e,t),n=this.store.put(t,e)):(Ec(Iu,"PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Pu(n)}add(e){return Ec(Iu,"ADD",this.store.name,e,e),Pu(this.store.add(e))}get(e){return Pu(this.store.get(e)).next((t=>(void 0===t&&(t=null),Ec(Iu,"GET",this.store.name,e,t),t)))}delete(e){return Ec(Iu,"DELETE",this.store.name,e),Pu(this.store.delete(e))}count(){return Ec(Iu,"COUNT",this.store.name),Pu(this.store.count())}J(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new Tu(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}{const e=this.cursor(n),t=[];return this.Y(e,((e,n)=>{t.push(n)})).next((()=>t))}}Z(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new Tu(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}X(e,t){Ec(Iu,"DELETE ALL",this.store.name);const n=this.options(e,t);n.ee=!1;const r=this.cursor(n);return this.Y(r,((e,t,n)=>n.delete()))}te(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.Y(r,t)}ne(e){const t=this.cursor({});return new Tu(((n,r)=>{t.onerror=e=>{const t=Du(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}Y(e,t){const n=[];return new Tu(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new Cu(i),o=t(i.primaryKey,i.value,s);if(o instanceof Tu){const e=o.catch((e=>(s.done(),Tu.reject(e))));n.push(e)}s.isDone?r():null===s.j?i.continue():i.continue(s.j)}})).next((()=>Tu.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.ee?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Pu(e){return new Tu(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=Du(e.target.error);n(t)}}))}let Ru=!1;function Du(e){const t=Eu.M(Qt());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new Oc("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Ru||(Ru=!0,setTimeout((()=>{throw e}),0)),e}}return e}const Ou="IndexBackfiller";class Lu{constructor(e,t){this.asyncQueue=e,this.re=t,this.task=null}start(){this.ie(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ie(e){Ec(Ou,"Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const e=await this.re.se();Ec(Ou,"Documents written: ".concat(e))}catch(e){xu(e)?Ec(Ou,"Ignoring IndexedDB error during index backfill: ",e):await bu(e)}await this.ie(6e4)}))}}class Mu{constructor(e,t){this.localStore=e,this.persistence=t}async se(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.oe(t,e)))}oe(e,t){const n=new Set;let r=t,i=!0;return Tu.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return Ec(Ou,"Processing collection: ".concat(t)),this._e(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}_e(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.ae(r,n))).next((n=>(Ec(Ou,"Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}ae(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=mu(t);vu(r,n)>0&&(n=r)})),new yu(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Fu{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ue(e),this.ce=e=>t.writeSequenceNumber(e))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Fu.le=-1;const Uu=-1;function ju(e){return null==e}function Vu(e){return 0===e&&1/e==-1/0}function zu(e){return"number"==typeof e&&Number.isInteger(e)&&!Vu(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const qu="\x01";function Bu(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Wu(t)),t=Hu(e.get(n),t);return Wu(t)}function Hu(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case qu:n+="\x01\x11";break;default:n+=t}}return n}function Wu(e){return e+qu+"\x01"}function Ku(e){const t=e.length;if(Pc(t>=2,64408,{path:e}),2===t)return Pc(e.charAt(0)===qu&&"\x01"===e.charAt(1),56145,{path:e}),su.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf(qu,s);switch((t<0||t>n)&&xc(50515,{path:e}),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:xc(61167,{path:e})}s=t+2}return new su(r)}const Gu="remoteDocuments",Qu="owner",Yu="owner",$u="mutationQueues",Ju="mutations",Xu="batchId",Zu="userMutationsIndex",eh=["userId","batchId"];function th(e,t){return[e,Bu(t)]}function nh(e,t,n){return[e,Bu(t),n]}const rh={},ih="documentMutations",sh="remoteDocumentsV14",oh=["prefixPath","collectionGroup","readTime","documentId"],ah="documentKeyIndex",lh=["prefixPath","collectionGroup","documentId"],ch="collectionGroupIndex",uh=["collectionGroup","readTime","prefixPath","documentId"],hh="remoteDocumentGlobal",dh="remoteDocumentGlobalKey",fh="targets",ph="queryTargetsIndex",gh=["canonicalId","targetId"],mh="targetDocuments",yh=["targetId","path"],vh="documentTargetsIndex",_h=["path","targetId"],wh="targetGlobalKey",bh="targetGlobal",Th="collectionParents",Ih=["collectionId","parent"],Sh="clientMetadata",Eh="bundles",kh="namedQueries",Ch="indexConfiguration",Nh="collectionGroupIndex",xh="indexState",Ah=["indexId","uid"],Ph="sequenceNumberIndex",Rh=["uid","sequenceNumber"],Dh="indexEntries",Oh=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Lh="documentKeyIndex",Mh=["indexId","uid","orderedDocumentKey"],Fh="documentOverlays",Uh=["userId","collectionPath","documentId"],jh="collectionPathOverlayIndex",Vh=["userId","collectionPath","largestBatchId"],zh="collectionGroupOverlayIndex",qh=["userId","collectionGroup","largestBatchId"],Bh="globals",Hh=[$u,Ju,ih,Gu,fh,Qu,bh,mh,Sh,hh,Th,Eh,kh],Wh=[...Hh,Fh],Kh=[$u,Ju,ih,sh,fh,Qu,bh,mh,Sh,hh,Th,Eh,kh,Fh],Gh=Kh,Qh=[...Gh,Ch,xh,Dh],Yh=Qh,$h=[...Qh,Bh];class Jh extends wu{constructor(e,t){super(),this.he=e,this.currentSequenceNumber=t}}function Xh(e,t){const n=Rc(e);return Eu.N(n.he,t)}function Zh(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function ed(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function td(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class nd{constructor(e,t){this.comparator=e,this.root=t||id.EMPTY}insert(e,t){return new nd(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,id.BLACK,null,null))}remove(e){return new nd(this.comparator,this.root.remove(e,this.comparator).copy(null,null,id.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new rd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new rd(this.root,e,this.comparator,!1)}getReverseIterator(){return new rd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new rd(this.root,e,this.comparator,!0)}}class rd{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class id{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:id.RED,this.left=null!=r?r:id.EMPTY,this.right=null!=i?i:id.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new id(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return id.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return id.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,id.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,id.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw xc(43730,{key:this.key,value:this.value});if(this.right.isRed())throw xc(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw xc(27949);return e+(this.isRed()?0:1)}}id.EMPTY=null,id.RED=!0,id.BLACK=!1,id.EMPTY=new class{constructor(){this.size=0}get key(){throw xc(57766)}get value(){throw xc(16141)}get color(){throw xc(16727)}get left(){throw xc(29726)}get right(){throw xc(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new id(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class sd{constructor(e){this.comparator=e,this.data=new nd(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new od(this.data.getIterator())}getIteratorFrom(e){return new od(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof sd))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new sd(this.comparator);return t.data=e,t}}class od{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ad(e){return e.hasNext()?e.getNext():void 0}class ld{constructor(e){this.fields=e,e.sort(au.comparator)}static empty(){return new ld([])}unionWith(e){let t=new sd(au.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new ld(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Jc(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class cd extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ud{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new cd("Invalid base64 string: "+e):e}}(e);return new ud(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new ud(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Gc(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ud.EMPTY_BYTE_STRING=new ud("");const hd=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function dd(e){if(Pc(!!e,39018),"string"==typeof e){let t=0;const n=hd.exec(e);if(Pc(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:fd(e.seconds),nanos:fd(e.nanos)}}function fd(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function pd(e){return"string"==typeof e?ud.fromBase64String(e):ud.fromUint8Array(e)}const gd="server_timestamp",md="__type__",yd="__previous_value__",vd="__local_write_time__";function _d(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[md])||void 0===n?void 0:n.stringValue)===gd}function wd(e){const t=e.mapValue.fields[yd];return _d(t)?wd(t):t}function bd(e){const t=dd(e.mapValue.fields[vd].timestampValue);return new tu(t.seconds,t.nanos)}class Td{constructor(e,t,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l,this.isUsingEmulator=c}}const Id="(default)";class Sd{constructor(e,t){this.projectId=e,this.database=t||Id}static empty(){return new Sd("","")}get isDefaultDatabase(){return this.database===Id}isEqual(e){return e instanceof Sd&&e.projectId===this.projectId&&e.database===this.database}}const Ed="__type__",kd="__max__",Cd={mapValue:{fields:{__type__:{stringValue:kd}}}},Nd="__vector__",xd="value",Ad={nullValue:"NULL_VALUE"};function Pd(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?_d(e)?4:Qd(e)?9007199254740991:Kd(e)?10:11:xc(28295,{value:e})}function Rd(e,t){if(e===t)return!0;const n=Pd(e);if(n!==Pd(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return bd(e).isEqual(bd(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=dd(e.timestampValue),r=dd(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return pd(e.bytesValue).isEqual(pd(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return fd(e.geoPointValue.latitude)===fd(t.geoPointValue.latitude)&&fd(e.geoPointValue.longitude)===fd(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return fd(e.integerValue)===fd(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=fd(e.doubleValue),r=fd(t.doubleValue);return n===r?Vu(n)===Vu(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Jc(e.arrayValue.values||[],t.arrayValue.values||[],Rd);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Zh(n)!==Zh(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Rd(n[i],r[i])))return!1;return!0}(e,t);default:return xc(52216,{left:e})}}function Dd(e,t){return void 0!==(e.values||[]).find((e=>Rd(e,t)))}function Od(e,t){if(e===t)return 0;const n=Pd(e),r=Pd(t);if(n!==r)return Gc(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Gc(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=fd(e.integerValue||e.doubleValue),r=fd(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Ld(e.timestampValue,t.timestampValue);case 4:return Ld(bd(e),bd(t));case 5:return Qc(e.stringValue,t.stringValue);case 6:return function(e,t){const n=pd(e),r=pd(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Gc(n[i],r[i]);if(0!==e)return e}return Gc(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Gc(fd(e.latitude),fd(t.latitude));return 0!==n?n:Gc(fd(e.longitude),fd(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Md(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,s;const o=e.fields||{},a=t.fields||{},l=null===(n=o[xd])||void 0===n?void 0:n.arrayValue,c=null===(r=a[xd])||void 0===r?void 0:r.arrayValue,u=Gc((null===(i=null==l?void 0:l.values)||void 0===i?void 0:i.length)||0,(null===(s=null==c?void 0:c.values)||void 0===s?void 0:s.length)||0);return 0!==u?u:Md(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Cd.mapValue&&t===Cd.mapValue)return 0;if(e===Cd.mapValue)return 1;if(t===Cd.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=Qc(r[o],s[o]);if(0!==e)return e;const t=Od(n[r[o]],i[s[o]]);if(0!==t)return t}return Gc(r.length,s.length)}(e.mapValue,t.mapValue);default:throw xc(23264,{Pe:n})}}function Ld(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Gc(e,t);const n=dd(e),r=dd(t),i=Gc(n.seconds,r.seconds);return 0!==i?i:Gc(n.nanos,r.nanos)}function Md(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Od(n[i],r[i]);if(e)return e}return Gc(n.length,r.length)}function Fd(e){return Ud(e)}function Ud(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=dd(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return pd(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return lu.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Ud(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(Ud(e.fields[i]));return n+"}"}(e.mapValue):xc(61005,{value:e})}function jd(e){switch(Pd(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=wd(e);return t?16+jd(t):16;case 5:return 2*e.stringValue.length;case 6:return pd(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce(((e,t)=>e+jd(t)),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return ed(e.fields,((e,n)=>{t+=e.length+jd(n)})),t}(e.mapValue);default:throw xc(13486,{value:e})}}function Vd(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function zd(e){return!!e&&"integerValue"in e}function qd(e){return!!e&&"arrayValue"in e}function Bd(e){return!!e&&"nullValue"in e}function Hd(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Wd(e){return!!e&&"mapValue"in e}function Kd(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[Ed])||void 0===n?void 0:n.stringValue)===Nd}function Gd(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return ed(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Gd(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Gd(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Qd(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===kd}const Yd={mapValue:{fields:{[Ed]:{stringValue:Nd},[xd]:{arrayValue:{}}}}};function $d(e){return"nullValue"in e?Ad:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Vd(Sd.empty(),lu.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?Kd(e)?Yd:{mapValue:{}}:xc(35942,{value:e})}function Jd(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Vd(Sd.empty(),lu.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?Yd:"mapValue"in e?Kd(e)?{mapValue:{}}:Cd:xc(61959,{value:e})}function Xd(e,t){const n=Od(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Zd(e,t){const n=Od(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class ef{constructor(e){this.value=e}static empty(){return new ef({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Wd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Gd(t)}setAll(e){let t=au.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Gd(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Wd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Rd(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Wd(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){ed(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new ef(Gd(this.value))}}function tf(e){const t=[];return ed(e.fields,((e,n)=>{const r=new au([e]);if(Wd(n)){const e=tf(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new ld(t)}class nf{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new nf(e,0,nu.min(),nu.min(),nu.min(),ef.empty(),0)}static newFoundDocument(e,t,n,r){return new nf(e,1,t,nu.min(),n,r,0)}static newNoDocument(e,t){return new nf(e,2,t,nu.min(),nu.min(),ef.empty(),0)}static newUnknownDocument(e,t){return new nf(e,3,t,nu.min(),nu.min(),ef.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(nu.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ef.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ef.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=nu.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof nf&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new nf(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class rf{constructor(e,t){this.position=e,this.inclusive=t}}function sf(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?lu.comparator(lu.fromName(o.referenceValue),n.key):Od(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function of(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Rd(e.position[n],t.position[n]))return!1;return!0}class af{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function lf(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class cf{}class uf extends cf{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new wf(e,t,n):"array-contains"===t?new Sf(e,n):"in"===t?new Ef(e,n):"not-in"===t?new kf(e,n):"array-contains-any"===t?new Cf(e,n):new uf(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new bf(e,n):new Tf(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(Od(t,this.value)):null!==t&&Pd(this.value)===Pd(t)&&this.matchesComparison(Od(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return xc(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class hf extends cf{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new hf(e,t)}matches(e){return df(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.Te||(this.Te=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function df(e){return"and"===e.op}function ff(e){return"or"===e.op}function pf(e){return gf(e)&&df(e)}function gf(e){for(const t of e.filters)if(t instanceof hf)return!1;return!0}function mf(e){if(e instanceof uf)return e.field.canonicalString()+e.op.toString()+Fd(e.value);if(pf(e))return e.filters.map((e=>mf(e))).join(",");{const t=e.filters.map((e=>mf(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function yf(e,t){return e instanceof uf?function(e,t){return t instanceof uf&&e.op===t.op&&e.field.isEqual(t.field)&&Rd(e.value,t.value)}(e,t):e instanceof hf?function(e,t){return t instanceof hf&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&yf(n,t.filters[r])),!0)}(e,t):void xc(19439)}function vf(e,t){const n=e.filters.concat(t);return hf.create(n,e.op)}function _f(e){return e instanceof uf?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Fd(e.value))}(e):e instanceof hf?function(e){return e.op.toString()+" {"+e.getFilters().map(_f).join(" ,")+"}"}(e):"Filter"}class wf extends uf{constructor(e,t,n){super(e,t,n),this.key=lu.fromName(n.referenceValue)}matches(e){const t=lu.comparator(e.key,this.key);return this.matchesComparison(t)}}class bf extends uf{constructor(e,t){super(e,"in",t),this.keys=If("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Tf extends uf{constructor(e,t){super(e,"not-in",t),this.keys=If("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function If(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>lu.fromName(e.referenceValue)))}class Sf extends uf{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return qd(t)&&Dd(t.arrayValue,this.value)}}class Ef extends uf{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Dd(this.value.arrayValue,t)}}class kf extends uf{constructor(e,t){super(e,"not-in",t)}matches(e){if(Dd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!Dd(this.value.arrayValue,t)}}class Cf extends uf{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!qd(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Dd(this.value.arrayValue,e)))}}class Nf{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.Ie=null}}function xf(e){return new Nf(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Af(e){const t=Rc(e);if(null===t.Ie){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>mf(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),ju(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Fd(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Fd(e))).join(",")),t.Ie=e}return t.Ie}function Pf(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!lf(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!yf(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!of(e.startAt,t.startAt)&&of(e.endAt,t.endAt)}function Rf(e){return lu.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Df(e,t){return e.filters.filter((e=>e instanceof uf&&e.field.isEqual(t)))}function Of(e,t,n){let r=Ad,i=!0;for(const s of Df(e,t)){let e=Ad,t=!0;switch(s.op){case"<":case"<=":e=$d(s.value);break;case"==":case"in":case">=":e=s.value;break;case">":e=s.value,t=!1;break;case"!=":case"not-in":e=Ad}Xd({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];Xd({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function Lf(e,t,n){let r=Cd,i=!0;for(const s of Df(e,t)){let e=Cd,t=!0;switch(s.op){case">=":case">":e=Jd(s.value),t=!1;break;case"==":case"in":case"<=":e=s.value;break;case"<":e=s.value,t=!1;break;case"!=":case"not-in":e=Cd}Zd({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];Zd({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class Mf{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function Ff(e,t,n,r,i,s,o,a){return new Mf(e,t,n,r,i,s,o,a)}function Uf(e){return new Mf(e)}function jf(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Vf(e){return null!==e.collectionGroup}function zf(e){const t=Rc(e);if(null===t.Ee){t.Ee=[];const e=new Set;for(const i of t.explicitOrderBy)t.Ee.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new sd(au.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ee.push(new af(r,n))})),e.has(au.keyField().canonicalString())||t.Ee.push(new af(au.keyField(),n))}return t.Ee}function qf(e){const t=Rc(e);return t.de||(t.de=Bf(t,zf(e))),t.de}function Bf(e,t){if("F"===e.limitType)return xf(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new af(e.field,t)}));const n=e.endAt?new rf(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new rf(e.startAt.position,e.startAt.inclusive):null;return xf(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Hf(e,t){const n=e.filters.concat([t]);return new Mf(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Wf(e,t,n){return new Mf(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Kf(e,t){return Pf(qf(e),qf(t))&&e.limitType===t.limitType}function Gf(e){return"".concat(Af(qf(e)),"|lt:").concat(e.limitType)}function Qf(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>_f(e))).join(", "),"]")),ju(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Fd(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Fd(e))).join(",")),"Target(".concat(t,")")}(qf(e)),"; limitType=").concat(e.limitType,")")}function Yf(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):lu.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of zf(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=sf(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,zf(e),t))&&!(e.endAt&&!function(e,t,n){const r=sf(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,zf(e),t))}(e,t)}function $f(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Jf(e){return(t,n)=>{let r=!1;for(const i of zf(e)){const e=Xf(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Xf(e,t,n){const r=e.field.isKeyField()?lu.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Od(r,i):xc(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return xc(19790,{direction:e.dir})}}class Zf{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){ed(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return td(this.inner)}size(){return this.innerSize}}const ep=new nd(lu.comparator);function tp(){return ep}const np=new nd(lu.comparator);function rp(){let e=np;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function ip(e){let t=np;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function sp(){return ap()}function op(){return ap()}function ap(){return new Zf((e=>e.toString()),((e,t)=>e.isEqual(t)))}const lp=new nd(lu.comparator),cp=new sd(lu.comparator);function up(){let e=cp;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const hp=new sd(Gc);function dp(){return hp}function fp(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vu(t)?"-0":t}}function pp(e){return{integerValue:""+e}}function gp(e,t){return zu(t)?pp(t):fp(e,t)}class mp{constructor(){this._=void 0}}function yp(e,t,n){return e instanceof wp?function(e,t){const n={fields:{[md]:{stringValue:gd},[vd]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&_d(t)&&(t=wd(t)),t&&(n.fields[yd]=t),{mapValue:n}}(n,t):e instanceof bp?Tp(e,t):e instanceof Ip?Sp(e,t):function(e,t){const n=_p(e,t),r=kp(n)+kp(e.Re);return zd(n)&&zd(e.Re)?pp(r):fp(e.serializer,r)}(e,t)}function vp(e,t,n){return e instanceof bp?Tp(e,t):e instanceof Ip?Sp(e,t):n}function _p(e,t){return e instanceof Ep?function(e){return zd(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class wp extends mp{}class bp extends mp{constructor(e){super(),this.elements=e}}function Tp(e,t){const n=Cp(t);for(const r of e.elements)n.some((e=>Rd(e,r)))||n.push(r);return{arrayValue:{values:n}}}class Ip extends mp{constructor(e){super(),this.elements=e}}function Sp(e,t){let n=Cp(t);for(const r of e.elements)n=n.filter((e=>!Rd(e,r)));return{arrayValue:{values:n}}}class Ep extends mp{constructor(e,t){super(),this.serializer=e,this.Re=t}}function kp(e){return fd(e.integerValue||e.doubleValue)}function Cp(e){return qd(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Np{constructor(e,t){this.field=e,this.transform=t}}class xp{constructor(e,t){this.version=e,this.transformResults=t}}class Ap{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ap}static exists(e){return new Ap(void 0,e)}static updateTime(e){return new Ap(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Pp(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Rp{}function Dp(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Bp(e.key,Ap.none()):new Up(e.key,e.data,Ap.none());{const n=e.data,r=ef.empty();let i=new sd(au.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new jp(e.key,r,new ld(i.toArray()),Ap.none())}}function Op(e,t,n){e instanceof Up?function(e,t,n){const r=e.value.clone(),i=zp(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof jp?function(e,t,n){if(!Pp(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=zp(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Vp(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Lp(e,t,n,r){return e instanceof Up?function(e,t,n,r){if(!Pp(e.precondition,t))return n;const i=e.value.clone(),s=qp(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof jp?function(e,t,n,r){if(!Pp(e.precondition,t))return n;const i=qp(e.fieldTransforms,r,t),s=t.data;return s.setAll(Vp(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return Pp(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Mp(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=_p(r.transform,e||null);null!=i&&(null===n&&(n=ef.empty()),n.set(r.field,i))}return n||null}function Fp(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Jc(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof bp&&t instanceof bp||e instanceof Ip&&t instanceof Ip?Jc(e.elements,t.elements,Rd):e instanceof Ep&&t instanceof Ep?Rd(e.Re,t.Re):e instanceof wp&&t instanceof wp}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Up extends Rp{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class jp extends Rp{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Vp(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function zp(e,t,n){const r=new Map;Pc(e.length===n.length,32656,{Ve:n.length,me:e.length});for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,vp(o,a,n[i]))}return r}function qp(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,yp(e,s,t))}return r}class Bp extends Rp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Hp extends Rp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Wp{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Op(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Lp(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Lp(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=op();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=Dp(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(nu.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),up())}isEqual(e){return this.batchId===e.batchId&&Jc(this.mutations,e.mutations,((e,t)=>Fp(e,t)))&&Jc(this.baseMutations,e.baseMutations,((e,t)=>Fp(e,t)))}}class Kp{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Pc(e.mutations.length===n.length,58842,{fe:e.mutations.length,ge:n.length});let r=lp;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Kp(e,t,n,r)}}class Gp{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Qp{constructor(e,t){this.count=e,this.unchangedNames=t}}var Yp,$p;function Jp(e){switch(e){case Dc.OK:return xc(64938);case Dc.CANCELLED:case Dc.UNKNOWN:case Dc.DEADLINE_EXCEEDED:case Dc.RESOURCE_EXHAUSTED:case Dc.INTERNAL:case Dc.UNAVAILABLE:case Dc.UNAUTHENTICATED:return!1;case Dc.INVALID_ARGUMENT:case Dc.NOT_FOUND:case Dc.ALREADY_EXISTS:case Dc.PERMISSION_DENIED:case Dc.FAILED_PRECONDITION:case Dc.ABORTED:case Dc.OUT_OF_RANGE:case Dc.UNIMPLEMENTED:case Dc.DATA_LOSS:return!0;default:return xc(15467,{code:e})}}function Xp(e){if(void 0===e)return kc("GRPC error has no .code"),Dc.UNKNOWN;switch(e){case Yp.OK:return Dc.OK;case Yp.CANCELLED:return Dc.CANCELLED;case Yp.UNKNOWN:return Dc.UNKNOWN;case Yp.DEADLINE_EXCEEDED:return Dc.DEADLINE_EXCEEDED;case Yp.RESOURCE_EXHAUSTED:return Dc.RESOURCE_EXHAUSTED;case Yp.INTERNAL:return Dc.INTERNAL;case Yp.UNAVAILABLE:return Dc.UNAVAILABLE;case Yp.UNAUTHENTICATED:return Dc.UNAUTHENTICATED;case Yp.INVALID_ARGUMENT:return Dc.INVALID_ARGUMENT;case Yp.NOT_FOUND:return Dc.NOT_FOUND;case Yp.ALREADY_EXISTS:return Dc.ALREADY_EXISTS;case Yp.PERMISSION_DENIED:return Dc.PERMISSION_DENIED;case Yp.FAILED_PRECONDITION:return Dc.FAILED_PRECONDITION;case Yp.ABORTED:return Dc.ABORTED;case Yp.OUT_OF_RANGE:return Dc.OUT_OF_RANGE;case Yp.UNIMPLEMENTED:return Dc.UNIMPLEMENTED;case Yp.DATA_LOSS:return Dc.DATA_LOSS;default:return xc(39323,{code:e})}}($p=Yp||(Yp={}))[$p.OK=0]="OK",$p[$p.CANCELLED=1]="CANCELLED",$p[$p.UNKNOWN=2]="UNKNOWN",$p[$p.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$p[$p.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$p[$p.NOT_FOUND=5]="NOT_FOUND",$p[$p.ALREADY_EXISTS=6]="ALREADY_EXISTS",$p[$p.PERMISSION_DENIED=7]="PERMISSION_DENIED",$p[$p.UNAUTHENTICATED=16]="UNAUTHENTICATED",$p[$p.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$p[$p.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$p[$p.ABORTED=10]="ABORTED",$p[$p.OUT_OF_RANGE=11]="OUT_OF_RANGE",$p[$p.UNIMPLEMENTED=12]="UNIMPLEMENTED",$p[$p.INTERNAL=13]="INTERNAL",$p[$p.UNAVAILABLE=14]="UNAVAILABLE",$p[$p.DATA_LOSS=15]="DATA_LOSS";let Zp=null;const eg=new sc([4294967295,4294967295],0);function tg(e){const t=Wc().encode(e),n=new oc;return n.update(t),new Uint8Array(n.digest())}function ng(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new sc([n,r],0),new sc([i,s],0)]}class rg{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new ig("Invalid padding: ".concat(t));if(n<0)throw new ig("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new ig("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new ig("Invalid padding when bitmap length is 0: ".concat(t));this.pe=8*e.length-t,this.ye=sc.fromNumber(this.pe)}we(e,t,n){let r=e.add(t.multiply(sc.fromNumber(n)));return 1===r.compare(eg)&&(r=new sc([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.pe)return!1;const t=tg(e),[n,r]=ng(t);for(let i=0;i<this.hashCount;i++){const e=this.we(n,r,i);if(!this.be(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new rg(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.pe)return;const t=tg(e),[n,r]=ng(t);for(let i=0;i<this.hashCount;i++){const e=this.we(n,r,i);this.Se(e)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class ig extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class sg{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,og.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new sg(nu.min(),r,new nd(Gc),tp(),up())}}class og{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new og(n,t,up(),up(),up())}}class ag{constructor(e,t,n,r){this.De=e,this.removedTargetIds=t,this.key=n,this.ve=r}}class lg{constructor(e,t){this.targetId=e,this.Ce=t}}class cg{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ud.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class ug{constructor(){this.Fe=0,this.Me=fg(),this.xe=ud.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return 0!==this.Fe}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=up(),t=up(),n=up();return this.Me.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:xc(38017,{changeType:i})}})),new og(this.xe,this.Oe,e,t,n)}Qe(){this.Ne=!1,this.Me=fg()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Pc(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class hg{constructor(e){this.ze=e,this.je=new Map,this.He=tp(),this.Je=dg(),this.Ye=dg(),this.Ze=new nd(Gc)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,(t=>{const n=this.rt(t);switch(e.state){case 0:this.it(t)&&n.ke(e.resumeToken);break;case 1:n.We(),n.Be||n.Qe(),n.ke(e.resumeToken);break;case 2:n.We(),n.Be||this.removeTarget(t);break;case 3:this.it(t)&&(n.Ge(),n.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),n.ke(e.resumeToken));break;default:xc(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach(((e,n)=>{this.it(n)&&t(n)}))}ot(e){const t=e.targetId,n=e.Ce.count,r=this._t(t);if(r){const i=r.target;if(Rf(i))if(0===n){const e=new lu(i.path);this.tt(t,e,nf.newNoDocument(e,nu.min()))}else Pc(1===n,20013,{expectedCount:n});else{const r=this.ut(t);if(r!==n){const n=this.ct(e),i=n?this.lt(n,e,r):1;if(0!==i){this.st(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,e)}null==Zp||Zp.ht(function(e,t,n,r,i){var s,o,a,l,c,u;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(s=null==d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(a=null===(o=null==d?void 0:d.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==d?void 0:d.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.Ce,this.ze.Pt(),n,i))}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=pd(n).toUint8Array()}catch(e){if(e instanceof cd)return Cc("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new rg(s,r,i)}catch(e){return Cc(e instanceof ig?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.pe?null:o}lt(e,t,n){return t.Ce.count===n-this.Tt(e,t.targetId)?0:2}Tt(e,t){const n=this.ze.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.ze.Pt(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.tt(t,n,null),r++)})),r}It(e){const t=new Map;this.je.forEach(((n,r)=>{const i=this._t(r);if(i){if(n.current&&Rf(i.target)){const t=new lu(i.target.path);this.Et(t).has(r)||this.dt(r,t)||this.tt(r,t,nf.newNoDocument(t,e))}n.Le&&(t.set(r,n.qe()),n.Qe())}}));let n=up();this.Ye.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this._t(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.He.forEach(((t,n)=>n.setReadTime(e)));const r=new sg(e,t,this.Ze,this.He,n);return this.He=tp(),this.Je=dg(),this.Ye=dg(),this.Ze=new nd(Gc),r}et(e,t){if(!this.it(e))return;const n=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,n),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,n){if(!this.it(e))return;const r=this.rt(e);this.dt(e,t)?r.$e(t,1):r.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),n&&(this.He=this.He.insert(t,n))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new ug,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new sd(Gc),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new sd(Gc),this.Je=this.Je.insert(e,t)),t}it(e){const t=null!==this._t(e);return t||Ec("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new ug),this.ze.getRemoteKeysForTarget(e).forEach((t=>{this.tt(e,t,null)}))}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function dg(){return new nd(lu.comparator)}function fg(){return new nd(lu.comparator)}const pg={asc:"ASCENDING",desc:"DESCENDING"},gg={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mg={and:"AND",or:"OR"};class yg{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function vg(e,t){return e.useProto3Json||ju(t)?t:{value:t}}function _g(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function wg(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function bg(e,t){return _g(e,t.toTimestamp())}function Tg(e){return Pc(!!e,49232),nu.fromTimestamp(function(e){const t=dd(e);return new tu(t.seconds,t.nanos)}(e))}function Ig(e,t){return Sg(e,t).canonicalString()}function Sg(e,t){const n=function(e){return new su(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Eg(e){const t=su.fromString(e);return Pc(Gg(t),10190,{key:t.toString()}),t}function kg(e,t){return Ig(e.databaseId,t.path)}function Cg(e,t){const n=Eg(t);if(n.get(1)!==e.databaseId.projectId)throw new Oc(Dc.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Oc(Dc.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new lu(Pg(n))}function Ng(e,t){return Ig(e.databaseId,t)}function xg(e){const t=Eg(e);return 4===t.length?su.emptyPath():Pg(t)}function Ag(e){return new su(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Pg(e){return Pc(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function Rg(e,t,n){return{name:kg(e,t),fields:n.value.mapValue.fields}}function Dg(e,t,n){const r=Cg(e,t.name),i=Tg(t.updateTime),s=t.createTime?Tg(t.createTime):nu.min(),o=new ef({mapValue:{fields:t.fields}}),a=nf.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Og(e,t){let n;if(t instanceof Up)n={update:Rg(e,t.key,t.value)};else if(t instanceof Bp)n={delete:kg(e,t.key)};else if(t instanceof jp)n={update:Rg(e,t.key,t.data),updateMask:Kg(t.fieldMask)};else{if(!(t instanceof Hp))return xc(16599,{ft:t.type});n={verify:kg(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof wp)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof bp)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Ip)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ep)return{fieldPath:t.field.canonicalString(),increment:n.Re};throw xc(20930,{transform:t.transform})}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:bg(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:xc(27497)}(e,t.precondition)),n}function Lg(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?Ap.updateTime(Tg(e.updateTime)):void 0!==e.exists?Ap.exists(e.exists):Ap.none()}(t.currentDocument):Ap.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)Pc("REQUEST_TIME"===t.setToServerValue,16630,{proto:t}),n=new wp;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new bp(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new Ip(e)}else"increment"in t?n=new Ep(e,t.increment):xc(16584,{proto:t});const r=au.fromServerFormat(t.fieldPath);return new Np(r,n)}(e,t))):[];if(t.update){t.update.name;const i=Cg(e,t.update.name),s=new ef({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new ld(t.map((e=>au.fromServerFormat(e))))}(t.updateMask);return new jp(i,s,e,n,r)}return new Up(i,s,n,r)}if(t.delete){const r=Cg(e,t.delete);return new Bp(r,n)}if(t.verify){const r=Cg(e,t.verify);return new Hp(r,n)}return xc(1463,{proto:t})}function Mg(e,t){return{documents:[Ng(e,t.path)]}}function Fg(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Ng(e,i);const s=function(e){if(0!==e.length)return Wg(hf.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:Bg(e.field),direction:Vg(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=vg(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{gt:n,parent:i}}function Ug(e){let t=xg(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Pc(1===r,65062);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=jg(e);return t instanceof hf&&pf(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new af(Hg(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,ju(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new rf(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new rf(n,t)}(n.endAt)),Ff(t,i,o,s,a,"F",l,c)}function jg(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Hg(e.unaryFilter.field);return uf.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Hg(e.unaryFilter.field);return uf.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Hg(e.unaryFilter.field);return uf.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Hg(e.unaryFilter.field);return uf.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return xc(61313);default:return xc(60726)}}(e):void 0!==e.fieldFilter?function(e){return uf.create(Hg(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return xc(58110);default:return xc(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return hf.create(e.compositeFilter.filters.map((e=>jg(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return xc(1026)}}(e.compositeFilter.op))}(e):xc(30097,{filter:e})}function Vg(e){return pg[e]}function zg(e){return gg[e]}function qg(e){return mg[e]}function Bg(e){return{fieldPath:e.canonicalString()}}function Hg(e){return au.fromServerFormat(e.fieldPath)}function Wg(e){return e instanceof uf?function(e){if("=="===e.op){if(Hd(e.value))return{unaryFilter:{field:Bg(e.field),op:"IS_NAN"}};if(Bd(e.value))return{unaryFilter:{field:Bg(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Hd(e.value))return{unaryFilter:{field:Bg(e.field),op:"IS_NOT_NAN"}};if(Bd(e.value))return{unaryFilter:{field:Bg(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bg(e.field),op:zg(e.op),value:e.value}}}(e):e instanceof hf?function(e){const t=e.getFilters().map((e=>Wg(e)));return 1===t.length?t[0]:{compositeFilter:{op:qg(e.op),filters:t}}}(e):xc(54877,{filter:e})}function Kg(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Gg(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Qg{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:nu.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:nu.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:ud.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new Qg(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Qg(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Qg(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Qg(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Yg{constructor(e){this.wt=e}}function $g(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Jg(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:kg(e,t.key),fields:t.data.value.mapValue.fields,updateTime:_g(e,t.version.toTimestamp()),createTime:_g(e,t.createTime.toTimestamp())}}(e.wt,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Xg(t.version)};else{if(!t.isUnknownDocument())return xc(57904,{document:t});r.unknownDocument={path:n.path.toArray(),version:Xg(t.version)}}return r}function Jg(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Xg(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Zg(e){const t=new tu(e.seconds,e.nanoseconds);return nu.fromTimestamp(t)}function em(e,t){const n=(t.baseMutations||[]).map((t=>Lg(e.wt,t)));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];if(s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform){const n=t.mutations[s+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}const r=t.mutations.map((t=>Lg(e.wt,t))),i=tu.fromMillis(t.localWriteTimeMs);return new Wp(t.batchId,i,n,r)}function tm(e){const t=Zg(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?Zg(e.lastLimboFreeSnapshotVersion):nu.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){const t=e.documents.length;return Pc(1===t,1966,{count:t}),qf(Uf(xg(e.documents[0])))}(e.query):function(e){return qf(Ug(e))}(e.query),new Qg(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,ud.fromBase64String(e.resumeToken))}function nm(e,t){const n=Xg(t.snapshotVersion),r=Xg(t.lastLimboFreeSnapshotVersion);let i;i=Rf(t.target)?Mg(e.wt,t.target):Fg(e.wt,t.target).gt;const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Af(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function rm(e){const t=Ug({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Wf(t,t.limit,"L"):t}function im(e,t){return new Gp(t.largestBatchId,Lg(e.wt,t.overlayMutation))}function sm(e,t){const n=t.path.lastSegment();return[e,Bu(t.path.popLast()),n]}function om(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:Xg(r.readTime),documentKey:Bu(r.documentKey.path),largestBatchId:r.largestBatchId}}class am{getBundleMetadata(e,t){return lm(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:Zg(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return lm(e).put(function(e){return{bundleId:e.id,createTime:Xg(Tg(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return cm(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:rm(e.bundledQuery),readTime:Zg(e.readTime)}}(e)}))}saveNamedQuery(e,t){return cm(e).put(function(e){return{name:e.name,readTime:Xg(Tg(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function lm(e){return Xh(e,Eh)}function cm(e){return Xh(e,kh)}class um{constructor(e,t){this.serializer=e,this.userId=t}static bt(e,t){const n=t.uid||"";return new um(e,n)}getOverlay(e,t){return hm(e).get(sm(this.userId,t)).next((e=>e?im(this.serializer,e):null))}getOverlays(e,t){const n=sp();return Tu.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const s=new Gp(t,i);r.push(this.St(e,s))})),Tu.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(Bu(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(hm(e).X(jh,r))})),Tu.waitFor(i)}getOverlaysForCollection(e,t,n){const r=sp(),i=Bu(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return hm(e).J(jh,s).next((e=>{for(const t of e){const e=im(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=sp();let s;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return hm(e).te({index:zh,range:o},((e,t,n)=>{const o=im(this.serializer,t);i.size()<r||o.largestBatchId===s?(i.set(o.getKey(),o),s=o.largestBatchId):n.done()})).next((()=>i))}St(e,t){return hm(e).put(function(e,t,n){const[r,i,s]=sm(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Og(e.wt,n.mutation)}}(this.serializer,this.userId,t))}}function hm(e){return Xh(e,Fh)}class dm{Dt(e){return Xh(e,Bh)}getSessionToken(e){return this.Dt(e).get("sessionToken").next((e=>{const t=null==e?void 0:e.value;return t?ud.fromUint8Array(t):ud.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.Dt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class fm{constructor(){}vt(e,t){this.Ct(e,t),t.Ft()}Ct(e,t){if("nullValue"in e)this.Mt(t,5);else if("booleanValue"in e)this.Mt(t,10),t.xt(e.booleanValue?1:0);else if("integerValue"in e)this.Mt(t,15),t.xt(fd(e.integerValue));else if("doubleValue"in e){const n=fd(e.doubleValue);isNaN(n)?this.Mt(t,13):(this.Mt(t,15),Vu(n)?t.xt(0):t.xt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Mt(t,20),"string"==typeof n&&(n=dd(n)),t.Ot("".concat(n.seconds||"")),t.xt(n.nanos||0)}else if("stringValue"in e)this.Nt(e.stringValue,t),this.Bt(t);else if("bytesValue"in e)this.Mt(t,30),t.Lt(pd(e.bytesValue)),this.Bt(t);else if("referenceValue"in e)this.kt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Mt(t,45),t.xt(n.latitude||0),t.xt(n.longitude||0)}else"mapValue"in e?Qd(e)?this.Mt(t,Number.MAX_SAFE_INTEGER):Kd(e)?this.qt(e.mapValue,t):(this.Qt(e.mapValue,t),this.Bt(t)):"arrayValue"in e?(this.$t(e.arrayValue,t),this.Bt(t)):xc(19022,{Ut:e})}Nt(e,t){this.Mt(t,25),this.Kt(e,t)}Kt(e,t){t.Ot(e)}Qt(e,t){const n=e.fields||{};this.Mt(t,55);for(const r of Object.keys(n))this.Nt(r,t),this.Ct(n[r],t)}qt(e,t){var n,r;const i=e.fields||{};this.Mt(t,53);const s=xd,o=(null===(r=null===(n=i[s].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.Mt(t,15),t.xt(fd(o)),this.Nt(s,t),this.Ct(i[s],t)}$t(e,t){const n=e.values||[];this.Mt(t,50);for(const r of n)this.Ct(r,t)}kt(e,t){this.Mt(t,37),lu.fromName(e).path.forEach((e=>{this.Mt(t,60),this.Kt(e,t)}))}Mt(e,t){e.xt(t)}Bt(e){e.xt(2)}}fm.Wt=new fm;const pm=255;function gm(e){if(0===e)return 8;let t=0;return e>>4||(t+=4,e<<=4),e>>6||(t+=2,e<<=2),e>>7||(t+=1),t}function mm(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=gm(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}class ym{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Gt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.zt(n.value),n=t.next();this.jt()}Ht(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Jt(n.value),n=t.next();this.Yt()}Zt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.zt(e);else if(e<2048)this.zt(960|e>>>6),this.zt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.zt(480|e>>>12),this.zt(128|63&e>>>6),this.zt(128|63&e);else{const e=t.codePointAt(0);this.zt(240|e>>>18),this.zt(128|63&e>>>12),this.zt(128|63&e>>>6),this.zt(128|63&e)}}this.jt()}Xt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Jt(e);else if(e<2048)this.Jt(960|e>>>6),this.Jt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Jt(480|e>>>12),this.Jt(128|63&e>>>6),this.Jt(128|63&e);else{const e=t.codePointAt(0);this.Jt(240|e>>>18),this.Jt(128|63&e>>>12),this.Jt(128|63&e>>>6),this.Jt(128|63&e)}}this.Yt()}en(e){const t=this.tn(e),n=mm(t);this.nn(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}rn(e){const t=this.tn(e),n=mm(t);this.nn(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}sn(){this._n(pm),this._n(255)}an(){this.un(pm),this.un(255)}reset(){this.position=0}seed(e){this.nn(e.length),this.buffer.set(e,this.position),this.position+=e.length}cn(){return this.buffer.slice(0,this.position)}tn(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=!!(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}zt(e){const t=255&e;0===t?(this._n(0),this._n(255)):t===pm?(this._n(pm),this._n(0)):this._n(t)}Jt(e){const t=255&e;0===t?(this.un(0),this.un(255)):t===pm?(this.un(pm),this.un(0)):this.un(e)}jt(){this._n(0),this._n(1)}Yt(){this.un(0),this.un(1)}_n(e){this.nn(1),this.buffer[this.position++]=e}un(e){this.nn(1),this.buffer[this.position++]=~e}nn(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class vm{constructor(e){this.ln=e}Lt(e){this.ln.Gt(e)}Ot(e){this.ln.Zt(e)}xt(e){this.ln.en(e)}Ft(){this.ln.sn()}}class _m{constructor(e){this.ln=e}Lt(e){this.ln.Ht(e)}Ot(e){this.ln.Xt(e)}xt(e){this.ln.rn(e)}Ft(){this.ln.an()}}class wm{constructor(){this.ln=new ym,this.hn=new vm(this.ln),this.Pn=new _m(this.ln)}seed(e){this.ln.seed(e)}Tn(e){return 0===e?this.hn:this.Pn}cn(){return this.ln.cn()}reset(){this.ln.reset()}}class bm{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}In(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new bm(this.indexId,this.documentKey,this.arrayValue,n)}}function Tm(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=Im(e.arrayValue,t.arrayValue),0!==n?n:(n=Im(e.directionalValue,t.directionalValue),0!==n?n:lu.comparator(e.documentKey,t.documentKey)))}function Im(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class Sm{constructor(e){this.En=new sd(((e,t)=>au.comparator(e.field,t.field))),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.dn=e.orderBy,this.An=[];for(const t of e.filters){const e=t;e.isInequality()?this.En=this.En.add(e):this.An.push(e)}}get Rn(){return this.En.size>1}Vn(e){if(Pc(e.collectionGroup===this.collectionId,49279),this.Rn)return!1;const t=hu(e);if(void 0!==t&&!this.mn(t))return!1;const n=du(e);let r=new Set,i=0,s=0;for(;i<n.length&&this.mn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.En.size>0){const e=this.En.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[i];if(!this.fn(e,t)||!this.gn(this.dn[s++],t))return!1}++i}for(;i<n.length;++i){const e=n[i];if(s>=this.dn.length||!this.gn(this.dn[s++],e))return!1}return!0}pn(){if(this.Rn)return null;let e=new sd(au.comparator);const t=[];for(const n of this.An)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new fu(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new fu(n.field,0))}for(const n of this.dn)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new fu(n.field,"asc"===n.dir?0:1)));return new uu(uu.UNKNOWN_ID,this.collectionId,t,pu.empty())}mn(e){for(const t of this.An)if(this.fn(t,e))return!0;return!1}fn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}gn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Em(e){var t,n;if(Pc(e instanceof uf||e instanceof hf,20012),e instanceof uf){if(e instanceof Ef){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>uf.create(e.field,"==",t))))||[];return hf.create(r,"or")}return e}const r=e.filters.map((e=>Em(e)));return hf.create(r,e.op)}function km(e){if(0===e.getFilters().length)return[];const t=Am(Em(e));return Pc(xm(t),7391),Cm(t)||Nm(t)?[t]:t.getFilters()}function Cm(e){return e instanceof uf}function Nm(e){return e instanceof hf&&pf(e)}function xm(e){return Cm(e)||Nm(e)||function(e){if(e instanceof hf&&ff(e)){for(const t of e.getFilters())if(!Cm(t)&&!Nm(t))return!1;return!0}return!1}(e)}function Am(e){if(Pc(e instanceof uf||e instanceof hf,34018),e instanceof uf)return e;if(1===e.filters.length)return Am(e.filters[0]);const t=e.filters.map((e=>Am(e)));let n=hf.create(t,e.op);return n=Dm(n),xm(n)?n:(Pc(n instanceof hf,64498),Pc(df(n),40251),Pc(n.filters.length>1,57927),n.filters.reduce(((e,t)=>Pm(e,t))))}function Pm(e,t){let n;return Pc(e instanceof uf||e instanceof hf,38388),Pc(t instanceof uf||t instanceof hf,25473),n=e instanceof uf?t instanceof uf?function(e,t){return hf.create([e,t],"and")}(e,t):Rm(e,t):t instanceof uf?Rm(t,e):function(e,t){if(Pc(e.filters.length>0&&t.filters.length>0,48005),df(e)&&df(t))return vf(e,t.getFilters());const n=ff(e)?e:t,r=ff(e)?t:e,i=n.filters.map((e=>Pm(e,r)));return hf.create(i,"or")}(e,t),Dm(n)}function Rm(e,t){if(df(t))return vf(t,e.getFilters());{const n=t.filters.map((t=>Pm(e,t)));return hf.create(n,"or")}}function Dm(e){if(Pc(e instanceof uf||e instanceof hf,11850),e instanceof uf)return e;const t=e.getFilters();if(1===t.length)return Dm(t[0]);if(gf(e))return e;const n=t.map((e=>Dm(e))),r=[];return n.forEach((t=>{t instanceof uf?r.push(t):t instanceof hf&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:hf.create(r,e.op)}class Om{constructor(){this.yn=new Lm}addToCollectionParentIndex(e,t){return this.yn.add(t),Tu.resolve()}getCollectionParents(e,t){return Tu.resolve(this.yn.getEntries(t))}addFieldIndex(e,t){return Tu.resolve()}deleteFieldIndex(e,t){return Tu.resolve()}deleteAllFieldIndexes(e){return Tu.resolve()}createTargetIndexes(e,t){return Tu.resolve()}getDocumentsMatchingTarget(e,t){return Tu.resolve(null)}getIndexType(e,t){return Tu.resolve(0)}getFieldIndexes(e,t){return Tu.resolve([])}getNextCollectionGroupToUpdate(e){return Tu.resolve(null)}getMinOffset(e,t){return Tu.resolve(yu.min())}getMinOffsetFromCollectionGroup(e,t){return Tu.resolve(yu.min())}updateCollectionGroup(e,t,n){return Tu.resolve()}updateIndexEntries(e,t){return Tu.resolve()}}class Lm{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new sd(su.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new sd(su.comparator)).toArray()}}const Mm="IndexedDbIndexManager",Fm=new Uint8Array(0);class Um{constructor(e,t){this.databaseId=t,this.wn=new Lm,this.bn=new Zf((e=>Af(e)),((e,t)=>Pf(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.wn.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.wn.add(t)}));const i={collectionId:n,parent:Bu(r)};return jm(e).put(i)}return Tu.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[Xc(t),""],!1,!0);return jm(e).J(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(Ku(r.parent))}return n}))}addFieldIndex(e,t){const n=zm(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=qm(e);return i.next((e=>{n.put(om(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=zm(e),r=qm(e),i=Vm(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=zm(e),n=Vm(e),r=qm(e);return t.X().next((()=>n.X())).next((()=>r.X()))}createTargetIndexes(e,t){return Tu.forEach(this.Sn(t),(t=>this.getIndexType(e,t).next((n=>{if(0===n||1===n){const n=new Sm(t).pn();if(null!=n)return this.addFieldIndex(e,n)}}))))}getDocumentsMatchingTarget(e,t){const n=Vm(e);let r=!0;const i=new Map;return Tu.forEach(this.Sn(t),(t=>this.Dn(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=up();const r=[];return Tu.forEach(i,((i,s)=>{Ec(Mm,"Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((e=>"".concat(e.fieldPath,":").concat(e.kind))).join(","))}(i)," to execute ").concat(Af(t)));const o=function(e,t){const n=hu(t);if(void 0===n)return null;for(const r of Df(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(s,i),a=function(e,t){const n=new Map;for(const r of du(t))for(const t of Df(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,i),l=function(e,t){const n=[];let r=!0;for(const i of du(t)){const t=0===i.kind?Of(e,i.fieldPath,e.startAt):Lf(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new rf(n,r)}(s,i),c=function(e,t){const n=[];let r=!0;for(const i of du(t)){const t=0===i.kind?Lf(e,i.fieldPath,e.endAt):Of(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new rf(n,r)}(s,i),u=this.vn(i,s,l),h=this.vn(i,s,c),d=this.Cn(i,s,a),f=this.Fn(i.indexId,o,u,l.inclusive,h,c.inclusive,d);return Tu.forEach(f,(i=>n.Z(i,t.limit).next((t=>{t.forEach((t=>{const n=lu.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return Tu.resolve(null)}))}Sn(e){let t=this.bn.get(e);return t||(t=0===e.filters.length?[e]:km(hf.create(e.filters,"and")).map((t=>xf(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.bn.set(e,t),t)}Fn(e,t,n,r,i,s,o){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),l=a/(null!=t?t.length:1),c=[];for(let u=0;u<a;++u){const a=t?this.Mn(t[u/l]):Fm,h=this.xn(e,a,n[u%l],r),d=this.On(e,a,i[u%l],s),f=o.map((t=>this.xn(e,a,t,!0)));c.push(...this.createRange(h,d,f))}return c}xn(e,t,n,r){const i=new bm(e,lu.empty(),t,n);return r?i:i.In()}On(e,t,n,r){const i=new bm(e,lu.empty(),t,n);return r?i.In():i}Dn(e,t){const n=new Sm(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.Vn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.Sn(t);return Tu.forEach(r,(t=>this.Dn(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new sd(au.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}Nn(e,t){const n=new wm;for(const r of du(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.Tn(r.kind);fm.Wt.vt(e,i)}return n.cn()}Mn(e){const t=new wm;return fm.Wt.vt(e,t.Tn(0)),t.cn()}Bn(e,t){const n=new wm;return fm.Wt.vt(Vd(this.databaseId,t),n.Tn(function(e){const t=du(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.cn()}Cn(e,t,n){if(null===n)return[];let r=[];r.push(new wm);let i=0;for(const s of du(e)){const e=n[i++];for(const n of r)if(this.Ln(t,s.fieldPath)&&qd(e))r=this.kn(r,s,e);else{const t=n.Tn(s.kind);fm.Wt.vt(e,t)}}return this.qn(r)}vn(e,t,n){return this.Cn(e,t,n.position)}qn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].cn();return t}kn(e,t,n){const r=[...e],i=[];for(const s of n.arrayValue.values||[])for(const e of r){const n=new wm;n.seed(e.cn()),fm.Wt.vt(s,n.Tn(t.kind)),i.push(n)}return i}Ln(e,t){return!!e.filters.find((e=>e instanceof uf&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=zm(e),r=qm(e);return(t?n.J(Nh,IDBKeyRange.bound(t,t)):n.J()).next((e=>{const t=[];return Tu.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new pu(t.sequenceNumber,new yu(Zg(t.readTime),new lu(Ku(t.documentKey)),t.largestBatchId)):pu.empty(),r=e.fields.map((e=>{let[t,n]=e;return new fu(au.fromServerFormat(t),n)}));return new uu(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Gc(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=zm(e),i=qm(e);return this.Qn(e).next((e=>r.J(Nh,IDBKeyRange.bound(t,t)).next((t=>Tu.forEach(t,(t=>i.put(om(t.indexId,this.uid,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return Tu.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?Tu.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),Tu.forEach(i,(n=>this.$n(e,t,n).next((t=>{const i=this.Un(r,n);return t.isEqual(i)?Tu.resolve():this.Kn(e,r,n,t,i)})))))))}))}Wn(e,t,n,r){return Vm(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Bn(n,t.key),documentKey:t.key.path.toArray()})}Gn(e,t,n,r){return Vm(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Bn(n,t.key),t.key.path.toArray()])}$n(e,t,n){const r=Vm(e);let i=new sd(Tm);return r.te({index:Lh,range:IDBKeyRange.only([n.indexId,this.uid,this.Bn(n,t)])},((e,r)=>{i=i.add(new bm(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}Un(e,t){let n=new sd(Tm);const r=this.Nn(t,e);if(null==r)return n;const i=hu(t);if(null!=i){const s=e.data.field(i.fieldPath);if(qd(s))for(const i of s.arrayValue.values||[])n=n.add(new bm(t.indexId,e.key,this.Mn(i),r))}else n=n.add(new bm(t.indexId,e.key,Fm,r));return n}Kn(e,t,n,r,i){Ec(Mm,"Updating index entries for document '%s'",t.key);const s=[];return function(e,t,n,r,i){const s=e.getIterator(),o=t.getIterator();let a=ad(s),l=ad(o);for(;a||l;){let e=!1,t=!1;if(a&&l){const r=n(a,l);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(l),l=ad(o)):t?(i(a),a=ad(s)):(a=ad(s),l=ad(o))}}(r,i,Tm,(r=>{s.push(this.Wn(e,t,n,r))}),(r=>{s.push(this.Gn(e,t,n,r))})),Tu.waitFor(s)}Qn(e){let t=1;return qm(e).te({index:Ph,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>Tm(e,t))).filter(((e,t,n)=>!t||0!==Tm(e,n[t-1])));const r=[];r.push(e);for(const s of n){const n=Tm(s,e),i=Tm(s,t);if(0===n)r[0]=e.In();else if(n>0&&i<0)r.push(s),r.push(s.In());else if(i>0)break}r.push(t);const i=[];for(let s=0;s<r.length;s+=2){if(this.zn(r[s],r[s+1]))return[];const e=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,Fm,[]],t=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,Fm,[]];i.push(IDBKeyRange.bound(e,t))}return i}zn(e,t){return Tm(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Bm)}getMinOffset(e,t){return Tu.mapArray(this.Sn(t),(t=>this.Dn(e,t).next((e=>e||xc(44426))))).next(Bm)}}function jm(e){return Xh(e,Th)}function Vm(e){return Xh(e,Dh)}function zm(e){return Xh(e,Ch)}function qm(e){return Xh(e,xh)}function Bm(e){Pc(0!==e.length,28825);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;vu(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new yu(t.readTime,t.documentKey,n)}const Hm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Wm=41943040;class Km{static withCacheSize(e){return new Km(e,Km.DEFAULT_COLLECTION_PERCENTILE,Km.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}function Gm(e,t,n){const r=e.store(Ju),i=e.store(ih),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.te({range:o},((e,t,n)=>(a++,n.delete())));s.push(l.next((()=>{Pc(1===a,47070,{batchId:n.batchId})})));const c=[];for(const u of n.mutations){const e=nh(t,u.key.path,n.batchId);s.push(i.delete(e)),c.push(u.key)}return Tu.waitFor(s).next((()=>c))}function Qm(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw xc(14731);t=e.noDocument}return JSON.stringify(t).length}Km.DEFAULT_COLLECTION_PERCENTILE=10,Km.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Km.DEFAULT=new Km(Wm,Km.DEFAULT_COLLECTION_PERCENTILE,Km.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Km.DISABLED=new Km(-1,0,0);class Ym{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.jn={}}static bt(e,t,n,r){Pc(""!==e.uid,64387);const i=e.isAuthenticated()?e.uid:"";return new Ym(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Jm(e).te({index:Zu,range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=Xm(e),s=Jm(e);return s.add({}).next((o=>{Pc("number"==typeof o,49019);const a=new Wp(o,t,n,r),l=function(e,t,n){const r=n.baseMutations.map((t=>Og(e.wt,t))),i=n.mutations.map((t=>Og(e.wt,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),c=[];let u=new sd(((e,t)=>Gc(e.canonicalString(),t.canonicalString())));for(const e of r){const t=nh(this.userId,e.key.path,o);u=u.add(e.key.path.popLast()),c.push(s.put(l)),c.push(i.put(t,rh))}return u.forEach((t=>{c.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.jn[o]=a.keys()})),Tu.waitFor(c).next((()=>a))}))}lookupMutationBatch(e,t){return Jm(e).get(t).next((e=>e?(Pc(e.userId===this.userId,48,"Unexpected user for mutation batch",{userId:e.userId,batchId:t}),em(this.serializer,e)):null))}Hn(e,t){return this.jn[t]?Tu.resolve(this.jn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.jn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return Jm(e).te({index:Zu,range:r},((e,t,r)=>{t.userId===this.userId&&(Pc(t.batchId>=n,47524,{Jn:n}),i=em(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=Uu;return Jm(e).te({index:Zu,range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Uu],[this.userId,Number.POSITIVE_INFINITY]);return Jm(e).J(Zu,t).next((e=>e.map((e=>em(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=th(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return Xm(e).te({range:r},((n,r,s)=>{const[o,a,l]=n,c=Ku(a);if(o===this.userId&&t.path.isEqual(c))return Jm(e).get(l).next((e=>{if(!e)throw xc(61480,{Yn:n,batchId:l});Pc(e.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:e.userId,batchId:l}),i.push(em(this.serializer,e))}));s.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new sd(Gc);const r=[];return t.forEach((t=>{const i=th(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=Xm(e).te({range:s},((e,r,i)=>{const[s,o,a]=e,l=Ku(o);s===this.userId&&t.path.isEqual(l)?n=n.add(a):i.done()}));r.push(o)})),Tu.waitFor(r).next((()=>this.Zn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=th(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new sd(Gc);return Xm(e).te({range:s},((e,t,i)=>{const[s,a,l]=e,c=Ku(a);s===this.userId&&n.isPrefixOf(c)?c.length===r&&(o=o.add(l)):i.done()})).next((()=>this.Zn(e,o)))}Zn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(Jm(e).get(t).next((e=>{if(null===e)throw xc(35274,{batchId:t});Pc(e.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:e.userId,batchId:t}),n.push(em(this.serializer,e))})))})),Tu.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return Gm(e.he,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.Xn(t.batchId)})),Tu.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}Xn(e){delete this.jn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return Tu.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return Xm(e).te({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=Ku(e[1]);r.push(t)}else n.done()})).next((()=>{Pc(0===r.length,56720,{er:r.map((e=>e.canonicalString()))})}))}))}containsKey(e,t){return $m(e,this.userId,t)}tr(e){return Zm(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:Uu,lastStreamToken:""}))}}function $m(e,t,n){const r=th(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Xm(e).te({range:s,ee:!0},((e,n,r)=>{const[s,a,l]=e;s===t&&a===i&&(o=!0),r.done()})).next((()=>o))}function Jm(e){return Xh(e,Ju)}function Xm(e){return Xh(e,ih)}function Zm(e){return Xh(e,$u)}class ey{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new ey(0)}static ir(){return new ey(-1)}}class ty{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.sr(e).next((t=>{const n=new ey(t.highestTargetId);return t.highestTargetId=n.next(),this._r(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.sr(e).next((e=>nu.fromTimestamp(new tu(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.sr(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.sr(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this._r(e,r))))}addTargetData(e,t){return this.ar(e,t).next((()=>this.sr(e).next((n=>(n.targetCount+=1,this.ur(t,n),this._r(e,n))))))}updateTargetData(e,t){return this.ar(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>ny(e).delete(t.targetId))).next((()=>this.sr(e))).next((t=>(Pc(t.targetCount>0,8065),t.targetCount-=1,this._r(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return ny(e).te(((s,o)=>{const a=tm(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>Tu.waitFor(i))).next((()=>r))}forEachTarget(e,t){return ny(e).te(((e,n)=>{const r=tm(n);t(r)}))}sr(e){return ry(e).get(wh).next((e=>(Pc(null!==e,2888),e)))}_r(e,t){return ry(e).put(wh,t)}ar(e,t){return ny(e).put(nm(this.serializer,t))}ur(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.sr(e).next((e=>e.targetCount))}getTargetData(e,t){const n=Af(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return ny(e).te({range:r,index:ph},((e,n,r)=>{const s=tm(n);Pf(t,s.target)&&(i=s,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=iy(e);return t.forEach((t=>{const s=Bu(t.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(e,n,t))})),Tu.waitFor(r)}removeMatchingKeys(e,t,n){const r=iy(e);return Tu.forEach(t,(t=>{const i=Bu(t.path);return Tu.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=iy(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=iy(e);let i=up();return r.te({range:n,ee:!0},((e,t,n)=>{const r=Ku(e[1]),s=new lu(r);i=i.add(s)})).next((()=>i))}containsKey(e,t){const n=Bu(t.path),r=IDBKeyRange.bound([n],[Xc(n)],!1,!0);let i=0;return iy(e).te({index:vh,ee:!0,range:r},((e,t,n)=>{let[r,s]=e;0!==r&&(i++,n.done())})).next((()=>i>0))}Rt(e,t){return ny(e).get(t).next((e=>e?tm(e):null))}}function ny(e){return Xh(e,fh)}function ry(e){return Xh(e,bh)}function iy(e){return Xh(e,mh)}const sy="LruGarbageCollector",oy=1048576;function ay(e,t){let[n,r]=e,[i,s]=t;const o=Gc(n,i);return 0===o?Gc(r,s):o}class ly{constructor(e){this.cr=e,this.buffer=new sd(ay),this.lr=0}hr(){return++this.lr}Pr(e){const t=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();ay(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class cy{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Tr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return null!==this.Tr}Ir(e){Ec(sy,"Garbage collection scheduled in ".concat(e,"ms")),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Tr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){xu(e)?Ec(sy,"Ignoring IndexedDB error during garbage collection: ",e):await bu(e)}await this.Ir(3e5)}))}}class uy{constructor(e,t){this.Er=e,this.params=t}calculateTargetCount(e,t){return this.Er.dr(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return Tu.resolve(Fu.le);const n=new ly(t);return this.Er.forEachTarget(e,(e=>n.Pr(e.sequenceNumber))).next((()=>this.Er.Ar(e,(e=>n.Pr(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.Er.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Er.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ec("LruGarbageCollector","Garbage collection skipped; disabled"),Tu.resolve(Hm)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Ec("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),Hm):this.Rr(e,t)))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,t){let n,r,i,s,o,a,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(Ec("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),Sc()<=Un.DEBUG&&Ec("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-a)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),Tu.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function hy(e,t){return new uy(e,t)}class dy{constructor(e,t){this.db=e,this.garbageCollector=hy(this,t)}dr(e){const t=this.Vr(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Vr(e){let t=0;return this.Ar(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ar(e,t){return this.mr(e,((e,n)=>t(n)))}addReference(e,t,n){return fy(e,n)}removeReference(e,t,n){return fy(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return fy(e,t)}gr(e,t){return function(e,t){let n=!1;return Zm(e).ne((r=>$m(e,r,t).next((e=>(e&&(n=!0),Tu.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.mr(e,((s,o)=>{if(o<=t){const t=this.gr(e,s).next((t=>{if(!t)return i++,n.getEntry(e,s).next((()=>(n.removeEntry(s,nu.min()),iy(e).delete(function(e){return[0,Bu(e.path)]}(s)))))}));r.push(t)}})).next((()=>Tu.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return fy(e,t)}mr(e,t){const n=iy(e);let r,i=Fu.le;return n.te({index:vh},((e,n)=>{let[s,o]=e,{path:a,sequenceNumber:l}=n;0===s?(i!==Fu.le&&t(new lu(Ku(r)),i),i=l,r=a):i=Fu.le})).next((()=>{i!==Fu.le&&t(new lu(Ku(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function fy(e,t){return iy(e).put(function(e,t){return{targetId:0,path:Bu(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class py{constructor(){this.changes=new Zf((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,nf.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Tu.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class gy{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return _y(e).put(n)}removeEntry(e,t,n){return _y(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Jg(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.pr(e,n))))}getEntry(e,t){let n=nf.newInvalidDocument(t);return _y(e).te({index:ah,range:IDBKeyRange.only(wy(t))},((e,r)=>{n=this.yr(t,r)})).next((()=>n))}wr(e,t){let n={size:0,document:nf.newInvalidDocument(t)};return _y(e).te({index:ah,range:IDBKeyRange.only(wy(t))},((e,r)=>{n={document:this.yr(t,r),size:Qm(r)}})).next((()=>n))}getEntries(e,t){let n=tp();return this.br(e,t,((e,t)=>{const r=this.yr(e,t);n=n.insert(e,r)})).next((()=>n))}Sr(e,t){let n=tp(),r=new nd(lu.comparator);return this.br(e,t,((e,t)=>{const i=this.yr(e,t);n=n.insert(e,i),r=r.insert(e,Qm(t))})).next((()=>({documents:n,Dr:r})))}br(e,t,n){if(t.isEmpty())return Tu.resolve();let r=new sd(Ty);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(wy(r.first()),wy(r.last())),s=r.getIterator();let o=s.getNext();return _y(e).te({index:ah,range:i},((e,t,r)=>{const i=lu.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&Ty(o,i)<0;)n(o,null),o=s.getNext();o&&o.isEqual(i)&&(n(o,t),o=s.hasNext()?s.getNext():null),o?r.H(wy(o)):r.done()})).next((()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r,i){const s=t.path,o=[s.popLast().toArray(),s.lastSegment(),Jg(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return _y(e).J(IDBKeyRange.bound(o,a,!0)).next((e=>{null==i||i.incrementDocumentReadCount(e.length);let n=tp();for(const i of e){const e=this.yr(lu.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(Yf(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=tp();const s=by(t,n),o=by(t,yu.max());return _y(e).te({index:ch,range:IDBKeyRange.bound(s,o,!0)},((e,t,n)=>{const s=this.yr(lu.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(s.key,s),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new yy(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return vy(e).get(dh).next((e=>(Pc(!!e,20021),e)))}pr(e,t){return vy(e).put(dh,t)}yr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=Dg(e.wt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=lu.fromSegments(t.noDocument.path),r=Zg(t.noDocument.readTime);n=nf.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return xc(56709);{const e=lu.fromSegments(t.unknownDocument.path),r=Zg(t.unknownDocument.version);n=nf.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new tu(e[0],e[1]);return nu.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(nu.min()))return e}return nf.newInvalidDocument(e)}}function my(e){return new gy(e)}class yy extends py{constructor(e,t){super(),this.vr=e,this.trackRemovals=t,this.Cr=new Zf((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new sd(((e,t)=>Gc(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,s)=>{const o=this.Cr.get(i);if(t.push(this.vr.removeEntry(e,i,o.readTime)),s.isValidDocument()){const a=$g(this.vr.serializer,s);r=r.add(i.path.popLast());const l=Qm(a);n+=l-o.size,t.push(this.vr.addEntry(e,i,a))}else if(n-=o.size,this.trackRemovals){const n=$g(this.vr.serializer,s.convertToNoDocument(nu.min()));t.push(this.vr.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this.vr.indexManager.addToCollectionParentIndex(e,n))})),t.push(this.vr.updateMetadata(e,n)),Tu.waitFor(t)}getFromCache(e,t){return this.vr.wr(e,t).next((e=>(this.Cr.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this.vr.Sr(e,t).next((e=>{let{documents:t,Dr:n}=e;return n.forEach(((e,n)=>{this.Cr.set(e,{size:n,readTime:t.get(e).readTime})})),t}))}}function vy(e){return Xh(e,hh)}function _y(e){return Xh(e,sh)}function wy(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function by(e,t){const n=t.documentKey.path.toArray();return[e,Jg(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Ty(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=Gc(n[s],r[s]),i)return i;return i=Gc(n.length,r.length),i||(i=Gc(n[n.length-2],r[r.length-2]),i||Gc(n[n.length-1],r[r.length-1]))}class Iy{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Sy{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Lp(n.mutation,e,ld.empty(),tu.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,up()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:up();const r=sp();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=rp();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=sp();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,up())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=tp();const s=ap(),o=ap();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof jp)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),Lp(o.mutation,t,o.mutation.getFieldMask(),tu.now())):s.set(t.key,ld.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new Iy(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=ap();let r=new nd(((e,t)=>e-t)),i=up();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||ld.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||up()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,c=op();l.forEach((e=>{if(!i.has(e)){const r=Dp(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,c))}return Tu.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return lu.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Vf(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Tu.resolve(sp());let o=cu,a=i;return s.next((t=>Tu.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?Tu.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,up()))).next((e=>({batchId:o,changes:ip(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new lu(t)).next((e=>{let t=rp();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=rp();return this.indexManager.getCollectionParents(e,i).next((o=>Tu.forEach(o,(o=>{const a=function(e,t){return new Mf(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,nf.newInvalidDocument(r)))}));let n=rp();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&Lp(s.mutation,r,ld.empty(),tu.now()),Yf(t,r)&&(n=n.insert(e,r))})),n}))}}class Ey{constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,t){return Tu.resolve(this.Fr.get(t))}saveBundleMetadata(e,t){return this.Fr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Tg(e.createTime)}}(t)),Tu.resolve()}getNamedQuery(e,t){return Tu.resolve(this.Mr.get(t))}saveNamedQuery(e,t){return this.Mr.set(t.name,function(e){return{name:e.name,query:rm(e.bundledQuery),readTime:Tg(e.readTime)}}(t)),Tu.resolve()}}class ky{constructor(){this.overlays=new nd(lu.comparator),this.Or=new Map}getOverlay(e,t){return Tu.resolve(this.overlays.get(t))}getOverlays(e,t){const n=sp();return Tu.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.St(e,t,r)})),Tu.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Or.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.Or.delete(n)),Tu.resolve()}getOverlaysForCollection(e,t,n){const r=sp(),i=t.length+1,s=new lu(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Tu.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new nd(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=sp(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=sp(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return Tu.resolve(o)}St(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Or.get(r.largestBatchId).delete(n.key);this.Or.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Gp(t,n));let i=this.Or.get(t);void 0===i&&(i=up(),this.Or.set(t,i)),this.Or.set(t,i.add(n.key))}}class Cy{constructor(){this.sessionToken=ud.EMPTY_BYTE_STRING}getSessionToken(e){return Tu.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Tu.resolve()}}class Ny{constructor(){this.Nr=new sd(xy.Br),this.Lr=new sd(xy.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,t){const n=new xy(e,t);this.Nr=this.Nr.add(n),this.Lr=this.Lr.add(n)}qr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Qr(new xy(e,t))}$r(e,t){e.forEach((e=>this.removeReference(e,t)))}Ur(e){const t=new lu(new su([])),n=new xy(t,e),r=new xy(t,e+1),i=[];return this.Lr.forEachInRange([n,r],(e=>{this.Qr(e),i.push(e.key)})),i}Kr(){this.Nr.forEach((e=>this.Qr(e)))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){const t=new lu(new su([])),n=new xy(t,e),r=new xy(t,e+1);let i=up();return this.Lr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new xy(e,0),n=this.Nr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class xy{constructor(e,t){this.key=e,this.Gr=t}static Br(e,t){return lu.comparator(e.key,t.key)||Gc(e.Gr,t.Gr)}static kr(e,t){return Gc(e.Gr,t.Gr)||lu.comparator(e.key,t.key)}}class Ay{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Jn=1,this.zr=new sd(xy.Br)}checkEmpty(e){return Tu.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Wp(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.zr=this.zr.add(new xy(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Tu.resolve(s)}lookupMutationBatch(e,t){return Tu.resolve(this.jr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Hr(n),i=r<0?0:r;return Tu.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Tu.resolve(0===this.mutationQueue.length?Uu:this.Jn-1)}getAllMutationBatches(e){return Tu.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new xy(t,0),r=new xy(t,Number.POSITIVE_INFINITY),i=[];return this.zr.forEachInRange([n,r],(e=>{const t=this.jr(e.Gr);i.push(t)})),Tu.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new sd(Gc);return t.forEach((e=>{const t=new xy(e,0),r=new xy(e,Number.POSITIVE_INFINITY);this.zr.forEachInRange([t,r],(e=>{n=n.add(e.Gr)}))})),Tu.resolve(this.Jr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;lu.isDocumentKey(i)||(i=i.child(""));const s=new xy(new lu(i),0);let o=new sd(Gc);return this.zr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Gr)),!0)}),s),Tu.resolve(this.Jr(o))}Jr(e){const t=[];return e.forEach((e=>{const n=this.jr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Pc(0===this.Yr(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.zr;return Tu.forEach(t.mutations,(r=>{const i=new xy(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.zr=n}))}Xn(e){}containsKey(e,t){const n=new xy(t,0),r=this.zr.firstAfterOrEqual(n);return Tu.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Tu.resolve()}Yr(e,t){return this.Hr(e)}Hr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}jr(e){const t=this.Hr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Py{constructor(e){this.Zr=e,this.docs=new nd(lu.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.Zr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Tu.resolve(n?n.document.mutableCopy():nf.newInvalidDocument(t))}getEntries(e,t){let n=tp();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():nf.newInvalidDocument(e))})),Tu.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=tp();const s=t.path,o=new lu(s.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||vu(mu(o),n)<=0||(r.has(o.key)||Yf(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return Tu.resolve(i)}getAllFromCollectionGroup(e,t,n,r){xc(9500)}Xr(e,t){return Tu.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Ry(this)}getSize(e){return Tu.resolve(this.size)}}class Ry extends py{constructor(e){super(),this.vr=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.vr.addEntry(e,r)):this.vr.removeEntry(n)})),Tu.waitFor(t)}getFromCache(e,t){return this.vr.getEntry(e,t)}getAllFromCache(e,t){return this.vr.getEntries(e,t)}}class Dy{constructor(e){this.persistence=e,this.ei=new Zf((e=>Af(e)),Pf),this.lastRemoteSnapshotVersion=nu.min(),this.highestTargetId=0,this.ti=0,this.ni=new Ny,this.targetCount=0,this.ri=ey.rr()}forEachTarget(e,t){return this.ei.forEach(((e,n)=>t(n))),Tu.resolve()}getLastRemoteSnapshotVersion(e){return Tu.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Tu.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),Tu.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.ti&&(this.ti=t),Tu.resolve()}ar(e){this.ei.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ri=new ey(t),this.highestTargetId=t),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,t){return this.ar(t),this.targetCount+=1,Tu.resolve()}updateTargetData(e,t){return this.ar(t),Tu.resolve()}removeTargetData(e,t){return this.ei.delete(t.target),this.ni.Ur(t.targetId),this.targetCount-=1,Tu.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.ei.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.ei.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),Tu.waitFor(i).next((()=>r))}getTargetCount(e){return Tu.resolve(this.targetCount)}getTargetData(e,t){const n=this.ei.get(t)||null;return Tu.resolve(n)}addMatchingKeys(e,t,n){return this.ni.qr(t,n),Tu.resolve()}removeMatchingKeys(e,t,n){this.ni.$r(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),Tu.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.ni.Ur(t),Tu.resolve()}getMatchingKeysForTargetId(e,t){const n=this.ni.Wr(t);return Tu.resolve(n)}containsKey(e,t){return Tu.resolve(this.ni.containsKey(t))}}class Oy{constructor(e,t){this.ii={},this.overlays={},this.si=new Fu(0),this.oi=!1,this.oi=!0,this._i=new Cy,this.referenceDelegate=e(this),this.ai=new Dy(this),this.indexManager=new Om,this.remoteDocumentCache=function(e){return new Py(e)}((e=>this.referenceDelegate.ui(e))),this.serializer=new Yg(t),this.ci=new Ey(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ky,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ii[e.toKey()];return n||(n=new Ay(t,this.referenceDelegate),this.ii[e.toKey()]=n),n}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,t,n){Ec("MemoryPersistence","Starting transaction:",e);const r=new Ly(this.si.next());return this.referenceDelegate.li(),n(r).next((e=>this.referenceDelegate.hi(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Pi(e,t){return Tu.or(Object.values(this.ii).map((n=>()=>n.containsKey(e,t))))}}class Ly extends wu{constructor(e){super(),this.currentSequenceNumber=e}}class My{constructor(e){this.persistence=e,this.Ti=new Ny,this.Ii=null}static Ei(e){return new My(e)}get di(){if(this.Ii)return this.Ii;throw xc(60996)}addReference(e,t,n){return this.Ti.addReference(n,t),this.di.delete(n.toString()),Tu.resolve()}removeReference(e,t,n){return this.Ti.removeReference(n,t),this.di.add(n.toString()),Tu.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),Tu.resolve()}removeTarget(e,t){this.Ti.Ur(t.targetId).forEach((e=>this.di.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.di.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}li(){this.Ii=new Set}hi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Tu.forEach(this.di,(n=>{const r=lu.fromPath(n);return this.Ai(e,r).next((e=>{e||t.removeEntry(r,nu.min())}))})).next((()=>(this.Ii=null,t.apply(e))))}updateLimboDocument(e,t){return this.Ai(e,t).next((e=>{e?this.di.delete(t.toString()):this.di.add(t.toString())}))}ui(e){return 0}Ai(e,t){return Tu.or([()=>Tu.resolve(this.Ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Pi(e,t)])}}class Fy{constructor(e,t){this.persistence=e,this.Ri=new Zf((e=>Bu(e.path)),((e,t)=>e.isEqual(t))),this.garbageCollector=hy(this,t)}static Ei(e,t){return new Fy(e,t)}li(){}hi(e){return Tu.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Vr(e){let t=0;return this.Ar(e,(e=>{t++})).next((()=>t))}Ar(e,t){return Tu.forEach(this.Ri,((n,r)=>this.gr(e,n,r).next((e=>e?Tu.resolve():t(r)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.Xr(e,(r=>this.gr(e,r,t).next((e=>{e||(n++,i.removeEntry(r,nu.min()))})))).next((()=>i.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.Ri.set(t,e.currentSequenceNumber),Tu.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.Ri.set(n,e.currentSequenceNumber),Tu.resolve()}removeReference(e,t,n){return this.Ri.set(n,e.currentSequenceNumber),Tu.resolve()}updateLimboDocument(e,t){return this.Ri.set(t,e.currentSequenceNumber),Tu.resolve()}ui(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=jd(e.data.value)),t}gr(e,t,n){return Tu.or([()=>this.persistence.Pi(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.Ri.get(t);return Tu.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Uy{constructor(e){this.serializer=e}q(e,t,n,r){const i=new Su("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore(Qu)}(e),function(e){e.createObjectStore($u,{keyPath:"userId"});e.createObjectStore(Ju,{keyPath:Xu,autoIncrement:!0}).createIndex(Zu,eh,{unique:!0}),e.createObjectStore(ih)}(e),jy(e),function(e){e.createObjectStore(Gu)}(e));let s=Tu.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(mh),e.deleteObjectStore(fh),e.deleteObjectStore(bh)}(e),jy(e)),s=s.next((()=>function(e){const t=e.store(bh),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:nu.min().toTimestamp(),targetCount:0};return t.put(wh,n)}(i)))),n<4&&r>=4&&(0!==n&&(s=s.next((()=>function(e,t){return t.store(Ju).J().next((n=>{e.deleteObjectStore(Ju),e.createObjectStore(Ju,{keyPath:Xu,autoIncrement:!0}).createIndex(Zu,eh,{unique:!0});const r=t.store(Ju),i=n.map((e=>r.put(e)));return Tu.waitFor(i)}))}(e,i)))),s=s.next((()=>{!function(e){e.createObjectStore(Sh,{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(s=s.next((()=>this.Vi(i)))),n<6&&r>=6&&(s=s.next((()=>(function(e){e.createObjectStore(hh)}(e),this.mi(i))))),n<7&&r>=7&&(s=s.next((()=>this.fi(i)))),n<8&&r>=8&&(s=s.next((()=>this.gi(e,i)))),n<9&&r>=9&&(s=s.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(s=s.next((()=>this.pi(i)))),n<11&&r>=11&&(s=s.next((()=>{!function(e){e.createObjectStore(Eh,{keyPath:"bundleId"})}(e),function(e){e.createObjectStore(kh,{keyPath:"name"})}(e)}))),n<12&&r>=12&&(s=s.next((()=>{!function(e){const t=e.createObjectStore(Fh,{keyPath:Uh});t.createIndex(jh,Vh,{unique:!1}),t.createIndex(zh,qh,{unique:!1})}(e)}))),n<13&&r>=13&&(s=s.next((()=>function(e){const t=e.createObjectStore(sh,{keyPath:oh});t.createIndex(ah,lh),t.createIndex(ch,uh)}(e))).next((()=>this.yi(e,i))).next((()=>e.deleteObjectStore(Gu)))),n<14&&r>=14&&(s=s.next((()=>this.wi(e,i)))),n<15&&r>=15&&(s=s.next((()=>function(e){e.createObjectStore(Ch,{keyPath:"indexId",autoIncrement:!0}).createIndex(Nh,"collectionGroup",{unique:!1});e.createObjectStore(xh,{keyPath:Ah}).createIndex(Ph,Rh,{unique:!1});e.createObjectStore(Dh,{keyPath:Oh}).createIndex(Lh,Mh,{unique:!1})}(e)))),n<16&&r>=16&&(s=s.next((()=>{t.objectStore(xh).clear()})).next((()=>{t.objectStore(Dh).clear()}))),n<17&&r>=17&&(s=s.next((()=>{!function(e){e.createObjectStore(Bh,{keyPath:"name"})}(e)}))),s}mi(e){let t=0;return e.store(Gu).te(((e,n)=>{t+=Qm(n)})).next((()=>{const n={byteSize:t};return e.store(hh).put(dh,n)}))}Vi(e){const t=e.store($u),n=e.store(Ju);return t.J().next((t=>Tu.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,Uu],[t.userId,t.lastAcknowledgedBatchId]);return n.J(Zu,r).next((n=>Tu.forEach(n,(n=>{Pc(n.userId===t.userId,18650,"Cannot process batch from unexpected user",{batchId:n.batchId});const r=em(this.serializer,n);return Gm(e,t.userId,r).next((()=>{}))}))))}))))}fi(e){const t=e.store(mh),n=e.store(Gu);return e.store(bh).get(wh).next((e=>{const r=[];return n.te(((n,i)=>{const s=new su(n),o=function(e){return[0,Bu(e)]}(s);r.push(t.get(o).next((n=>n?Tu.resolve():(n=>t.put({targetId:0,path:Bu(n),sequenceNumber:e.highestListenSequenceNumber}))(s))))})).next((()=>Tu.waitFor(r)))}))}gi(e,t){e.createObjectStore(Th,{keyPath:Ih});const n=t.store(Th),r=new Lm,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:Bu(r)})}};return t.store(Gu).te({ee:!0},((e,t)=>{const n=new su(e);return i(n.popLast())})).next((()=>t.store(ih).te({ee:!0},((e,t)=>{let[n,r,s]=e;const o=Ku(r);return i(o.popLast())}))))}pi(e){const t=e.store(fh);return t.te(((e,n)=>{const r=tm(n),i=nm(this.serializer,r);return t.put(i)}))}yi(e,t){const n=t.store(Gu),r=[];return n.te(((e,n)=>{const i=t.store(sh),s=function(e){return e.document?new lu(su.fromString(e.document.name).popFirst(5)):e.noDocument?lu.fromSegments(e.noDocument.path):e.unknownDocument?lu.fromSegments(e.unknownDocument.path):xc(36783)}(n).path.toArray(),o={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))})).next((()=>Tu.waitFor(r)))}wi(e,t){const n=t.store(Ju),r=my(this.serializer),i=new Oy(My.Ei,this.serializer.wt);return n.J().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:up();em(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),Tu.forEach(n,((e,n)=>{const s=new bc(n),o=um.bt(this.serializer,s),a=i.getIndexManager(s),l=Ym.bt(s,this.serializer,a,i.referenceDelegate);return new Sy(r,l,o,a).recalculateAndSaveOverlaysForDocumentKeys(new Jh(t,Fu.le),e).next()}))}))}}function jy(e){e.createObjectStore(mh,{keyPath:yh}).createIndex(vh,_h,{unique:!0}),e.createObjectStore(fh,{keyPath:"targetId"}).createIndex(ph,gh,{unique:!0}),e.createObjectStore(bh)}const Vy="IndexedDbPersistence",zy=18e5,qy=5e3,By="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Hy="main";class Wy{constructor(e,t,n,r,i,s,o,a,l,c){let u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:17;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.bi=i,this.window=s,this.document=o,this.Si=l,this.Di=c,this.Ci=u,this.si=null,this.oi=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fi=null,this.inForeground=!1,this.Mi=null,this.xi=null,this.Oi=Number.NEGATIVE_INFINITY,this.Ni=e=>Promise.resolve(),!Wy.C())throw new Oc(Dc.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new dy(this,r),this.Bi=t+Hy,this.serializer=new Yg(a),this.Li=new Eu(this.Bi,this.Ci,new Uy(this.serializer)),this._i=new dm,this.ai=new ty(this.referenceDelegate,this.serializer),this.remoteDocumentCache=my(this.serializer),this.ci=new am,this.window&&this.window.localStorage?this.ki=this.window.localStorage:(this.ki=null,!1===c&&kc(Vy,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.qi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Oc(Dc.FAILED_PRECONDITION,By);return this.Qi(),this.$i(),this.Ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.ai.getHighestSequenceNumber(e)))})).then((e=>{this.si=new Fu(e,this.Si)})).then((()=>{this.oi=!0})).catch((e=>(this.Li&&this.Li.close(),Promise.reject(e))))}Ki(e){return this.Ni=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Li.U((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.bi.enqueueAndForget((async()=>{this.started&&await this.qi()})))}qi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Gy(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Wi(e).next((e=>{e||(this.isPrimary=!1,this.bi.enqueueRetryable((()=>this.Ni(!1))))}))})).next((()=>this.Gi(e))).next((t=>this.isPrimary&&!t?this.zi(e).next((()=>!1)):!!t&&this.ji(e).next((()=>!0)))))).catch((e=>{if(xu(e))return Ec(Vy,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ec(Vy,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.bi.enqueueRetryable((()=>this.Ni(e))),this.isPrimary=e}))}Wi(e){return Ky(e).get(Yu).next((e=>Tu.resolve(this.Hi(e))))}Ji(e){return Gy(e).delete(this.clientId)}async Yi(){if(this.isPrimary&&!this.Zi(this.Oi,zy)){this.Oi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=Xh(e,Sh);return t.J().next((e=>{const n=this.Xi(e,zy),r=e.filter((e=>-1===n.indexOf(e)));return Tu.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.ki)for(const t of e)this.ki.removeItem(this.es(t.clientId))}}Ui(){this.xi=this.bi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.qi().then((()=>this.Yi())).then((()=>this.Ui()))))}Hi(e){return!!e&&e.ownerId===this.clientId}Gi(e){return this.Di?Tu.resolve(!0):Ky(e).get(Yu).next((t=>{if(null!==t&&this.Zi(t.leaseTimestampMs,qy)&&!this.ts(t.ownerId)){if(this.Hi(t)&&this.networkEnabled)return!0;if(!this.Hi(t)){if(!t.allowTabSynchronization)throw new Oc(Dc.FAILED_PRECONDITION,By);return!1}}return!(!this.networkEnabled||!this.inForeground)||Gy(e).J().next((e=>void 0===this.Xi(e,qy).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&Ec(Vy,"Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e)))}async shutdown(){this.oi=!1,this.ns(),this.xi&&(this.xi.cancel(),this.xi=null),this.rs(),this.ss(),await this.Li.runTransaction("shutdown","readwrite",[Qu,Sh],(e=>{const t=new Jh(e,Fu.le);return this.zi(t).next((()=>this.Ji(t)))})),this.Li.close(),this._s()}Xi(e,t){return e.filter((e=>this.Zi(e.updateTimeMs,t)&&!this.ts(e.clientId)))}us(){return this.runTransaction("getActiveClients","readonly",(e=>Gy(e).J().next((e=>this.Xi(e,zy).map((e=>e.clientId))))))}get started(){return this.oi}getGlobalsCache(){return this._i}getMutationQueue(e,t){return Ym.bt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Um(e,this.serializer.wt.databaseId)}getDocumentOverlayCache(e){return um.bt(this.serializer,e)}getBundleCache(){return this.ci}runTransaction(e,t,n){Ec(Vy,"Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 17===e?$h:16===e?Yh:15===e?Qh:14===e?Gh:13===e?Kh:12===e?Wh:11===e?Hh:void xc(60245)}(this.Ci);let s;return this.Li.runTransaction(e,r,i,(r=>(s=new Jh(r,this.si?this.si.next():Fu.le),"readwrite-primary"===t?this.Wi(s).next((e=>!!e||this.Gi(s))).next((t=>{if(!t)throw kc("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.bi.enqueueRetryable((()=>this.Ni(!1))),new Oc(Dc.FAILED_PRECONDITION,_u);return n(s)})).next((e=>this.ji(s).next((()=>e)))):this.cs(s).next((()=>n(s)))))).then((e=>(s.raiseOnCommittedEvent(),e)))}cs(e){return Ky(e).get(Yu).next((e=>{if(null!==e&&this.Zi(e.leaseTimestampMs,qy)&&!this.ts(e.ownerId)&&!this.Hi(e)&&!(this.Di||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Oc(Dc.FAILED_PRECONDITION,By)}))}ji(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ky(e).put(Yu,t)}static C(){return Eu.C()}zi(e){const t=Ky(e);return t.get(Yu).next((e=>this.Hi(e)?(Ec(Vy,"Releasing primary lease."),t.delete(Yu)):Tu.resolve()))}Zi(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(kc("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}Qi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Mi=()=>{this.bi.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.qi())))},this.document.addEventListener("visibilitychange",this.Mi),this.inForeground="visible"===this.document.visibilityState)}rs(){this.Mi&&(this.document.removeEventListener("visibilitychange",this.Mi),this.Mi=null)}$i(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Fi=()=>{this.ns();const e=/(?:Version|Mobile)\/1[456]/;nn()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.bi.enterRestrictedMode(!0),this.bi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Fi))}ss(){this.Fi&&(this.window.removeEventListener("pagehide",this.Fi),this.Fi=null)}ts(e){var t;try{const n=null!==(null===(t=this.ki)||void 0===t?void 0:t.getItem(this.es(e)));return Ec(Vy,"Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return kc(Vy,"Failed to get zombied client id.",e),!1}}ns(){if(this.ki)try{this.ki.setItem(this.es(this.clientId),String(Date.now()))}catch(WM){kc("Failed to set zombie client id.",WM)}}_s(){if(this.ki)try{this.ki.removeItem(this.es(this.clientId))}catch(WM){}}es(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function Ky(e){return Xh(e,Qu)}function Gy(e){return Xh(e,Sh)}function Qy(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class Yy{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.ls=n,this.hs=r}static Ps(e,t){let n=up(),r=up();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Yy(e,t.fromCache,n,r)}}class $y{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Jy{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=nn()?8:ku(Qt())>0?6:4}initialize(e,t){this.As=e,this.indexManager=t,this.Ts=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.Rs(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.Vs(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new $y;return this.fs(e,t,n).next((r=>{if(i.result=r,this.Is)return this.gs(e,t,n,r.size)}))})).next((()=>i.result))}gs(e,t,n,r){return n.documentReadCount<this.Es?(Sc()<=Un.DEBUG&&Ec("QueryEngine","SDK will not create cache indexes for query:",Qf(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),Tu.resolve()):(Sc()<=Un.DEBUG&&Ec("QueryEngine","Query:",Qf(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.ds*r?(Sc()<=Un.DEBUG&&Ec("QueryEngine","The SDK decides to create cache indexes for query:",Qf(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,qf(t))):Tu.resolve())}Rs(e,t){if(jf(t))return Tu.resolve(null);let n=qf(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=Wf(t,null,"F"),n=qf(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=up(...r);return this.As.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.ps(t,r);return this.ys(t,s,i,n.readTime)?this.Rs(e,Wf(t,null,"F")):this.ws(e,s,t,n)}))))})))))}Vs(e,t,n,r){return jf(t)||r.isEqual(nu.min())?Tu.resolve(null):this.As.getDocuments(e,n).next((i=>{const s=this.ps(t,i);return this.ys(t,s,n,r)?Tu.resolve(null):(Sc()<=Un.DEBUG&&Ec("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Qf(t)),this.ws(e,s,t,gu(r,cu)).next((e=>e)))}))}ps(e,t){let n=new sd(Jf(e));return t.forEach(((t,r)=>{Yf(e,r)&&(n=n.add(r))})),n}ys(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}fs(e,t,n){return Sc()<=Un.DEBUG&&Ec("QueryEngine","Using full collection scan to execute query:",Qf(t)),this.As.getDocumentsMatchingQuery(e,t,yu.min(),n)}ws(e,t,n,r){return this.As.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}const Xy="LocalStore";class Zy{constructor(e,t,n,r){this.persistence=e,this.bs=t,this.serializer=r,this.Ss=new nd(Gc),this.Ds=new Zf((e=>Af(e)),Pf),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(n)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Sy(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ss)))}}function ev(e,t,n,r){return new Zy(e,t,n,r)}async function tv(e,t){const n=Rc(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.Fs(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=up();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({Ms:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function nv(e){const t=Rc(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.ai.getLastRemoteSnapshotVersion(e)))}function rv(e,t,n){let r=up(),i=up();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=tp();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(nu.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):Ec(Xy,"Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{xs:r,Os:i}}))}function iv(e,t){const n=Rc(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=Uu),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function sv(e,t){const n=Rc(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.ai.getTargetData(e,t).next((i=>i?(r=i,Tu.resolve(r)):n.ai.allocateTargetId(e).next((i=>(r=new Qg(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.ai.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.Ss.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ss=n.Ss.insert(e.targetId,e),n.Ds.set(t,e.targetId)),e}))}async function ov(e,t,n){const r=Rc(e),i=r.Ss.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!xu(e))throw e;Ec(Xy,"Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.Ss=r.Ss.remove(t),r.Ds.delete(i.target)}function av(e,t,n){const r=Rc(e);let i=nu.min(),s=up();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=Rc(e),i=r.Ds.get(n);return void 0!==i?Tu.resolve(r.Ss.get(i)):r.ai.getTargetData(t,n)}(r,e,qf(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.ai.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.bs.getDocumentsMatchingQuery(e,t,n?i:nu.min(),n?s:up()))).next((e=>(uv(r,$f(t),e),{documents:e,Ns:s})))))}function lv(e,t){const n=Rc(e),r=Rc(n.ai),i=n.Ss.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r.Rt(e,t).next((e=>e?e.target:null))))}function cv(e,t){const n=Rc(e),r=n.vs.get(t)||nu.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.Cs.getAllFromCollectionGroup(e,t,gu(r,cu),Number.MAX_SAFE_INTEGER))).then((e=>(uv(n,t,e),e)))}function uv(e,t,n){let r=e.vs.get(t)||nu.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.vs.set(t,r)}async function hv(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:up();const r=await sv(e,qf(rm(t.bundledQuery))),i=Rc(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const s=Tg(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.ci.saveNamedQuery(e,t);const o=r.withResumeToken(ud.EMPTY_BYTE_STRING,s);return i.Ss=i.Ss.insert(o.targetId,o),i.ai.updateTargetData(e,o).next((()=>i.ai.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.ai.addMatchingKeys(e,n,r.targetId))).next((()=>i.ci.saveNamedQuery(e,t)))}))}const dv="firestore_clients";function fv(e,t){return"".concat(dv,"_").concat(e,"_").concat(t)}const pv="firestore_mutations";function gv(e,t,n){let r="".concat(pv,"_").concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}const mv="firestore_targets";function yv(e,t){return"".concat(mv,"_").concat(e,"_").concat(t)}const vv="SharedClientState";class _v{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static qs(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Oc(r.error.code,r.error.message))),s?new _v(e,t,r.state,i):(kc(vv,"Failed to parse mutation state for ID '".concat(t,"': ").concat(n)),null)}Qs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class wv{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static qs(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new Oc(n.error.code,n.error.message))),i?new wv(e,n.state,r):(kc(vv,"Failed to parse target state for ID '".concat(e,"': ").concat(t)),null)}Qs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class bv{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static qs(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=dp();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=zu(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new bv(e,i):(kc(vv,"Failed to parse client data for instance '".concat(e,"': ").concat(t)),null)}}class Tv{constructor(e,t){this.clientId=e,this.onlineState=t}static qs(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Tv(t.clientId,t.onlineState):(kc(vv,"Failed to parse online state: ".concat(e)),null)}}class Iv{constructor(){this.activeTargetIds=dp()}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Sv{constructor(e,t,n,r,i){this.window=e,this.bi=t,this.persistenceKey=n,this.Ks=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Ws=this.Gs.bind(this),this.zs=new nd(Gc),this.started=!1,this.js=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Hs=fv(this.persistenceKey,this.Ks),this.Js=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.zs=this.zs.insert(this.Ks,new Iv),this.Ys=new RegExp("^".concat(dv,"_").concat(s,"_([^_]*)$")),this.Zs=new RegExp("^".concat(pv,"_").concat(s,"_(\\d+)(?:_(.*))?$")),this.Xs=new RegExp("^".concat(mv,"_").concat(s,"_(\\d+)$")),this.eo=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.no=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.Ws)}static C(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.us();for(const n of e){if(n===this.Ks)continue;const e=this.getItem(fv(this.persistenceKey,n));if(e){const t=bv.qs(n,e);t&&(this.zs=this.zs.insert(t.clientId,t))}}this.ro();const t=this.storage.getItem(this.eo);if(t){const e=this.io(t);e&&this.so(e)}for(const n of this.js)this.Gs(n);this.js=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Js,JSON.stringify(e))}getAllActiveQueryTargets(){return this.oo(this.zs)}isActiveQueryTarget(e){let t=!1;return this.zs.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this._o(e,"pending")}updateMutationState(e,t,n){this._o(e,t,n),this.ao(e)}addLocalQueryTarget(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n="not-current";if(this.isActiveQueryTarget(e)){const t=this.storage.getItem(yv(this.persistenceKey,e));if(t){const r=wv.qs(e,t);r&&(n=r.state)}}return t&&this.uo.$s(e),this.ro(),n}removeLocalQueryTarget(e){this.uo.Us(e),this.ro()}isLocalQueryTarget(e){return this.uo.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(yv(this.persistenceKey,e))}updateQueryState(e,t,n){this.co(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.ao(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.lo(e)}notifyBundleLoaded(e){this.ho(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Ws),this.removeItem(this.Hs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ec(vv,"READ",e,t),t}setItem(e,t){Ec(vv,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ec(vv,"REMOVE",e),this.storage.removeItem(e)}Gs(e){const t=e;if(t.storageArea===this.storage){if(Ec(vv,"EVENT",t.key,t.newValue),t.key===this.Hs)return void kc("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.bi.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.Ys.test(t.key)){if(null==t.newValue){const e=this.Po(t.key);return this.To(e,null)}{const e=this.Io(t.key,t.newValue);if(e)return this.To(e.clientId,e)}}else if(this.Zs.test(t.key)){if(null!==t.newValue){const e=this.Eo(t.key,t.newValue);if(e)return this.Ao(e)}}else if(this.Xs.test(t.key)){if(null!==t.newValue){const e=this.Ro(t.key,t.newValue);if(e)return this.Vo(e)}}else if(t.key===this.eo){if(null!==t.newValue){const e=this.io(t.newValue);if(e)return this.so(e)}}else if(t.key===this.Js){const e=function(e){let t=Fu.le;if(null!=e)try{const n=JSON.parse(e);Pc("number"==typeof n,30636,{mo:e}),t=n}catch(e){kc(vv,"Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==Fu.le&&this.sequenceNumberHandler(e)}else if(t.key===this.no){const e=this.fo(t.newValue);await Promise.all(e.map((e=>this.syncEngine.po(e))))}}else this.js.push(t)}))}}get uo(){return this.zs.get(this.Ks)}ro(){this.setItem(this.Hs,this.uo.Qs())}_o(e,t,n){const r=new _v(this.currentUser,e,t,n),i=gv(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Qs())}ao(e){const t=gv(this.persistenceKey,this.currentUser,e);this.removeItem(t)}lo(e){const t={clientId:this.Ks,onlineState:e};this.storage.setItem(this.eo,JSON.stringify(t))}co(e,t,n){const r=yv(this.persistenceKey,e),i=new wv(e,t,n);this.setItem(r,i.Qs())}ho(e){const t=JSON.stringify(Array.from(e));this.setItem(this.no,t)}Po(e){const t=this.Ys.exec(e);return t?t[1]:null}Io(e,t){const n=this.Po(e);return bv.qs(n,t)}Eo(e,t){const n=this.Zs.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return _v.qs(new bc(i),r,t)}Ro(e,t){const n=this.Xs.exec(e),r=Number(n[1]);return wv.qs(r,t)}io(e){return Tv.qs(e)}fo(e){return JSON.parse(e)}async Ao(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.yo(e.batchId,e.state,e.error);Ec(vv,"Ignoring mutation for non-active user ".concat(e.user.uid))}Vo(e){return this.syncEngine.wo(e.targetId,e.state,e.error)}To(e,t){const n=t?this.zs.insert(e,t):this.zs.remove(e),r=this.oo(this.zs),i=this.oo(n),s=[],o=[];return i.forEach((e=>{r.has(e)||s.push(e)})),r.forEach((e=>{i.has(e)||o.push(e)})),this.syncEngine.bo(s,o).then((()=>{this.zs=n}))}so(e){this.zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}oo(e){let t=dp();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class Ev{constructor(){this.So=new Iv,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,t,n){this.Do[e]=t}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new Iv,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class kv{vo(e){}shutdown(){}}const Cv="ConnectivityMonitor";class Nv{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){Ec(Cv,"Network connectivity changed: AVAILABLE");for(const e of this.Oo)e(0)}xo(){Ec(Cv,"Network connectivity changed: UNAVAILABLE");for(const e of this.Oo)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let xv=null;function Av(){return null===xv?xv=268435456+Math.round(2147483648*Math.random()):xv++,"0x"+xv.toString(16)}const Pv="RestConnection",Rv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Dv{get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Lo=t+"://"+e.host,this.ko="projects/".concat(n,"/databases/").concat(r),this.qo=this.databaseId.database===Id?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}Qo(e,t,n,r,i){const s=Av(),o=this.$o(e,t.toUriEncodedString());Ec(Pv,"Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};this.Uo(a,r,i);const{host:l}=new URL(o),c=qt(l);return this.Ko(e,o,a,n,c).then((t=>(Ec(Pv,"Received RPC '".concat(e,"' ").concat(s,": "),t),t)),(t=>{throw Cc(Pv,"RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t}))}Wo(e,t,n,r,i,s){return this.Qo(e,t,n,r,i)}Uo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Tc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}$o(e,t){const n=Rv[e];return"".concat(this.Lo,"/v1/").concat(t,":").concat(n)}terminate(){}}class Ov{constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}}const Lv="WebChannelConnection";class Mv extends Dv{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,t,n,r,i){const s=Av();return new Promise(((i,o)=>{const a=new cc;a.setWithCredentials(!0),a.listenOnce(hc.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case dc.NO_ERROR:const t=a.getResponseJson();Ec(Lv,"XHR for RPC '".concat(e,"' ").concat(s," received:"),JSON.stringify(t)),i(t);break;case dc.TIMEOUT:Ec(Lv,"RPC '".concat(e,"' ").concat(s," timed out")),o(new Oc(Dc.DEADLINE_EXCEEDED,"Request time out"));break;case dc.HTTP_ERROR:const n=a.getStatus();if(Ec(Lv,"RPC '".concat(e,"' ").concat(s," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Dc).indexOf(t)>=0?t:Dc.UNKNOWN}(t.status);o(new Oc(e,t.message))}else o(new Oc(Dc.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Oc(Dc.UNAVAILABLE,"Connection failed."));break;default:xc(9055,{s_:e,streamId:s,o_:a.getLastErrorCode(),__:a.getLastError()})}}finally{Ec(Lv,"RPC '".concat(e,"' ").concat(s," completed."))}}));const l=JSON.stringify(r);Ec(Lv,"RPC '".concat(e,"' ").concat(s," sending request:"),r),a.send(t,"POST",l,n,15)}))}a_(e,t,n){const r=Av(),i=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=mc(),o=gc(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Uo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");Ec(Lv,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),a);const u=s.createWebChannel(c,a);let h=!1,d=!1;const f=new Ov({Go:t=>{d?Ec(Lv,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(Ec(Lv,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),h=!0),Ec(Lv,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},zo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,uc.EventType.OPEN,(()=>{d||(Ec(Lv,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.t_())})),p(u,uc.EventType.CLOSE,(()=>{d||(d=!0,Ec(Lv,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.r_())})),p(u,uc.EventType.ERROR,(t=>{d||(d=!0,Cc(Lv,"RPC '".concat(e,"' stream ").concat(r," transport errored. Name:"),t.name,"Message:",t.message),f.r_(new Oc(Dc.UNAVAILABLE,"The operation could not be completed")))})),p(u,uc.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];Pc(!!i,16349);const s=i,o=(null==s?void 0:s.error)||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){Ec(Lv,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=Yp[e];if(void 0!==t)return Xp(t)}(t),i=o.message;void 0===n&&(n=Dc.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.r_(new Oc(n,i)),u.close()}else Ec(Lv,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.i_(i)}})),p(o,pc.STAT_EVENT,(t=>{t.stat===fc.PROXY?Ec(Lv,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===fc.NOPROXY&&Ec(Lv,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.n_()}),0),f}}function Fv(){return"undefined"!=typeof window?window:null}function Uv(){return"undefined"!=typeof document?document:null}function jv(e){return new yg(e,!0)}class Vv{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.bi=e,this.timerId=t,this.u_=n,this.c_=r,this.l_=i,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();const t=Math.floor(this.h_+this.d_()),n=Math.max(0,Date.now()-this.T_),r=Math.max(0,t-n);r>0&&Ec("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.h_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.P_=this.bi.enqueueAfterDelay(this.timerId,r,(()=>(this.T_=Date.now(),e()))),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){null!==this.P_&&(this.P_.skipDelay(),this.P_=null)}cancel(){null!==this.P_&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}}const zv="PersistentStream";class qv{constructor(e,t,n,r,i,s,o,a){this.bi=e,this.R_=n,this.V_=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new Vv(e,t)}w_(){return 1===this.state||5===this.state||this.b_()}b_(){return 2===this.state||3===this.state}start(){this.p_=0,4!==this.state?this.auth():this.S_()}async stop(){this.w_()&&await this.close(0)}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&null===this.f_&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,(()=>this.C_())))}F_(e){this.M_(),this.stream.send(e)}async C_(){if(this.b_())return this.close(0)}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}async close(e,t){this.M_(),this.x_(),this.y_.cancel(),this.m_++,4!==e?this.y_.reset():t&&t.code===Dc.RESOURCE_EXHAUSTED?(kc(t.toString()),kc("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):t&&t.code===Dc.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.O_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zo(t)}O_(){}auth(){this.state=1;const e=this.N_(this.m_),t=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.m_===t&&this.B_(n,r)}),(t=>{e((()=>{const e=new Oc(Dc.UNKNOWN,"Fetching auth token failed: "+t.message);return this.L_(e)}))}))}B_(e,t){const n=this.N_(this.m_);this.stream=this.k_(e,t),this.stream.jo((()=>{n((()=>this.listener.jo()))})),this.stream.Jo((()=>{n((()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,(()=>(this.b_()&&(this.state=3),Promise.resolve()))),this.listener.Jo())))})),this.stream.Zo((e=>{n((()=>this.L_(e)))})),this.stream.onMessage((e=>{n((()=>1==++this.p_?this.q_(e):this.onNext(e)))}))}S_(){this.state=5,this.y_.E_((async()=>{this.state=0,this.start()}))}L_(e){return Ec(zv,"close with error: ".concat(e)),this.stream=null,this.close(4,e)}N_(e){return t=>{this.bi.enqueueAndForget((()=>this.m_===e?t():(Ec(zv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Bv extends qv{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}k_(e,t){return this.connection.a_("Listen",e,t)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:xc(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Pc(void 0===t||"string"==typeof t,58123),ud.fromBase64String(t||"")):(Pc(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),ud.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Dc.UNKNOWN:Xp(e.code);return new Oc(t,e.message||"")}(o);n=new cg(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Cg(e,r.document.name),s=Tg(r.document.updateTime),o=r.document.createTime?Tg(r.document.createTime):nu.min(),a=new ef({mapValue:{fields:r.document.fields}}),l=nf.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new ag(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Cg(e,r.document),s=r.readTime?Tg(r.readTime):nu.min(),o=nf.newNoDocument(i,s),a=r.removedTargetIds||[];n=new ag([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Cg(e,r.document),s=r.removedTargetIds||[];n=new ag([],s,i,null)}else{if(!("filter"in t))return xc(11601,{Vt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new Qp(r,i),o=e.targetId;n=new lg(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return nu.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?nu.min():t.readTime?Tg(t.readTime):nu.min()}(e);return this.listener.Q_(t,n)}U_(e){const t={};t.database=Ag(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Rf(r)?{documents:Mg(e,r)}:{query:Fg(e,r).gt},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=wg(e,t.resumeToken);const r=vg(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(nu.min())>0){n.readTime=_g(e,t.snapshotVersion.toTimestamp());const r=vg(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xc(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.F_(t)}K_(e){const t={};t.database=Ag(this.serializer),t.removeTarget=e,this.F_(t)}}class Hv extends qv{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get W_(){return this.p_>0}start(){this.lastStreamToken=void 0,super.start()}O_(){this.W_&&this.G_([])}k_(e,t){return this.connection.a_("Write",e,t)}q_(e){return Pc(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Pc(!e.writeResults||0===e.writeResults.length,55816),this.listener.z_()}onNext(e){Pc(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.y_.reset();const t=function(e,t){return e&&e.length>0?(Pc(void 0!==t,14353),e.map((e=>function(e,t){let n=e.updateTime?Tg(e.updateTime):Tg(t);return n.isEqual(nu.min())&&(n=Tg(t)),new xp(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=Tg(e.commitTime);return this.listener.j_(n,t)}H_(){const e={};e.database=Ag(this.serializer),this.F_(e)}G_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Og(this.serializer,e)))};this.F_(t)}}class Wv{}class Kv extends Wv{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.J_=!1}Y_(){if(this.J_)throw new Oc(Dc.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,t,n,r){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,o]=i;return this.connection.Qo(e,Sg(t,n),r,s,o)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Dc.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Oc(Dc.UNKNOWN,e.toString())}))}Wo(e,t,n,r,i){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[o,a]=s;return this.connection.Wo(e,Sg(t,n),r,o,a,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Dc.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Oc(Dc.UNKNOWN,e.toString())}))}terminate(){this.J_=!0,this.connection.terminate()}}class Gv{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){0===this.Z_&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve()))))}ia(e){"Online"===this.state?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.na("Offline")))}set(e){this.sa(),this.Z_=0,"Online"===e&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.ea?(kc(t),this.ea=!1):Ec("OnlineStateTracker",t)}sa(){null!==this.X_&&(this.X_.cancel(),this.X_=null)}}const Qv="RemoteStore";class Yv{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=i,this.ca.vo((e=>{n.enqueueAndForget((async()=>{i_(this)&&(Ec(Qv,"Restarting streams for network reachability change."),await async function(e){const t=Rc(e);t.aa.add(4),await Jv(t),t.la.set("Unknown"),t.aa.delete(4),await $v(t)}(this))}))})),this.la=new Gv(n,r)}}async function $v(e){if(i_(e))for(const t of e.ua)await t(!0)}async function Jv(e){for(const t of e.ua)await t(!1)}function Xv(e,t){const n=Rc(e);n._a.has(t.targetId)||(n._a.set(t.targetId,t),r_(n)?n_(n):I_(n).b_()&&e_(n,t))}function Zv(e,t){const n=Rc(e),r=I_(n);n._a.delete(t),r.b_()&&t_(n,t),0===n._a.size&&(r.b_()?r.v_():i_(n)&&n.la.set("Unknown"))}function e_(e,t){if(e.ha.Ke(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(nu.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}I_(e).U_(t)}function t_(e,t){e.ha.Ke(t),I_(e).K_(t)}function n_(e){e.ha=new hg({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Rt:t=>e._a.get(t)||null,Pt:()=>e.datastore.serializer.databaseId}),I_(e).start(),e.la.ta()}function r_(e){return i_(e)&&!I_(e).w_()&&e._a.size>0}function i_(e){return 0===Rc(e).aa.size}function s_(e){e.ha=void 0}async function o_(e){e.la.set("Online")}async function a_(e){e._a.forEach(((t,n)=>{e_(e,t)}))}async function l_(e,t){s_(e),r_(e)?(e.la.ia(t),n_(e)):e.la.set("Unknown")}async function c_(e,t,n){if(e.la.set("Online"),t instanceof cg&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e._a.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e._a.delete(r),e.ha.removeTarget(r))}(e,t)}catch(n){Ec(Qv,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await u_(e,n)}else if(t instanceof ag?e.ha.Xe(t):t instanceof lg?e.ha.ot(t):e.ha.nt(t),!n.isEqual(nu.min()))try{const t=await nv(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.ha.It(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e._a.get(r);i&&e._a.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e._a.get(t);if(!r)return;e._a.set(t,r.withResumeToken(ud.EMPTY_BYTE_STRING,r.snapshotVersion)),t_(e,t);const i=new Qg(r.target,t,n,r.sequenceNumber);e_(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Ec(Qv,"Failed to raise snapshot:",t),await u_(e,t)}}async function u_(e,t,n){if(!xu(t))throw t;e.aa.add(1),await Jv(e),e.la.set("Offline"),n||(n=()=>nv(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Ec(Qv,"Retrying IndexedDB access"),await n(),e.aa.delete(1),await $v(e)}))}function h_(e,t){return t().catch((n=>u_(e,n,t)))}async function d_(e){const t=Rc(e),n=S_(t);let r=t.oa.length>0?t.oa[t.oa.length-1].batchId:Uu;for(;f_(t);)try{const e=await iv(t.localStore,r);if(null===e){0===t.oa.length&&n.v_();break}r=e.batchId,p_(t,e)}catch(e){await u_(t,e)}g_(t)&&m_(t)}function f_(e){return i_(e)&&e.oa.length<10}function p_(e,t){e.oa.push(t);const n=S_(e);n.b_()&&n.W_&&n.G_(t.mutations)}function g_(e){return i_(e)&&!S_(e).w_()&&e.oa.length>0}function m_(e){S_(e).start()}async function y_(e){S_(e).H_()}async function v_(e){const t=S_(e);for(const n of e.oa)t.G_(n.mutations)}async function __(e,t,n){const r=e.oa.shift(),i=Kp.from(r,t,n);await h_(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await d_(e)}async function w_(e,t){t&&S_(e).W_&&await async function(e,t){if(function(e){return Jp(e)&&e!==Dc.ABORTED}(t.code)){const n=e.oa.shift();S_(e).D_(),await h_(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await d_(e)}}(e,t),g_(e)&&m_(e)}async function b_(e,t){const n=Rc(e);n.asyncQueue.verifyOperationInProgress(),Ec(Qv,"RemoteStore received new credentials");const r=i_(n);n.aa.add(3),await Jv(n),r&&n.la.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.aa.delete(3),await $v(n)}async function T_(e,t){const n=Rc(e);t?(n.aa.delete(2),await $v(n)):t||(n.aa.add(2),await Jv(n),n.la.set("Unknown"))}function I_(e){return e.Pa||(e.Pa=function(e,t,n){const r=Rc(e);return r.Y_(),new Bv(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{jo:o_.bind(null,e),Jo:a_.bind(null,e),Zo:l_.bind(null,e),Q_:c_.bind(null,e)}),e.ua.push((async t=>{t?(e.Pa.D_(),r_(e)?n_(e):e.la.set("Unknown")):(await e.Pa.stop(),s_(e))}))),e.Pa}function S_(e){return e.Ta||(e.Ta=function(e,t,n){const r=Rc(e);return r.Y_(),new Hv(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{jo:()=>Promise.resolve(),Jo:y_.bind(null,e),Zo:w_.bind(null,e),z_:v_.bind(null,e),j_:__.bind(null,e)}),e.ua.push((async t=>{t?(e.Ta.D_(),await d_(e)):(await e.Ta.stop(),e.oa.length>0&&(Ec(Qv,"Stopping write stream with ".concat(e.oa.length," pending writes")),e.oa=[]))}))),e.Ta}class E_{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Lc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new E_(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Oc(Dc.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function k_(e,t){if(kc("AsyncQueue","".concat(t,": ").concat(e)),xu(e))return new Oc(Dc.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class C_{static emptySet(e){return new C_(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||lu.comparator(t.key,n.key):(e,t)=>lu.comparator(e.key,t.key),this.keyedMap=rp(),this.sortedSet=new nd(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof C_))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new C_;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class N_{constructor(){this.Ia=new nd(lu.comparator)}track(e){const t=e.doc.key,n=this.Ia.get(t);n?0!==e.type&&3===n.type?this.Ia=this.Ia.insert(t,e):3===e.type&&1!==n.type?this.Ia=this.Ia.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Ia=this.Ia.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Ia=this.Ia.remove(t):1===e.type&&2===n.type?this.Ia=this.Ia.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):xc(63341,{Vt:e,Ea:n}):this.Ia=this.Ia.insert(t,e)}da(){const e=[];return this.Ia.inorderTraversal(((t,n)=>{e.push(n)})),e}}class x_{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new x_(e,t,C_.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Kf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class A_{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some((e=>e.ma()))}}class P_{constructor(){this.queries=R_(),this.onlineState="Unknown",this.fa=new Set}terminate(){!function(e,t){const n=Rc(e),r=n.queries;n.queries=R_(),r.forEach(((e,n)=>{for(const r of n.Ra)r.onError(t)}))}(this,new Oc(Dc.ABORTED,"Firestore shutting down"))}}function R_(){return new Zf((e=>Gf(e)),Kf)}async function D_(e,t){const n=Rc(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.Va()&&t.ma()&&(r=2):(s=new A_,r=t.ma()?0:1);try{switch(r){case 0:s.Aa=await n.onListen(i,!0);break;case 1:s.Aa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=k_(e,"Initialization of query '".concat(Qf(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,s),s.Ra.push(t),t.ga(n.onlineState),s.Aa&&t.pa(s.Aa)&&F_(n)}async function O_(e,t){const n=Rc(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.Ra.indexOf(t);e>=0&&(s.Ra.splice(e,1),0===s.Ra.length?i=t.ma()?0:1:!s.Va()&&t.ma()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function L_(e,t){const n=Rc(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Ra)e.pa(i)&&(r=!0);t.Aa=i}}r&&F_(n)}function M_(e,t,n){const r=Rc(e),i=r.queries.get(t);if(i)for(const s of i.Ra)s.onError(n);r.queries.delete(t)}function F_(e){e.fa.forEach((e=>{e.next()}))}var U_,j_;(j_=U_||(U_={})).ya="default",j_.Cache="cache";class V_{constructor(e,t,n){this.query=e,this.wa=t,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=n||{}}pa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new x_(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ba?this.Da(e)&&(this.wa.next(e),t=!0):this.va(e,this.onlineState)&&(this.Ca(e),t=!0),this.Sa=e,t}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let t=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),t=!0),t}va(e,t){if(!e.fromCache)return!0;if(!this.ma())return!0;const n="Offline"!==t;return(!this.options.Fa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Da(e){if(e.docChanges.length>0)return!0;const t=this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Ca(e){e=x_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==U_.Cache}}class z_{constructor(e,t){this.Ma=e,this.byteLength=t}xa(){return"metadata"in this.Ma}}class q_{constructor(e){this.serializer=e}Bs(e){return Cg(this.serializer,e)}Ls(e){return e.metadata.exists?Dg(this.serializer,e.document,!1):nf.newNoDocument(this.Bs(e.metadata.name),this.ks(e.metadata.readTime))}ks(e){return Tg(e)}}class B_{constructor(e,t,n){this.Oa=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=H_(e)}Na(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Ma.namedQuery)this.queries.push(e.Ma.namedQuery);else if(e.Ma.documentMetadata){this.documents.push({metadata:e.Ma.documentMetadata}),e.Ma.documentMetadata.exists||++t;const n=su.fromString(e.Ma.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Ma.document&&(this.documents[this.documents.length-1].document=e.Ma.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Ba(e){const t=new Map,n=new q_(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.Bs(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||up()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=Rc(e);let s=up(),o=tp();for(const c of n){const e=t.Bs(c.metadata.name);c.document&&(s=s.add(e));const n=t.Ls(c);n.setReadTime(t.ks(c.metadata.readTime)),o=o.insert(e,n)}const a=i.Cs.newChangeBuffer({trackRemovals:!0}),l=await sv(i,function(e){return qf(Uf(su.fromString("__bundle__/docs/".concat(e))))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>rv(e,a,o).next((t=>(a.apply(e),t))).next((t=>i.ai.removeMatchingKeysForTargetId(e,l.targetId).next((()=>i.ai.addMatchingKeys(e,s,l.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(e,t.xs,t.Os))).next((()=>t.xs))))))}(this.localStore,new q_(this.serializer),this.documents,this.Oa.id),t=this.Ba(this.documents);for(const n of this.queries)await hv(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,La:this.collectionGroups,ka:e}}}function H_(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class W_{constructor(e){this.key=e}}class K_{constructor(e){this.key=e}}class G_{constructor(e,t){this.query=e,this.qa=t,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=up(),this.mutatedKeys=up(),this.Ua=Jf(e),this.Ka=new C_(this.Ua)}get Wa(){return this.qa}Ga(e,t){const n=t?t.za:new N_,r=t?t.Ka:this.Ka;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=Yf(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.ja(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.Ua(u,a)>0||l&&this.Ua(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(o=!0)),f&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Ka:s,za:n,ys:o,mutatedKeys:i}}ja(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;const s=e.za.da();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xc(20277,{Vt:e})}};return n(e)-n(t)}(e.type,t.type)||this.Ua(e.doc,t.doc))),this.Ha(n),r=null!=r&&r;const o=t&&!r?this.Ja():[],a=0===this.$a.size&&this.current&&!r?1:0,l=a!==this.Qa;return this.Qa=a,0!==s.length||l?{snapshot:new x_(this.query,e.Ka,i,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ya:o}:{Ya:o}}ga(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new N_,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach((e=>this.qa=this.qa.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.qa=this.qa.delete(e))),this.current=e.current)}Ja(){if(!this.current)return[];const e=this.$a;this.$a=up(),this.Ka.forEach((e=>{this.Za(e.key)&&(this.$a=this.$a.add(e.key))}));const t=[];return e.forEach((e=>{this.$a.has(e)||t.push(new K_(e))})),this.$a.forEach((n=>{e.has(n)||t.push(new W_(n))})),t}Xa(e){this.qa=e.Ns,this.$a=up();const t=this.Ga(e.documents);return this.applyChanges(t,!0)}eu(){return x_.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,0===this.Qa,this.hasCachedResults)}}const Q_="SyncEngine";class Y_{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class $_{constructor(e){this.key=e,this.tu=!1}}class J_{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.nu={},this.ru=new Zf((e=>Gf(e)),Kf),this.iu=new Map,this.su=new Set,this.ou=new nd(lu.comparator),this._u=new Map,this.au=new Ny,this.uu={},this.cu=new Map,this.lu=ey.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return!0===this.hu}}async function X_(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Cw(e);let i;const s=r.ru.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.eu()):i=await ew(r,t,n,!0),i}async function Z_(e,t){const n=Cw(e);await ew(n,t,!0,!1)}async function ew(e,t,n,r){const i=await sv(e.localStore,qf(t)),s=i.targetId,o=e.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await tw(e,t,s,"current"===o,i.resumeToken)),e.isPrimaryClient&&n&&Xv(e.remoteStore,i),a}async function tw(e,t,n,r,i){e.Pu=(t,n,r)=>async function(e,t,n,r){let i=t.view.Ga(n);i.ys&&(i=await av(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.Ga(n,i)})));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return fw(e,t.targetId,a.Ya),a.snapshot}(e,t,n,r);const s=await av(e.localStore,t,!0),o=new G_(t,s.Ns),a=o.Ga(s.documents),l=og.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=o.applyChanges(a,e.isPrimaryClient,l);fw(e,n,c.Ya);const u=new Y_(t,n,o);return e.ru.set(t,u),e.iu.has(n)?e.iu.get(n).push(t):e.iu.set(n,[t]),c.snapshot}async function nw(e,t,n){const r=Rc(e),i=r.ru.get(t),s=r.iu.get(i.targetId);if(s.length>1)return r.iu.set(i.targetId,s.filter((e=>!Kf(e,t)))),void r.ru.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await ov(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Zv(r.remoteStore,i.targetId),hw(r,i.targetId)})).catch(bu)):(hw(r,i.targetId),await ov(r.localStore,i.targetId,!0))}async function rw(e,t){const n=Rc(e),r=n.ru.get(t),i=n.iu.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Zv(n.remoteStore,r.targetId))}async function iw(e,t){const n=Rc(e);try{const e=await function(e,t){const n=Rc(e),r=t.snapshotVersion;let i=n.Ss;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.Cs.newChangeBuffer({trackRemovals:!0});i=n.Ss;const o=[];t.targetChanges.forEach(((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.ai.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.ai.addMatchingKeys(e,s.addedDocuments,a))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(ud.EMPTY_BYTE_STRING,nu.min()).withLastLimboFreeSnapshotVersion(nu.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,s)&&o.push(n.ai.updateTargetData(e,c))}));let a=tp(),l=up();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(rv(e,s,t.documentUpdates).next((e=>{a=e.xs,l=e.Os}))),!r.isEqual(nu.min())){const t=n.ai.getLastRemoteSnapshotVersion(e).next((t=>n.ai.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return Tu.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.Ss=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n._u.get(t);r&&(Pc(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.tu=!0:e.modifiedDocuments.size>0?Pc(r.tu,14607):e.removedDocuments.size>0&&(Pc(r.tu,42227),r.tu=!1))})),await mw(n,e,t)}catch(e){await bu(e)}}function sw(e,t,n){const r=Rc(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ru.forEach(((n,r)=>{const i=r.view.ga(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Rc(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.Ra)i.ga(t)&&(r=!0)})),r&&F_(n)}(r.eventManager,t),e.length&&r.nu.Q_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function ow(e,t,n){const r=Rc(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r._u.get(t),s=i&&i.key;if(s){let e=new nd(lu.comparator);e=e.insert(s,nf.newNoDocument(s,nu.min()));const n=up().add(s),i=new sg(nu.min(),new Map,new nd(Gc),e,n);await iw(r,i),r.ou=r.ou.remove(s),r._u.delete(t),gw(r)}else await ov(r.localStore,t,!1).then((()=>hw(r,t,n))).catch(bu)}async function aw(e,t){const n=Rc(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Rc(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.Cs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=Tu.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);Pc(null!==s,48541),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=up();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);uw(n,r,null),cw(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await mw(n,e)}catch(e){await bu(e)}}async function lw(e,t,n){const r=Rc(e);try{const e=await function(e,t){const n=Rc(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Pc(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);uw(r,t,n),cw(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await mw(r,e)}catch(n){await bu(n)}}function cw(e,t){(e.cu.get(t)||[]).forEach((e=>{e.resolve()})),e.cu.delete(t)}function uw(e,t,n){const r=Rc(e);let i=r.uu[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.uu[r.currentUser.toKey()]=i}}function hw(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.iu.get(t))e.ru.delete(r),n&&e.nu.Tu(r,n);e.iu.delete(t),e.isPrimaryClient&&e.au.Ur(t).forEach((t=>{e.au.containsKey(t)||dw(e,t)}))}function dw(e,t){e.su.delete(t.path.canonicalString());const n=e.ou.get(t);null!==n&&(Zv(e.remoteStore,n),e.ou=e.ou.remove(t),e._u.delete(n),gw(e))}function fw(e,t,n){for(const r of n)r instanceof W_?(e.au.addReference(r.key,t),pw(e,r)):r instanceof K_?(Ec(Q_,"Document no longer in limbo: "+r.key),e.au.removeReference(r.key,t),e.au.containsKey(r.key)||dw(e,r.key)):xc(19791,{Iu:r})}function pw(e,t){const n=t.key,r=n.path.canonicalString();e.ou.get(n)||e.su.has(r)||(Ec(Q_,"New document in limbo: "+n),e.su.add(r),gw(e))}function gw(e){for(;e.su.size>0&&e.ou.size<e.maxConcurrentLimboResolutions;){const t=e.su.values().next().value;e.su.delete(t);const n=new lu(su.fromString(t)),r=e.lu.next();e._u.set(r,new $_(n)),e.ou=e.ou.insert(n,r),Xv(e.remoteStore,new Qg(qf(Uf(n.path)),r,"TargetPurposeLimboResolution",Fu.le))}}async function mw(e,t,n){const r=Rc(e),i=[],s=[],o=[];r.ru.isEmpty()||(r.ru.forEach(((e,a)=>{o.push(r.Pu(a,t,n).then((e=>{var t;if((e||n)&&r.isPrimaryClient){const i=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(a.targetId,i?"current":"not-current")}if(e){i.push(e);const t=Yy.Ps(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.nu.Q_(i),await async function(e,t){const n=Rc(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>Tu.forEach(t,(t=>Tu.forEach(t.ls,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>Tu.forEach(t.hs,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!xu(e))throw e;Ec(Xy,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ss.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ss=n.Ss.insert(e,i)}}}(r.localStore,s))}async function yw(e,t){const n=Rc(e);if(!n.currentUser.isEqual(t)){Ec(Q_,"User change. New user:",t.toKey());const e=await tv(n.localStore,t);n.currentUser=t,function(e,t){e.cu.forEach((e=>{e.forEach((e=>{e.reject(new Oc(Dc.CANCELLED,t))}))})),e.cu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await mw(n,e.Ms)}}function vw(e,t){const n=Rc(e),r=n._u.get(t);if(r&&r.tu)return up().add(r.key);{let e=up();const r=n.iu.get(t);if(!r)return e;for(const t of r){const r=n.ru.get(t);e=e.unionWith(r.view.Wa)}return e}}async function _w(e,t){const n=Rc(e),r=await av(n.localStore,t.query,!0),i=t.view.Xa(r);return n.isPrimaryClient&&fw(n,t.targetId,i.Ya),i}async function ww(e,t){const n=Rc(e);return cv(n.localStore,t).then((e=>mw(n,e)))}async function bw(e,t,n,r){const i=Rc(e),s=await function(e,t){const n=Rc(e),r=Rc(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.Hn(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):Tu.resolve(null)))))}(i.localStore,t);null!==s?("pending"===n?await d_(i.remoteStore):"acknowledged"===n||"rejected"===n?(uw(i,t,r||null),cw(i,t),function(e,t){Rc(Rc(e).mutationQueue).Xn(t)}(i.localStore,t)):xc(6720,"Unknown batchState",{Eu:n}),await mw(i,s)):Ec(Q_,"Cannot apply mutation batch with id: "+t)}async function Tw(e,t,n){const r=Rc(e),i=[],s=[];for(const o of t){let e;const t=r.iu.get(o);if(t&&0!==t.length){e=await sv(r.localStore,qf(t[0]));for(const e of t){const t=r.ru.get(e),n=await _w(r,t);n.snapshot&&s.push(n.snapshot)}}else{const t=await lv(r.localStore,o);e=await sv(r.localStore,t),await tw(r,Iw(t),o,!1,e.resumeToken)}i.push(e)}return r.nu.Q_(s),i}function Iw(e){return Ff(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Sw(e){return function(e){return Rc(Rc(e).persistence).us()}(Rc(e).localStore)}async function Ew(e,t,n,r){const i=Rc(e);if(i.hu)return void Ec(Q_,"Ignoring unexpected query state notification.");const s=i.iu.get(t);if(s&&s.length>0)switch(n){case"current":case"not-current":{const e=await cv(i.localStore,$f(s[0])),r=sg.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,ud.EMPTY_BYTE_STRING);await mw(i,e,r);break}case"rejected":await ov(i.localStore,t,!0),hw(i,t,r);break;default:xc(64155,n)}}async function kw(e,t,n){const r=Cw(e);if(r.hu){for(const e of t){if(r.iu.has(e)&&r.sharedClientState.isActiveQueryTarget(e)){Ec(Q_,"Adding an already active target "+e);continue}const t=await lv(r.localStore,e),n=await sv(r.localStore,t);await tw(r,Iw(t),n.targetId,!1,n.resumeToken),Xv(r.remoteStore,n)}for(const e of n)r.iu.has(e)&&await ov(r.localStore,e,!1).then((()=>{Zv(r.remoteStore,e),hw(r,e)})).catch(bu)}}function Cw(e){const t=Rc(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=iw.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=vw.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=ow.bind(null,t),t.nu.Q_=L_.bind(null,t.eventManager),t.nu.Tu=M_.bind(null,t.eventManager),t}function Nw(e){const t=Rc(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=aw.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=lw.bind(null,t),t}class xw{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=jv(e.databaseInfo.databaseId),this.sharedClientState=this.Au(e),this.persistence=this.Ru(e),await this.persistence.start(),this.localStore=this.Vu(e),this.gcScheduler=this.mu(e,this.localStore),this.indexBackfillerScheduler=this.fu(e,this.localStore)}mu(e,t){return null}fu(e,t){return null}Vu(e){return ev(this.persistence,new Jy,e.initialUser,this.serializer)}Ru(e){return new Oy(My.Ei,this.serializer)}Au(e){return new Ev}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}xw.provider={build:()=>new xw};class Aw extends xw{constructor(e){super(),this.cacheSizeBytes=e}mu(e,t){Pc(this.persistence.referenceDelegate instanceof Fy,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new cy(n,e.asyncQueue,t)}Ru(e){const t=void 0!==this.cacheSizeBytes?Km.withCacheSize(this.cacheSizeBytes):Km.DEFAULT;return new Oy((e=>Fy.Ei(e,t)),this.serializer)}}class Pw extends xw{constructor(e,t,n){super(),this.gu=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.gu.initialize(this,e),await Nw(this.gu.syncEngine),await d_(this.gu.remoteStore),await this.persistence.Ki((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}Vu(e){return ev(this.persistence,new Jy,e.initialUser,this.serializer)}mu(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new cy(n,e.asyncQueue,t)}fu(e,t){const n=new Mu(t,this.persistence);return new Lu(e.asyncQueue,n)}Ru(e){const t=Qy(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Km.withCacheSize(this.cacheSizeBytes):Km.DEFAULT;return new Wy(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Fv(),Uv(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Au(e){return new Ev}}class Rw extends Pw{constructor(e,t){super(e,t,!1),this.gu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.gu.syncEngine;this.sharedClientState instanceof Sv&&(this.sharedClientState.syncEngine={yo:bw.bind(null,t),wo:Ew.bind(null,t),bo:kw.bind(null,t),us:Sw.bind(null,t),po:ww.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ki((async e=>{await async function(e,t){const n=Rc(e);if(Cw(n),Nw(n),!0===t&&!0!==n.hu){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await Tw(n,e.toArray());n.hu=!0,await T_(n.remoteStore,!0);for(const r of t)Xv(n.remoteStore,r)}else if(!1===t&&!1!==n.hu){const e=[];let t=Promise.resolve();n.iu.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(hw(n,i),ov(n.localStore,i,!0)))),Zv(n.remoteStore,i)})),await t,await Tw(n,e),function(e){const t=Rc(e);t._u.forEach(((e,n)=>{Zv(t.remoteStore,n)})),t.au.Kr(),t._u=new Map,t.ou=new nd(lu.comparator)}(n),n.hu=!1,await T_(n.remoteStore,!1)}}(this.gu.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}Au(e){const t=Fv();if(!Sv.C(t))throw new Oc(Dc.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Qy(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Sv(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class Dw{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>sw(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=yw.bind(null,this.syncEngine),await T_(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new P_}createDatastore(e){const t=jv(e.databaseInfo.databaseId),n=function(e){return new Mv(e)}(e.databaseInfo);return function(e,t,n,r){return new Kv(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Yv(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>sw(this.syncEngine,e,0)),Nv.C()?new Nv:new kv)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new J_(e,t,n,r,i,s);return o&&(a.hu=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=Rc(e);Ec(Qv,"RemoteStore shutting down."),t.aa.add(5),await Jv(t),t.ca.shutdown(),t.la.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}function Ow(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}Dw.provider={build:()=>new Dw};class Lw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):kc("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class Mw{constructor(e,t){this.wu=e,this.serializer=t,this.metadata=new Lc,this.buffer=new Uint8Array,this.bu=new TextDecoder("utf-8"),this.Su().then((e=>{e&&e.xa()?this.metadata.resolve(e.Ma.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.Ma))))}),(e=>this.metadata.reject(e)))}close(){return this.wu.cancel()}async getMetadata(){return this.metadata.promise}async du(){return await this.getMetadata(),this.Su()}async Su(){const e=await this.Du();if(null===e)return null;const t=this.bu.decode(e),n=Number(t);isNaN(n)&&this.vu("length string (".concat(t,") is not valid number"));const r=await this.Cu(n);return new z_(JSON.parse(r),e.length+n)}Fu(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async Du(){for(;this.Fu()<0&&!await this.Mu(););if(0===this.buffer.length)return null;const e=this.Fu();e<0&&this.vu("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Cu(e){for(;this.buffer.length<e;)await this.Mu()&&this.vu("Reached the end of bundle when more is expected.");const t=this.bu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}vu(e){throw this.wu.cancel(),new Error("Invalid bundle format: ".concat(e))}async Mu(){const e=await this.wu.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class Fw{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Oc(Dc.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=Rc(e),r={documents:t.map((e=>kg(n.serializer,e)))},i=await n.Wo("BatchGetDocuments",n.serializer.databaseId,su.emptyPath(),r,t.length),s=new Map;i.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){Pc(!!t.found,43571),t.found.name,t.found.updateTime;const n=Cg(e,t.found.name),r=Tg(t.found.updateTime),i=t.found.createTime?Tg(t.found.createTime):nu.min(),s=new ef({mapValue:{fields:t.found.fields}});return nf.newFoundDocument(n,r,i,s)}(e,t):"missing"in t?function(e,t){Pc(!!t.missing,3894),Pc(!!t.readTime,22933);const n=Cg(e,t.missing),r=Tg(t.readTime);return nf.newNoDocument(n,r)}(e,t):xc(7234,{result:t})}(n.serializer,e);s.set(t.key.toString(),t)}));const o=[];return t.forEach((e=>{const t=s.get(e.toString());Pc(!!t,55234,{key:e}),o.push(t)})),o}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new Bp(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=lu.fromPath(t);this.mutations.push(new Hp(n,this.precondition(n)))})),await async function(e,t){const n=Rc(e),r={writes:t.map((e=>Og(n.serializer,e)))};await n.Qo("Commit",n.serializer.databaseId,su.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw xc(50498,{xu:e.constructor.name});t=nu.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Oc(Dc.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(nu.min())?Ap.exists(!1):Ap.updateTime(t):Ap.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(nu.min()))throw new Oc(Dc.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ap.updateTime(t)}return Ap.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Uw{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.Ou=n.maxAttempts,this.y_=new Vv(this.asyncQueue,"transaction_retry")}Nu(){this.Ou-=1,this.Bu()}Bu(){this.y_.E_((async()=>{const e=new Fw(this.datastore),t=this.Lu(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.ku(e)}))))})).catch((e=>{this.ku(e)}))}))}Lu(e){try{const t=this.updateFunction(e);return!ju(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}ku(e){this.Ou>0&&this.qu(e)?(this.Ou-=1,this.asyncQueue.enqueueAndForget((()=>(this.Bu(),Promise.resolve())))):this.deferred.reject(e)}qu(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Jp(t)}return!1}}const jw="FirestoreClient";class Vw{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=bc.UNAUTHENTICATED,this.clientId=Kc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async e=>{Ec(jw,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Ec(jw,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Lc;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(HM){const n=k_(HM,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function zw(e,t){e.asyncQueue.verifyOperationInProgress(),Ec(jw,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await tv(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function qw(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Bw(e);Ec(jw,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>b_(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>b_(t.remoteStore,n))),e._onlineComponents=t}async function Bw(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Ec(jw,"Using user provided OfflineComponentProvider");try{await zw(e,e._uninitializedComponentsProvider._offline)}catch(HM){const n=HM;if(!function(e){return"FirebaseError"===e.name?e.code===Dc.FAILED_PRECONDITION||e.code===Dc.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;Cc("Error using user provided cache. Falling back to memory cache: "+n),await zw(e,new xw)}}else Ec(jw,"Using default OfflineComponentProvider"),await zw(e,new Aw(void 0));return e._offlineComponents}async function Hw(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Ec(jw,"Using user provided OnlineComponentProvider"),await qw(e,e._uninitializedComponentsProvider._online)):(Ec(jw,"Using default OnlineComponentProvider"),await qw(e,new Dw))),e._onlineComponents}function Ww(e){return Bw(e).then((e=>e.persistence))}function Kw(e){return Bw(e).then((e=>e.localStore))}function Gw(e){return Hw(e).then((e=>e.remoteStore))}function Qw(e){return Hw(e).then((e=>e.syncEngine))}function Yw(e){return Hw(e).then((e=>e.datastore))}async function $w(e){const t=await Hw(e),n=t.eventManager;return n.onListen=X_.bind(null,t.syncEngine),n.onUnlisten=nw.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Z_.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=rw.bind(null,t.syncEngine),n}function Jw(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Lc;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new Lw({next:a=>{s.yu(),t.enqueueAndForget((()=>O_(e,o)));const l=a.docs.has(n);!l&&a.fromCache?i.reject(new Oc(Dc.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&a.fromCache&&r&&"server"===r.source?i.reject(new Oc(Dc.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:e=>i.reject(e)}),o=new V_(Uf(n.path),s,{includeMetadataChanges:!0,Fa:!0});return D_(e,o)}(await $w(e),e.asyncQueue,t,n,r))),r.promise}function Xw(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Lc;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new Lw({next:n=>{s.yu(),t.enqueueAndForget((()=>O_(e,o))),n.fromCache&&"server"===r.source?i.reject(new Oc(Dc.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new V_(n,s,{includeMetadataChanges:!0,Fa:!0});return D_(e,o)}(await $w(e),e.asyncQueue,t,n,r))),r.promise}function Zw(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?Wc().encode(e):e,function(e,t){return new Mw(e,t)}(function(e,t){if(e instanceof Uint8Array)return Ow(e,t);if(e instanceof ArrayBuffer)return Ow(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,jv(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=Rc(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=Rc(e),r=Tg(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.ci.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(H_(r));const i=new B_(r,e.localStore,t.serializer);let s=await t.du();for(;s;){const e=await i.Na(s);e&&n._updateProgress(e),s=await t.du()}const o=await i.complete();return await mw(e,o.ka,void 0),await function(e,t){const n=Rc(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.ci.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(o.progress),Promise.resolve(o.La)}catch(e){return Cc(Q_,"Loading bundle failed with ".concat(e)),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then((e=>{r.sharedClientState.notifyBundleLoaded(e)}))}(await Qw(e),i,r)}))}function eb(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const tb=new Map;function nb(e,t,n){if(!n)throw new Oc(Dc.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function rb(e,t,n,r){if(!0===t&&!0===r)throw new Oc(Dc.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function ib(e){if(!lu.isDocumentKey(e))throw new Oc(Dc.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function sb(e){if(lu.isDocumentKey(e))throw new Oc(Dc.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function ob(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":xc(12329,{type:typeof e})}function ab(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Oc(Dc.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ob(e);throw new Oc(Dc.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function lb(e,t){if(t<=0)throw new Oc(Dc.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}const cb="firestore.googleapis.com",ub=!0;class hb{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Oc(Dc.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=cb,this.ssl=ub}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:ub;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=Wm;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<oy)throw new Oc(Dc.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}rb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=eb(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Oc(Dc.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Oc(Dc.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Oc(Dc.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class db{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Oc(Dc.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Oc(Dc.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hb(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Fc;switch(e.type){case"firstParty":return new zc(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Oc(Dc.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,Gt("Firestore",this._settings.isUsingEmulator),this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=tb.get(e);t&&(Ec("ComponentProvider","Removing Datastore"),tb.delete(e),t.terminate())}(this),Promise.resolve()}}function fb(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;e=ab(e,db);const s=qt(t),o=e._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:e._getEmulatorOptions()}),l="".concat(t,":").concat(n);o.host!==cb&&o.host!==l&&Cc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},o),{host:l,ssl:s,emulatorOptions:r});if(!yn(c,a)&&(e._setSettings(c),s&&(Bt("https://".concat(l)),Gt("Firestore",!0)),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=bc.MOCK_USER;else{t=Ht(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Oc(Dc.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new bc(s)}e._authCredentials=new Uc(new Mc(t,n))}}class pb{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new pb(this.firestore,e,this._query)}}class gb{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new mb(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gb(this.firestore,e,this._key)}}class mb extends pb{constructor(e,t,n){super(e,t,Uf(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gb(this.firestore,null,new lu(e))}withConverter(e){return new mb(this.firestore,e,this._path)}}function yb(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Rn(e),nb("collection","path",t),e instanceof db){const n=su.fromString(t,...r);return sb(n),new mb(e,null,n)}{if(!(e instanceof gb||e instanceof mb))throw new Oc(Dc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(su.fromString(t,...r));return sb(n),new mb(e.firestore,null,n)}}function vb(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Rn(e),1===arguments.length&&(t=Kc.newId()),nb("doc","path",t),e instanceof db){const n=su.fromString(t,...r);return ib(n),new gb(e,null,new lu(n))}{if(!(e instanceof gb||e instanceof mb))throw new Oc(Dc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(su.fromString(t,...r));return ib(n),new gb(e.firestore,e instanceof mb?e.converter:null,new lu(n))}}function _b(e,t){return e=Rn(e),t=Rn(t),(e instanceof gb||e instanceof mb)&&(t instanceof gb||t instanceof mb)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function wb(e,t){return e=Rn(e),t=Rn(t),e instanceof pb&&t instanceof pb&&e.firestore===t.firestore&&Kf(e._query,t._query)&&e.converter===t.converter}const bb="AsyncQueue";class Tb{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new Vv(this,"async_queue_retry"),this.ju=()=>{const e=Uv();e&&Ec(bb,"Visibility state changed to "+e.visibilityState),this.y_.A_()},this.Hu=e;const t=Uv();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;const t=Uv();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise((()=>{}));const t=new Lc;return this.Yu((()=>this.$u&&this.Gu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Qu.push(e),this.Zu())))}async Zu(){if(0!==this.Qu.length){try{await this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(WM){if(!xu(WM))throw WM;Ec(bb,"Operation failed with retryable error: "+WM)}this.Qu.length>0&&this.y_.E_((()=>this.Zu()))}}Yu(e){const t=this.Hu.then((()=>(this.Wu=!0,e().catch((e=>{throw this.Ku=e,this.Wu=!1,kc("INTERNAL UNHANDLED ERROR: ",Ib(e)),e})).then((e=>(this.Wu=!1,e))))));return this.Hu=t,t}enqueueAfterDelay(e,t,n){this.Ju(),this.zu.indexOf(e)>-1&&(t=0);const r=E_.createAndSchedule(this,e,t,n,(e=>this.Xu(e)));return this.Uu.push(r),r}Ju(){this.Ku&&xc(47125,{ec:Ib(this.Ku)})}verifyOperationInProgress(){}async tc(){let e;do{e=this.Hu,await e}while(e!==this.Hu)}nc(e){for(const t of this.Uu)if(t.timerId===e)return!0;return!1}rc(e){return this.tc().then((()=>{this.Uu.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.Uu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.tc()}))}sc(e){this.zu.push(e)}Xu(e){const t=this.Uu.indexOf(e);this.Uu.splice(t,1)}}function Ib(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}function Sb(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class Eb{constructor(){this._progressObserver={},this._taskCompletionResolver=new Lc,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class kb extends db{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Tb,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Tb(e),this._firestoreClient=void 0,await e}}}function Cb(e){if(e._terminated)throw new Oc(Dc.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Nb(e),e._firestoreClient}function Nb(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new Td(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,eb(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new Vw(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}function xb(e,t,n){if((e=ab(e,kb))._firestoreClient||e._terminated)throw new Oc(Dc.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(e._componentsProvider||e._getSettings().localCache)throw new Oc(Dc.FAILED_PRECONDITION,"SDK cache is already specified.");e._componentsProvider={_online:t,_offline:n},Nb(e)}function Ab(e){return function(e){const t=new Lc;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=Rc(e);i_(n.remoteStore)||Ec(Q_,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=Rc(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(e===Uu)return void t.resolve();const r=n.cu.get(e)||[];r.push(t),n.cu.set(e,r)}catch(e){const n=k_(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await Qw(e),t))),t.promise}(Cb(e=ab(e,kb)))}function Pb(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await Ww(e),n=await Gw(e);return t.setNetworkEnabled(!0),function(e){const t=Rc(e);return t.aa.delete(0),$v(t)}(n)}))}(Cb(e=ab(e,kb)))}function Rb(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await Ww(e),n=await Gw(e);return t.setNetworkEnabled(!1),async function(e){const t=Rc(e);t.aa.add(0),await Jv(t),t.la.set("Offline")}(n)}))}(Cb(e=ab(e,kb)))}function Db(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=Rc(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.ci.getNamedQuery(e,t)))}(await Kw(e),t)))}(Cb(e=ab(e,kb)),t).then((t=>t?new pb(e,null,t.query):null))}class Ob{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ob(ud.fromBase64String(e))}catch(e){throw new Oc(Dc.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Ob(ud.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Lb{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Oc(Dc.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new au(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Mb{constructor(e){this._methodName=e}}class Fb{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Oc(Dc.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Oc(Dc.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Gc(this._lat,e._lat)||Gc(this._long,e._long)}}class Ub{constructor(e){this._values=(e||[]).map((e=>e))}toArray(){return this._values.map((e=>e))}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const jb=/^__.*__$/;class Vb{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new jp(e,this.data,this.fieldMask,t,this.fieldTransforms):new Up(e,this.data,t,this.fieldTransforms)}}class zb{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new jp(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function qb(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xc(40011,{oc:e})}}class Bb{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this._c(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get oc(){return this.settings.oc}ac(e){return new Bb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}uc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ac({path:n,cc:!1});return r.lc(e),r}hc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ac({path:n,cc:!1});return r._c(),r}Pc(e){return this.ac({path:void 0,cc:!0})}Tc(e){return cT(e,this.settings.methodName,this.settings.Ic||!1,this.path,this.settings.Ec)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}_c(){if(this.path)for(let e=0;e<this.path.length;e++)this.lc(this.path.get(e))}lc(e){if(0===e.length)throw this.Tc("Document fields must not be empty");if(qb(this.oc)&&jb.test(e))throw this.Tc('Document fields cannot begin and end with "__"')}}class Hb{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||jv(e)}dc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Bb({oc:e,methodName:t,Ec:n,path:au.emptyPath(),cc:!1,Ic:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Wb(e){const t=e._freezeSettings(),n=jv(e._databaseId);return new Hb(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Kb(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.dc(s.merge||s.mergeFields?2:0,t,n,i);sT("Data must be an object, but it was:",o,r);const a=rT(r,o);let l,c;if(s.merge)l=new ld(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=oT(t,r,n);if(!o.contains(i))throw new Oc(Dc.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));uT(e,i)||e.push(i)}l=new ld(e),c=o.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=o.fieldTransforms;return new Vb(new ef(a),l,c)}class Gb extends Mb{_toFieldTransform(e){if(2!==e.oc)throw 1===e.oc?e.Tc("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Tc("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Gb}}function Qb(e,t,n){return new Bb({oc:3,Ec:t.settings.Ec,methodName:e._methodName,cc:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class Yb extends Mb{_toFieldTransform(e){return new Np(e.path,new wp)}isEqual(e){return e instanceof Yb}}class $b extends Mb{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=Qb(this,e,!0),n=this.Ac.map((e=>nT(e,t))),r=new bp(n);return new Np(e.path,r)}isEqual(e){return e instanceof $b&&yn(this.Ac,e.Ac)}}class Jb extends Mb{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=Qb(this,e,!0),n=this.Ac.map((e=>nT(e,t))),r=new Ip(n);return new Np(e.path,r)}isEqual(e){return e instanceof Jb&&yn(this.Ac,e.Ac)}}class Xb extends Mb{constructor(e,t){super(e),this.Rc=t}_toFieldTransform(e){const t=new Ep(e.serializer,gp(e.serializer,this.Rc));return new Np(e.path,t)}isEqual(e){return e instanceof Xb&&this.Rc===e.Rc}}function Zb(e,t,n,r){const i=e.dc(1,t,n);sT("Data must be an object, but it was:",i,r);const s=[],o=ef.empty();ed(r,((e,r)=>{const a=lT(t,e,n);r=Rn(r);const l=i.hc(a);if(r instanceof Gb)s.push(a);else{const e=nT(r,l);null!=e&&(s.push(a),o.set(a,e))}}));const a=new ld(s);return new zb(o,a,i.fieldTransforms)}function eT(e,t,n,r,i,s){const o=e.dc(1,t,n),a=[oT(t,r,n)],l=[i];if(s.length%2!=0)throw new Oc(Dc.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<s.length;d+=2)a.push(oT(t,s[d])),l.push(s[d+1]);const c=[],u=ef.empty();for(let d=a.length-1;d>=0;--d)if(!uT(c,a[d])){const e=a[d];let t=l[d];t=Rn(t);const n=o.hc(e);if(t instanceof Gb)c.push(e);else{const r=nT(t,n);null!=r&&(c.push(e),u.set(e,r))}}const h=new ld(c);return new zb(u,h,o.fieldTransforms)}function tT(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return nT(n,e.dc(r?4:3,t))}function nT(e,t){if(iT(e=Rn(e)))return sT("Unsupported field value:",t,e),rT(e,t);if(e instanceof Mb)return function(e,t){if(!qb(t.oc))throw t.Tc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Tc("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.cc&&4!==t.oc)throw t.Tc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=nT(i,t.Pc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Rn(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return gp(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=tu.fromDate(e);return{timestampValue:_g(t.serializer,n)}}if(e instanceof tu){const n=new tu(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:_g(t.serializer,n)}}if(e instanceof Fb)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Ob)return{bytesValue:wg(t.serializer,e._byteString)};if(e instanceof gb){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Tc("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Ig(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof Ub)return function(e,t){return{mapValue:{fields:{[Ed]:{stringValue:Nd},[xd]:{arrayValue:{values:e.toArray().map((e=>{if("number"!=typeof e)throw t.Tc("VectorValues must only contain numeric values.");return fp(t.serializer,e)}))}}}}}}(e,t);throw t.Tc("Unsupported field value: ".concat(ob(e)))}(e,t)}function rT(e,t){const n={};return td(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ed(e,((e,r)=>{const i=nT(r,t.uc(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function iT(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof tu||e instanceof Fb||e instanceof Ob||e instanceof gb||e instanceof Mb||e instanceof Ub)}function sT(e,t,n){if(!iT(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=ob(n);throw"an object"===r?t.Tc(e+" a custom object"):t.Tc(e+" "+r)}}function oT(e,t,n){if((t=Rn(t))instanceof Lb)return t._internalPath;if("string"==typeof t)return lT(e,t);throw cT("Field path arguments must be of type string or ",e,!1,void 0,n)}const aT=new RegExp("[~\\*/\\[\\]]");function lT(e,t,n){if(t.search(aT)>=0)throw cT("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new Lb(...t.split("."))._internalPath}catch(GM){throw cT("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function cT(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=" in field ".concat(r)),o&&(l+=" in document ".concat(i)),l+=")"),new Oc(Dc.INVALID_ARGUMENT,a+e+l)}function uT(e,t){return e.some((e=>e.isEqual(t)))}class hT{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new gb(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new dT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(fT("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class dT extends hT{data(){return super.data()}}function fT(e,t){return"string"==typeof t?lT(e,t):t instanceof Lb?t._internalPath:t._delegate._internalPath}function pT(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Oc(Dc.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class gT{}class mT extends gT{}function yT(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof gT&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof wT)).length,n=e.filter((e=>e instanceof vT)).length;if(t>1||t>0&&n>0)throw new Oc(Dc.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class vT extends mT{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new vT(e,t,n)}_apply(e){const t=this._parse(e);return NT(e._query,t),new pb(e.firestore,e.converter,Hf(e._query,t))}_parse(e){const t=Wb(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Oc(Dc.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){CT(o,s);const t=[];for(const n of o)t.push(kT(r,e,n));a={arrayValue:{values:t}}}else a=kT(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||CT(o,s),a=tT(n,t,o,"in"===s||"not-in"===s);return uf.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function _T(e,t,n){const r=t,i=fT("where",e);return vT._create(i,r,n)}class wT extends gT{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new wT(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:hf.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)NT(n,i),n=Hf(n,i)}(e._query,t),new pb(e.firestore,e.converter,Hf(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class bT extends mT{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new bT(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Oc(Dc.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Oc(Dc.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new af(t,n)}(e._query,this._field,this._direction);return new pb(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Mf(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class TT extends mT{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new TT(e,t,n)}_apply(e){return new pb(e.firestore,e.converter,Wf(e._query,this._limit,this._limitType))}}class IT extends mT{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new IT(e,t,n)}_apply(e){const t=ET(e,this.type,this._docOrFields,this._inclusive);return new pb(e.firestore,e.converter,function(e,t){return new Mf(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class ST extends mT{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new ST(e,t,n)}_apply(e){const t=ET(e,this.type,this._docOrFields,this._inclusive);return new pb(e.firestore,e.converter,function(e,t){return new Mf(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function ET(e,t,n,r){if(n[0]=Rn(n[0]),n[0]instanceof hT)return function(e,t,n,r,i){if(!r)throw new Oc(Dc.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const s=[];for(const o of zf(e))if(o.field.isKeyField())s.push(Vd(t,r.key));else{const e=r.data.field(o.field);if(_d(e))throw new Oc(Dc.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new Oc(Dc.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}s.push(e)}return new rf(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=Wb(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new Oc(Dc.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const a=[];for(let l=0;l<i.length;l++){const s=i[l];if(o[l].field.isKeyField()){if("string"!=typeof s)throw new Oc(Dc.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof s));if(!Vf(e)&&-1!==s.indexOf("/"))throw new Oc(Dc.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(s,"' contains a slash."));const n=e.path.child(su.fromString(s));if(!lu.isDocumentKey(n))throw new Oc(Dc.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const i=new lu(n);a.push(Vd(t,i))}else{const e=tT(n,r,s);a.push(e)}}return new rf(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function kT(e,t,n){if("string"==typeof(n=Rn(n))){if(""===n)throw new Oc(Dc.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Vf(t)&&-1!==n.indexOf("/"))throw new Oc(Dc.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(su.fromString(n));if(!lu.isDocumentKey(r))throw new Oc(Dc.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Vd(e,new lu(r))}if(n instanceof gb)return Vd(e,n._key);throw new Oc(Dc.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(ob(n),"."))}function CT(e,t){if(!Array.isArray(e)||0===e.length)throw new Oc(Dc.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function NT(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Oc(Dc.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Oc(Dc.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class xT{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Pd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return fd(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(pd(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw xc(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return ed(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertVectorValue(e){var t,n,r;const i=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t[xd].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map((e=>fd(e.doubleValue)));return new Ub(i)}convertGeoPoint(e){return new Fb(fd(e.latitude),fd(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=wd(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(bd(e));default:return null}}convertTimestamp(e){const t=dd(e);return new tu(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=su.fromString(e);Pc(Gg(n),9688,{name:e});const r=new Sd(n.get(1),n.get(3)),i=new lu(n.popFirst(5));return r.isEqual(t)||kc("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function AT(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class PT extends xT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ob(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new gb(this.firestore,null,t)}}class RT{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class DT extends hT{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new OT(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(fT("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class OT extends DT{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class LT{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new RT(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new OT(this._firestore,this._userDataWriter,n.key,n,new RT(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Oc(Dc.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new OT(e._firestore,e._userDataWriter,n.doc.key,n.doc,new RT(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new OT(e._firestore,e._userDataWriter,t.doc.key,t.doc,new RT(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:MT(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function MT(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xc(61501,{type:e})}}function FT(e,t){return e instanceof DT&&t instanceof DT?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof LT&&t instanceof LT&&e._firestore===t._firestore&&wb(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}class UT extends xT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ob(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new gb(this.firestore,null,t)}}function jT(e){e=ab(e,gb);const t=ab(e.firestore,kb),n=Cb(t),r=new UT(t);return function(e,t){const n=new Lc;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=Rc(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new Oc(Dc.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=k_(e,"Failed to get document '".concat(t," from cache"));n.reject(r)}}(await Kw(e),t,n))),n.promise}(n,e._key).then((n=>new DT(t,r,e._key,n,new RT(null!==n&&n.hasLocalMutations,!0),e.converter)))}function VT(e){e=ab(e,pb);const t=ab(e.firestore,kb),n=Cb(t),r=new UT(t);return function(e,t){const n=new Lc;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await av(e,t,!0),i=new G_(t,r.Ns),s=i.Ga(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=k_(e,"Failed to execute query '".concat(t," against cache"));n.reject(r)}}(await Kw(e),t,n))),n.promise}(n,e._query).then((n=>new LT(t,r,e,n)))}function zT(e,t,n){e=ab(e,gb);const r=ab(e.firestore,kb),i=AT(e.converter,t,n);return GT(r,[Kb(Wb(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Ap.none())])}function qT(e,t,n){e=ab(e,gb);const r=ab(e.firestore,kb),i=Wb(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=Rn(t))||t instanceof Lb?eT(i,"updateDoc",e._key,t,n,a):Zb(i,"updateDoc",e._key,t),GT(r,[s.toMutation(e._key,Ap.exists(!0))])}function BT(e){return GT(ab(e.firestore,kb),[new Bp(e._key,Ap.none())])}function HT(e,t){const n=ab(e.firestore,kb),r=vb(e),i=AT(e.converter,t);return GT(n,[Kb(Wb(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Ap.exists(!1))]).then((()=>r))}function WT(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,o;e=Rn(e);let a={includeMetadataChanges:!1,source:"default"},l=0;"object"!=typeof n[l]||Sb(n[l])||(a=n[l],l++);const c={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(Sb(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[l+2]=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}let u,h,d;if(e instanceof gb)h=ab(e.firestore,kb),d=Uf(e._key.path),u={next:t=>{n[l]&&n[l](QT(h,e,t))},error:n[l+1],complete:n[l+2]};else{const t=ab(e,pb);h=ab(t.firestore,kb),d=t._query;const r=new UT(h);u={next:e=>{n[l]&&n[l](new LT(h,r,t,e))},error:n[l+1],complete:n[l+2]},pT(e._query)}return function(e,t,n,r){const i=new Lw(r),s=new V_(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>D_(await $w(e),s))),()=>{i.yu(),e.asyncQueue.enqueueAndForget((async()=>O_(await $w(e),s)))}}(Cb(h),d,c,u)}function KT(e,t){return function(e,t){const n=new Lw(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){Rc(e).fa.add(t),t.next()}(await $w(e),n))),()=>{n.yu(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){Rc(e).fa.delete(t)}(await $w(e),n)))}}(Cb(e=ab(e,kb)),Sb(t)?t:{next:t})}function GT(e,t){return function(e,t){const n=new Lc;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=Nw(e);try{const e=await function(e,t){const n=Rc(e),r=tu.now(),i=t.reduce(((e,t)=>e.add(t.key)),up());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=tp(),l=up();return n.Cs.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=Mp(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new jp(e.key,t,tf(t.value.mapValue),Ap.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:ip(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.uu[e.currentUser.toKey()];r||(r=new nd(Gc)),r=r.insert(t,n),e.uu[e.currentUser.toKey()]=r}(r,e.batchId,n),await mw(r,e.changes),await d_(r.remoteStore)}catch(e){const t=k_(e,"Failed to persist write");n.reject(t)}}(await Qw(e),t,n))),n.promise}(Cb(e),t)}function QT(e,t,n){const r=n.docs.get(t._key),i=new UT(e);return new DT(e,i,t._key,r,new RT(n.hasPendingWrites,n.fromCache),t.converter)}const YT={maxAttempts:5};class $T{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Wb(e)}set(e,t,n){this._verifyNotCommitted();const r=JT(e,this._firestore),i=AT(r.converter,t,n),s=Kb(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,Ap.none())),this}update(e,t,n){this._verifyNotCommitted();const r=JT(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=Rn(t))||t instanceof Lb?eT(this._dataReader,"WriteBatch.update",r._key,t,n,o):Zb(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,Ap.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=JT(e,this._firestore);return this._mutations=this._mutations.concat(new Bp(t._key,Ap.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Oc(Dc.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function JT(e,t){if((e=Rn(e)).firestore!==t)throw new Oc(Dc.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class XT{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Wb(e)}get(e){const t=JT(e,this._firestore),n=new PT(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return xc(24041);const r=e[0];if(r.isFoundDocument())return new hT(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new hT(this._firestore,n,t._key,null,t.converter);throw xc(18433,{doc:r})}))}set(e,t,n){const r=JT(e,this._firestore),i=AT(r.converter,t,n),s=Kb(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n){const r=JT(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=Rn(t))||t instanceof Lb?eT(this._dataReader,"Transaction.update",r._key,t,n,o):Zb(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=JT(e,this._firestore);return this._transaction.delete(t._key),this}}class ZT extends XT{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=JT(e,this._firestore),n=new UT(this._firestore);return super.get(e).then((e=>new DT(this._firestore,n,t._key,e._document,new RT(!1,!1),t.converter)))}}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Tc=e}(ti),Wr(new Dn("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new kb(new jc(e.getProvider("auth-internal")),new Bc(s,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Oc(Dc.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Sd(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),ai(_c,wc,e),ai(_c,wc,"esm2017")}();const eI=ni({apiKey:"AIzaSyBq-fFZc02anVs21f2TK5R36Lhet4LYqfg",authDomain:"web-labs-713bc.firebaseapp.com",projectId:"web-labs-713bc",storageBucket:"web-labs-713bc.firebasestorage.app",messagingSenderId:"179529533146",appId:"1:179529533146:web:2affe03423b2141d2407e3",measurementId:"G-V198GRXTH1"}),tI=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ii();const t=Kr(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Kr(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(yn(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;Ui(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Yl,persistence:[Ga,Ca,Ra]}),r=Vt("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>nc)return;const r=null===t||void 0===t?void 0:t.token;rc!==r&&(rc=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){Rn(e).beforeAuthStateChanged(t,n)}(n,t,(()=>t(n.currentUser))),function(e,t,n,r){Rn(e).onIdTokenChanged(t,n,r)}(n,(e=>t(e)))}}var i;const s=Ut("auth");return s?lo(n,"http://".concat(s)):Gt("Auth",!1),n}(eI),nI=function(e,t){const n="object"==typeof e?e:ii(),r="string"==typeof e?e:t||Id,i=Kr(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const e=(e=>{const t=Ut(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]})("firestore");e&&fb(i,...e)}return i}(eI);var rI=n(579);const iI=function(){const[e,t]=(0,i.useState)(null),n=ge();return(0,i.useEffect)((()=>{const e=va(tI,(e=>{t(e)}));return()=>e()}),[]),(0,rI.jsx)("nav",{className:"navbar",children:(0,rI.jsxs)("div",{className:"navdiv",children:[(0,rI.jsx)("div",{className:"logo",children:(0,rI.jsx)(mt,{to:"/",children:"LetsAchive"})}),(0,rI.jsxs)("ul",{children:[(0,rI.jsx)("li",{className:"navbar-li",children:(0,rI.jsx)(mt,{to:"/",children:"Home"})}),(0,rI.jsx)("li",{className:"navbar-li",children:(0,rI.jsx)(mt,{to:"/goals",children:"Goals"})}),(0,rI.jsx)("li",{className:"navbar-li",children:(0,rI.jsx)(mt,{to:"/progress",children:"Progress"})}),(0,rI.jsx)("li",{className:"navbar-li",children:(0,rI.jsx)(mt,{to:"/community",children:"Community"})})]}),(0,rI.jsx)("div",{className:"sign-buttons",children:e?(0,rI.jsx)("button",{onClick:async()=>{try{await function(e){return Rn(e).signOut()}(tI),n("/")}catch(MS){console.error("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0432\u0438\u0445\u043e\u0434\u0443:",MS.message)}},children:"Sign Out"}):(0,rI.jsxs)(rI.Fragment,{children:[(0,rI.jsx)(mt,{to:"/login",children:(0,rI.jsx)("button",{children:"Sign In"})}),(0,rI.jsx)(mt,{to:"/register",children:(0,rI.jsx)("button",{children:"Sign Up"})})]})})]})})};const sI=function(){return(0,rI.jsx)("footer",{className:"footer",children:(0,rI.jsx)("div",{className:"container",children:(0,rI.jsxs)("div",{className:"row",children:[(0,rI.jsxs)("div",{className:"footer-col",children:[(0,rI.jsx)("h4",{children:"Company"}),(0,rI.jsxs)("ul",{children:[(0,rI.jsx)("li",{children:(0,rI.jsx)("a",{href:"#",children:"about us"})}),(0,rI.jsx)("li",{children:(0,rI.jsx)("a",{href:"#",children:"privacy policy"})})]})]}),(0,rI.jsxs)("div",{className:"footer-col",children:[(0,rI.jsx)("h4",{children:"Get help"}),(0,rI.jsxs)("ul",{children:[(0,rI.jsx)("li",{children:(0,rI.jsx)("a",{href:"#",children:"FAQ"})}),(0,rI.jsx)("li",{children:(0,rI.jsx)("a",{href:"#",children:"returns"})}),(0,rI.jsx)("li",{children:(0,rI.jsx)("a",{href:"#",children:"payment options"})})]})]}),(0,rI.jsxs)("div",{className:"footer-col",children:[(0,rI.jsx)("h4",{children:"Follow us"}),(0,rI.jsxs)("div",{className:"social-links",children:[(0,rI.jsx)("a",{className:"facebook",href:"#",children:(0,rI.jsx)("i",{className:"fab fa-facebook-f"})}),(0,rI.jsx)("a",{className:"x",href:"#",children:(0,rI.jsx)("i",{className:"fab fa-x"})}),(0,rI.jsx)("a",{className:"instagram",href:"#",children:(0,rI.jsx)("i",{className:"fab fa-instagram"})}),(0,rI.jsx)("a",{className:"linkedin",href:"#",children:(0,rI.jsx)("i",{className:"fab fa-linkedin"})})]})]})]})})})},oI=n.p+"static/media/discipline-focus.a7724e47e9e9a21dd7af.jpg";const aI=function(){const e=ge();return(0,rI.jsx)("main",{children:(0,rI.jsxs)("div",{className:"home-container",children:[(0,rI.jsx)("img",{src:oI,alt:""}),(0,rI.jsx)("h2",{children:"\u201cSmart people learn from everything and everyone, average people from their experiences, stupid people already have all the answers.\u201d \u2014 Socrates"}),(0,rI.jsx)("h1",{children:"LetsAchive"}),(0,rI.jsx)("p",{children:"LetsAchive is a platform for people who want to achieve their goals."}),(0,rI.jsx)("button",{onClick:()=>e("/goals"),children:"Get Started"})]})})};function lI(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{l(r.next(e))}catch(WM){s(WM)}}function a(e){try{l(r.throw(e))}catch(WM){s(WM)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))}function cI(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(WM){s=[6,WM],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}var uI=function(){return uI=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},uI.apply(this,arguments)},hI=function(e){return{loading:void 0===e||null===e,value:e}},dI=function(e){var t=e?e():void 0,n=(0,i.useReducer)((function(e,t){switch(t.type){case"error":return uI(uI({},e),{error:t.error,loading:!1,value:void 0});case"reset":return hI(t.defaultValue);case"value":return uI(uI({},e),{error:void 0,loading:!1,value:t.value});default:return e}}),hI(t)),r=n[0],s=n[1],o=(0,i.useCallback)((function(){var t=e?e():void 0;s({type:"reset",defaultValue:t})}),[e]),a=(0,i.useCallback)((function(e){s({type:"error",error:e})}),[]),l=(0,i.useCallback)((function(e){s({type:"value",value:e})}),[]);return(0,i.useMemo)((function(){return{error:r.error,loading:r.loading,reset:o,setError:a,setValue:l,value:r.value}}),[r.error,r.loading,o,a,l,r.value])},fI=function(e,t){var n=dI((function(){return e.currentUser})),r=n.error,s=n.loading,o=n.setError,a=n.setValue,l=n.value;return(0,i.useEffect)((function(){var n=va(e,(function(e){return lI(void 0,void 0,void 0,(function(){var n;return cI(this,(function(r){switch(r.label){case 0:if(!(null===t||void 0===t?void 0:t.onUserChanged))return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,t.onUserChanged(e)];case 2:return r.sent(),[3,4];case 3:return n=r.sent(),o(n),[3,4];case 4:return a(e),[2]}}))}))}),o);return function(){n()}}),[e]),[l,s,r]};const pI=function(e){let{goal:t,onNotify:n,onDelete:r,onEdit:i,onToggleDone:s}=e;const o=parseInt(t.streak)||0,a=t.totalDays||1,l=Math.min(o/a*100,100);return(0,rI.jsxs)("div",{className:"goal-card ".concat(t.completed?"completed":t.postponed?"postponed":""),"data-id":t.id,children:[(0,rI.jsxs)("div",{className:"card-header",children:[(0,rI.jsx)("h3",{children:t.title}),(0,rI.jsxs)("span",{className:"deadline",children:["\u23f3 ",t.deadline]}),(0,rI.jsxs)("div",{className:"dropdown",children:[(0,rI.jsx)("button",{className:"dropbtn",children:"\u22ee"}),(0,rI.jsxs)("div",{className:"dropdown-content",children:[(0,rI.jsx)("a",{href:"#",className:"edit",onClick:()=>i(t),children:"Edit"}),(0,rI.jsx)("a",{href:"#",className:"delete",onClick:()=>r(t),children:"Delete"})]})]})]}),(0,rI.jsxs)("div",{className:"card-body",children:[(0,rI.jsx)("img",{src:t.image,alt:t.title}),(0,rI.jsx)("div",{className:"progress-bar-container",children:(0,rI.jsx)("div",{className:"progress-bar",style:{width:"".concat(l,"%")}})}),(0,rI.jsxs)("p",{children:["Progress: ",l.toFixed(0),"%"]})]}),(0,rI.jsxs)("div",{className:"card-footer",children:[(0,rI.jsxs)("button",{className:"notify-btn",onClick:()=>n(t),children:["Notify Me ",t.notificationInterval?"(".concat(t.notificationInterval," min)"):""]}),(0,rI.jsx)("a",{href:"/progress",className:"progress-btn",children:"Check Progress"}),(0,rI.jsx)("button",{className:"done-btn","data-completed":t.completed,onClick:()=>s(t),children:t.completed?"Undone":"Done"})]})]})},gI=e=>{let{message:t,type:n,onClose:r}=e;return(0,i.useEffect)((()=>{const e=setTimeout((()=>{r()}),3e3);return()=>clearTimeout(e)}),[r]),(0,rI.jsxs)("div",{className:"notification ".concat(n),children:[(0,rI.jsx)("p",{children:t}),(0,rI.jsx)("button",{className:"notification-close",onClick:r,children:"\xd7"})]})},mI=n.p+"static/media/push-ups.d7400113388785f78a2f.jpg",yI=()=>{const[e]=fI(tI),[t,n]=(0,i.useState)([]),[r,s]=(0,i.useState)("active"),[o,a]=(0,i.useState)(!1),[l,c]=(0,i.useState)(""),[u,d]=(0,i.useState)([]);(0,i.useEffect)((()=>{if(e){const t=WT(yT(yb(nI,"goals"),_T("userId","==",e.uid)),(e=>{const t=e.docs.map((e=>h({id:e.id},e.data())));n(t)}));return()=>t()}}),[e]);const f=t.filter((e=>"active"===r?!e.completed&&!e.postponed:"completed"===r?e.completed:"postponed"!==r||e.postponed&&!e.completed)),p=e=>{c('\u041d\u0435 \u0437\u0430\u0431\u0443\u0434\u044c\u0442\u0435 \u0432\u0438\u043a\u043e\u043d\u0430\u0442\u0438 "'.concat(e,'"! \u0417\u0430\u043b\u0438\u0448\u0430\u0439\u0442\u0435\u0441\u044c \u043c\u043e\u0442\u0438\u0432\u043e\u0432\u0430\u043d\u0438\u043c\u0438!')),a(!0);new Audio("/src/sounds/notification-22-270130.mp3").play().catch((e=>console.error("Audio error:",e))),"granted"===gI.permission?new gI("\u0427\u0430\u0441 \u0434\u0456\u044f\u0442\u0438!",{body:'\u041d\u0435 \u0437\u0430\u0431\u0443\u0434\u044c\u0442\u0435 \u0432\u0438\u043a\u043e\u043d\u0430\u0442\u0438 "'.concat(e,'"!'),icon:"images/push-ups.jpg"}):"denied"!==gI.permission&&gI.requestPermission().then((t=>{"granted"===t&&new gI("\u0427\u0430\u0441 \u0434\u0456\u044f\u0442\u0438!",{body:'\u041d\u0435 \u0437\u0430\u0431\u0443\u0434\u044c\u0442\u0435 \u0432\u0438\u043a\u043e\u043d\u0430\u0442\u0438 "'.concat(e,'"!'),icon:"images/push-ups.jpg"})}))},g=e=>{e.timerId&&clearInterval(e.timerId);const t=60*e.notificationInterval*1e3,n=setInterval((()=>{e.completed?(clearInterval(n),m(e.id,null)):p(e.title)}),t);m(e.id,n),p(e.title)},m=async(e,t)=>{try{const n=vb(nI,"goals",e);await qT(n,{timerId:t})}catch(MS){console.error("Error updating timerId:",MS.message)}},y=async e=>{const t=prompt("\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u0456\u043d\u0442\u0435\u0440\u0432\u0430\u043b \u0441\u043f\u043e\u0432\u0456\u0449\u0435\u043d\u044c \u0443 \u0445\u0432\u0438\u043b\u0438\u043d\u0430\u0445 (\u043d\u0430\u043f\u0440\u0438\u043a\u043b\u0430\u0434, 5):",e.notificationInterval||""),n=parseInt(t);if(!isNaN(n)&&n>0)try{const t=vb(nI,"goals",e.id);await qT(t,{notificationInterval:n,postponed:!0}),g(h(h({},e),{},{notificationInterval:n})),d((t=>[...t,{id:Date.now(),message:'Goal "'.concat(e.title,'" moved to postponed!'),type:"postponed"}]))}catch(MS){console.error("Error setting notification:",MS.message)}else alert("\u0411\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u0432\u0432\u0435\u0434\u0456\u0442\u044c \u043a\u043e\u0440\u0435\u043a\u0442\u043d\u0435 \u0447\u0438\u0441\u043b\u043e \u0431\u0456\u043b\u044c\u0448\u0435 0.")},v=async e=>{e.timerId&&clearInterval(e.timerId);try{await BT(vb(nI,"goals",e.id))}catch(MS){console.error("Error deleting goal:",MS.message)}},_=async e=>{const t=prompt("Edit goal title:",e.title),n=b();if(t||n)try{const r=vb(nI,"goals",e.id);await qT(r,{title:t||e.title,deadline:n||e.deadline})}catch(MS){console.error("Error editing goal:",MS.message)}},w=async e=>{const t=parseInt(e.streak)||0,n=h(h({},e),{},{completed:!e.completed,postponed:!1,streak:"".concat(e.completed?Math.max(0,t-1):t+1,"-day streak")});n.completed&&n.timerId?(clearInterval(n.timerId),n.timerId=null):!n.completed&&n.notificationInterval&&g(n);try{const t=vb(nI,"goals",e.id);await qT(t,{completed:n.completed,postponed:n.postponed,streak:n.streak,timerId:n.timerId}),e.completed||d((t=>[...t,{id:Date.now(),message:'Goal "'.concat(e.title,'" marked as completed!'),type:"completed"}]))}catch(MS){console.error("Error updating goal:",MS.message)}},b=()=>{let e=parseInt(prompt("Enter a number (1-30):"),10);if(isNaN(e)||e<1||e>30)return null;let t=parseInt(prompt("Choose unit: \n1 - \u0434\u043d\u0456\u0432 \n2 - \u0442\u0438\u0436\u043d\u0456\u0432 \n3 - \u043c\u0456\u0441\u044f\u0446\u0456\u0432 \n4 - \u0440\u043e\u043a\u0456\u0432"),10);return[1,2,3,4].includes(t)?"".concat(e," ").concat(["\u0434\u043d\u0456\u0432","\u0442\u0438\u0436\u043d\u0456\u0432","\u043c\u0456\u0441\u044f\u0446\u0456\u0432","\u0440\u043e\u043a\u0456\u0432"][t-1]):null},T=async(t,n,r)=>{if(!e)return;const[i,s]=n.split(" ");try{await HT(yb(nI,"goals"),{userId:e.uid,title:t,image:r,streak:"0-day streak",deadline:n,completed:!1,postponed:!1,totalDays:I(parseInt(i),s),notificationInterval:null,timerId:null}),c('Goal "'.concat(t,'" created successfully!')),a(!0)}catch(MS){c("Failed to create goal: ".concat(MS.message)),a(!0)}},I=(e,t)=>{switch(t){case"\u0434\u043d\u0456\u0432":default:return e;case"\u0442\u0438\u0436\u043d\u0456\u0432":return 7*e;case"\u043c\u0456\u0441\u044f\u0446\u0456\u0432":return 30*e;case"\u0440\u043e\u043a\u0456\u0432":return 365*e}};return(0,rI.jsxs)("main",{children:[e?(0,rI.jsxs)("div",{className:"s-container",children:[(0,rI.jsx)("div",{className:"div-create-goal",children:(0,rI.jsx)("button",{className:"create-goal-button",onClick:()=>{const e=prompt("Enter goal title:");if(!e)return;const t=b();t&&T(e,t,mI)},children:"Create goal"})}),(0,rI.jsxs)("div",{className:"goals-filter",style:{marginTop:"20px",textAlign:"center"},children:[(0,rI.jsx)("button",{onClick:()=>s("active"),children:"Active"}),(0,rI.jsx)("button",{onClick:()=>s("completed"),children:"Completed"}),(0,rI.jsx)("button",{onClick:()=>s("postponed"),children:"Postponed"})]}),(0,rI.jsx)("div",{className:"goals-container",children:f.map((e=>(0,rI.jsx)(pI,{goal:e,onNotify:y,onDelete:v,onEdit:_,onToggleDone:w},e.id)))})]}):(0,rI.jsx)("p",{children:"Please log in to view and create goals."}),(0,rI.jsx)("div",{className:"overlay ".concat(o?"active":""),onClick:()=>a(!1)}),(0,rI.jsxs)("div",{className:"notification-modal ".concat(o?"active":""),children:[(0,rI.jsx)("h3",{children:"\u0427\u0430\u0441 \u0434\u0456\u044f\u0442\u0438!"}),(0,rI.jsx)("p",{className:"notification-text",children:l}),(0,rI.jsx)("button",{className:"close-notification",onClick:()=>a(!1),children:"OK"})]}),u.map((e=>(0,rI.jsx)(gI,{message:e.message,type:e.type,onClose:()=>d((t=>t.filter((t=>t.id!==e.id))))},e.id)))]})};const vI=function(e){let{goal:t}=e;const n=parseInt(t.streak)||0,r=t.totalDays||1,i=Math.min(n/r*100,100);return(0,rI.jsxs)("div",{className:"progress-box",children:[(0,rI.jsx)("div",{className:"progress-image",children:(0,rI.jsx)("img",{src:t.image,alt:t.title})}),(0,rI.jsxs)("div",{className:"progress-info",children:[(0,rI.jsx)("div",{className:"progress-title",children:t.title}),(0,rI.jsx)("div",{className:"progress-streak",children:t.streak}),(0,rI.jsx)("div",{className:"progress-bar-container",children:(0,rI.jsx)("div",{className:"progress-bar",style:{width:"".concat(i,"%")}})}),(0,rI.jsxs)("p",{children:["Progress: ",i.toFixed(0),"%"]})]})]})};const _I=function(){const[e]=fI(tI),[t,n]=(0,i.useState)([]);return(0,i.useEffect)((()=>{if(e){const t=WT(yT(yb(nI,"goals"),_T("userId","==",e.uid)),(e=>{const t=e.docs.map((e=>h({id:e.id},e.data())));n(t)}));return()=>t()}}),[e]),(0,rI.jsx)("main",{children:e?(0,rI.jsxs)("div",{className:"progress-container",children:[(0,rI.jsx)("div",{className:"progress-title-container",children:(0,rI.jsx)("h1",{children:"Your progress"})}),(0,rI.jsx)("div",{className:"progress-boxes",children:t.length>0?t.map((e=>(0,rI.jsx)(vI,{goal:e},e.id))):(0,rI.jsx)("p",{children:"No goals yet!"})})]}):(0,rI.jsx)("p",{children:"Please log in to view your progress."})})};const wI=function(){const[e,t]=(0,i.useState)([{time:"12:00",user:"Max",text:"hello!"}]),[n,r]=(0,i.useState)("");return(0,rI.jsxs)("main",{className:"chat-container",children:[(0,rI.jsx)("div",{className:"chat-box",children:e.map(((e,t)=>(0,rI.jsxs)("div",{children:[(0,rI.jsx)("h5",{children:e.time}),(0,rI.jsxs)("h3",{children:[e.user,": ",e.text]})]},t)))}),(0,rI.jsxs)("div",{className:"chat-input",children:[(0,rI.jsx)("input",{type:"text",placeholder:"Enter message...",value:n,onChange:e=>r(e.target.value)}),(0,rI.jsx)("button",{onClick:()=>{n.trim()&&(t([...e,{time:(new Date).toLocaleTimeString().slice(0,5),user:"You",text:n}]),r(""))},children:"Send"})]})]})};const bI=function(){return(0,rI.jsx)(wI,{})},TI=()=>{const[e,t]=(0,i.useState)(""),[n,r]=(0,i.useState)(""),[s,o]=(0,i.useState)(null),a=ge();return(0,rI.jsxs)("div",{className:"auth-container",children:[(0,rI.jsx)("h2",{children:"Sign In"}),(0,rI.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),o(null);try{await sa(tI,e,n),a("/goals")}catch(s){o(s.message)}},children:[(0,rI.jsxs)("div",{children:[(0,rI.jsx)("label",{children:"Email:"}),(0,rI.jsx)("input",{type:"email",value:e,onChange:e=>t(e.target.value),required:!0})]}),(0,rI.jsxs)("div",{children:[(0,rI.jsx)("label",{children:"Password:"}),(0,rI.jsx)("input",{type:"password",value:n,onChange:e=>r(e.target.value),required:!0})]}),s&&(0,rI.jsx)("p",{style:{color:"red"},children:s}),(0,rI.jsx)("button",{type:"submit",children:"Sign In"}),(0,rI.jsxs)("p",{children:["Don't have an account? ",(0,rI.jsx)(mt,{to:"/register",children:"Sign Up"})]})]})]})},II=()=>{const[e,t]=(0,i.useState)(""),[n,r]=(0,i.useState)(""),[s,o]=(0,i.useState)(null),a=ge();return(0,rI.jsxs)("div",{className:"auth-container",children:[(0,rI.jsx)("h2",{children:"Sign Up"}),(0,rI.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),o(null);try{await ia(tI,e,n),a("/goals")}catch(s){o(s.message)}},children:[(0,rI.jsxs)("div",{children:[(0,rI.jsx)("label",{children:"Email:"}),(0,rI.jsx)("input",{type:"email",value:e,onChange:e=>t(e.target.value),required:!0})]}),(0,rI.jsxs)("div",{children:[(0,rI.jsx)("label",{children:"Password:"}),(0,rI.jsx)("input",{type:"password",value:n,onChange:e=>r(e.target.value),required:!0})]}),s&&(0,rI.jsx)("p",{style:{color:"red"},children:s}),(0,rI.jsx)("button",{type:"submit",children:"Sign Up"}),(0,rI.jsxs)("p",{children:["Already have an account? ",(0,rI.jsx)(mt,{to:"/login",children:"Sign In"})]})]})]})},SI=e=>{let{children:t}=e;const[n,r]=fI(tI);return r?(0,rI.jsx)("div",{children:"Loading..."}):n?t:(0,rI.jsx)(Ae,{to:"/login"})};const EI=function(){return(0,rI.jsx)(pt,{children:(0,rI.jsxs)("div",{className:"App",children:[(0,rI.jsx)(iI,{}),(0,rI.jsxs)(De,{children:[(0,rI.jsx)(Pe,{path:"/",element:(0,rI.jsx)(aI,{})}),(0,rI.jsx)(Pe,{path:"/goals",element:(0,rI.jsx)(SI,{children:(0,rI.jsx)(yI,{})})}),(0,rI.jsx)(Pe,{path:"/progress",element:(0,rI.jsx)(SI,{children:(0,rI.jsx)(_I,{})})}),(0,rI.jsx)(Pe,{path:"/Community",element:(0,rI.jsx)(SI,{children:(0,rI.jsx)(bI,{})})}),(0,rI.jsx)(Pe,{path:"/community",element:(0,rI.jsx)(bI,{})}),(0,rI.jsx)(Pe,{path:"/login",element:(0,rI.jsx)(TI,{})}),(0,rI.jsx)(Pe,{path:"/register",element:(0,rI.jsx)(II,{})})]}),(0,rI.jsx)(sI,{})]})})};class kI{constructor(e,t){this._delegate=e,this.firebase=t,Br(e,new Dn("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),oi(this._delegate))))}_getService(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ur;var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ur;this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Br(this._delegate,e)}_addOrOverwriteComponent(e){Hr(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const CI=new ln("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const NI=function e(){const t=function(e){const t={},n={__esModule:!0,initializeApp:function(r){const i=ni(r,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(fn(t,i.name))return t[i.name];const s=new e(i,n);return t[i.name]=s,s},app:i,registerVersion:ai,setLogLevel:ci,onLog:li,apps:null,SDK_VERSION:ti,INTERNAL:{registerComponent:function(t){const r=t.name,s=r.replace("-compat","");if(Wr(t)&&"PUBLIC"===t.type){const o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[s])throw CI.create("invalid-app-argument",{appName:r});return e[s]()};void 0!==t.serviceProps&&Lt(o,t.serviceProps),n[s]=o,e.prototype[s]=function(){const e=this._getService.bind(this,r);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e.apply(this,t.multipleInstances?i:[])}}return"PUBLIC"===t.type?n[s]:null},removeApp:function(e){delete t[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:r}};function i(e){if(!fn(t,e=e||Ur))throw CI.create("no-app",{appName:e});return t[e]}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(t).map((e=>t[e]))}}),i.App=e,n}(kI);return t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){Lt(t,e)},createSubscribe:In,ErrorFactory:ln,deepExtend:Lt}),t}(),xI=new Bn("@firebase/app-compat");try{const e=Mt();if(void 0!==e.firebase){xI.warn("\n      Warning: Firebase is already defined in the global scope. Please make sure\n      Firebase library is only loaded once.\n    ");const t=e.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&xI.warn("\n        Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n        ")}}catch(sj){}const AI=NI;!function(e){ai("@firebase/app-compat","0.3.3",e)}();function PI(){return window}AI.registerVersion("firebase","11.7.3","app-compat");async function RI(e,t,n){var r;const{BuildInfo:i}=PI();Ki(t.sessionId,"AuthEvent did not contain a session ID");const s=await async function(e){const t=function(e){if(Ki(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(t.sessionId),o={};return zs()?o.ibi=i.packageName:Us()?o.apn=i.packageName:Ui(e,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,Gl(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,o)}function DI(e){const{cordova:t}=PI();return new Promise((n=>{t.plugins.browsertab.isAvailable((r=>{let i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qt();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}class OI extends El{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise((e=>{this.resolveInitialized=e}))}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach((t=>t(e))),super.onEvent(e)}async initialized(){await this.initPromise}}async function LI(e){const t=await UI()._get(jI(e));return t&&await UI()._remove(jI(e)),t}function MI(e,t){var n,r;const i=function(e){const t=VI(e),n=t.link?decodeURIComponent(t.link):void 0,r=VI(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return VI(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){const t=VI(i),s=t.firebaseError?function(e){try{return JSON.parse(e)}catch(WM){return null}}(decodeURIComponent(t.firebaseError)):null,o=null===(r=null===(n=null===s||void 0===s?void 0:s.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],a=o?ji(o):null;return a?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function FI(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<20;n++){const n=Math.floor(62*Math.random());e.push(t.charAt(n))}return e.join("")}function UI(){return Ns(Ca)}function jI(e){return Ps("authEvent",e.config.apiKey,e.name)}function VI(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return wn(n.join("?"))}const zI=class{constructor(){this._redirectPersistence=Ra,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Il,this._overrideRedirectResult=yl}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new OI(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){Ui(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,r){!function(e){var t,n,r,i,s,o,a,l,c,u;const h=PI();Hi("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Hi("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Hi("function"===typeof(null===(s=null===(i=null===(r=null===h||void 0===h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===s?void 0:s.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Hi("function"===typeof(null===(l=null===(a=null===(o=null===h||void 0===h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===a?void 0:a.browsertab)||void 0===l?void 0:l.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Hi("function"===typeof(null===(u=null===(c=null===h||void 0===h?void 0:h.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===u?void 0:u.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const i=await this._initialize(e);await i.initialized(),i.resetRedirect(),pl.clear(),await this._originValidation(e);const s=function(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:FI(),postBody:null,tenantId:e.tenantId,error:ji(e,"no-auth-event")}}(e,n,r);await function(e,t){return UI()._set(jI(e),t)}(e,s);const o=await RI(e,s,t);return async function(e,t,n){const{cordova:r}=PI();let i=()=>{};try{await new Promise(((s,o)=>{let a=null;function l(){var e;s();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"===typeof t&&t(),"function"===typeof(null===n||void 0===n?void 0:n.close)&&n.close()}function c(){a||(a=window.setTimeout((()=>{o(ji(e,"redirect-cancelled-by-user"))}),2e3))}function u(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}t.addPassiveListener(l),document.addEventListener("resume",c,!1),Us()&&document.addEventListener("visibilitychange",u,!1),i=()=>{t.removePassiveListener(l),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",u,!1),a&&window.clearTimeout(a)}}))}finally{i()}}(e,i,await DI(o))}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){const{BuildInfo:t}=PI(),n={};zs()?n.iosBundleId=t.packageName:Us()?n.androidPackageName=t.packageName:Ui(e,"operation-not-supported-in-this-environment"),await Nl(e,n)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:r,BuildInfo:i}=PI(),s=setTimeout((async()=>{await LI(e),t.onEvent(qI())}),500),o=async n=>{clearTimeout(s);const r=await LI(e);let i=null;r&&(null===n||void 0===n?void 0:n.url)&&(i=MI(r,n.url)),t.onEvent(i||qI())};"undefined"!==typeof n&&"function"===typeof n.subscribe&&n.subscribe(null,o);const a=r,l="".concat(i.packageName.toLowerCase(),"://");PI().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(l)&&o({url:e}),"function"===typeof a)try{a(e)}catch(WM){console.error(WM)}}}};function qI(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ji("no-auth-event")}}function BI(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function HI(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qt();return!("file:"!==BI()&&"ionic:"!==BI()&&"capacitor:"!==BI()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function WI(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qt();return en()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qt();return/Edge\/\d+/.test(e)}(e)}function KI(){try{const e=self.localStorage,t=Oa();if(e)return e.setItem(t,"1"),e.removeItem(t),!WI()||rn()}catch(WM){return GI()&&rn()}return!1}function GI(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function QI(){return("http:"===BI()||"https:"===BI()||Xt()||HI())&&!(Zt()||$t())&&KI()&&!GI()}function YI(){return HI()&&"undefined"!==typeof document}const $I={LOCAL:"local",NONE:"none",SESSION:"session"},JI=Hi,XI="persistence";async function ZI(e){await e._initializationPromise;const t=eS(),n=Ps(XI,e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistenceType())}function eS(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(WM){return null}}const tS=Hi;class nS{constructor(){this.browserResolver=Ns(Yl),this.cordovaResolver=Ns(zI),this.underlyingResolver=null,this._redirectPersistence=Ra,this._completeRedirectFn=Il,this._overrideRedirectResult=yl}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,r)}async _openRedirect(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,r)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return YI()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return tS(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await async function(){return!!YI()&&new Promise((e=>{const t=setTimeout((()=>{e(!1)}),1e3);document.addEventListener("deviceready",(()=>{clearTimeout(t),e(!0)}))}))}();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function rS(e){return e.unwrap()}function iS(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code)){t.resolver=new lS(e,function(e,t){var n;const r=Rn(e),i=t;return Hi(t.customData.operationType,r,"argument-error"),Hi(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),wa._fromError(r,i)}(e,t))}else if(r){const e=sS(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}function sS(e){const{_tokenResponse:t}=e instanceof an?e.customData:e;if(!t)return null;if(!(e instanceof an)&&"temporaryProof"in t&&"phoneNumber"in t)return sl.credentialFromResult(e);const n=t.providerId;if(!n||n===Si)return null;let r;switch(n){case Ii:r=Po;break;case bi:r=Ao;break;case Ti:r=Ro;break;case Ei:r=Lo;break;default:const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:s,pendingToken:o,nonce:a}=t;return i||s||e||o?o?n.startsWith("saml.")?Do._create(n,o):bo._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:e,accessToken:i}):new xo(n).credential({idToken:e,accessToken:i,rawNonce:a}):null}return e instanceof an?r.credentialFromError(e):r.credentialFromResult(e)}function oS(e,t){return t.catch((t=>{throw t instanceof an&&iS(e,t),t})).then((e=>{const t=e.operationType,n=e.user;return{operationType:t,credential:(r=e,sS(r)),additionalUserInfo:ya(e),user:cS.getOrCreate(n)};var r}))}async function aS(e,t){const n=await t;return{verificationId:n.verificationId,confirm:t=>oS(e,n.confirm(t))}}class lS{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return oS(rS(this.auth),this.resolver.resolveSignIn(e))}}class cS{constructor(e){this._delegate=e,this.multiFactor=function(e){const t=Rn(e);return Ia.has(t)||Ia.set(t,Ta._fromUser(t)),Ia.get(t)}(e)}static getOrCreate(e){return cS.USER_MAP.has(e)||cS.USER_MAP.set(e,new cS(e)),cS.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return oS(this.auth,Qo(this._delegate,e))}async linkWithPhoneNumber(e,t){return aS(this.auth,async function(e,t,n){const r=Rn(e);await Ho(!1,r,"phone");const i=await rl(r.auth,t,Rn(n));return new nl(i,(e=>Qo(r,e)))}(this._delegate,e,t))}async linkWithPopup(e){return oS(this.auth,async function(e,t,n){const r=Rn(e);qi(r.auth,t,Co);const i=ol(r.auth,n);return new fl(r.auth,"linkViaPopup",t,i,r).executeNotNull()}(this._delegate,e,nS))}async linkWithRedirect(e){return await ZI(Gs(this.auth)),Tl(this._delegate,e,nS)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return oS(this.auth,Yo(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return aS(this.auth,async function(e,t,n){const r=Rn(e);if(Yr(r.auth.app))return Promise.reject(zi(r.auth));const i=await rl(r.auth,t,Rn(n));return new nl(i,(e=>Yo(r,e)))}(this._delegate,e,t))}reauthenticateWithPopup(e){return oS(this.auth,async function(e,t,n){const r=Rn(e);if(Yr(r.auth.app))return Promise.reject(ji(r.auth,"operation-not-supported-in-this-environment"));qi(r.auth,t,Co);const i=ol(r.auth,n);return new fl(r.auth,"reauthViaPopup",t,i,r).executeNotNull()}(this._delegate,e,nS))}async reauthenticateWithRedirect(e){return await ZI(Gs(this.auth)),bl(this._delegate,e,nS)}sendEmailVerification(e){return aa(this._delegate,e)}async unlink(e){return await qo(this._delegate,e),this}updateEmail(e){return function(e,t){const n=Rn(e);return Yr(n.auth.app)?Promise.reject(zi(n.auth)):ua(n,t,null)}(this._delegate,e)}updatePassword(e){return function(e,t){return ua(Rn(e),null,t)}(this._delegate,e)}updatePhoneNumber(e){return async function(e,t){const n=Rn(e);if(Yr(n.auth.app))return Promise.reject(zi(n.auth));await Bo(n,t)}(this._delegate,e)}updateProfile(e){return ca(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return la(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}cS.USER_MAP=new WeakMap;const uS=Hi;class hS{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;uS(n,"invalid-api-key",{appName:e.name}),uS(n,"invalid-api-key",{appName:e.name});const r="undefined"!==typeof window?nS:void 0;this._delegate=t.initialize({options:{persistence:fS(n,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(Di),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?cS.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){lo(this._delegate,e,t)}applyActionCode(e){return na(this._delegate,e)}checkActionCode(e){return ra(this._delegate,e)}confirmPasswordReset(e,t){return async function(e,t,n){await fo(Rn(e),{oobCode:t,newPassword:n}).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&ta(e),t}))}(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return oS(this._delegate,ia(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return oa(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){const n=Eo.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}async getRedirectResult(){uS(QI(),this._delegate,"operation-not-supported-in-this-environment");const e=await async function(e,t){return await Gs(e)._initializationPromise,Il(e,t,!1)}(this._delegate,nS);return e?oS(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){!function(e,t){Gs(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:s}=dS(e,t,n);return this._delegate.onAuthStateChanged(r,i,s)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:s}=dS(e,t,n);return this._delegate.onIdTokenChanged(r,i,s)}sendSignInLinkToEmail(e,t){return async function(e,t,n){const r=Gs(e),i={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};!function(e,t){Hi(t.handleCodeInApp,r,"argument-error"),t&&ea(r,e,t)}(i,n),await oo(r,i,"getOobCode",vo,"EMAIL_PASSWORD_PROVIDER")}(this._delegate,e,t)}sendPasswordResetEmail(e,t){return async function(e,t,n){const r=Gs(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&ea(r,i,n),await oo(r,i,"getOobCode",yo,"EMAIL_PASSWORD_PROVIDER")}(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(function(e,t){JI(Object.values($I).includes(t),e,"invalid-persistence-type"),Zt()?JI(t!==$I.SESSION,e,"unsupported-persistence-type"):$t()?JI(t===$I.NONE,e,"unsupported-persistence-type"):GI()?JI(t===$I.NONE||t===$I.LOCAL&&rn(),e,"unsupported-persistence-type"):JI(t===$I.NONE||KI(),e,"unsupported-persistence-type")}(this._delegate,e),e){case $I.SESSION:t=Ra;break;case $I.LOCAL:t=await Ns(Ga)._isAvailable()?Ga:Ca;break;case $I.NONE:t=As;break;default:return Ui("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return oS(this._delegate,async function(e){var t;if(Yr(e.app))return Promise.reject(zi(e));const n=Gs(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new Fo({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await Mo(n,{returnSecureToken:!0}),i=await Fo._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}(this._delegate))}signInWithCredential(e){return oS(this._delegate,Go(this._delegate,e))}signInWithCustomToken(e){return oS(this._delegate,$o(this._delegate,e))}signInWithEmailAndPassword(e,t){return oS(this._delegate,sa(this._delegate,e,t))}signInWithEmailLink(e,t){return oS(this._delegate,async function(e,t,n){if(Yr(e.app))return Promise.reject(zi(e));const r=Rn(e),i=ko.credentialWithLink(t,n||Gi());return Hi(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Go(r,i)}(this._delegate,e,t))}signInWithPhoneNumber(e,t){return aS(this._delegate,async function(e,t,n){if(Yr(e.app))return Promise.reject(zi(e));const r=Gs(e),i=await rl(r,t,Rn(n));return new nl(i,(e=>Go(r,e)))}(this._delegate,e,t))}async signInWithPopup(e){return uS(QI(),this._delegate,"operation-not-supported-in-this-environment"),oS(this._delegate,async function(e,t,n){if(Yr(e.app))return Promise.reject(ji(e,"operation-not-supported-in-this-environment"));const r=Gs(e);qi(e,t,Co);const i=ol(r,n);return new fl(r,"signInViaPopup",t,i).executeNotNull()}(this._delegate,e,nS))}async signInWithRedirect(e){return uS(QI(),this._delegate,"operation-not-supported-in-this-environment"),await ZI(this._delegate),wl(this._delegate,e,nS)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return async function(e,t){const{data:n}=await ra(Rn(e),t);return n.email}(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function dS(e,t,n){let r=e;"function"!==typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&cS.getOrCreate(e)),error:t,complete:n}}function fS(e,t){const n=function(e,t){const n=eS();if(!n)return[];const r=Ps(XI,e,t);switch(n.getItem(r)){case $I.NONE:return[As];case $I.LOCAL:return[Ga,Ra];case $I.SESSION:return[Ra];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(Ga)||n.push(Ga),"undefined"!==typeof window)for(const r of[Ca,Ra])n.includes(r)||n.push(r);return n.includes(As)||n.push(As),n}hS.Persistence=$I;class pS{static credential(e,t){return sl.credential(e,t)}constructor(){this.providerId="phone",this._delegate=new sl(rS(AI.auth()))}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}pS.PHONE_SIGN_IN_METHOD=sl.PHONE_SIGN_IN_METHOD,pS.PROVIDER_ID=sl.PROVIDER_ID;const gS=Hi;class mS{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:AI.app();var r;gS(null===(r=n.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new tl(n.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}var yS;(yS=AI).INTERNAL.registerComponent(new Dn("auth-compat",(e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new hS(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ki,PASSWORD_RESET:Ci,RECOVER_EMAIL:Ni,REVERT_SECOND_FACTOR_ADDITION:xi,VERIFY_AND_CHANGE_EMAIL:Ai,VERIFY_EMAIL:Pi}},EmailAuthProvider:ko,FacebookAuthProvider:Ao,GithubAuthProvider:Ro,GoogleAuthProvider:Po,OAuthProvider:xo,SAMLAuthProvider:Oo,PhoneAuthProvider:pS,PhoneMultiFactorGenerator:Xl,RecaptchaVerifier:mS,TwitterAuthProvider:Lo,Auth:hS,AuthCredential:ho,Error:an}).setInstantiationMode("LAZY").setMultipleInstances(!1)),yS.registerVersion("@firebase/auth-compat","0.5.24");const vS="@firebase/database",_S="1.0.17";let wS="";function bS(e){wS=e}class TS{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),hn(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:un(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class IS{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return fn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const SS=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new TS(t)}}catch(WM){}return new IS},ES=SS("localStorage"),kS=SS("sessionStorage"),CS=new Bn("@firebase/database"),NS=function(){let e=1;return function(){return e++}}(),xS=function(e){const t=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){const t=i-55296;r++,Ct(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(t<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new Tn;n.update(t);const r=n.digest();return At.encodeByteArray(r)},AS=function(){let e="";for(let t=0;t<arguments.length;t++){const n=t<0||arguments.length<=t?void 0:arguments[t];Array.isArray(n)||n&&"object"===typeof n&&"number"===typeof n.length?e+=AS.apply(null,n):e+="object"===typeof n?hn(n):n,e+=" "}return e};let PS=null,RS=!0;const DS=function(e,t){Ct(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(CS.logLevel=Un.VERBOSE,PS=CS.log.bind(CS),t&&kS.set("logging_enabled",!0)):"function"===typeof e?PS=e:(PS=null,kS.remove("logging_enabled"))},OS=function(){if(!0===RS&&(RS=!1,null===PS&&!0===kS.get("logging_enabled")&&DS(!0)),PS){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=AS.apply(null,t);PS(r)}},LS=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];OS(e,...n)}},MS=function(){const e="FIREBASE INTERNAL ERROR: "+AS(...arguments);CS.error(e)},FS=function(){const e="FIREBASE FATAL ERROR: ".concat(AS(...arguments));throw CS.error(e),new Error(e)},US=function(){const e="FIREBASE WARNING: "+AS(...arguments);CS.warn(e)},jS=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},VS="[MIN_NAME]",zS="[MAX_NAME]",qS=function(e,t){if(e===t)return 0;if(e===VS||t===zS)return-1;if(t===VS||e===zS)return 1;{const n=$S(e),r=$S(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1}},BS=function(e,t){return e===t?0:e<t?-1:1},HS=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+hn(t))},WS=function(e){if("object"!==typeof e||null===e)return hn(e);const t=[];for(const r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)0!==r&&(n+=","),n+=hn(t[r]),n+=":",n+=WS(e[t[r]]);return n+="}",n},KS=function(e,t){const n=e.length;if(n<=t)return[e];const r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function GS(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const QS=function(e){Ct(!jS(e),"Invalid JSON number");const t=1023;let n,r,i,s,o;0===e?(r=0,i=0,n=1/e===-1/0?1:0):(n=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(s=Math.min(Math.floor(Math.log(e)/Math.LN2),t),r=s+t,i=Math.round(e*Math.pow(2,52-s)-Math.pow(2,52))):(r=0,i=Math.round(e/Math.pow(2,-1074))));const a=[];for(o=52;o;o-=1)a.push(i%2?1:0),i=Math.floor(i/2);for(o=11;o;o-=1)a.push(r%2?1:0),r=Math.floor(r/2);a.push(n?1:0),a.reverse();const l=a.join("");let c="";for(o=0;o<64;o+=8){let e=parseInt(l.substr(o,8),2).toString(16);1===e.length&&(e="0"+e),c+=e}return c.toLowerCase()};const YS=new RegExp("^-?(0*)\\d{1,10}$"),$S=function(e){if(YS.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},JS=function(e){try{e()}catch(WM){setTimeout((()=>{const t=WM.stack||"";throw US("Exception was thrown by user callback.",t),WM}),Math.floor(0))}},XS=function(e,t){const n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n};class ZS{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,Yr(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=null===t||void 0===t?void 0:t.getImmediate({optional:!0}),this.appCheck||null===t||void 0===t||t.get().then((e=>this.appCheck=e))}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise(((t,n)=>{setTimeout((()=>{this.appCheck?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((t=>t.addTokenListener(e)))}notifyForInvalidToken(){US('Provided AppCheck credentials for the app named "'.concat(this.appName,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}class eE{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((e=>this.auth_=e))}getToken(e){return this.auth_?this.auth_.getToken(e).catch((e=>e&&"auth/token-not-initialized"===e.code?(OS("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e))):new Promise(((t,n)=>{setTimeout((()=>{this.auth_?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((t=>t.addAuthTokenListener(e)))}removeTokenChangeListener(e){this.authProvider_.get().then((t=>t.removeAuthTokenListener(e)))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',US(e)}}class tE{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}tE.OWNER="owner";const nE="5",rE=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,iE="ac",sE="websocket",oE="long_polling";class aE{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],a=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null;this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=s,this.includeNamespaceInQueryParams=o,this.isUsingEmulator=a,this.emulatorOptions=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ES.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ES.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}function lE(e,t,n){let r;if(Ct("string"===typeof t,"typeof type must == string"),Ct("object"===typeof n,"typeof params must == object"),t===sE)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==oE)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const i=[];return GS(n,((e,t)=>{i.push(e+"="+t)})),r+i.join("&")}class cE{constructor(){this.counters_={}}incrementCounter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;fn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return Lt(void 0,this.counters_)}}const uE={},hE={};function dE(e){const t=e.toString();return uE[t]||(uE[t]=new cE),uE[t]}class fE{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&JS((()=>{this.onMessage_(e[t])}));if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const pE="start";class gE{constructor(e,t,n,r,i,s,o){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=s,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=LS(e),this.stats_=dE(t),this.urlFn=e=>(this.appCheckToken&&(e[iE]=this.appCheckToken),lE(t,oE,e))}open(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new fE(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(tn()||"complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((()=>{if(this.isClosed_)return;this.scriptTagHolder=new mE((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,s,o,a,l]=t;if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===pE)n.id=s,n.password=o;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,(()=>{n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,s]=t;n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,s)}),(()=>{this.onClosed_()}),this.urlFn);const e={};e[pE]="t",e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v=nE,this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e[iE]=this.appCheckToken),"undefined"!==typeof location&&location.hostname&&rE.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,(()=>{}))}))}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){gE.forceAllow_=!0}static forceDisallow(){gE.forceDisallow_=!0}static isAvailable(){return!tn()&&(!!gE.forceAllow_||!gE.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=hn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=Rt(t),r=KS(n,1840);for(let i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(tn())return;this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=hn(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class mE{constructor(e,t,n,r){if(this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,tn())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=NS(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=mE.createIFrame_();let n="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)){n='<script>document.domain="'+document.domain+'";<\/script>'}const r="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(r),this.myIFrame.doc.close()}catch(WM){OS("frame writing exception"),WM.stack&&OS(WM.stack),OS(WM)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||OS("No IE domain setting required")}catch(WM){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)}),Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",r=0;for(;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;{const e=this.pendingSegs.shift();n=n+"&seg"+r+"="+e.seg+"&ts"+r+"="+e.ts+"&d"+r+"="+e.d,r++}}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(n,Math.floor(25e3));this.addTag(e,(()=>{clearTimeout(r),n()}))}addTag(e,t){tn()?this.doNodeLongPoll(e,t):setTimeout((()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{OS("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(WM){}}),Math.floor(1))}}let yE=null;"undefined"!==typeof MozWebSocket?yE=MozWebSocket:"undefined"!==typeof WebSocket&&(yE=WebSocket);class vE{constructor(e,t,n,r,i,s,o){this.connId=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=LS(this.connId),this.stats_=dE(t),this.connURL=vE.connectionURL_(t,s,o,r,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,r,i){const s={};return s.v=nE,!tn()&&"undefined"!==typeof location&&location.hostname&&rE.test(location.hostname)&&(s.r="f"),t&&(s.s=t),n&&(s.ls=n),r&&(s[iE]=r),i&&(s.p=i),lE(e,sE,s)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ES.set("previous_websocket_failure",!0);try{let e;if(tn()){const t=this.nodeAdmin?"AdminNode":"Node";e={headers:{"User-Agent":"Firebase/".concat(nE,"/").concat(wS,"/").concat(process.platform,"/").concat(t),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(e.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(e.headers["X-Firebase-AppCheck"]=this.appCheckToken);const n={NODE_ENV:"production",PUBLIC_URL:"/Volpan28/LetsAchive4.github.io",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},r=0===this.connURL.indexOf("wss://")?n.HTTPS_PROXY||n.https_proxy:n.HTTP_PROXY||n.http_proxy;r&&(e.proxy={origin:r})}this.mySock=new yE(this.connURL,[],e)}catch(WM){this.log_("Error instantiating WebSocket.");const t=WM.message||WM.data;return t&&this.log_(t),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){vE.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!==typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==yE&&!vE.forceDisallow_}static previouslyFailed(){return ES.isInMemoryStorage||!0===ES.get("previous_websocket_failure")}markConnectionHealthy(){ES.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=un(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Ct(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=hn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=KS(t,16384);n.length>1&&this.sendString_(String(n.length));for(let r=0;r<n.length;r++)this.sendString_(n[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()}),Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(WM){this.log_("Exception thrown from WebSocket.send():",WM.message||WM.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}vE.responsesRequiredToBeHealthy=2,vE.healthyTimeout=3e4;class _E{static get ALL_TRANSPORTS(){return[gE,vE]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=vE&&vE.isAvailable();let n=t&&!vE.previouslyFailed();if(e.webSocketOnly&&(t||US("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[vE];else{const e=this.transports_=[];for(const t of _E.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);_E.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}_E.globalTransportInitialized_=!1;class wE{constructor(e,t,n,r,i,s,o,a,l,c){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=s,this.onReady_=o,this.onDisconnect_=a,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=LS("c:"+this.id+":"),this.transportManager_=new _E(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((()=>{this.conn_&&this.conn_.open(t,n)}),Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=XS((()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))}),Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=HS("t",e),n=HS("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=HS("t",e),n=HS("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=HS("t",e);if("d"in e){const n=e.d;if("h"===t){const e=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?MS("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):MS("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),nE!==n&&US("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),XS((()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())}),Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):XS((()=>{this.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ES.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class bE{put(e,t,n,r){}merge(e,t,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class TE{constructor(e){this.allowedEvents_=e,this.listeners_={},Ct(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(let e=0;e<i.length;e++)i[e].callback.apply(i[e].context,n)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const r=this.getInitialEvent(e);r&&t.apply(n,r)}off(e,t,n){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}validateEventType_(e){Ct(this.allowedEvents_.find((t=>t===e)),"Unknown event: "+e)}}class IE extends TE{static getInstance(){return new IE}constructor(){super(["online"]),this.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||Yt()||(window.addEventListener("online",(()=>{this.online_||(this.online_=!0,this.trigger("online",!0))}),!1),window.addEventListener("offline",(()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))}),!1))}getInitialEvent(e){return Ct("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class SE{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function EE(){return new SE("")}function kE(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function CE(e){return e.pieces_.length-e.pieceNum_}function NE(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new SE(e.pieces_,t)}function xE(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function AE(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function PE(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new SE(t,0)}function RE(e,t){const n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof SE)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new SE(n,0)}function DE(e){return e.pieceNum_>=e.pieces_.length}function OE(e,t){const n=kE(e),r=kE(t);if(null===n)return t;if(n===r)return OE(NE(e),NE(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function LE(e,t){const n=AE(e,0),r=AE(t,0);for(let i=0;i<n.length&&i<r.length;i++){const e=qS(n[i],r[i]);if(0!==e)return e}return n.length===r.length?0:n.length<r.length?-1:1}function ME(e,t){if(CE(e)!==CE(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function FE(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(CE(e)>CE(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class UE{constructor(e,t){this.errorPrefix_=t,this.parts_=AE(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=An(this.parts_[n]);jE(this)}}function jE(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+VE(e))}function VE(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class zE extends TE{static getInstance(){return new zE}constructor(){let e,t;super(["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(t="visibilitychange",e="hidden"):"undefined"!==typeof document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):"undefined"!==typeof document.msHidden?(t="msvisibilitychange",e="msHidden"):"undefined"!==typeof document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,(()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))}),!1)}getInitialEvent(e){return Ct("visible"===e,"Unknown event type: "+e),[this.visible_]}}const qE=1e3;class BE extends bE{constructor(e,t,n,r,i,s,o,a){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=s,this.appCheckTokenProvider_=o,this.authOverride_=a,this.id=BE.nextPersistentConnectionId_++,this.log_=LS("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=qE,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a&&!tn())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");zE.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&IE.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(hn(i)),Ct(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}get(e){this.initConnection_();const t=new zt,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:e=>{const n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}listen(e,t,n,r){this.initConnection_();const i=e._queryIdentifier,s=e._path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),Ct(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Ct(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");const o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(s).set(i,o),this.connected_&&this.sendListen_(o)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,(n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)}))}sendListen_(e){const t=e.query,n=t._path.toString(),r=t._queryIdentifier;this.log_("Listen on "+n+" for "+r);const i={p:n};e.tag&&(i.q=t._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest("q",i,(i=>{const s=i.d,o=i.s;BE.warnOnListenWarnings_(s,t);(this.listens.get(n)&&this.listens.get(n).get(r))===e&&(this.log_("listen response",i),"ok"!==o&&this.removeListen_(n,r),e.onComplete&&e.onComplete(o,s))}))}static warnOnListenWarnings_(e,t){if(e&&"object"===typeof e&&fn(e,"w")){const n=pn(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();US("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(e," at ")+"".concat(n," to your security rules for better performance."))}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(()=>{})),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||function(e){const t=dn(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(()=>{}))}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=function(e){const t=dn(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"===typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,(t=>{const n=t.s,r=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,r))}))}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)}))}unlisten(e,t){const n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Ct(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}sendUnlisten_(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);const i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,r){const i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(e=>{r&&setTimeout((()=>{r(e.s,e.d)}),Math.floor(0))}))}put(e,t,n,r){this.putInternal("p",e,t,n,r)}merge(e,t,n,r){this.putInternal("m",e,t,n,r)}putInternal(e,t,n,r,i){this.initConnection_();const s={p:t,d:n};void 0!==i&&(s.h=i),this.outstandingPuts_.push({action:e,request:s,onComplete:r}),this.outstandingPutCount_++;const o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,(n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),r&&r(n.s,n.d)}))}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,(e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}}))}}onDataMessage_(e){if("r"in e){this.log_("from server: "+hn(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):MS("Unrecognized action received from server: "+hn(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Ct(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((()=>{this.establishConnectionTimer_=null,this.establishConnection_()}),Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=qE,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=qE,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=qE),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();const e=Math.max(0,(new Date).getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+BE.nextConnectionId_++,i=this.lastSessionId;let s=!1,o=null;const a=function(){o?o.close():(s=!0,n())},l=function(e){Ct(o,"sendRequest call when we're not connected not allowed."),o.sendRequest(e)};this.realtime_={close:a,sendRequest:l};const c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[a,l]=await Promise.all([this.authTokenProvider_.getToken(c),this.appCheckTokenProvider_.getToken(c)]);s?OS("getToken() completed but was canceled"):(OS("getToken() completed. Creating connection."),this.authToken_=a&&a.accessToken,this.appCheckToken_=l&&l.token,o=new wE(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,n,(e=>{US(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")}),i))}catch(MS){this.log_("Failed to get token: "+MS),s||(this.repoInfo_.nodeAdmin&&US(MS),a())}}}interrupt(e){OS("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){OS("Resuming connection for reason: "+e),delete this.interruptReasons_[e],gn(this.interruptReasons_)&&(this.reconnectDelay_=qE,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map((e=>WS(e))).join("$"):"default";const r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,t){const n=new SE(e).toString();let r;if(this.listens.has(n)){const e=this.listens.get(n);r=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(e,t){OS("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){OS("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";tn()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+wS.replace(/\./g,"-")]=1,Yt()?e["framework.cordova"]=1:Zt()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=IE.getInstance().currentlyOnline();return gn(this.interruptReasons_)&&e}}BE.nextPersistentConnectionId_=0,BE.nextConnectionId_=0;class HE{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new HE(e,t)}}class WE{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new HE(VS,e),r=new HE(VS,t);return 0!==this.compare(n,r)}minPost(){return HE.MIN}}let KE;class GE extends WE{static get __EMPTY_NODE(){return KE}static set __EMPTY_NODE(e){KE=e}compare(e,t){return qS(e.name,t.name)}isDefinedOn(e){throw Nt("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return HE.MIN}maxPost(){return new HE(zS,KE)}makePost(e,t){return Ct("string"===typeof e,"KeyIndex indexValue must always be a string."),new HE(e,KE)}toString(){return".key"}}const QE=new GE;class YE{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,r&&(s*=-1),s<0)e=this.isReverse_?e.left:e.right;else{if(0===s){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class $E{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:$E.RED,this.left=null!=r?r:JE.EMPTY_NODE,this.right=null!=i?i:JE.EMPTY_NODE}copy(e,t,n,r,i){return new $E(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return JE.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,r;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return JE.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,$E.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,$E.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}$E.RED=!0,$E.BLACK=!1;class JE{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:JE.EMPTY_NODE;this.comparator_=e,this.root_=t}insert(e,t){return new JE(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,$E.BLACK,null,null))}remove(e){return new JE(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,$E.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,r=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new YE(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new YE(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new YE(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new YE(this.root_,null,this.comparator_,!0,e)}}function XE(e,t){return qS(e.name,t.name)}function ZE(e,t){return qS(e,t)}let ek;JE.EMPTY_NODE=new class{copy(e,t,n,r,i){return this}insert(e,t,n){return new $E(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const tk=function(e){return"number"===typeof e?"number:"+QS(e):"string:"+e},nk=function(e){if(e.isLeafNode()){const t=e.val();Ct("string"===typeof t||"number"===typeof t||"object"===typeof t&&fn(t,".sv"),"Priority must be a string or number.")}else Ct(e===ek||e.isEmpty(),"priority of unexpected type.");Ct(e===ek||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let rk,ik,sk;class ok{static set __childrenNodeConstructor(e){rk=e}static get __childrenNodeConstructor(){return rk}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ok.__childrenNodeConstructor.EMPTY_NODE;this.value_=e,this.priorityNode_=t,this.lazyHash_=null,Ct(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),nk(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new ok(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:ok.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return DE(e)?this:".priority"===kE(e)?this.priorityNode_:ok.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:ok.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const n=kE(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:(Ct(".priority"!==n||1===CE(e),".priority must be the last token in a path"),this.updateImmediateChild(n,ok.__childrenNodeConstructor.EMPTY_NODE.updateChild(NE(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+tk(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?QS(this.value_):this.value_,this.lazyHash_=xS(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===ok.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof ok.__childrenNodeConstructor?-1:(Ct(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,n=typeof this.value_,r=ok.VALUE_TYPE_ORDER.indexOf(t),i=ok.VALUE_TYPE_ORDER.indexOf(n);return Ct(r>=0,"Unknown leaf type: "+t),Ct(i>=0,"Unknown leaf type: "+n),r===i?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}ok.VALUE_TYPE_ORDER=["object","boolean","number","string"];const ak=new class extends WE{compare(e,t){const n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?qS(e.name,t.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return HE.MIN}maxPost(){return new HE(zS,new ok("[PRIORITY-POST]",sk))}makePost(e,t){const n=ik(e);return new HE(t,new ok("[PRIORITY-POST]",n))}toString(){return".priority"}},lk=Math.log(2);class ck{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/lk,10)),this.current_=this.count-1;const n=(r=this.count,parseInt(Array(r+1).join("1"),2));var r;this.bits_=e+1&n}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const uk=function(e,t,n,r){e.sort(t);const i=function(t,r){const s=r-t;let o,a;if(0===s)return null;if(1===s)return o=e[t],a=n?n(o):o,new $E(a,o.node,$E.BLACK,null,null);{const l=parseInt(s/2,10)+t,c=i(t,l),u=i(l+1,r);return o=e[l],a=n?n(o):o,new $E(a,o.node,$E.BLACK,c,u)}},s=function(t){let r=null,s=null,o=e.length;const a=function(t,r){const s=o-t,a=o;o-=t;const c=i(s+1,a),u=e[s],h=n?n(u):u;l(new $E(h,u.node,r,null,c))},l=function(e){r?(r.left=e,r=e):(s=e,r=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),r=Math.pow(2,t.count-(e+1));n?a(r,$E.BLACK):(a(r,$E.BLACK),a(r,$E.RED))}return s}(new ck(e.length));return new JE(r||t,s)};let hk;const dk={};class fk{static get Default(){return Ct(dk&&ak,"ChildrenNode.ts has not been loaded"),hk=hk||new fk({".priority":dk},{".priority":ak}),hk}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=pn(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof JE?t:null}hasIndex(e){return fn(this.indexSet_,e.toString())}addIndex(e,t){Ct(e!==QE,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let r=!1;const i=t.getIterator(HE.Wrap);let s,o=i.getNext();for(;o;)r=r||e.isDefinedOn(o.node),n.push(o),o=i.getNext();s=r?uk(n,e.getCompare()):dk;const a=e.toString(),l=Object.assign({},this.indexSet_);l[a]=e;const c=Object.assign({},this.indexes_);return c[a]=s,new fk(c,l)}addToIndexes(e,t){const n=mn(this.indexes_,((n,r)=>{const i=pn(this.indexSet_,r);if(Ct(i,"Missing index implementation for "+r),n===dk){if(i.isDefinedOn(e.node)){const n=[],r=t.getIterator(HE.Wrap);let s=r.getNext();for(;s;)s.name!==e.name&&n.push(s),s=r.getNext();return n.push(e),uk(n,i.getCompare())}return dk}{const r=t.get(e.name);let i=n;return r&&(i=i.remove(new HE(e.name,r))),i.insert(e,e.node)}}));return new fk(n,this.indexSet_)}removeFromIndexes(e,t){const n=mn(this.indexes_,(n=>{if(n===dk)return n;{const r=t.get(e.name);return r?n.remove(new HE(e.name,r)):n}}));return new fk(n,this.indexSet_)}}let pk;class gk{static get EMPTY_NODE(){return pk||(pk=new gk(new JE(ZE),null,fk.Default))}constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&nk(this.priorityNode_),this.children_.isEmpty()&&Ct(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||pk}updatePriority(e){return this.children_.isEmpty()?this:new gk(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?pk:t}}getChild(e){const t=kE(e);return null===t?this:this.getImmediateChild(t).getChild(NE(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if(Ct(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const n=new HE(e,t);let r,i;t.isEmpty()?(r=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(e,t),i=this.indexMap_.addToIndexes(n,this.children_));const s=r.isEmpty()?pk:this.priorityNode_;return new gk(r,s,i)}}updateChild(e,t){const n=kE(e);if(null===n)return t;{Ct(".priority"!==kE(e)||1===CE(e),".priority must be the last token in a path");const r=this.getImmediateChild(n).updateChild(NE(e),t);return this.updateImmediateChild(n,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,r=0,i=!0;if(this.forEachChild(ak,((s,o)=>{t[s]=o.val(e),n++,i&&gk.INTEGER_REGEXP_.test(s)?r=Math.max(r,Number(s)):i=!1})),!e&&i&&r<2*n){const e=[];for(const n in t)e[n]=t[n];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+tk(this.getPriority().val())+":"),this.forEachChild(ak,((t,n)=>{const r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":xS(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const r=this.resolveIndex_(n);if(r){const n=r.getPredecessorKey(new HE(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new HE(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new HE(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal((e=>t(e.name,e.node))):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(e=>e));{const n=this.children_.getIteratorFrom(e.name,HE.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)<0;)n.getNext(),r=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(e=>e));{const n=this.children_.getReverseIteratorFrom(e.name,HE.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)>0;)n.getNext(),r=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===mk?-1:0}withIndex(e){if(e===QE||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new gk(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===QE||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(ak),n=t.getIterator(ak);let r=e.getNext(),i=n.getNext();for(;r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1}return!1}}resolveIndex_(e){return e===QE?null:this.indexMap_.get(e.toString())}}gk.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const mk=new class extends gk{constructor(){super(new JE(ZE),gk.EMPTY_NODE,fk.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return gk.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(HE,{MIN:{value:new HE(VS,gk.EMPTY_NODE)},MAX:{value:new HE(zS,mk)}}),GE.__EMPTY_NODE=gk.EMPTY_NODE,ok.__childrenNodeConstructor=gk,ek=mk,function(e){sk=e}(mk);function yk(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return gk.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),Ct(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){return new ok(e,yk(t))}if(e instanceof Array){let n=gk.EMPTY_NODE;return GS(e,((t,r)=>{if(fn(e,t)&&"."!==t.substring(0,1)){const e=yk(r);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}})),n.updatePriority(yk(t))}{const n=[];let r=!1;if(GS(e,((e,t)=>{if("."!==e.substring(0,1)){const i=yk(t);i.isEmpty()||(r=r||!i.getPriority().isEmpty(),n.push(new HE(e,i)))}})),0===n.length)return gk.EMPTY_NODE;const i=uk(n,XE,(e=>e.name),ZE);if(r){const e=uk(n,ak.getCompare());return new gk(i,yk(t),new fk({".priority":e},{".priority":ak}))}return new gk(i,yk(t),fk.Default)}}!function(e){ik=e}(yk);class vk extends WE{constructor(e){super(),this.indexPath_=e,Ct(!DE(e)&&".priority"!==kE(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?qS(e.name,t.name):i}makePost(e,t){const n=yk(e),r=gk.EMPTY_NODE.updateChild(this.indexPath_,n);return new HE(t,r)}maxPost(){const e=gk.EMPTY_NODE.updateChild(this.indexPath_,mk);return new HE(zS,e)}toString(){return AE(this.indexPath_,0).join("/")}}const _k=new class extends WE{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?qS(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return HE.MIN}maxPost(){return HE.MAX}makePost(e,t){const n=yk(e);return new HE(t,n)}toString(){return".value"}};function wk(e){return{type:"value",snapshotNode:e}}function bk(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Tk(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Ik(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class Sk{constructor(e){this.index_=e}updateChild(e,t,n,r,i,s){Ct(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=s&&(n.isEmpty()?e.hasChild(t)?s.trackChildChange(Tk(t,o)):Ct(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?s.trackChildChange(bk(t,n)):s.trackChildChange(Ik(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}updateFullNode(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(ak,((e,r)=>{t.hasChild(e)||n.trackChildChange(Tk(e,r))})),t.isLeafNode()||t.forEachChild(ak,((t,r)=>{if(e.hasChild(t)){const i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(Ik(t,r,i))}else n.trackChildChange(bk(t,r))}))),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?gk.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Ek{constructor(e){this.indexedFilter_=new Sk(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Ek.getStartPost_(e),this.endPost_=Ek.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}updateChild(e,t,n,r,i,s){return this.matches(new HE(t,n))||(n=gk.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,s)}updateFullNode(e,t,n){t.isLeafNode()&&(t=gk.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(gk.EMPTY_NODE);const i=this;return t.forEachChild(ak,((e,t)=>{i.matches(new HE(e,t))||(r=r.updateImmediateChild(e,gk.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class kk{constructor(e){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const t=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?t<=0:t<0},this.withinEndPost=e=>{const t=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new Ek(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,n,r,i,s){return this.rangedFilter_.matches(new HE(t,n))||(n=gk.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,s):this.fullLimitUpdateChild_(e,t,n,i,s)}updateFullNode(e,t,n){let r;if(t.isLeafNode()||t.isEmpty())r=gk.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let e;r=gk.EMPTY_NODE.withIndex(this.index_),e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;e.hasNext()&&n<this.limit_;){const t=e.getNext();if(this.withinDirectionalStart(t)){if(!this.withinDirectionalEnd(t))break;r=r.updateImmediateChild(t.name,t.node),n++}}}else{let e;r=t.withIndex(this.index_),r=r.updatePriority(gk.EMPTY_NODE),e=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let n=0;for(;e.hasNext();){const t=e.getNext();n<this.limit_&&this.withinDirectionalStart(t)&&this.withinDirectionalEnd(t)?n++:r=r.updateImmediateChild(t.name,gk.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,r,i){let s;if(this.reverse_){const e=this.index_.getCompare();s=(t,n)=>e(n,t)}else s=this.index_.getCompare();const o=e;Ct(o.numChildren()===this.limit_,"");const a=new HE(t,n),l=this.reverse_?o.getFirstChild(this.index_):o.getLastChild(this.index_),c=this.rangedFilter_.matches(a);if(o.hasChild(t)){const e=o.getImmediateChild(t);let u=r.getChildAfterChild(this.index_,l,this.reverse_);for(;null!=u&&(u.name===t||o.hasChild(u.name));)u=r.getChildAfterChild(this.index_,u,this.reverse_);const h=null==u?1:s(u,a);if(c&&!n.isEmpty()&&h>=0)return null!=i&&i.trackChildChange(Ik(t,n,e)),o.updateImmediateChild(t,n);{null!=i&&i.trackChildChange(Tk(t,e));const n=o.updateImmediateChild(t,gk.EMPTY_NODE);return null!=u&&this.rangedFilter_.matches(u)?(null!=i&&i.trackChildChange(bk(u.name,u.node)),n.updateImmediateChild(u.name,u.node)):n}}return n.isEmpty()?e:c&&s(l,a)>=0?(null!=i&&(i.trackChildChange(Tk(l.name,l.node)),i.trackChildChange(bk(t,n))),o.updateImmediateChild(t,n).updateImmediateChild(l.name,gk.EMPTY_NODE)):e}}class Ck{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ak}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return Ct(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Ct(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:VS}hasEnd(){return this.endSet_}getIndexEndValue(){return Ct(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Ct(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:zS}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return Ct(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ak}copy(){const e=new Ck;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Nk(e,t,n){const r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function xk(e,t,n){const r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function Ak(e,t){const n=e.copy();return n.index_=t,n}function Pk(e){const t={};if(e.isDefault())return t;let n;if(e.index_===ak?n="$priority":e.index_===_k?n="$value":e.index_===QE?n="$key":(Ct(e.index_ instanceof vk,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=hn(n),e.startSet_){const n=e.startAfterSet_?"startAfter":"startAt";t[n]=hn(e.indexStartValue_),e.startNameSet_&&(t[n]+=","+hn(e.indexStartName_))}if(e.endSet_){const n=e.endBeforeSet_?"endBefore":"endAt";t[n]=hn(e.indexEndValue_),e.endNameSet_&&(t[n]+=","+hn(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function Rk(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==ak&&(t.i=e.index_.toString()),t}class Dk extends bE{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(Ct(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=LS("p:rest:"),this.listens_={}}listen(e,t,n,r){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const s=Dk.getListenId_(e,n),o={};this.listens_[s]=o;const a=Pk(e._queryParams);this.restRequest_(i+".json",a,((e,t)=>{let a=t;if(404===e&&(a=null,e=null),null===e&&this.onDataUpdate_(i,a,!1,n),pn(this.listens_,s)===o){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",r(t,null)}}))}unlisten(e,t){const n=Dk.getListenId_(e,t);delete this.listens_[n]}get(e){const t=Pk(e._queryParams),n=e._path.toString(),r=new zt;return this.restRequest_(n+".json",t,((e,t)=>{let i=t;404===e&&(i=null,e=null),null===e?(this.onDataUpdate_(n,i,!1,null),r.resolve(i)):r.reject(new Error(i))})),r.promise}refreshAuthToken(e){}restRequest_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((r=>{let[i,s]=r;i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+_n(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(n&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let e=null;if(a.status>=200&&a.status<300){try{e=un(a.responseText)}catch(WM){US("Failed to parse JSON response for "+o+": "+a.responseText)}n(null,e)}else 401!==a.status&&404!==a.status&&US("Got unsuccessful REST response for "+o+" Status: "+a.status),n(a.status);n=null}},a.open("GET",o,!0),a.send()}))}}class Ok{constructor(){this.rootNode_=gk.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function Lk(){return{value:null,children:new Map}}function Mk(e,t,n){if(DE(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const r=kE(t);e.children.has(r)||e.children.set(r,Lk());Mk(e.children.get(r),t=NE(t),n)}}function Fk(e,t){if(DE(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;{const n=e.value;return e.value=null,n.forEachChild(ak,((t,n)=>{Mk(e,new SE(t),n)})),Fk(e,t)}}if(e.children.size>0){const n=kE(t);if(t=NE(t),e.children.has(n)){Fk(e.children.get(n),t)&&e.children.delete(n)}return 0===e.children.size}return!0}function Uk(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach(((e,n)=>{t(n,e)}))}(e,((e,r)=>{Uk(r,new SE(t.toString()+"/"+e),n)}))}class jk{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&GS(this.last_,((e,n)=>{t[e]=t[e]-n})),this.last_=e,t}}class Vk{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new jk(e);const n=1e4+2e4*Math.random();XS(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;GS(e,((e,r)=>{r>0&&fn(this.statsToReport_,e)&&(t[e]=r,n=!0)})),n&&this.server_.reportStats(t),XS(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var zk;function qk(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(zk||(zk={}));class Bk{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=zk.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(DE(this.path)){if(null!=this.affectedTree.value)return Ct(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new SE(e));return new Bk(EE(),t,this.revert)}}return Ct(kE(this.path)===e,"operationForChild called for unrelated child."),new Bk(NE(this.path),this.affectedTree,this.revert)}}class Hk{constructor(e,t){this.source=e,this.path=t,this.type=zk.LISTEN_COMPLETE}operationForChild(e){return DE(this.path)?new Hk(this.source,EE()):new Hk(this.source,NE(this.path))}}class Wk{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=zk.OVERWRITE}operationForChild(e){return DE(this.path)?new Wk(this.source,EE(),this.snap.getImmediateChild(e)):new Wk(this.source,NE(this.path),this.snap)}}class Kk{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=zk.MERGE}operationForChild(e){if(DE(this.path)){const t=this.children.subtree(new SE(e));return t.isEmpty()?null:t.value?new Wk(this.source,EE(),t.value):new Kk(this.source,EE(),t)}return Ct(kE(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Kk(this.source,NE(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Gk{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(DE(e))return this.isFullyInitialized()&&!this.filtered_;const t=kE(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class Qk{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Yk(e,t,n,r,i,s){const o=r.filter((e=>e.type===n));o.sort(((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw Nt("Should only compare child_ events.");const r=new HE(t.childName,t.snapshotNode),i=new HE(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n))),o.forEach((n=>{const r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,s);i.forEach((i=>{i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function $k(e,t){return{eventCache:e,serverCache:t}}function Jk(e,t,n,r){return $k(new Gk(t,n,r),e.serverCache)}function Xk(e,t,n,r){return $k(e.eventCache,new Gk(t,n,r))}function Zk(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function eC(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let tC;class nC{static fromObject(e){let t=new nC(null);return GS(e,((e,n)=>{t=t.set(new SE(e),n)})),t}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(tC||(tC=new JE(BS)),tC);this.value=e,this.children=t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:EE(),value:this.value};if(DE(e))return null;{const n=kE(e),r=this.children.get(n);if(null!==r){const i=r.findRootMostMatchingPathAndValue(NE(e),t);if(null!=i){return{path:RE(new SE(n),i.path),value:i.value}}return null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,(()=>!0))}subtree(e){if(DE(e))return this;{const t=kE(e),n=this.children.get(t);return null!==n?n.subtree(NE(e)):new nC(null)}}set(e,t){if(DE(e))return new nC(t,this.children);{const n=kE(e),r=(this.children.get(n)||new nC(null)).set(NE(e),t),i=this.children.insert(n,r);return new nC(this.value,i)}}remove(e){if(DE(e))return this.children.isEmpty()?new nC(null):new nC(null,this.children);{const t=kE(e),n=this.children.get(t);if(n){const r=n.remove(NE(e));let i;return i=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&i.isEmpty()?new nC(null):new nC(this.value,i)}return this}}get(e){if(DE(e))return this.value;{const t=kE(e),n=this.children.get(t);return n?n.get(NE(e)):null}}setTree(e,t){if(DE(e))return t;{const n=kE(e),r=(this.children.get(n)||new nC(null)).setTree(NE(e),t);let i;return i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new nC(this.value,i)}}fold(e){return this.fold_(EE(),e)}fold_(e,t){const n={};return this.children.inorderTraversal(((r,i)=>{n[r]=i.fold_(RE(e,r),t)})),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,EE(),t)}findOnPath_(e,t,n){const r=!!this.value&&n(t,this.value);if(r)return r;if(DE(e))return null;{const r=kE(e),i=this.children.get(r);return i?i.findOnPath_(NE(e),RE(t,r),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,EE(),t)}foreachOnPath_(e,t,n){if(DE(e))return this;{this.value&&n(t,this.value);const r=kE(e),i=this.children.get(r);return i?i.foreachOnPath_(NE(e),RE(t,r),n):new nC(null)}}foreach(e){this.foreach_(EE(),e)}foreach_(e,t){this.children.inorderTraversal(((n,r)=>{r.foreach_(RE(e,n),t)})),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal(((t,n)=>{n.value&&e(t,n.value)}))}}class rC{constructor(e){this.writeTree_=e}static empty(){return new rC(new nC(null))}}function iC(e,t,n){if(DE(t))return new rC(new nC(n));{const r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){const i=r.path;let s=r.value;const o=OE(i,t);return s=s.updateChild(o,n),new rC(e.writeTree_.set(i,s))}{const r=new nC(n),i=e.writeTree_.setTree(t,r);return new rC(i)}}}function sC(e,t,n){let r=e;return GS(n,((e,n)=>{r=iC(r,RE(t,e),n)})),r}function oC(e,t){if(DE(t))return rC.empty();{const n=e.writeTree_.setTree(t,new nC(null));return new rC(n)}}function aC(e,t){return null!=lC(e,t)}function lC(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(OE(n.path,t)):null}function cC(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(ak,((e,n)=>{t.push(new HE(e,n))})):e.writeTree_.children.inorderTraversal(((e,n)=>{null!=n.value&&t.push(new HE(e,n.value))})),t}function uC(e,t){if(DE(t))return e;{const n=lC(e,t);return new rC(null!=n?new nC(n):e.writeTree_.subtree(t))}}function hC(e){return e.writeTree_.isEmpty()}function dC(e,t){return fC(EE(),e.writeTree_,t)}function fC(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal(((t,i)=>{".priority"===t?(Ct(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=fC(RE(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(RE(e,".priority"),r)),n}}function pC(e,t){return CC(t,e)}function gC(e,t){const n=e.allWrites.findIndex((e=>e.writeId===t));Ct(n>=0,"removeWrite called with nonexistent writeId.");const r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,s=!1,o=e.allWrites.length-1;for(;i&&o>=0;){const t=e.allWrites[o];t.visible&&(o>=n&&mC(t,r.path)?i=!1:FE(r.path,t.path)&&(s=!0)),o--}if(i){if(s)return function(e){e.visibleWrites=vC(e.allWrites,yC,EE()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;if(r.snap)e.visibleWrites=oC(e.visibleWrites,r.path);else{GS(r.children,(t=>{e.visibleWrites=oC(e.visibleWrites,RE(r.path,t))}))}return!0}return!1}function mC(e,t){if(e.snap)return FE(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&FE(RE(e.path,n),t))return!0;return!1}function yC(e){return e.visible}function vC(e,t,n){let r=rC.empty();for(let i=0;i<e.length;++i){const s=e[i];if(t(s)){const e=s.path;let t;if(s.snap)FE(n,e)?(t=OE(n,e),r=iC(r,t,s.snap)):FE(e,n)&&(t=OE(e,n),r=iC(r,EE(),s.snap.getChild(t)));else{if(!s.children)throw Nt("WriteRecord should have .snap or .children");if(FE(n,e))t=OE(n,e),r=sC(r,t,s.children);else if(FE(e,n))if(t=OE(e,n),DE(t))r=sC(r,EE(),s.children);else{const e=pn(s.children,kE(t));if(e){const n=e.getChild(NE(t));r=iC(r,EE(),n)}}}}}return r}function _C(e,t,n,r,i){if(r||i){const s=uC(e.visibleWrites,t);if(!i&&hC(s))return n;if(i||null!=n||aC(s,EE())){const s=function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(FE(e.path,t)||FE(t,e.path))};return dC(vC(e.allWrites,s,t),n||gk.EMPTY_NODE)}return null}{const r=lC(e.visibleWrites,t);if(null!=r)return r;{const r=uC(e.visibleWrites,t);if(hC(r))return n;if(null!=n||aC(r,EE())){return dC(r,n||gk.EMPTY_NODE)}return null}}}function wC(e,t,n,r){return _C(e.writeTree,e.treePath,t,n,r)}function bC(e,t){return function(e,t,n){let r=gk.EMPTY_NODE;const i=lC(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(ak,((e,t)=>{r=r.updateImmediateChild(e,t)})),r;if(n){const i=uC(e.visibleWrites,t);return n.forEachChild(ak,((e,t)=>{const n=dC(uC(i,new SE(e)),t);r=r.updateImmediateChild(e,n)})),cC(i).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}return cC(uC(e.visibleWrites,t)).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function TC(e,t,n,r){return function(e,t,n,r,i){Ct(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=RE(t,n);if(aC(e.visibleWrites,s))return null;{const t=uC(e.visibleWrites,s);return hC(t)?i.getChild(n):dC(t,i.getChild(n))}}(e.writeTree,e.treePath,t,n,r)}function IC(e,t){return function(e,t){return lC(e.visibleWrites,t)}(e.writeTree,RE(e.treePath,t))}function SC(e,t,n,r,i,s){return function(e,t,n,r,i,s,o){let a;const l=uC(e.visibleWrites,t),c=lC(l,EE());if(null!=c)a=c;else{if(null==n)return[];a=dC(l,n)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const e=[],t=o.getCompare(),n=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let l=n.getNext();for(;l&&e.length<i;)0!==t(l,r)&&e.push(l),l=n.getNext();return e}}(e.writeTree,e.treePath,t,n,r,i,s)}function EC(e,t,n){return function(e,t,n,r){const i=RE(t,n),s=lC(e.visibleWrites,i);if(null!=s)return s;if(r.isCompleteForChild(n))return dC(uC(e.visibleWrites,i),r.getNode().getImmediateChild(n));return null}(e.writeTree,e.treePath,t,n)}function kC(e,t){return CC(RE(e.treePath,t),e.writeTree)}function CC(e,t){return{treePath:e,writeTree:t}}class NC{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;Ct("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),Ct(".priority"!==n,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(n);if(r){const i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,Ik(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,Tk(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,bk(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw Nt("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,Ik(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}const xC=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class AC{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new Gk(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return EC(this.writes_,e,t)}}getChildAfterChild(e,t,n){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:eC(this.viewCache_),i=SC(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}function PC(e,t,n,r,i){const s=new NC;let o,a;if(n.type===zk.OVERWRITE){const l=n;l.source.fromUser?o=OC(e,t,l.path,l.snap,r,i,s):(Ct(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered()&&!DE(l.path),o=DC(e,t,l.path,l.snap,r,i,a,s))}else if(n.type===zk.MERGE){const l=n;l.source.fromUser?o=function(e,t,n,r,i,s,o){let a=t;return r.foreach(((r,l)=>{const c=RE(n,r);LC(t,kE(c))&&(a=OC(e,a,c,l,i,s,o))})),r.foreach(((r,l)=>{const c=RE(n,r);LC(t,kE(c))||(a=OC(e,a,c,l,i,s,o))})),a}(e,t,l.path,l.children,r,i,s):(Ct(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered(),o=FC(e,t,l.path,l.children,r,i,a,s))}else if(n.type===zk.ACK_USER_WRITE){const a=n;o=a.revert?function(e,t,n,r,i,s){let o;if(null!=IC(r,n))return t;{const a=new AC(r,t,i),l=t.eventCache.getNode();let c;if(DE(n)||".priority"===kE(n)){let n;if(t.serverCache.isFullyInitialized())n=wC(r,eC(t));else{const e=t.serverCache.getNode();Ct(e instanceof gk,"serverChildren would be complete if leaf node"),n=bC(r,e)}c=e.filter.updateFullNode(l,n,s)}else{const i=kE(n);let u=EC(r,i,t.serverCache);null==u&&t.serverCache.isCompleteForChild(i)&&(u=l.getImmediateChild(i)),c=null!=u?e.filter.updateChild(l,i,u,NE(n),a,s):t.eventCache.getNode().hasChild(i)?e.filter.updateChild(l,i,gk.EMPTY_NODE,NE(n),a,s):l,c.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=wC(r,eC(t)),o.isLeafNode()&&(c=e.filter.updateFullNode(c,o,s)))}return o=t.serverCache.isFullyInitialized()||null!=IC(r,EE()),Jk(t,c,o,e.filter.filtersNodes())}}(e,t,a.path,r,i,s):function(e,t,n,r,i,s,o){if(null!=IC(i,n))return t;const a=t.serverCache.isFiltered(),l=t.serverCache;if(null!=r.value){if(DE(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return DC(e,t,n,l.getNode().getChild(n),i,s,a,o);if(DE(n)){let r=new nC(null);return l.getNode().forEachChild(QE,((e,t)=>{r=r.set(new SE(e),t)})),FC(e,t,n,r,i,s,a,o)}return t}{let c=new nC(null);return r.foreach(((e,t)=>{const r=RE(n,e);l.isCompleteForPath(r)&&(c=c.set(e,l.getNode().getChild(r)))})),FC(e,t,n,c,i,s,a,o)}}(e,t,a.path,a.affectedTree,r,i,s)}else{if(n.type!==zk.LISTEN_COMPLETE)throw Nt("Unknown operation type: "+n.type);o=function(e,t,n,r,i){const s=t.serverCache,o=Xk(t,s.getNode(),s.isFullyInitialized()||DE(n),s.isFiltered());return RC(e,o,n,r,xC,i)}(e,t,n.path,r,s)}const l=s.getChanges();return function(e,t,n){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Zk(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(wk(Zk(t)))}}(t,o,l),{viewCache:o,changes:l}}function RC(e,t,n,r,i,s){const o=t.eventCache;if(null!=IC(r,n))return t;{let a,l;if(DE(n))if(Ct(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=eC(t),i=bC(r,n instanceof gk?n:gk.EMPTY_NODE);a=e.filter.updateFullNode(t.eventCache.getNode(),i,s)}else{const n=wC(r,eC(t));a=e.filter.updateFullNode(t.eventCache.getNode(),n,s)}else{const c=kE(n);if(".priority"===c){Ct(1===CE(n),"Can't have a priority with additional path components");const i=o.getNode();l=t.serverCache.getNode();const s=TC(r,n,i,l);a=null!=s?e.filter.updatePriority(i,s):o.getNode()}else{const u=NE(n);let h;if(o.isCompleteForChild(c)){l=t.serverCache.getNode();const e=TC(r,n,o.getNode(),l);h=null!=e?o.getNode().getImmediateChild(c).updateChild(u,e):o.getNode().getImmediateChild(c)}else h=EC(r,c,t.serverCache);a=null!=h?e.filter.updateChild(o.getNode(),c,h,u,i,s):o.getNode()}}return Jk(t,a,o.isFullyInitialized()||DE(n),e.filter.filtersNodes())}}function DC(e,t,n,r,i,s,o,a){const l=t.serverCache;let c;const u=o?e.filter:e.filter.getIndexedFilter();if(DE(n))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const e=l.getNode().updateChild(n,r);c=u.updateFullNode(l.getNode(),e,null)}else{const e=kE(n);if(!l.isCompleteForPath(n)&&CE(n)>1)return t;const i=NE(n),s=l.getNode().getImmediateChild(e).updateChild(i,r);c=".priority"===e?u.updatePriority(l.getNode(),s):u.updateChild(l.getNode(),e,s,i,xC,null)}const h=Xk(t,c,l.isFullyInitialized()||DE(n),u.filtersNodes());return RC(e,h,n,i,new AC(i,h,s),a)}function OC(e,t,n,r,i,s,o){const a=t.eventCache;let l,c;const u=new AC(i,t,s);if(DE(n))c=e.filter.updateFullNode(t.eventCache.getNode(),r,o),l=Jk(t,c,!0,e.filter.filtersNodes());else{const i=kE(n);if(".priority"===i)c=e.filter.updatePriority(t.eventCache.getNode(),r),l=Jk(t,c,a.isFullyInitialized(),a.isFiltered());else{const s=NE(n),c=a.getNode().getImmediateChild(i);let h;if(DE(s))h=r;else{const e=u.getCompleteChild(i);h=null!=e?".priority"===xE(s)&&e.getChild(PE(s)).isEmpty()?e:e.updateChild(s,r):gk.EMPTY_NODE}if(c.equals(h))l=t;else{l=Jk(t,e.filter.updateChild(a.getNode(),i,h,s,u,o),a.isFullyInitialized(),e.filter.filtersNodes())}}}return l}function LC(e,t){return e.eventCache.isCompleteForChild(t)}function MC(e,t,n){return n.foreach(((e,n)=>{t=t.updateChild(e,n)})),t}function FC(e,t,n,r,i,s,o,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l,c=t;l=DE(n)?r:new nC(null).setTree(n,r);const u=t.serverCache.getNode();return l.children.inorderTraversal(((n,r)=>{if(u.hasChild(n)){const l=MC(0,t.serverCache.getNode().getImmediateChild(n),r);c=DC(e,c,new SE(n),l,i,s,o,a)}})),l.children.inorderTraversal(((n,r)=>{const l=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!u.hasChild(n)&&!l){const l=MC(0,t.serverCache.getNode().getImmediateChild(n),r);c=DC(e,c,new SE(n),l,i,s,o,a)}})),c}class UC{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,r=new Sk(n.getIndex()),i=(s=n).loadsAllData()?new Sk(s.getIndex()):s.hasLimit()?new kk(s):new Ek(s);var s;this.processor_=function(e){return{filter:e}}(i);const o=t.serverCache,a=t.eventCache,l=r.updateFullNode(gk.EMPTY_NODE,o.getNode(),null),c=i.updateFullNode(gk.EMPTY_NODE,a.getNode(),null),u=new Gk(l,o.isFullyInitialized(),r.filtersNodes()),h=new Gk(c,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=$k(h,u),this.eventGenerator_=new Qk(this.query_)}get query(){return this.query_}}function jC(e,t){const n=eC(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!DE(t)&&!n.getImmediateChild(kE(t)).isEmpty())?n.getChild(t):null}function VC(e){return 0===e.eventRegistrations_.length}function zC(e,t,n){const r=[];if(n){Ct(null==t,"A cancel should cancel all event registrations.");const i=e.query._path;e.eventRegistrations_.forEach((e=>{const t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){let n=[];for(let r=0;r<e.eventRegistrations_.length;++r){const i=e.eventRegistrations_[r];if(i.matches(t)){if(t.hasAnyCallback()){n=n.concat(e.eventRegistrations_.slice(r+1));break}}else n.push(i)}e.eventRegistrations_=n}else e.eventRegistrations_=[];return r}function qC(e,t,n,r){t.type===zk.MERGE&&null!==t.source.queryId&&(Ct(eC(e.viewCache_),"We should always have a full cache before handling merges"),Ct(Zk(e.viewCache_),"Missing event cache, even though we have a server cache"));const i=e.viewCache_,s=PC(e.processor_,i,t,n,r);var o,a;return o=e.processor_,a=s.viewCache,Ct(a.eventCache.getNode().isIndexed(o.filter.getIndex()),"Event snap not indexed"),Ct(a.serverCache.getNode().isIndexed(o.filter.getIndex()),"Server snap not indexed"),Ct(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,BC(e,s.changes,s.viewCache.eventCache.getNode(),null)}function BC(e,t,n,r){const i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){const i=[],s=[];return t.forEach((t=>{var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&s.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),Yk(e,i,"child_removed",t,r,n),Yk(e,i,"child_added",t,r,n),Yk(e,i,"child_moved",s,r,n),Yk(e,i,"child_changed",t,r,n),Yk(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}let HC,WC;class KC{constructor(){this.views=new Map}}function GC(e,t,n,r){const i=t.source.queryId;if(null!==i){const s=e.views.get(i);return Ct(null!=s,"SyncTree gave us an op for an invalid query."),qC(s,t,n,r)}{let i=[];for(const s of e.views.values())i=i.concat(qC(s,t,n,r));return i}}function QC(e,t,n,r,i){const s=t._queryIdentifier,o=e.views.get(s);if(!o){let e=wC(n,i?r:null),s=!1;e?s=!0:r instanceof gk?(e=bC(n,r),s=!1):(e=gk.EMPTY_NODE,s=!1);const o=$k(new Gk(e,s,!1),new Gk(r,i,!1));return new UC(t,o)}return o}function YC(e,t,n,r,i,s){const o=QC(e,t,r,i,s);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){const n=e.viewCache_.eventCache,r=[];n.getNode().isLeafNode()||n.getNode().forEachChild(ak,((e,t)=>{r.push(bk(e,t))}));return n.isFullyInitialized()&&r.push(wk(n.getNode())),BC(e,r,n.getNode(),t)}(o,n)}function $C(e,t,n,r){const i=t._queryIdentifier,s=[];let o=[];const a=tN(e);if("default"===i)for(const[l,c]of e.views.entries())o=o.concat(zC(c,n,r)),VC(c)&&(e.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const t=e.views.get(i);t&&(o=o.concat(zC(t,n,r)),VC(t)&&(e.views.delete(i),t.query._queryParams.loadsAllData()||s.push(t.query)))}return a&&!tN(e)&&s.push(new(Ct(HC,"Reference.ts has not been loaded"),HC)(t._repo,t._path)),{removed:s,events:o}}function JC(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function XC(e,t){let n=null;for(const r of e.views.values())n=n||jC(r,t);return n}function ZC(e,t){if(t._queryParams.loadsAllData())return nN(e);{const n=t._queryIdentifier;return e.views.get(n)}}function eN(e,t){return null!=ZC(e,t)}function tN(e){return null!=nN(e)}function nN(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let rN=1;class iN{constructor(e){this.listenProvider_=e,this.syncPointTree_=new nC(null),this.pendingWriteTree_={visibleWrites:rC.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function sN(e,t,n,r,i){return function(e,t,n,r,i){Ct(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=iC(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?pN(e,new Wk({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function oN(e,t,n,r){!function(e,t,n,r){Ct(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=sC(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);const i=nC.fromObject(n);return pN(e,new Kk({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function aN(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=function(e,t){for(let n=0;n<e.allWrites.length;n++){const r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(gC(e.pendingWriteTree_,t)){let t=new nC(null);return null!=r.snap?t=t.set(EE(),!0):GS(r.children,(e=>{t=t.set(new SE(e),!0)})),pN(e,new Bk(r.path,t,n))}return[]}function lN(e,t,n){return pN(e,new Wk({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function cN(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=t._path,o=e.syncPointTree_.get(s);let a=[];if(o&&("default"===t._queryIdentifier||eN(o,t))){const l=$C(o,t,n,r);0===o.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(s));const c=l.removed;if(a=l.events,!i){const n=-1!==c.findIndex((e=>e._queryParams.loadsAllData())),i=e.syncPointTree_.findOnPath(s,((e,t)=>tN(t)));if(n&&!i){const t=e.syncPointTree_.subtree(s);if(!t.isEmpty()){const n=function(e){return e.fold(((e,t,n)=>{if(t&&tN(t)){return[nN(t)]}{let e=[];return t&&(e=JC(t)),GS(n,((t,n)=>{e=e.concat(n)})),e}}))}(t);for(let t=0;t<n.length;++t){const r=n[t],i=r.query,s=yN(e,r);e.listenProvider_.startListening(IN(i),vN(e,i),s.hashFn,s.onComplete)}}}if(!i&&c.length>0&&!r)if(n){const n=null;e.listenProvider_.stopListening(IN(t),n)}else c.forEach((t=>{const n=e.queryToTagMap.get(_N(t));e.listenProvider_.stopListening(IN(t),n)}))}!function(e,t){for(let n=0;n<t.length;++n){const r=t[n];if(!r._queryParams.loadsAllData()){const t=_N(r),n=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(n)}}}(e,c)}return a}function uN(e,t,n,r){const i=wN(e,r);if(null!=i){const r=bN(i),s=r.path,o=r.queryId,a=OE(s,t);return TN(e,s,new Wk(qk(o),a,n))}return[]}function hN(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=t._path;let s=null,o=!1;e.syncPointTree_.foreachOnPath(i,((e,t)=>{const n=OE(e,i);s=s||XC(t,n),o=o||tN(t)}));let a,l=e.syncPointTree_.get(i);if(l?(o=o||tN(l),s=s||XC(l,EE())):(l=new KC,e.syncPointTree_=e.syncPointTree_.set(i,l)),null!=s)a=!0;else{a=!1,s=gk.EMPTY_NODE;e.syncPointTree_.subtree(i).foreachChild(((e,t)=>{const n=XC(t,EE());n&&(s=s.updateImmediateChild(e,n))}))}const c=eN(l,t);if(!c&&!t._queryParams.loadsAllData()){const n=_N(t);Ct(!e.queryToTagMap.has(n),"View does not exist, but we have a tag");const r=rN++;e.queryToTagMap.set(n,r),e.tagToQueryMap.set(r,n)}let u=YC(l,t,n,pC(e.pendingWriteTree_,i),s,a);if(!c&&!o&&!r){const n=ZC(l,t);u=u.concat(function(e,t,n){const r=t._path,i=vN(e,t),s=yN(e,n),o=e.listenProvider_.startListening(IN(t),i,s.hashFn,s.onComplete),a=e.syncPointTree_.subtree(r);if(i)Ct(!tN(a.value),"If we're adding a query, it shouldn't be shadowed");else{const t=a.fold(((e,t,n)=>{if(!DE(e)&&t&&tN(t))return[nN(t).query];{let e=[];return t&&(e=e.concat(JC(t).map((e=>e.query)))),GS(n,((t,n)=>{e=e.concat(n)})),e}}));for(let n=0;n<t.length;++n){const r=t[n];e.listenProvider_.stopListening(IN(r),vN(e,r))}}return o}(e,t,n))}return u}function dN(e,t,n){const r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,((e,n)=>{const r=XC(n,OE(e,t));if(r)return r}));return _C(r,t,i,n,!0)}function fN(e,t){const n=t._path;let r=null;e.syncPointTree_.foreachOnPath(n,((e,t)=>{const i=OE(e,n);r=r||XC(t,i)}));let i=e.syncPointTree_.get(n);i?r=r||XC(i,EE()):(i=new KC,e.syncPointTree_=e.syncPointTree_.set(n,i));const s=null!=r,o=s?new Gk(r,!0,!1):null;return function(e){return Zk(e.viewCache_)}(QC(i,t,pC(e.pendingWriteTree_,t._path),s?o.getNode():gk.EMPTY_NODE,s))}function pN(e,t){return gN(t,e.syncPointTree_,null,pC(e.pendingWriteTree_,EE()))}function gN(e,t,n,r){if(DE(e.path))return mN(e,t,n,r);{const i=t.get(EE());null==n&&null!=i&&(n=XC(i,EE()));let s=[];const o=kE(e.path),a=e.operationForChild(o),l=t.children.get(o);if(l&&a){const e=n?n.getImmediateChild(o):null,t=kC(r,o);s=s.concat(gN(a,l,e,t))}return i&&(s=s.concat(GC(i,e,r,n))),s}}function mN(e,t,n,r){const i=t.get(EE());null==n&&null!=i&&(n=XC(i,EE()));let s=[];return t.children.inorderTraversal(((t,i)=>{const o=n?n.getImmediateChild(t):null,a=kC(r,t),l=e.operationForChild(t);l&&(s=s.concat(mN(l,i,o,a)))})),i&&(s=s.concat(GC(i,e,r,n))),s}function yN(e,t){const n=t.query,r=vN(e,n);return{hashFn:()=>{const e=function(e){return e.viewCache_.serverCache.getNode()}(t)||gk.EMPTY_NODE;return e.hash()},onComplete:t=>{if("ok"===t)return r?function(e,t,n){const r=wN(e,n);if(r){const n=bN(r),i=n.path,s=n.queryId,o=OE(i,t);return TN(e,i,new Hk(qk(s),o))}return[]}(e,n._path,r):function(e,t){return pN(e,new Hk({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);{const r=function(e,t){let n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");const r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return cN(e,n,null,r)}}}}function vN(e,t){const n=_N(t);return e.queryToTagMap.get(n)}function _N(e){return e._path.toString()+"$"+e._queryIdentifier}function wN(e,t){return e.tagToQueryMap.get(t)}function bN(e){const t=e.indexOf("$");return Ct(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new SE(e.substr(0,t))}}function TN(e,t,n){const r=e.syncPointTree_.get(t);Ct(r,"Missing sync point for query tag that we're tracking");return GC(r,n,pC(e.pendingWriteTree_,t),null)}function IN(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(Ct(WC,"Reference.ts has not been loaded"),WC)(e._repo,e._path):e}class SN{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new SN(t)}node(){return this.node_}}class EN{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=RE(this.path_,e);return new EN(this.syncTree_,t)}node(){return dN(this.syncTree_,this.path_)}}const kN=function(e,t,n){return e&&"object"===typeof e?(Ct(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?CN(e[".sv"],t,n):"object"===typeof e[".sv"]?NN(e[".sv"],t):void Ct(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},CN=function(e,t,n){if("timestamp"===e)return n.timestamp;Ct(!1,"Unexpected server value: "+e)},NN=function(e,t,n){e.hasOwnProperty("increment")||Ct(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const r=e.increment;"number"!==typeof r&&Ct(!1,"Unexpected increment value: "+r);const i=t.node();if(Ct(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const s=i.getValue();return"number"!==typeof s?r:s+r},xN=function(e,t,n,r){return PN(t,new EN(n,e),r)},AN=function(e,t,n){return PN(e,new SN(t),n)};function PN(e,t,n){const r=e.getPriority().val(),i=kN(r,t.getImmediateChild(".priority"),n);let s;if(e.isLeafNode()){const r=e,s=kN(r.getValue(),t,n);return s!==r.getValue()||i!==r.getPriority().val()?new ok(s,yk(i)):e}{const r=e;return s=r,i!==r.getPriority().val()&&(s=s.updatePriority(new ok(i))),r.forEachChild(ak,((e,r)=>{const i=PN(r,t.getImmediateChild(e),n);i!==r&&(s=s.updateImmediateChild(e,i))})),s}}class RN{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};this.name=e,this.parent=t,this.node=n}}function DN(e,t){let n=t instanceof SE?t:new SE(t),r=e,i=kE(n);for(;null!==i;){const e=pn(r.node.children,i)||{children:{},childCount:0};r=new RN(i,r,e),n=NE(n),i=kE(n)}return r}function ON(e){return e.node.value}function LN(e,t){e.node.value=t,VN(e)}function MN(e){return e.node.childCount>0}function FN(e,t){GS(e.node.children,((n,r)=>{t(new RN(n,e,r))}))}function UN(e,t,n,r){n&&!r&&t(e),FN(e,(e=>{UN(e,t,!0,r)})),n&&r&&t(e)}function jN(e){return new SE(null===e.parent?e.name:jN(e.parent)+"/"+e.name)}function VN(e){null!==e.parent&&function(e,t,n){const r=function(e){return void 0===ON(e)&&!MN(e)}(n),i=fn(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,VN(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,VN(e))}(e.parent,e.name,e)}const zN=/[\[\].#$\/\u0000-\u001F\u007F]/,qN=/[\[\].#$\u0000-\u001F\u007F]/,BN=10485760,HN=function(e){return"string"===typeof e&&0!==e.length&&!zN.test(e)},WN=function(e){return"string"===typeof e&&0!==e.length&&!qN.test(e)},KN=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!jS(e)||e&&"object"===typeof e&&fn(e,".sv")},GN=function(e,t,n,r){r&&void 0===t||QN(Cn(e,"value"),t,n)},QN=function(e,t,n){const r=n instanceof SE?new UE(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+VE(r));if("function"===typeof t)throw new Error(e+"contains a function "+VE(r)+" with contents = "+t.toString());if(jS(t))throw new Error(e+"contains "+t.toString()+" "+VE(r));if("string"===typeof t&&t.length>BN/3&&An(t)>BN)throw new Error(e+"contains a string greater than "+BN+" utf8 bytes "+VE(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"===typeof t){let n=!1,i=!1;if(GS(t,((t,s)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(i=!0,!HN(t)))throw new Error(e+" contains an invalid key ("+t+") "+VE(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=An(t),jE(e)}(r,t),QN(e,s,r),function(e){const t=e.parts_.pop();e.byteLength_-=An(t),e.parts_.length>0&&(e.byteLength_-=1)}(r)})),n&&i)throw new Error(e+' contains ".value" child '+VE(r)+" in addition to actual children.")}},YN=function(e,t,n,r){if(r&&void 0===t)return;const i=Cn(e,"values");if(!t||"object"!==typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");const s=[];GS(t,((e,t)=>{const r=new SE(e);if(QN(i,t,RE(n,r)),".priority"===xE(r)&&!KN(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(r)})),function(e,t){let n,r;for(n=0;n<t.length;n++){r=t[n];const i=AE(r);for(let t=0;t<i.length;t++)if(".priority"===i[t]&&t===i.length-1);else if(!HN(i[t]))throw new Error(e+"contains an invalid key ("+i[t]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(LE);let i=null;for(n=0;n<t.length;n++){if(r=t[n],null!==i&&FE(i,r))throw new Error(e+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,s)},$N=function(e,t,n){if(!n||void 0!==t){if(jS(t))throw new Error(Cn(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!KN(t))throw new Error(Cn(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},JN=function(e,t,n,r){if((!r||void 0!==n)&&!HN(n))throw new Error(Cn(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},XN=function(e,t,n,r){if((!r||void 0!==n)&&!WN(n))throw new Error(Cn(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},ZN=function(e,t){if(".info"===kE(t))throw new Error(e+" failed = Can't modify data under /.info/")},ex=function(e,t){const n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!HN(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),WN(e)}(n))throw new Error(Cn(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class tx{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function nx(e,t){let n=null;for(let r=0;r<t.length;r++){const i=t[r],s=i.getPath();null===n||ME(s,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(i)}n&&e.eventLists_.push(n)}function rx(e,t,n){nx(e,n),sx(e,(e=>ME(e,t)))}function ix(e,t,n){nx(e,n),sx(e,(e=>FE(e,t)||FE(t,e)))}function sx(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){const i=e.eventLists_[r];if(i){t(i.path)?(ox(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function ox(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const r=n.getEventRunner();PS&&OS("event: "+n.toString()),JS(r)}}}const ax="repo_interrupt";class lx{constructor(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new tx,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Lk(),this.transactionQueueTree_=new RN,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function cx(e,t,n){if(e.stats_=dE(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new Dk(e.repoInfo_,((t,n,r,i)=>{dx(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((()=>fx(e,!0)),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{hn(n)}catch(WM){throw new Error("Invalid authOverride provided: "+WM)}}e.persistentConnection_=new BE(e.repoInfo_,t,((t,n,r,i)=>{dx(e,t,n,r,i)}),(t=>{fx(e,t)}),(t=>{!function(e,t){GS(t,((t,n)=>{px(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((t=>{e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((t=>{e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){const n=e.toString();return hE[n]||(hE[n]=t()),hE[n]}(e.repoInfo_,(()=>new Vk(e.stats_,e.server_))),e.infoData_=new Ok,e.infoSyncTree_=new iN({startListening:(t,n,r,i)=>{let s=[];const o=e.infoData_.getNode(t._path);return o.isEmpty()||(s=lN(e.infoSyncTree_,t._path,o),setTimeout((()=>{i("ok")}),0)),s},stopListening:()=>{}}),px(e,"connected",!1),e.serverSyncTree_=new iN({startListening:(t,n,r,i)=>(e.server_.listen(t,r,n,((n,r)=>{const s=i(n,r);ix(e.eventQueue_,t._path,s)})),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function ux(e){const t=e.infoData_.getNode(new SE(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function hx(e){return(t=(t={timestamp:ux(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function dx(e,t,n,r,i){e.dataUpdateCount++;const s=new SE(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let o=[];if(i)if(r){const t=mn(n,(e=>yk(e)));o=function(e,t,n,r){const i=wN(e,r);if(i){const r=bN(i),s=r.path,o=r.queryId,a=OE(s,t),l=nC.fromObject(n);return TN(e,s,new Kk(qk(o),a,l))}return[]}(e.serverSyncTree_,s,t,i)}else{const t=yk(n);o=uN(e.serverSyncTree_,s,t,i)}else if(r){const t=mn(n,(e=>yk(e)));o=function(e,t,n){const r=nC.fromObject(n);return pN(e,new Kk({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,s,t)}else{const t=yk(n);o=lN(e.serverSyncTree_,s,t)}let a=s;o.length>0&&(a=Ex(e,s)),ix(e.eventQueue_,a,o)}function fx(e,t){px(e,"connected",t),!1===t&&function(e){bx(e,"onDisconnectEvents");const t=hx(e),n=Lk();Uk(e.onDisconnect_,EE(),((r,i)=>{const s=xN(r,i,e.serverSyncTree_,t);Mk(n,r,s)}));let r=[];Uk(n,EE(),((t,n)=>{r=r.concat(lN(e.serverSyncTree_,t,n));const i=Ax(e,t);Ex(e,i)})),e.onDisconnect_=Lk(),ix(e.eventQueue_,EE(),r)}(e)}function px(e,t,n){const r=new SE("/.info/"+t),i=yk(n);e.infoData_.updateSnapshot(r,i);const s=lN(e.infoSyncTree_,r,i);ix(e.eventQueue_,r,s)}function gx(e){return e.nextWriteId_++}function mx(e,t,n,r,i){bx(e,"set",{path:t.toString(),value:n,priority:r});const s=hx(e),o=yk(n,r),a=dN(e.serverSyncTree_,t),l=AN(o,a,s),c=gx(e),u=sN(e.serverSyncTree_,t,l,c,!0);nx(e.eventQueue_,u),e.server_.put(t.toString(),o.val(!0),((n,r)=>{const s="ok"===n;s||US("set at "+t+" failed: "+n);const o=aN(e.serverSyncTree_,c,!s);ix(e.eventQueue_,t,o),Tx(e,i,n,r)}));const h=Ax(e,t);Ex(e,h),ix(e.eventQueue_,h,[])}function yx(e,t,n){e.server_.onDisconnectCancel(t.toString(),((r,i)=>{"ok"===r&&Fk(e.onDisconnect_,t),Tx(e,n,r,i)}))}function vx(e,t,n,r){const i=yk(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),((n,s)=>{"ok"===n&&Mk(e.onDisconnect_,t,i),Tx(e,r,n,s)}))}function _x(e,t,n){let r;r=".info"===kE(t._path)?cN(e.infoSyncTree_,t,n):cN(e.serverSyncTree_,t,n),rx(e.eventQueue_,t._path,r)}function wx(e){e.persistentConnection_&&e.persistentConnection_.interrupt(ax)}function bx(e){let t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];OS(t,...r)}function Tx(e,t,n,r){t&&JS((()=>{if("ok"===n)t(null);else{const e=(n||"error").toUpperCase();let i=e;r&&(i+=": "+r);const s=new Error(i);s.code=e,t(s)}}))}function Ix(e,t,n){return dN(e.serverSyncTree_,t,n)||gk.EMPTY_NODE}function Sx(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||xx(e,t),ON(t)){const n=Cx(e,t);Ct(n.length>0,"Sending zero length transaction queue");n.every((e=>0===e.status))&&function(e,t,n){const r=n.map((e=>e.currentWriteId)),i=Ix(e,t,r);let s=i;const o=i.hash();for(let c=0;c<n.length;c++){const e=n[c];Ct(0===e.status,"tryToSendTransactionQueue_: items in queue should all be run."),e.status=1,e.retryCount++;const r=OE(t,e.path);s=s.updateChild(r,e.currentOutputSnapshotRaw)}const a=s.val(!0),l=t;e.server_.put(l.toString(),a,(r=>{bx(e,"transaction put response",{path:l.toString(),status:r});let i=[];if("ok"===r){const r=[];for(let t=0;t<n.length;t++)n[t].status=2,i=i.concat(aN(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&r.push((()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved))),n[t].unwatcher();xx(e,DN(e.transactionQueueTree_,t)),Sx(e,e.transactionQueueTree_),ix(e.eventQueue_,t,i);for(let e=0;e<r.length;e++)JS(r[e])}else{if("datastale"===r)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{US("transaction at "+l.toString()+" failed: "+r);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=r}Ex(e,t)}}),o)}(e,jN(t),n)}else MN(t)&&FN(t,(t=>{Sx(e,t)}))}function Ex(e,t){const n=kx(e,t),r=jN(n);return function(e,t,n){if(0===t.length)return;const r=[];let i=[];const s=t.filter((e=>0===e.status)),o=s.map((e=>e.currentWriteId));for(let l=0;l<t.length;l++){const s=t[l],c=OE(n,s.path);let u,h=!1;if(Ct(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===s.status)h=!0,u=s.abortReason,i=i.concat(aN(e.serverSyncTree_,s.currentWriteId,!0));else if(0===s.status)if(s.retryCount>=25)h=!0,u="maxretry",i=i.concat(aN(e.serverSyncTree_,s.currentWriteId,!0));else{const n=Ix(e,s.path,o);s.currentInputSnapshot=n;const r=t[l].update(n.val());if(void 0!==r){QN("transaction failed: Data returned ",r,s.path);let t=yk(r);"object"===typeof r&&null!=r&&fn(r,".priority")||(t=t.updatePriority(n.getPriority()));const a=s.currentWriteId,l=hx(e),c=AN(t,n,l);s.currentOutputSnapshotRaw=t,s.currentOutputSnapshotResolved=c,s.currentWriteId=gx(e),o.splice(o.indexOf(a),1),i=i.concat(sN(e.serverSyncTree_,s.path,c,s.currentWriteId,s.applyLocally)),i=i.concat(aN(e.serverSyncTree_,a,!0))}else h=!0,u="nodata",i=i.concat(aN(e.serverSyncTree_,s.currentWriteId,!0))}ix(e.eventQueue_,n,i),i=[],h&&(t[l].status=2,a=t[l].unwatcher,setTimeout(a,Math.floor(0)),t[l].onComplete&&("nodata"===u?r.push((()=>t[l].onComplete(null,!1,t[l].currentInputSnapshot))):r.push((()=>t[l].onComplete(new Error(u),!1,null)))))}var a;xx(e,e.transactionQueueTree_);for(let l=0;l<r.length;l++)JS(r[l]);Sx(e,e.transactionQueueTree_)}(e,Cx(e,n),r),r}function kx(e,t){let n,r=e.transactionQueueTree_;for(n=kE(t);null!==n&&void 0===ON(r);)r=DN(r,n),n=kE(t=NE(t));return r}function Cx(e,t){const n=[];return Nx(e,t,n),n.sort(((e,t)=>e.order-t.order)),n}function Nx(e,t,n){const r=ON(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);FN(t,(t=>{Nx(e,t,n)}))}function xx(e,t){const n=ON(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,LN(t,n.length>0?n:void 0)}FN(t,(t=>{xx(e,t)}))}function Ax(e,t){const n=jN(kx(e,t)),r=DN(e.transactionQueueTree_,t);return function(e,t,n){let r=n?e:e.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(r,(t=>{Px(e,t)})),Px(e,r),UN(r,(t=>{Px(e,t)})),n}function Px(e,t){const n=ON(t);if(n){const r=[];let i=[],s=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?(Ct(s===t-1,"All SENT items should be at beginning of queue."),s=t,n[t].status=3,n[t].abortReason="set"):(Ct(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),i=i.concat(aN(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&r.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===s?LN(t,void 0):n.length=s+1,ix(e.eventQueue_,jN(t),i);for(let e=0;e<r.length;e++)JS(r[e])}}const Rx=function(e,t){const n=Dx(e),r=n.namespace;"firebase.com"===n.domain&&FS(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||FS("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&US("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new aE(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new SE(n.pathString)}},Dx=function(e){let t="",n="",r="",i="",s="",o=!0,a="https",l=443;if("string"===typeof e){let c=e.indexOf("//");c>=0&&(a=e.substring(0,c-1),e=e.substring(c+2));let u=e.indexOf("/");-1===u&&(u=e.length);let h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(u,h)),u<h&&(i=function(e){let t="";const n=e.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let e=n[r];try{e=decodeURIComponent(e.replace(/\+/g," "))}catch(WM){}t+="/"+e}return t}(e.substring(u,h)));const d=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):US("Invalid query segment '".concat(n,"' in query '").concat(e,"'"))}return t}(e.substring(Math.min(e.length,h)));c=t.indexOf(":"),c>=0?(o="https"===a||"wss"===a,l=parseInt(t.substring(c+1),10)):c=t.length;const f=t.slice(0,c);if("localhost"===f.toLowerCase())n="localhost";else if(f.split(".").length<=2)n=f;else{const e=t.indexOf(".");r=t.substring(0,e).toLowerCase(),n=t.substring(e+1),s=r}"ns"in d&&(s=d.ns)}return{host:t,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}},Ox="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Lx=function(){let e=0;const t=[];return function(n){const r=n===e;let i;e=n;const s=new Array(8);for(i=7;i>=0;i--)s[i]=Ox.charAt(n%64),n=Math.floor(n/64);Ct(0===n,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&63===t[i];i--)t[i]=0;t[i]++}else for(i=0;i<12;i++)t[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)o+=Ox.charAt(t[i]);return Ct(20===o.length,"nextPushId: Length should be 20."),o}}();class Mx{constructor(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+hn(this.snapshot.exportVal())}}class Fx{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Ux{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return Ct(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class jx{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new zt;return yx(this._repo,this._path,e.wrapCallback((()=>{}))),e.promise}remove(){ZN("OnDisconnect.remove",this._path);const e=new zt;return vx(this._repo,this._path,null,e.wrapCallback((()=>{}))),e.promise}set(e){ZN("OnDisconnect.set",this._path),GN("OnDisconnect.set",e,this._path,!1);const t=new zt;return vx(this._repo,this._path,e,t.wrapCallback((()=>{}))),t.promise}setWithPriority(e,t){ZN("OnDisconnect.setWithPriority",this._path),GN("OnDisconnect.setWithPriority",e,this._path,!1),$N("OnDisconnect.setWithPriority",t,!1);const n=new zt;return function(e,t,n,r,i){const s=yk(n,r);e.server_.onDisconnectPut(t.toString(),s.val(!0),((n,r)=>{"ok"===n&&Mk(e.onDisconnect_,t,s),Tx(0,i,n,r)}))}(this._repo,this._path,e,t,n.wrapCallback((()=>{}))),n.promise}update(e){ZN("OnDisconnect.update",this._path),YN("OnDisconnect.update",e,this._path,!1);const t=new zt;return function(e,t,n,r){if(gn(n))return OS("onDisconnect().update() called with empty data.  Don't do anything."),void Tx(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,((i,s)=>{"ok"===i&&GS(n,((n,r)=>{const i=yk(r);Mk(e.onDisconnect_,RE(t,n),i)})),Tx(0,r,i,s)}))}(this._repo,this._path,e,t.wrapCallback((()=>{}))),t.promise}}class Vx{constructor(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}get key(){return DE(this._path)?null:xE(this._path)}get ref(){return new Hx(this._repo,this._path)}get _queryIdentifier(){const e=Rk(this._queryParams),t=WS(e);return"{}"===t?"default":t}get _queryObject(){return Rk(this._queryParams)}isEqual(e){if(!((e=Rn(e))instanceof Vx))return!1;const t=this._repo===e._repo,n=ME(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}function zx(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function qx(e){let t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===QE){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==VS)throw new Error(r);if("string"!==typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==zS)throw new Error(r);if("string"!==typeof n)throw new Error(i)}}else if(e.getIndex()===ak){if(null!=t&&!KN(t)||null!=n&&!KN(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Ct(e.getIndex()instanceof vk||e.getIndex()===_k,"unknown index type."),null!=t&&"object"===typeof t||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Bx(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Hx extends Vx{constructor(e,t){super(e,t,new Ck,!1)}get parent(){const e=PE(this._path);return null===e?null:new Hx(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Wx{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new SE(e),n=Qx(this.ref,e);return new Wx(this._node.getChild(t),n,ak)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){if(this._node.isLeafNode())return!1;return!!this._node.forEachChild(this._index,((t,n)=>e(new Wx(n,Qx(this.ref,t),ak))))}hasChild(e){const t=new SE(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Kx(e,t){return(e=Rn(e))._checkNotDeleted("ref"),void 0!==t?Qx(e._root,t):e._root}function Gx(e,t){(e=Rn(e))._checkNotDeleted("refFromURL");const n=Rx(t,e._repo.repoInfo_.nodeAdmin);ex("refFromURL",n);const r=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||r.host===e._repo.repoInfo_.host||FS("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),Kx(e,n.path.toString())}function Qx(e,t){var n,r,i,s;return null===kE((e=Rn(e))._path)?(n="child",r="path",s=!1,(i=t)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),XN(n,r,i,s)):XN("child","path",t,!1),new Hx(e._repo,RE(e._path,t))}function Yx(e,t){e=Rn(e),ZN("set",e._path),GN("set",t,e._path,!1);const n=new zt;return mx(e._repo,e._path,t,null,n.wrapCallback((()=>{}))),n.promise}function $x(e,t){YN("update",t,e._path,!1);const n=new zt;return function(e,t,n,r){bx(e,"update",{path:t.toString(),value:n});let i=!0;const s=hx(e),o={};if(GS(n,((n,r)=>{i=!1,o[n]=xN(RE(t,n),yk(r),e.serverSyncTree_,s)})),i)OS("update() called with empty data.  Don't do anything."),Tx(0,r,"ok",void 0);else{const i=gx(e),s=oN(e.serverSyncTree_,t,o,i);nx(e.eventQueue_,s),e.server_.merge(t.toString(),n,((n,s)=>{const o="ok"===n;o||US("update at "+t+" failed: "+n);const a=aN(e.serverSyncTree_,i,!o),l=a.length>0?Ex(e,t):t;ix(e.eventQueue_,l,a),Tx(0,r,n,s)})),GS(n,(n=>{const r=Ax(e,RE(t,n));Ex(e,r)})),ix(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback((()=>{}))),n.promise}function Jx(e){e=Rn(e);const t=new Ux((()=>{})),n=new Xx(t);return function(e,t,n){const r=fN(e.serverSyncTree_,t);return null!=r?Promise.resolve(r):e.server_.get(t).then((r=>{const i=yk(r).withIndex(t._queryParams.getIndex());let s;if(hN(e.serverSyncTree_,t,n,!0),t._queryParams.loadsAllData())s=lN(e.serverSyncTree_,t._path,i);else{const n=vN(e.serverSyncTree_,t);s=uN(e.serverSyncTree_,t._path,i,n)}return ix(e.eventQueue_,t._path,s),cN(e.serverSyncTree_,t,n,null,!0),i}),(n=>(bx(e,"get for query "+hn(t)+" failed: "+n),Promise.reject(new Error(n)))))}(e._repo,e,n).then((t=>new Wx(t,new Hx(e._repo,e._path),e._queryParams.getIndex())))}class Xx{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const n=t._queryParams.getIndex();return new Mx("value",this,new Wx(e.snapshotNode,new Hx(t._repo,t._path),n))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Fx(this,e,t):null}matches(e){return e instanceof Xx&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Zx{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Fx(this,e,t):null}createEvent(e,t){Ct(null!=e.childName,"Child events should have a childName.");const n=Qx(new Hx(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new Mx(e.type,this,new Wx(e.snapshotNode,n,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Zx&&(this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)))}hasAnyCallback(){return!!this.callbackContext}}function eA(e,t,n,r,i){let s;if("object"===typeof r&&(s=void 0,i=r),"function"===typeof r&&(s=r),i&&i.onlyOnce){const t=n,r=(n,r)=>{_x(e._repo,e,a),t(n,r)};r.userCallback=n.userCallback,r.context=n.context,n=r}const o=new Ux(n,s||void 0),a="value"===t?new Xx(o):new Zx(t,o);return function(e,t,n){let r;r=".info"===kE(t._path)?hN(e.infoSyncTree_,t,n):hN(e.serverSyncTree_,t,n),rx(e.eventQueue_,t._path,r)}(e._repo,e,a),()=>_x(e._repo,e,a)}function tA(e,t,n,r){return eA(e,"value",t,n,r)}function nA(e,t,n,r){return eA(e,"child_added",t,n,r)}function rA(e,t,n,r){return eA(e,"child_changed",t,n,r)}function iA(e,t,n,r){return eA(e,"child_moved",t,n,r)}function sA(e,t,n,r){return eA(e,"child_removed",t,n,r)}function oA(e,t,n){let r=null;const i=n?new Ux(n):null;"value"===t?r=new Xx(i):t&&(r=new Zx(t,i)),_x(e._repo,e,r)}class aA{}class lA extends aA{constructor(e,t){super(),this._value=e,this._key=t,this.type="endAt"}_apply(e){GN("endAt",this._value,e._path,!0);const t=xk(e._queryParams,this._value,this._key);if(Bx(t),qx(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Vx(e._repo,e._path,t,e._orderByCalled)}}class cA extends aA{constructor(e,t){super(),this._value=e,this._key=t,this.type="endBefore"}_apply(e){GN("endBefore",this._value,e._path,!1);const t=function(e,t,n){let r;return r=e.index_===QE||n?xk(e,t,n):xk(e,t,VS),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(Bx(t),qx(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Vx(e._repo,e._path,t,e._orderByCalled)}}class uA extends aA{constructor(e,t){super(),this._value=e,this._key=t,this.type="startAt"}_apply(e){GN("startAt",this._value,e._path,!0);const t=Nk(e._queryParams,this._value,this._key);if(Bx(t),qx(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Vx(e._repo,e._path,t,e._orderByCalled)}}class hA extends aA{constructor(e,t){super(),this._value=e,this._key=t,this.type="startAfter"}_apply(e){GN("startAfter",this._value,e._path,!1);const t=function(e,t,n){let r;return r=e.index_===QE||n?Nk(e,t,n):Nk(e,t,zS),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(Bx(t),qx(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Vx(e._repo,e._path,t,e._orderByCalled)}}class dA extends aA{constructor(e){super(),this._limit=e,this.type="limitToFirst"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Vx(e._repo,e._path,function(e,t){const n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}(e._queryParams,this._limit),e._orderByCalled)}}class fA extends aA{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Vx(e._repo,e._path,function(e,t){const n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)}}class pA extends aA{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){zx(e,"orderByChild");const t=new SE(this._path);if(DE(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const n=new vk(t),r=Ak(e._queryParams,n);return qx(r),new Vx(e._repo,e._path,r,!0)}}class gA extends aA{constructor(){super(...arguments),this.type="orderByKey"}_apply(e){zx(e,"orderByKey");const t=Ak(e._queryParams,QE);return qx(t),new Vx(e._repo,e._path,t,!0)}}class mA extends aA{constructor(){super(...arguments),this.type="orderByPriority"}_apply(e){zx(e,"orderByPriority");const t=Ak(e._queryParams,ak);return qx(t),new Vx(e._repo,e._path,t,!0)}}class yA extends aA{constructor(){super(...arguments),this.type="orderByValue"}_apply(e){zx(e,"orderByValue");const t=Ak(e._queryParams,_k);return qx(t),new Vx(e._repo,e._path,t,!0)}}class vA extends aA{constructor(e,t){super(),this._value=e,this._key=t,this.type="equalTo"}_apply(e){if(GN("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new lA(this._value,this._key)._apply(new uA(this._value,this._key)._apply(e))}}function _A(e){let t=Rn(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(const s of r)t=s._apply(t);return t}!function(e){Ct(!HC,"__referenceConstructor has already been defined"),HC=e}(Hx),function(e){Ct(!WC,"__referenceConstructor has already been defined"),WC=e}(Hx);const wA={};let bA=!1;function TA(e,t,n,r,i){let s=r||e.options.databaseURL;void 0===s&&(e.options.projectId||FS("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),OS("Using default host for project ",e.options.projectId),s="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));let o,a,l=Rx(s,i),c=l.repoInfo;"undefined"!==typeof process&&(a={NODE_ENV:"production",PUBLIC_URL:"/Volpan28/LetsAchive4.github.io",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FIREBASE_DATABASE_EMULATOR_HOST),a?(o=!0,s="http://".concat(a,"?ns=").concat(c.namespace),l=Rx(s,i),c=l.repoInfo):o=!l.repoInfo.secure;const u=i&&o?new tE(tE.OWNER):new eE(e.name,e.options,t);ex("Invalid Firebase Database URL",l),DE(l.path)||FS("Database URL must point to the root of a Firebase Database (not including a child path).");const h=function(e,t,n,r){let i=wA[t.name];i||(i={},wA[t.name]=i);let s=i[e.toURLString()];s&&FS("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return s=new lx(e,bA,n,r),i[e.toURLString()]=s,s}(c,e,u,new ZS(e,n));return new IA(h,e)}class IA{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(cx(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0,Gt("Database",null!==this._repo.repoInfo_.emulatorOptions)),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Hx(this._repo,EE())),this._rootInternal}_delete(){return null!==this._rootInternal&&(!function(e,t){const n=wA[t];n&&n[e.key]===e||FS("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),wx(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&FS("Cannot call "+e+" on a deleted database.")}}function SA(){_E.IS_TRANSPORT_INITIALIZED&&US("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function EA(){SA(),gE.forceDisallow()}function kA(){SA(),vE.forceDisallow(),gE.forceAllow()}function CA(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(e=Rn(e))._checkNotDeleted("useEmulator");const i="".concat(t,":").concat(n),s=e._repoInternal;if(e._instanceStarted){if(i===e._repoInternal.repoInfo_.host&&yn(r,s.repoInfo_.emulatorOptions))return;FS("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&FS('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new tE(tE.OWNER);else if(r.mockUserToken){const t="string"===typeof r.mockUserToken?r.mockUserToken:Ht(r.mockUserToken,e.app.options.projectId);o=new tE(t)}qt(t)&&(Bt(t),Gt("Database",!0)),function(e,t,n,r){const i=t.lastIndexOf(":"),s=qt(t.substring(0,i));e.repoInfo_=new aE(t,s,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(e.authTokenProvider_=r)}(s,i,r,o)}function NA(e){var t;(e=Rn(e))._checkNotDeleted("goOnline"),(t=e._repo).persistentConnection_&&t.persistentConnection_.resume(ax)}function xA(e,t){DS(e,t)}const AA={".sv":"timestamp"};class PA{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}function RA(e,t,n){var r;if(e=Rn(e),ZN("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";const i=null===(r=null===n||void 0===n?void 0:n.applyLocally)||void 0===r||r,s=new zt,o=tA(e,(()=>{}));return function(e,t,n,r,i,s){bx(e,"transaction on "+t);const o={path:t,update:n,onComplete:r,status:null,order:NS(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=Ix(e,t,void 0);o.currentInputSnapshot=a;const l=o.update(a.val());if(void 0===l)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{QN("transaction failed: Data returned ",l,o.path),o.status=0;const n=DN(e.transactionQueueTree_,t),r=ON(n)||[];let i;r.push(o),LN(n,r),"object"===typeof l&&null!==l&&fn(l,".priority")?(i=pn(l,".priority"),Ct(KN(i),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):i=(dN(e.serverSyncTree_,t)||gk.EMPTY_NODE).getPriority().val();const s=hx(e),c=yk(l,i),u=AN(c,a,s);o.currentOutputSnapshotRaw=c,o.currentOutputSnapshotResolved=u,o.currentWriteId=gx(e);const h=sN(e.serverSyncTree_,t,u,o.currentWriteId,o.applyLocally);ix(e.eventQueue_,t,h),Sx(e,e.transactionQueueTree_)}}(e._repo,e._path,t,((t,n,r)=>{let i=null;t?s.reject(t):(i=new Wx(r,new Hx(e._repo,e._path),ak),s.resolve(new PA(n,i)))}),o,i),s.promise}BE.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},BE.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){bS(ti),Wr(new Dn("database",((e,t)=>{let{instanceIdentifier:n}=t;return TA(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),ai(vS,_S,e),ai(vS,_S,"esm2017")}();const DA=new Bn("@firebase/database-compat"),OA=function(e){const t="FIREBASE WARNING: "+e;DA.warn(t)};class LA{constructor(e){this._delegate=e}cancel(e){kn("OnDisconnect.cancel",0,1,arguments.length),Nn("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then((()=>e(null)),(t=>e(t))),t}remove(e){kn("OnDisconnect.remove",0,1,arguments.length),Nn("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then((()=>e(null)),(t=>e(t))),t}set(e,t){kn("OnDisconnect.set",1,2,arguments.length),Nn("OnDisconnect.set","onComplete",t,!0);const n=this._delegate.set(e);return t&&n.then((()=>t(null)),(e=>t(e))),n}setWithPriority(e,t,n){kn("OnDisconnect.setWithPriority",2,3,arguments.length),Nn("OnDisconnect.setWithPriority","onComplete",n,!0);const r=this._delegate.setWithPriority(e,t);return n&&r.then((()=>n(null)),(e=>n(e))),r}update(e,t){if(kn("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const t={};for(let n=0;n<e.length;++n)t[""+n]=e[n];e=t,OA("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Nn("OnDisconnect.update","onComplete",t,!0);const n=this._delegate.update(e);return t&&n.then((()=>t(null)),(e=>t(e))),n}}class MA{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return kn("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class FA{constructor(e,t){this._database=e,this._delegate=t}val(){return kn("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return kn("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return kn("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return kn("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return kn("DataSnapshot.child",0,1,arguments.length),e=String(e),XN("DataSnapshot.child","path",e,!1),new FA(this._database,this._delegate.child(e))}hasChild(e){return kn("DataSnapshot.hasChild",1,1,arguments.length),XN("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return kn("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return kn("DataSnapshot.forEach",1,1,arguments.length),Nn("DataSnapshot.forEach","action",e,!1),this._delegate.forEach((t=>e(new FA(this._database,t))))}hasChildren(){return kn("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return kn("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return kn("DataSnapshot.ref",0,0,arguments.length),new jA(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class UA{constructor(e,t){this.database=e,this._delegate=t}on(e,t,n,r){var i;kn("Query.on",2,4,arguments.length),Nn("Query.on","callback",t,!1);const s=UA.getCancelAndContextArgs_("Query.on",n,r),o=(e,n)=>{t.call(s.context,new FA(this.database,e),n)};o.userCallback=t,o.context=s.context;const a=null===(i=s.cancel)||void 0===i?void 0:i.bind(s.context);switch(e){case"value":return tA(this._delegate,o,a),t;case"child_added":return nA(this._delegate,o,a),t;case"child_removed":return sA(this._delegate,o,a),t;case"child_changed":return rA(this._delegate,o,a),t;case"child_moved":return iA(this._delegate,o,a),t;default:throw new Error(Cn("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,n){if(kn("Query.off",0,3,arguments.length),function(e,t,n){if(!n||void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Cn(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}("Query.off",e,!0),Nn("Query.off","callback",t,!0),xn("Query.off","context",n,!0),t){const r=()=>{};r.userCallback=t,r.context=n,oA(this._delegate,e,r)}else oA(this._delegate,e)}get(){return Jx(this._delegate).then((e=>new FA(this.database,e)))}once(e,t,n,r){kn("Query.once",1,4,arguments.length),Nn("Query.once","callback",t,!0);const i=UA.getCancelAndContextArgs_("Query.once",n,r),s=new zt,o=(e,n)=>{const r=new FA(this.database,e);t&&t.call(i.context,r,n),s.resolve(r)};o.userCallback=t,o.context=i.context;const a=e=>{i.cancel&&i.cancel.call(i.context,e),s.reject(e)};switch(e){case"value":tA(this._delegate,o,a,{onlyOnce:!0});break;case"child_added":nA(this._delegate,o,a,{onlyOnce:!0});break;case"child_removed":sA(this._delegate,o,a,{onlyOnce:!0});break;case"child_changed":rA(this._delegate,o,a,{onlyOnce:!0});break;case"child_moved":iA(this._delegate,o,a,{onlyOnce:!0});break;default:throw new Error(Cn("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise}limitToFirst(e){return kn("Query.limitToFirst",1,1,arguments.length),new UA(this.database,_A(this._delegate,function(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new dA(e)}(e)))}limitToLast(e){return kn("Query.limitToLast",1,1,arguments.length),new UA(this.database,_A(this._delegate,function(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new fA(e)}(e)))}orderByChild(e){return kn("Query.orderByChild",1,1,arguments.length),new UA(this.database,_A(this._delegate,function(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return XN("orderByChild","path",e,!1),new pA(e)}(e)))}orderByKey(){return kn("Query.orderByKey",0,0,arguments.length),new UA(this.database,_A(this._delegate,new gA))}orderByPriority(){return kn("Query.orderByPriority",0,0,arguments.length),new UA(this.database,_A(this._delegate,new mA))}orderByValue(){return kn("Query.orderByValue",0,0,arguments.length),new UA(this.database,_A(this._delegate,new yA))}startAt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return kn("Query.startAt",0,2,arguments.length),new UA(this.database,_A(this._delegate,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return JN("startAt","key",t,!0),new uA(e,t)}(e,t)))}startAfter(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return kn("Query.startAfter",0,2,arguments.length),new UA(this.database,_A(this._delegate,function(e,t){return JN("startAfter","key",t,!0),new hA(e,t)}(e,t)))}endAt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return kn("Query.endAt",0,2,arguments.length),new UA(this.database,_A(this._delegate,function(e,t){return JN("endAt","key",t,!0),new lA(e,t)}(e,t)))}endBefore(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return kn("Query.endBefore",0,2,arguments.length),new UA(this.database,_A(this._delegate,function(e,t){return JN("endBefore","key",t,!0),new cA(e,t)}(e,t)))}equalTo(e,t){return kn("Query.equalTo",1,2,arguments.length),new UA(this.database,_A(this._delegate,function(e,t){return JN("equalTo","key",t,!0),new vA(e,t)}(e,t)))}toString(){return kn("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return kn("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if(kn("Query.isEqual",1,1,arguments.length),!(e instanceof UA)){throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.")}return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,n){const r={cancel:void 0,context:void 0};if(t&&n)r.cancel=t,Nn(e,"cancel",r.cancel,!0),r.context=n,xn(e,"context",r.context,!0);else if(t)if("object"===typeof t&&null!==t)r.context=t;else{if("function"!==typeof t)throw new Error(Cn(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}get ref(){return new jA(this.database,new Hx(this._delegate._repo,this._delegate._path))}}class jA extends UA{constructor(e,t){super(e,new Vx(t._repo,t._path,new Ck,!1)),this.database=e,this._delegate=t}getKey(){return kn("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return kn("Reference.child",1,1,arguments.length),"number"===typeof e&&(e=String(e)),new jA(this.database,Qx(this._delegate,e))}getParent(){kn("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new jA(this.database,e):null}getRoot(){return kn("Reference.root",0,0,arguments.length),new jA(this.database,this._delegate.root)}set(e,t){kn("Reference.set",1,2,arguments.length),Nn("Reference.set","onComplete",t,!0);const n=Yx(this._delegate,e);return t&&n.then((()=>t(null)),(e=>t(e))),n}update(e,t){if(kn("Reference.update",1,2,arguments.length),Array.isArray(e)){const t={};for(let n=0;n<e.length;++n)t[""+n]=e[n];e=t,OA("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ZN("Reference.update",this._delegate._path),Nn("Reference.update","onComplete",t,!0);const n=$x(this._delegate,e);return t&&n.then((()=>t(null)),(e=>t(e))),n}setWithPriority(e,t,n){kn("Reference.setWithPriority",2,3,arguments.length),Nn("Reference.setWithPriority","onComplete",n,!0);const r=function(e,t,n){if(ZN("setWithPriority",e._path),GN("setWithPriority",t,e._path,!1),$N("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";const r=new zt;return mx(e._repo,e._path,t,n,r.wrapCallback((()=>{}))),r.promise}(this._delegate,e,t);return n&&r.then((()=>n(null)),(e=>n(e))),r}remove(e){kn("Reference.remove",0,1,arguments.length),Nn("Reference.remove","onComplete",e,!0);const t=function(e){return ZN("remove",e._path),Yx(e,null)}(this._delegate);return e&&t.then((()=>e(null)),(t=>e(t))),t}transaction(e,t,n){kn("Reference.transaction",1,3,arguments.length),Nn("Reference.transaction","transactionUpdate",e,!1),Nn("Reference.transaction","onComplete",t,!0),function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!==typeof n)throw new Error(Cn(e,t)+"must be a boolean.")}("Reference.transaction","applyLocally",n,!0);const r=RA(this._delegate,e,{applyLocally:n}).then((e=>new MA(e.committed,new FA(this.database,e.snapshot))));return t&&r.then((e=>t(null,e.committed,e.snapshot)),(e=>t(e,!1,null))),r}setPriority(e,t){kn("Reference.setPriority",1,2,arguments.length),Nn("Reference.setPriority","onComplete",t,!0);const n=function(e,t){e=Rn(e),ZN("setPriority",e._path),$N("setPriority",t,!1);const n=new zt;return mx(e._repo,RE(e._path,".priority"),t,null,n.wrapCallback((()=>{}))),n.promise}(this._delegate,e);return t&&n.then((()=>t(null)),(e=>t(e))),n}push(e,t){kn("Reference.push",0,2,arguments.length),Nn("Reference.push","onComplete",t,!0);const n=function(e,t){e=Rn(e),ZN("push",e._path),GN("push",t,e._path,!0);const n=ux(e._repo),r=Lx(n),i=Qx(e,r),s=Qx(e,r);let o;return o=null!=t?Yx(s,t).then((()=>s)):Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}(this._delegate,e),r=n.then((e=>new jA(this.database,e)));t&&r.then((()=>t(null)),(e=>t(e)));const i=new jA(this.database,n);return i.then=r.then.bind(r),i.catch=r.catch.bind(r,void 0),i}onDisconnect(){return ZN("Reference.onDisconnect",this._delegate._path),new LA(new jx(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class VA{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:EA,forceLongPolling:kA}}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};CA(this._delegate,e,t,n)}ref(e){if(kn("database.ref",0,1,arguments.length),e instanceof jA){const t=Gx(this._delegate,e.toString());return new jA(this,t)}{const t=Kx(this._delegate,e);return new jA(this,t)}}refFromURL(e){kn("database.refFromURL",1,1,arguments.length);const t=Gx(this._delegate,e);return new jA(this,t)}goOffline(){return kn("database.goOffline",0,0,arguments.length),function(e){(e=Rn(e))._checkNotDeleted("goOffline"),wx(e._repo)}(this._delegate)}goOnline(){return kn("database.goOnline",0,0,arguments.length),NA(this._delegate)}}VA.ServerValue={TIMESTAMP:AA,increment:e=>function(e){return{".sv":{increment:e}}}(e)};var zA=Object.freeze({__proto__:null,initStandalone:function(e){let{app:t,url:n,version:r,customAuthImpl:i,customAppCheckImpl:s,namespace:o,nodeAdmin:a=!1}=e;bS(r);const l=new Mn("database-standalone"),c=new Ln("auth-internal",l);let u;return c.setComponent(new Dn("auth-internal",(()=>i),"PRIVATE")),s&&(u=new Ln("app-check-internal",l),u.setComponent(new Dn("app-check-internal",(()=>s),"PRIVATE"))),{instance:new VA(TA(t,c,u,n,a),t),namespace:o}}});const qA=VA.ServerValue;!function(e){e.INTERNAL.registerComponent(new Dn("database-compat",((e,t)=>{let{instanceIdentifier:n}=t;const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:n});return new VA(i,r)}),"PUBLIC").setServiceProps({Reference:jA,Query:UA,Database:VA,DataSnapshot:FA,enableLogging:xA,INTERNAL:zA,ServerValue:qA}).setMultipleInstances(!0)),e.registerVersion("@firebase/database-compat","2.0.8")}(AI);function BA(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Oc("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function HA(){if("undefined"===typeof Uint8Array)throw new Oc("unimplemented","Uint8Arrays are not available in this environment.")}function WA(){if("undefined"==typeof atob)throw new Oc("unimplemented","Blobs are unavailable in Firestore in this environment.")}class KA{constructor(e){this._delegate=e}static fromBase64String(e){return WA(),new KA(Ob.fromBase64String(e))}static fromUint8Array(e){return HA(),new KA(Ob.fromUint8Array(e))}toBase64(){return WA(),this._delegate.toBase64()}toUint8Array(){return HA(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function GA(e){return function(e,t){if("object"!==typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"===typeof n[r])return!0;return!1}(e,["next","error","complete"])}class QA{enableIndexedDbPersistence(e,t){return function(e,t){Cc("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings();return xb(e,Dw.provider,{build:e=>new Pw(e,n.cacheSizeBytes,null==t?void 0:t.forceOwnership)}),Promise.resolve()}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return async function(e){Cc("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=e._freezeSettings();xb(e,Dw.provider,{build:e=>new Rw(e,t.cacheSizeBytes)})}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new Oc(Dc.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Lc;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!Eu.C())return Promise.resolve();const t=e+Hy;await Eu.delete(t)}(Qy(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class YA{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof Sd||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||Cc("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};fb(this._delegate,e,t,n)}enableNetwork(){return Pb(this._delegate)}disableNetwork(){return Rb(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,rb("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return Ab(this._delegate)}onSnapshotsInSync(e){return KT(this._delegate,e)}get app(){if(!this._appCompat)throw new Oc("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new cP(this,yb(this._delegate,e))}catch(WM){throw tP(WM,"collection()","Firestore.collection()")}}doc(e){try{return new eP(this,vb(this._delegate,e))}catch(WM){throw tP(WM,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new oP(this,function(e,t){if(e=ab(e,db),nb("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Oc(Dc.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new pb(e,null,function(e){return new Mf(su.emptyPath(),e)}(t))}(this._delegate,e))}catch(WM){throw tP(WM,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t,n){e=ab(e,kb);const r=Object.assign(Object.assign({},YT),n);return function(e){if(e.maxAttempts<1)throw new Oc(Dc.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new Lc;return e.asyncQueue.enqueueAndForget((async()=>{const i=await Yw(e);new Uw(e.asyncQueue,i,n,t,r).Nu()})),r.promise}(Cb(e),(n=>t(new ZT(e,n))),r)}(this._delegate,(t=>e(new JA(this,t))))}batch(){return Cb(this._delegate),new XA(new $T(this._delegate,(e=>GT(this._delegate,e))))}loadBundle(e){return function(e,t){const n=Cb(e=ab(e,kb)),r=new Eb;return Zw(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return Db(this._delegate,e).then((e=>e?new oP(this,e):null))}}class $A extends xT{constructor(e){super(),this.firestore=e}convertBytes(e){return new KA(new Ob(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return eP.forKey(t,this.firestore,null)}}class JA{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new $A(e)}get(e){const t=uP(e);return this._delegate.get(t).then((e=>new iP(this._firestore,new DT(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const r=uP(e);return n?(BA("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=uP(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=uP(e);return this._delegate.delete(t),this}}class XA{constructor(e){this._delegate=e}set(e,t,n){const r=uP(e);return n?(BA("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=uP(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=uP(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class ZA{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new OT(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new sP(this._firestore,n),null!==t&&void 0!==t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=ZA.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new ZA(e,new $A(e),t),r.set(t,i)),i}}ZA.INSTANCES=new WeakMap;class eP{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new $A(e)}static forPath(e,t,n){if(e.length%2!==0)throw new Oc("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(e.canonicalString()," has ").concat(e.length));return new eP(t,new gb(t._delegate,n,new lu(e)))}static forKey(e,t,n){return new eP(t,new gb(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new cP(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new cP(this.firestore,yb(this._delegate,e))}catch(WM){throw tP(WM,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=Rn(e))instanceof gb&&_b(this._delegate,e)}set(e,t){t=BA("DocumentReference.set",t);try{return t?zT(this._delegate,e,t):zT(this._delegate,e)}catch(WM){throw tP(WM,"setDoc()","DocumentReference.set()")}}update(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?qT(this._delegate,e):qT(this._delegate,e,t,...r)}catch(WM){throw tP(WM,"updateDoc()","DocumentReference.update()")}}delete(){return BT(this._delegate)}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=nP(t),i=rP(t,(e=>new iP(this.firestore,new DT(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return WT(this._delegate,r,i)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?jT(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=ab(e,gb);const t=ab(e.firestore,kb);return Jw(Cb(t),e._key,{source:"server"}).then((n=>QT(t,e,n)))}(this._delegate):function(e){e=ab(e,gb);const t=ab(e.firestore,kb);return Jw(Cb(t),e._key).then((n=>QT(t,e,n)))}(this._delegate),t.then((e=>new iP(this.firestore,new DT(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new eP(this.firestore,e?this._delegate.withConverter(ZA.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function tP(e,t,n){return e.message=e.message.replace(t,n),e}function nP(e){for(const t of e)if("object"===typeof t&&!GA(t))return t;return{}}function rP(e,t){var n,r;let i;return i=GA(e[0])?e[0]:GA(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class iP{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new eP(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return FT(this._delegate,e._delegate)}}class sP extends iP{data(e){const t=this._delegate.data(e);return this._delegate._converter||function(e,t){e||xc(57014,t)}(void 0!==t,"Document in a QueryDocumentSnapshot should exist"),t}}class oP{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new $A(e)}where(e,t,n){try{return new oP(this.firestore,yT(this._delegate,_T(e,t,n)))}catch(WM){throw tP(WM,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new oP(this.firestore,yT(this._delegate,function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=fT("orderBy",e);return bT._create(n,t)}(e,t)))}catch(WM){throw tP(WM,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new oP(this.firestore,yT(this._delegate,function(e){return lb("limit",e),TT._create("limit",e,"F")}(e)))}catch(WM){throw tP(WM,"limit()","Query.limit()")}}limitToLast(e){try{return new oP(this.firestore,yT(this._delegate,function(e){return lb("limitToLast",e),TT._create("limitToLast",e,"L")}(e)))}catch(WM){throw tP(WM,"limitToLast()","Query.limitToLast()")}}startAt(){try{return new oP(this.firestore,yT(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return IT._create("startAt",t,!0)}(...arguments)))}catch(WM){throw tP(WM,"startAt()","Query.startAt()")}}startAfter(){try{return new oP(this.firestore,yT(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return IT._create("startAfter",t,!1)}(...arguments)))}catch(WM){throw tP(WM,"startAfter()","Query.startAfter()")}}endBefore(){try{return new oP(this.firestore,yT(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ST._create("endBefore",t,!1)}(...arguments)))}catch(WM){throw tP(WM,"endBefore()","Query.endBefore()")}}endAt(){try{return new oP(this.firestore,yT(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ST._create("endAt",t,!0)}(...arguments)))}catch(WM){throw tP(WM,"endAt()","Query.endAt()")}}isEqual(e){return wb(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?VT(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=ab(e,pb);const t=ab(e.firestore,kb),n=Cb(t),r=new UT(t);return Xw(n,e._query,{source:"server"}).then((n=>new LT(t,r,e,n)))}(this._delegate):function(e){e=ab(e,pb);const t=ab(e.firestore,kb),n=Cb(t),r=new UT(t);return pT(e._query),Xw(n,e._query).then((n=>new LT(t,r,e,n)))}(this._delegate),t.then((e=>new lP(this.firestore,new LT(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=nP(t),i=rP(t,(e=>new lP(this.firestore,new LT(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return WT(this._delegate,r,i)}withConverter(e){return new oP(this.firestore,e?this._delegate.withConverter(ZA.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class aP{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new sP(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class lP{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new oP(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new sP(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new aP(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new sP(this._firestore,n))}))}isEqual(e){return FT(this._delegate,e._delegate)}}class cP extends oP{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new eP(this.firestore,e):null}doc(e){try{return new eP(this.firestore,void 0===e?vb(this._delegate):vb(this._delegate,e))}catch(WM){throw tP(WM,"doc()","CollectionReference.doc()")}}add(e){return HT(this._delegate,e).then((e=>new eP(this.firestore,e)))}isEqual(e){return _b(this._delegate,e._delegate)}withConverter(e){return new cP(this.firestore,e?this._delegate.withConverter(ZA.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function uP(e){return ab(e,gb)}class hP{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._delegate=new Lb(...t)}static documentId(){return new hP(au.keyField().canonicalString())}isEqual(e){return(e=Rn(e))instanceof Lb&&this._delegate._internalPath.isEqual(e._internalPath)}}class dP{static serverTimestamp(){const e=new Yb("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new dP(e)}static delete(){const e=new Gb("deleteField");return e._methodName="FieldValue.delete",new dP(e)}static arrayUnion(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new $b("arrayUnion",t)}(...arguments);return e._methodName="FieldValue.arrayUnion",new dP(e)}static arrayRemove(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Jb("arrayRemove",t)}(...arguments);return e._methodName="FieldValue.arrayRemove",new dP(e)}static increment(e){const t=function(e){return new Xb("increment",e)}(e);return t._methodName="FieldValue.increment",new dP(t)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}const fP={Firestore:YA,GeoPoint:Fb,Timestamp:tu,Blob:KA,Transaction:JA,WriteBatch:XA,DocumentReference:eP,DocumentSnapshot:iP,Query:oP,QueryDocumentSnapshot:sP,QuerySnapshot:lP,CollectionReference:cP,FieldPath:hP,FieldValue:dP,setLogLevel:function(e){!function(e){Ic.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new Dn("firestore-compat",(e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},fP)))}(e,((e,t)=>new YA(e,t,new QA))),e.registerVersion("@firebase/firestore-compat","0.3.49")}(AI);function pP(e,t){const n={};for(const r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r]));return n}function gP(e){if(null==e)return null;if(e instanceof Number&&(e=e.valueOf()),"number"===typeof e&&isFinite(e))return e;if(!0===e||!1===e)return e;if("[object String]"===Object.prototype.toString.call(e))return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map((e=>gP(e)));if("function"===typeof e||"object"===typeof e)return pP(e,(e=>gP(e)));throw new Error("Data cannot be encoded in JSON: "+e)}function mP(e){if(null==e)return e;if(e["@type"])switch(e["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":{const t=Number(e.value);if(isNaN(t))throw new Error("Data cannot be decoded from JSON: "+e);return t}default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map((e=>mP(e))):"function"===typeof e||"object"===typeof e?pP(e,(e=>mP(e))):e}const yP="functions",vP={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _P extends an{constructor(e,t,n){super("".concat(yP,"/").concat(e),t||""),this.details=n,Object.setPrototypeOf(this,_P.prototype)}}function wP(e,t){let n,r=function(e){if(e>=200&&e<300)return"ok";switch(e){case 0:case 500:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(e),i=r;try{const e=t&&t.error;if(e){const t=e.status;if("string"===typeof t){if(!vP[t])return new _P("internal","internal");r=vP[t],i=t}const s=e.message;"string"===typeof s&&(i=s),n=e.details,void 0!==n&&(n=mP(n))}}catch(WM){}return"ok"===r?null:new _P(r,i,n)}class bP{constructor(e,t,n,r){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Yr(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||t.get().then((e=>this.auth=e),(()=>{})),this.messaging||n.get().then((e=>this.messaging=e),(()=>{})),this.appCheck||null===r||void 0===r||r.get().then((e=>this.appCheck=e),(()=>{}))}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return null===e||void 0===e?void 0:e.accessToken}catch(WM){return}}async getMessagingToken(){if(this.messaging&&"Notification"in self&&"granted"===Notification.permission)try{return await this.messaging.getToken()}catch(WM){return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){return{authToken:await this.getAuthToken(),messagingToken:await this.getMessagingToken(),appCheckToken:await this.getAppCheckToken(e)}}}const TP="us-central1",IP=/^data: (.*?)(?:\n|$)/;class SP{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:TP,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:function(){return fetch(...arguments)};this.app=e,this.fetchImpl=s,this.emulatorOrigin=null,this.contextProvider=new bP(e,t,n,r),this.cancelAllRequests=new Promise((e=>{this.deleteService=()=>Promise.resolve(e())}));try{const e=new URL(i);this.customDomain=e.origin+("/"===e.pathname?"":e.pathname),this.region=TP}catch(WM){this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;if(null!==this.emulatorOrigin){const n=this.emulatorOrigin;return"".concat(n,"/").concat(t,"/").concat(this.region,"/").concat(e)}return null!==this.customDomain?"".concat(this.customDomain,"/").concat(e):"https://".concat(this.region,"-").concat(t,".cloudfunctions.net/").concat(e)}}function EP(e,t,n){const r=r=>function(e,t,n,r){const i=e._url(t);return NP(e,i,n,r)}(e,t,r,n||{});return r.stream=(n,r)=>function(e,t,n,r){const i=e._url(t);return xP(e,i,n,r||{})}(e,t,n,r),r}async function kP(e,t,n,r){let i;n["Content-Type"]="application/json";try{i=await r(e,{method:"POST",body:JSON.stringify(t),headers:n})}catch(WM){return{status:0,json:null}}let s=null;try{s=await i.json()}catch(WM){}return{status:i.status,json:s}}async function CP(e,t){const n={},r=await e.contextProvider.getContext(t.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),null!==r.appCheckToken&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}async function NP(e,t,n,r){const i={data:n=gP(n)},s=await CP(e,r),o=function(e){let t=null;return{promise:new Promise(((n,r)=>{t=setTimeout((()=>{r(new _P("deadline-exceeded","deadline-exceeded"))}),e)})),cancel:()=>{t&&clearTimeout(t)}}}(r.timeout||7e4),a=await Promise.race([kP(t,i,s,e.fetchImpl),o.promise,e.cancelAllRequests]);if(o.cancel(),!a)throw new _P("cancelled","Firebase Functions instance was deleted.");const l=wP(a.status,a.json);if(l)throw l;if(!a.json)throw new _P("internal","Response is not valid JSON object.");let c=a.json.data;if("undefined"===typeof c&&(c=a.json.result),"undefined"===typeof c)throw new _P("internal","Response is missing data field.");return{data:mP(c)}}async function xP(e,t,n,r){var i;const s={data:n=gP(n)},o=await CP(e,r);let a,l,c;o["Content-Type"]="application/json",o.Accept="text/event-stream";try{a=await e.fetchImpl(t,{method:"POST",body:JSON.stringify(s),headers:o,signal:null===r||void 0===r?void 0:r.signal})}catch(WM){if(WM instanceof Error&&"AbortError"===WM.name){const e=new _P("cancelled","Request was cancelled.");return{data:Promise.reject(e),stream:{[Symbol.asyncIterator]:()=>({next:()=>Promise.reject(e)})}}}const t=wP(0,null);return{data:Promise.reject(t),stream:{[Symbol.asyncIterator]:()=>({next:()=>Promise.reject(t)})}}}const u=new Promise(((e,t)=>{l=e,c=t}));null===(i=null===r||void 0===r?void 0:r.signal)||void 0===i||i.addEventListener("abort",(()=>{const e=new _P("cancelled","Request was cancelled.");c(e)}));const h=function(e,t,n,r){const i=(e,r)=>{const i=e.match(IP);if(!i)return;const s=i[1];try{const e=JSON.parse(s);if("result"in e)return void t(mP(e.result));if("message"in e)return void r.enqueue(mP(e.message));if("error"in e){const t=wP(0,e);return r.error(t),void n(t)}}catch(MS){if(MS instanceof _P)return r.error(MS),void n(MS)}},s=new TextDecoder;return new ReadableStream({start(t){let o="";return a();async function a(){if(null===r||void 0===r?void 0:r.aborted){const e=new _P("cancelled","Request was cancelled");return t.error(e),n(e),Promise.resolve()}try{const{value:l,done:c}=await e.read();if(c)return o.trim()&&i(o.trim(),t),void t.close();if(null===r||void 0===r?void 0:r.aborted){const r=new _P("cancelled","Request was cancelled");return t.error(r),n(r),void await e.cancel()}o+=s.decode(l,{stream:!0});const u=o.split("\n");o=u.pop()||"";for(const e of u)e.trim()&&i(e.trim(),t);return a()}catch(MS){const r=MS instanceof _P?MS:wP(0,null);t.error(r),n(r)}}},cancel:()=>e.cancel()})}(a.body.getReader(),l,c,null===r||void 0===r?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const e=h.getReader();return{async next(){const{value:t,done:n}=await e.read();return{value:t,done:n}},return:async()=>(await e.cancel(),{done:!0,value:void 0})}}},data:u}}const AP="@firebase/functions",PP="0.12.6";function RP(e,t,n){!function(e,t,n){const r=qt(t);e.emulatorOrigin="http".concat(r?"s":"","://").concat(t,":").concat(n),r&&(Bt(e.emulatorOrigin),Gt("Functions",!0))}(Rn(e),t,n)}function DP(e,t,n){return function(e,t,n){const r=r=>NP(e,t,r,n||{});return r.stream=(n,r)=>xP(e,t,n,r||{}),r}(Rn(e),t,n)}!function(e){Wr(new Dn(yP,((e,t)=>{let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("messaging-internal"),o=e.getProvider("app-check-internal");return new SP(r,i,s,o,n)}),"PUBLIC").setMultipleInstances(!0)),ai(AP,PP,e),ai(AP,PP,"esm2017")}();class OP{constructor(e,t){this.app=e,this._delegate=t,this._region=this._delegate.region,this._customDomain=this._delegate.customDomain}httpsCallable(e,t){return function(e,t,n){return EP(Rn(e),t,n)}(this._delegate,e,t)}httpsCallableFromURL(e,t){return DP(this._delegate,e,t)}useFunctionsEmulator(e){const t=e.match("[a-zA-Z]+://([a-zA-Z0-9.-]+)(?::([0-9]+))?");if(null==t)throw new an("functions","No origin provided to useFunctionsEmulator()");if(null==t[2])throw new an("functions","Port missing in origin provided to useFunctionsEmulator()");return RP(this._delegate,t[1],Number(t[2]))}useEmulator(e,t){return RP(this._delegate,e,t)}}const LP=(e,t)=>{let{instanceIdentifier:n}=t;const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("functions").getImmediate({identifier:null!==n&&void 0!==n?n:"us-central1"});return new OP(r,i)};!function(){const e={Functions:OP};AI.INTERNAL.registerComponent(new Dn("functions-compat",LP,"PUBLIC").setServiceProps(e).setMultipleInstances(!0))}(),AI.registerVersion("@firebase/functions-compat","0.3.23");const MP="@firebase/installations",FP="0.6.16",UP=1e4,jP="w:".concat(FP),VP="FIS_v2",zP=36e5,qP=new ln("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function BP(e){return e instanceof an&&e.code.includes("request-failed")}function HP(e){let{projectId:t}=e;return"".concat("https://firebaseinstallations.googleapis.com/v1","/projects/").concat(t,"/installations")}function WP(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function KP(e,t){const n=(await t.json()).error;return qP.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function GP(e){let{apiKey:t}=e;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function QP(e,t){let{refreshToken:n}=t;const r=GP(e);return r.append("Authorization",function(e){return"".concat(VP," ").concat(e)}(n)),r}async function YP(e){const t=await e();return t.status>=500&&t.status<600?e():t}function $P(e){return new Promise((t=>{setTimeout(t,e)}))}const JP=/^[cdef][\w-]{21}$/;function XP(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){const t=(n=e,btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_"));var n;return t.substr(0,22)}(e);return JP.test(t)?t:""}catch(sj){return""}}function ZP(e){return"".concat(e.appName,"!").concat(e.appId)}const eR=new Map;function tR(e,t){const n=ZP(e);nR(n,t),function(e,t){const n=iR();n&&n.postMessage({key:e,fid:t});sR()}(n,t)}function nR(e,t){const n=eR.get(e);if(n)for(const r of n)r(t)}let rR=null;function iR(){return!rR&&"BroadcastChannel"in self&&(rR=new BroadcastChannel("[Firebase] FID Change"),rR.onmessage=e=>{nR(e.data.key,e.data.fid)}),rR}function sR(){0===eR.size&&rR&&(rR.close(),rR=null)}const oR="firebase-installations-store";let aR=null;function lR(){return aR||(aR=nr("firebase-installations-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(oR)}})),aR}async function cR(e,t){const n=ZP(e),r=(await lR()).transaction(oR,"readwrite"),i=r.objectStore(oR),s=await i.get(n);return await i.put(t,n),await r.done,s&&s.fid===t.fid||tR(e,t.fid),t}async function uR(e){const t=ZP(e),n=(await lR()).transaction(oR,"readwrite");await n.objectStore(oR).delete(t),await n.done}async function hR(e,t){const n=ZP(e),r=(await lR()).transaction(oR,"readwrite"),i=r.objectStore(oR),s=await i.get(n),o=t(s);return void 0===o?await i.delete(n):await i.put(o,n),await r.done,!o||s&&s.fid===o.fid||tR(e,o.fid),o}async function dR(e){let t;const n=await hR(e.appConfig,(n=>{const r=function(e){const t=e||{fid:XP(),registrationStatus:0};return gR(t)}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(qP.create("app-offline"))}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(e,t){try{const n=await async function(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e,{fid:i}=t;const s=HP(n),o=GP(n),a=r.getImmediate({optional:!0});if(a){const e=await a.getHeartbeatsHeader();e&&o.append("x-firebase-client",e)}const l={fid:i,authVersion:VP,appId:n.appId,sdkVersion:jP},c={method:"POST",headers:o,body:JSON.stringify(l)},u=await YP((()=>fetch(s,c)));if(u.ok){const e=await u.json();return{fid:e.fid||i,registrationStatus:2,refreshToken:e.refreshToken,authToken:WP(e.authToken)}}throw await KP("Create Installation",u)}(e,t);return cR(e.appConfig,n)}catch(WM){throw BP(WM)&&409===WM.customData.serverCode?await uR(e.appConfig):await cR(e.appConfig,{fid:t.fid,registrationStatus:0}),WM}}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:fR(e)}:{installationEntry:t}}(e,r);return t=i.registrationPromise,i.installationEntry}));return""===n.fid?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function fR(e){let t=await pR(e.appConfig);for(;1===t.registrationStatus;)await $P(100),t=await pR(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await dR(e);return n||t}return t}function pR(e){return hR(e,(e=>{if(!e)throw qP.create("installation-not-found");return gR(e)}))}function gR(e){return 1===(t=e).registrationStatus&&t.registrationTime+UP<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function mR(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e;const i=function(e,t){let{fid:n}=t;return"".concat(HP(e),"/").concat(n,"/authTokens:generate")}(n,t),s=QP(n,t),o=r.getImmediate({optional:!0});if(o){const e=await o.getHeartbeatsHeader();e&&s.append("x-firebase-client",e)}const a={installation:{sdkVersion:jP,appId:n.appId}},l={method:"POST",headers:s,body:JSON.stringify(a)},c=await YP((()=>fetch(i,l)));if(c.ok){return WP(await c.json())}throw await KP("Generate Auth Token",c)}async function yR(e){let t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=await hR(e.appConfig,(r=>{if(!_R(r))throw qP.create("not-registered");const i=r.authToken;if(!n&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+zP}(e)}(i))return r;if(1===i.requestStatus)return t=async function(e,t){let n=await vR(e.appConfig);for(;1===n.authToken.requestStatus;)await $P(100),n=await vR(e.appConfig);const r=n.authToken;return 0===r.requestStatus?yR(e,t):r}(e,n),r;{if(!navigator.onLine)throw qP.create("app-offline");const n=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(r);return t=async function(e,t){try{const n=await mR(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return await cR(e.appConfig,r),n}catch(WM){if(!BP(WM)||401!==WM.customData.serverCode&&404!==WM.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await cR(e.appConfig,n)}else await uR(e.appConfig);throw WM}}(e,n),n}}));return t?await t:r.authToken}function vR(e){return hR(e,(e=>{if(!_R(e))throw qP.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+UP<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var n}))}function _R(e){return void 0!==e&&2===e.registrationStatus}async function wR(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e;await async function(e){const{registrationPromise:t}=await dR(e);t&&await t}(n);return(await yR(n,t)).token}function bR(e){return qP.create("missing-app-config-values",{valueName:e})}const TR="installations",IR=e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw bR("App Configuration");if(!e.name)throw bR("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw bR(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:Kr(t,"heartbeat"),_delete:()=>Promise.resolve()}},SR=e=>{const t=Kr(e.getProvider("app").getImmediate(),TR).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await dR(t);return r?r.catch(console.error):yR(t).catch(console.error),n.fid}(t),getToken:e=>wR(t,e)}};Wr(new Dn(TR,IR,"PUBLIC")),Wr(new Dn("installations-internal",SR,"PRIVATE")),ai(MP,FP),ai(MP,FP,"esm2017");const ER="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",kR="google.c.a.c_id",CR=1e4;var NR,xR;function AR(e){const t=new Uint8Array(e);return btoa(String.fromCharCode(...t)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function PR(e){const t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),r=new Uint8Array(n.length);for(let i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}!function(e){e[e.DATA_MESSAGE=1]="DATA_MESSAGE",e[e.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"}(NR||(NR={})),function(e){e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked"}(xR||(xR={}));const RR="fcm_token_details_db",DR="fcm_token_object_Store";const OR="firebase-messaging-store";let LR=null;function MR(){return LR||(LR=nr("firebase-messaging-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(OR)}})),LR}async function FR(e){const t=jR(e),n=await MR(),r=await n.transaction(OR).objectStore(OR).get(t);if(r)return r;{const t=await async function(e){if("databases"in indexedDB){const e=(await indexedDB.databases()).map((e=>e.name));if(!e.includes(RR))return null}let t=null;return(await nr(RR,5,{upgrade:async(n,r,i,s)=>{var o;if(r<2)return;if(!n.objectStoreNames.contains(DR))return;const a=s.objectStore(DR),l=await a.index("fcmSenderId").get(e);if(await a.clear(),l)if(2===r){const e=l;if(!e.auth||!e.p256dh||!e.endpoint)return;t={token:e.fcmToken,createTime:null!==(o=e.createTime)&&void 0!==o?o:Date.now(),subscriptionOptions:{auth:e.auth,p256dh:e.p256dh,endpoint:e.endpoint,swScope:e.swScope,vapidKey:"string"===typeof e.vapidKey?e.vapidKey:AR(e.vapidKey)}}}else if(3===r){const e=l;t={token:e.fcmToken,createTime:e.createTime,subscriptionOptions:{auth:AR(e.auth),p256dh:AR(e.p256dh),endpoint:e.endpoint,swScope:e.swScope,vapidKey:AR(e.vapidKey)}}}else if(4===r){const e=l;t={token:e.fcmToken,createTime:e.createTime,subscriptionOptions:{auth:AR(e.auth),p256dh:AR(e.p256dh),endpoint:e.endpoint,swScope:e.swScope,vapidKey:AR(e.vapidKey)}}}}})).close(),await rr(RR),await rr("fcm_vapid_details_db"),await rr("undefined"),function(e){if(!e||!e.subscriptionOptions)return!1;const{subscriptionOptions:t}=e;return"number"===typeof e.createTime&&e.createTime>0&&"string"===typeof e.token&&e.token.length>0&&"string"===typeof t.auth&&t.auth.length>0&&"string"===typeof t.p256dh&&t.p256dh.length>0&&"string"===typeof t.endpoint&&t.endpoint.length>0&&"string"===typeof t.swScope&&t.swScope.length>0&&"string"===typeof t.vapidKey&&t.vapidKey.length>0}(t)?t:null}(e.appConfig.senderId);if(t)return await UR(e,t),t}}async function UR(e,t){const n=jR(e),r=(await MR()).transaction(OR,"readwrite");return await r.objectStore(OR).put(t,n),await r.done,t}function jR(e){let{appConfig:t}=e;return t.appId}const VR=new ln("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});async function zR(e,t){const n={method:"DELETE",headers:await BR(e)};try{const r=await fetch("".concat(qR(e.appConfig),"/").concat(t),n),i=await r.json();if(i.error){const e=i.error.message;throw VR.create("token-unsubscribe-failed",{errorInfo:e})}}catch(r){throw VR.create("token-unsubscribe-failed",{errorInfo:null===r||void 0===r?void 0:r.toString()})}}function qR(e){let{projectId:t}=e;return"".concat("https://fcmregistrations.googleapis.com/v1","/projects/").concat(t,"/registrations")}async function BR(e){let{appConfig:t,installations:n}=e;const r=await n.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":"FIS ".concat(r)})}function HR(e){let{p256dh:t,auth:n,endpoint:r,vapidKey:i}=e;const s={web:{endpoint:r,auth:n,p256dh:t}};return i!==ER&&(s.web.applicationPubKey=i),s}async function WR(e){const t=await async function(e,t){const n=await e.pushManager.getSubscription();if(n)return n;return e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:PR(t)})}(e.swRegistration,e.vapidKey),n={vapidKey:e.vapidKey,swScope:e.swRegistration.scope,endpoint:t.endpoint,auth:AR(t.getKey("auth")),p256dh:AR(t.getKey("p256dh"))},r=await FR(e.firebaseDependencies);if(r){if(function(e,t){const n=t.vapidKey===e.vapidKey,r=t.endpoint===e.endpoint,i=t.auth===e.auth,s=t.p256dh===e.p256dh;return n&&r&&i&&s}(r.subscriptionOptions,n))return Date.now()>=r.createTime+6048e5?async function(e,t){try{const n=await async function(e,t){const n=await BR(e),r=HR(t.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)};let s;try{const n=await fetch("".concat(qR(e.appConfig),"/").concat(t.token),i);s=await n.json()}catch(o){throw VR.create("token-update-failed",{errorInfo:null===o||void 0===o?void 0:o.toString()})}if(s.error){const e=s.error.message;throw VR.create("token-update-failed",{errorInfo:e})}if(!s.token)throw VR.create("token-update-no-token");return s.token}(e.firebaseDependencies,t),r=Object.assign(Object.assign({},t),{token:n,createTime:Date.now()});return await UR(e.firebaseDependencies,r),n}catch(WM){throw WM}}(e,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await zR(e.firebaseDependencies,r.token)}catch(WM){console.warn(WM)}return GR(e.firebaseDependencies,n)}return GR(e.firebaseDependencies,n)}async function KR(e){const t=await FR(e.firebaseDependencies);t&&(await zR(e.firebaseDependencies,t.token),await async function(e){const t=jR(e),n=(await MR()).transaction(OR,"readwrite");await n.objectStore(OR).delete(t),await n.done}(e.firebaseDependencies));const n=await e.swRegistration.pushManager.getSubscription();return!n||n.unsubscribe()}async function GR(e,t){const n=await async function(e,t){const n=await BR(e),r=HR(t),i={method:"POST",headers:n,body:JSON.stringify(r)};let s;try{const t=await fetch(qR(e.appConfig),i);s=await t.json()}catch(o){throw VR.create("token-subscribe-failed",{errorInfo:null===o||void 0===o?void 0:o.toString()})}if(s.error){const e=s.error.message;throw VR.create("token-subscribe-failed",{errorInfo:e})}if(!s.token)throw VR.create("token-subscribe-no-token");return s.token}(e,t),r={token:n,createTime:Date.now(),subscriptionOptions:t};return await UR(e,r),r.token}function QR(e){const t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcmMessageId};return function(e,t){if(!t.notification)return;e.notification={};const n=t.notification.title;n&&(e.notification.title=n);const r=t.notification.body;r&&(e.notification.body=r);const i=t.notification.image;i&&(e.notification.image=i);const s=t.notification.icon;s&&(e.notification.icon=s)}(t,e),function(e,t){if(!t.data)return;e.data=t.data}(t,e),function(e,t){var n,r,i,s,o;if(!t.fcmOptions&&!(null===(n=t.notification)||void 0===n?void 0:n.click_action))return;e.fcmOptions={};const a=null!==(i=null===(r=t.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==i?i:null===(s=t.notification)||void 0===s?void 0:s.click_action;a&&(e.fcmOptions.link=a);const l=null===(o=t.fcmOptions)||void 0===o?void 0:o.analytics_label;l&&(e.fcmOptions.analyticsLabel=l)}(t,e),t}function YR(e){return VR.create("missing-app-config-values",{valueName:e})}!function(e,t){const n=[];for(let r=0;r<e.length;r++)n.push(e.charAt(r)),r<t.length&&n.push(t.charAt(r));n.join("")}("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class $R{constructor(e,t,n){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const r=function(e){if(!e||!e.options)throw YR("App Configuration Object");if(!e.name)throw YR("App Name");const t=["projectId","apiKey","appId","messagingSenderId"],{options:n}=e;for(const r of t)if(!n[r])throw YR(r);return{appName:e.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:r,installations:t,analyticsProvider:n}}_delete(){return Promise.resolve()}}async function JR(e){try{e.swRegistration=await navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"}),e.swRegistration.update().catch((()=>{})),await async function(e){return new Promise(((t,n)=>{const r=setTimeout((()=>n(new Error("Service worker not registered after ".concat(CR," ms")))),CR),i=e.installing||e.waiting;e.active?(clearTimeout(r),t()):i?i.onstatechange=e=>{var n;"activated"===(null===(n=e.target)||void 0===n?void 0:n.state)&&(i.onstatechange=null,clearTimeout(r),t())}:(clearTimeout(r),n(new Error("No incoming service worker found.")))}))}(e.swRegistration)}catch(WM){throw VR.create("failed-service-worker-registration",{browserErrorMessage:null===WM||void 0===WM?void 0:WM.message})}}async function XR(e,t){if(!navigator)throw VR.create("only-available-in-window");if("default"===Notification.permission&&await Notification.requestPermission(),"granted"!==Notification.permission)throw VR.create("permission-blocked");return await async function(e,t){t?e.vapidKey=t:e.vapidKey||(e.vapidKey=ER)}(e,null===t||void 0===t?void 0:t.vapidKey),await async function(e,t){if(t||e.swRegistration||await JR(e),t||!e.swRegistration){if(!(t instanceof ServiceWorkerRegistration))throw VR.create("invalid-sw-registration");e.swRegistration=t}}(e,null===t||void 0===t?void 0:t.serviceWorkerRegistration),WR(e)}async function ZR(e,t,n){const r=function(e){switch(e){case xR.NOTIFICATION_CLICKED:return"notification_open";case xR.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(t);(await e.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[kR],message_name:n["google.c.a.c_l"],message_time:n["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)})}async function eD(e,t){const n=t.data;if(!n.isFirebaseMessaging)return;e.onMessageHandler&&n.messageType===xR.PUSH_RECEIVED&&("function"===typeof e.onMessageHandler?e.onMessageHandler(QR(n)):e.onMessageHandler.next(QR(n)));const r=n.data;(function(e){return"object"===typeof e&&!!e&&kR in e})(r)&&"1"===r["google.c.a.e"]&&await ZR(e,n.messageType,r)}const tD="@firebase/messaging",nD="0.12.20",rD=e=>{const t=new $R(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",(e=>eD(t,e))),t},iD=e=>{const t=e.getProvider("messaging").getImmediate();return{getToken:e=>XR(t,e)}};function sD(e){return async function(e){if(!navigator)throw VR.create("only-available-in-window");return e.swRegistration||await JR(e),KR(e)}(e=Rn(e))}function oD(e,t){return function(e,t){if(!navigator)throw VR.create("only-available-in-window");return e.onMessageHandler=t,()=>{e.onMessageHandler=null}}(e=Rn(e),t)}Wr(new Dn("messaging",rD,"PUBLIC")),Wr(new Dn("messaging-internal",iD,"PRIVATE")),ai(tD,nD),ai(tD,nD,"esm2017");const aD="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",lD="FCM_MSG";var cD,uD;function hD(e){const t=new Uint8Array(e);return btoa(String.fromCharCode(...t)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function dD(e){const t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),r=new Uint8Array(n.length);for(let i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}!function(e){e[e.DATA_MESSAGE=1]="DATA_MESSAGE",e[e.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"}(cD||(cD={})),function(e){e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked"}(uD||(uD={}));const fD="fcm_token_details_db",pD="fcm_token_object_Store";const gD="firebase-messaging-store";let mD=null;function yD(){return mD||(mD=nr("firebase-messaging-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(gD)}})),mD}async function vD(e){const t=wD(e),n=await yD(),r=await n.transaction(gD).objectStore(gD).get(t);if(r)return r;{const t=await async function(e){if("databases"in indexedDB){const e=(await indexedDB.databases()).map((e=>e.name));if(!e.includes(fD))return null}let t=null;return(await nr(fD,5,{upgrade:async(n,r,i,s)=>{var o;if(r<2)return;if(!n.objectStoreNames.contains(pD))return;const a=s.objectStore(pD),l=await a.index("fcmSenderId").get(e);if(await a.clear(),l)if(2===r){const e=l;if(!e.auth||!e.p256dh||!e.endpoint)return;t={token:e.fcmToken,createTime:null!==(o=e.createTime)&&void 0!==o?o:Date.now(),subscriptionOptions:{auth:e.auth,p256dh:e.p256dh,endpoint:e.endpoint,swScope:e.swScope,vapidKey:"string"===typeof e.vapidKey?e.vapidKey:hD(e.vapidKey)}}}else if(3===r){const e=l;t={token:e.fcmToken,createTime:e.createTime,subscriptionOptions:{auth:hD(e.auth),p256dh:hD(e.p256dh),endpoint:e.endpoint,swScope:e.swScope,vapidKey:hD(e.vapidKey)}}}else if(4===r){const e=l;t={token:e.fcmToken,createTime:e.createTime,subscriptionOptions:{auth:hD(e.auth),p256dh:hD(e.p256dh),endpoint:e.endpoint,swScope:e.swScope,vapidKey:hD(e.vapidKey)}}}}})).close(),await rr(fD),await rr("fcm_vapid_details_db"),await rr("undefined"),function(e){if(!e||!e.subscriptionOptions)return!1;const{subscriptionOptions:t}=e;return"number"===typeof e.createTime&&e.createTime>0&&"string"===typeof e.token&&e.token.length>0&&"string"===typeof t.auth&&t.auth.length>0&&"string"===typeof t.p256dh&&t.p256dh.length>0&&"string"===typeof t.endpoint&&t.endpoint.length>0&&"string"===typeof t.swScope&&t.swScope.length>0&&"string"===typeof t.vapidKey&&t.vapidKey.length>0}(t)?t:null}(e.appConfig.senderId);if(t)return await _D(e,t),t}}async function _D(e,t){const n=wD(e),r=(await yD()).transaction(gD,"readwrite");return await r.objectStore(gD).put(t,n),await r.done,t}function wD(e){let{appConfig:t}=e;return t.appId}const bD=new ln("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});async function TD(e,t){const n={method:"DELETE",headers:await SD(e)};try{const r=await fetch("".concat(ID(e.appConfig),"/").concat(t),n),i=await r.json();if(i.error){const e=i.error.message;throw bD.create("token-unsubscribe-failed",{errorInfo:e})}}catch(r){throw bD.create("token-unsubscribe-failed",{errorInfo:null===r||void 0===r?void 0:r.toString()})}}function ID(e){let{projectId:t}=e;return"".concat("https://fcmregistrations.googleapis.com/v1","/projects/").concat(t,"/registrations")}async function SD(e){let{appConfig:t,installations:n}=e;const r=await n.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":"FIS ".concat(r)})}function ED(e){let{p256dh:t,auth:n,endpoint:r,vapidKey:i}=e;const s={web:{endpoint:r,auth:n,p256dh:t}};return i!==aD&&(s.web.applicationPubKey=i),s}async function kD(e){const t=await async function(e,t){const n=await e.pushManager.getSubscription();if(n)return n;return e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:dD(t)})}(e.swRegistration,e.vapidKey),n={vapidKey:e.vapidKey,swScope:e.swRegistration.scope,endpoint:t.endpoint,auth:hD(t.getKey("auth")),p256dh:hD(t.getKey("p256dh"))},r=await vD(e.firebaseDependencies);if(r){if(function(e,t){const n=t.vapidKey===e.vapidKey,r=t.endpoint===e.endpoint,i=t.auth===e.auth,s=t.p256dh===e.p256dh;return n&&r&&i&&s}(r.subscriptionOptions,n))return Date.now()>=r.createTime+6048e5?async function(e,t){try{const n=await async function(e,t){const n=await SD(e),r=ED(t.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)};let s;try{const n=await fetch("".concat(ID(e.appConfig),"/").concat(t.token),i);s=await n.json()}catch(o){throw bD.create("token-update-failed",{errorInfo:null===o||void 0===o?void 0:o.toString()})}if(s.error){const e=s.error.message;throw bD.create("token-update-failed",{errorInfo:e})}if(!s.token)throw bD.create("token-update-no-token");return s.token}(e.firebaseDependencies,t),r=Object.assign(Object.assign({},t),{token:n,createTime:Date.now()});return await _D(e.firebaseDependencies,r),n}catch(WM){throw WM}}(e,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await TD(e.firebaseDependencies,r.token)}catch(WM){console.warn(WM)}return ND(e.firebaseDependencies,n)}return ND(e.firebaseDependencies,n)}async function CD(e){const t=await vD(e.firebaseDependencies);t&&(await TD(e.firebaseDependencies,t.token),await async function(e){const t=wD(e),n=(await yD()).transaction(gD,"readwrite");await n.objectStore(gD).delete(t),await n.done}(e.firebaseDependencies));const n=await e.swRegistration.pushManager.getSubscription();return!n||n.unsubscribe()}async function ND(e,t){const n=await async function(e,t){const n=await SD(e),r=ED(t),i={method:"POST",headers:n,body:JSON.stringify(r)};let s;try{const t=await fetch(ID(e.appConfig),i);s=await t.json()}catch(o){throw bD.create("token-subscribe-failed",{errorInfo:null===o||void 0===o?void 0:o.toString()})}if(s.error){const e=s.error.message;throw bD.create("token-subscribe-failed",{errorInfo:e})}if(!s.token)throw bD.create("token-subscribe-no-token");return s.token}(e,t),r={token:n,createTime:Date.now(),subscriptionOptions:t};return await _D(e,r),r.token}async function xD(e,t){const n=function(e,t){var n,r;const i={};e.from&&(i.project_number=e.from);e.fcmMessageId&&(i.message_id=e.fcmMessageId);i.instance_id=t,e.notification?i.message_type=cD.DISPLAY_NOTIFICATION.toString():i.message_type=cD.DATA_MESSAGE.toString();i.sdk_platform=3..toString(),i.package_name=self.origin.replace(/(^\w+:|^)\/\//,""),!e.collapse_key||(i.collapse_key=e.collapse_key);i.event=1..toString(),!(null===(n=e.fcmOptions)||void 0===n?void 0:n.analytics_label)||(i.analytics_label=null===(r=e.fcmOptions)||void 0===r?void 0:r.analytics_label);return i}(t,await e.firebaseDependencies.installations.getId());!function(e,t,n){const r={};r.event_time_ms=Math.floor(Date.now()).toString(),r.source_extension_json_proto3=JSON.stringify({messaging_client_event:t}),!n||(r.compliance_data=function(e){const t={privacy_context:{prequest:{origin_associated_product_id:e}}};return t}(n));e.logEvents.push(r)}(e,n,t.productId)}async function AD(e,t){const n=function(e){let{data:t}=e;if(!t)return null;try{return t.json()}catch(n){return null}}(e);if(!n)return;t.deliveryMetricsExportedToBigQueryEnabled&&await xD(t,n);const r=await RD();if(function(e){return e.some((e=>"visible"===e.visibilityState&&!e.url.startsWith("chrome-extension://")))}(r))return function(e,t){t.isFirebaseMessaging=!0,t.messageType=uD.PUSH_RECEIVED;for(const n of e)n.postMessage(t)}(r,n);if(n.notification&&await function(e){var t;const{actions:n}=e,{maxActions:r}=Notification;n&&r&&n.length>r&&console.warn("This browser only supports ".concat(r," actions. The remaining actions will not be displayed."));return self.registration.showNotification(null!==(t=e.title)&&void 0!==t?t:"",e)}(function(e){const t=Object.assign({},e.notification);return t.data={[lD]:e},t}(n)),t&&t.onBackgroundMessageHandler){const e=function(e){const t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcmMessageId};return function(e,t){if(!t.notification)return;e.notification={};const n=t.notification.title;n&&(e.notification.title=n);const r=t.notification.body;r&&(e.notification.body=r);const i=t.notification.image;i&&(e.notification.image=i);const s=t.notification.icon;s&&(e.notification.icon=s)}(t,e),function(e,t){t.data&&(e.data=t.data)}(t,e),function(e,t){var n,r,i,s,o;if(!t.fcmOptions&&!(null===(n=t.notification)||void 0===n?void 0:n.click_action))return;e.fcmOptions={};const a=null!==(i=null===(r=t.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==i?i:null===(s=t.notification)||void 0===s?void 0:s.click_action;a&&(e.fcmOptions.link=a);const l=null===(o=t.fcmOptions)||void 0===o?void 0:o.analytics_label;l&&(e.fcmOptions.analyticsLabel=l)}(t,e),t}(n);"function"===typeof t.onBackgroundMessageHandler?await t.onBackgroundMessageHandler(e):t.onBackgroundMessageHandler.next(e)}}async function PD(e){var t,n;const r=null===(n=null===(t=e.notification)||void 0===t?void 0:t.data)||void 0===n?void 0:n[lD];if(!r)return;if(e.action)return;e.stopImmediatePropagation(),e.notification.close();const i=function(e){var t,n,r;const i=null!==(n=null===(t=e.fcmOptions)||void 0===t?void 0:t.link)&&void 0!==n?n:null===(r=e.notification)||void 0===r?void 0:r.click_action;if(i)return i;return function(e){return"object"===typeof e&&!!e&&"google.c.a.c_id"in e}(e.data)?self.location.origin:null}(r);if(!i)return;const s=new URL(i,self.location.href),o=new URL(self.location.origin);if(s.host!==o.host)return;let a=await async function(e){const t=await RD();for(const n of t){const t=new URL(n.url,self.location.href);if(e.host===t.host)return n}return null}(s);var l;return a?a=await a.focus():(a=await self.clients.openWindow(i),await(l=3e3,new Promise((e=>{setTimeout(e,l)})))),a?(r.messageType=uD.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,a.postMessage(r)):void 0}function RD(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function DD(e){return bD.create("missing-app-config-values",{valueName:e})}!function(e,t){const n=[];for(let r=0;r<e.length;r++)n.push(e.charAt(r)),r<t.length&&n.push(t.charAt(r));n.join("")}("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class OD{constructor(e,t,n){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const r=function(e){if(!e||!e.options)throw DD("App Configuration Object");if(!e.name)throw DD("App Name");const t=["projectId","apiKey","appId","messagingSenderId"],{options:n}=e;for(const r of t)if(!n[r])throw DD(r);return{appName:e.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:r,installations:t,analyticsProvider:n}}_delete(){return Promise.resolve()}}const LD=e=>{const t=new OD(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));return self.addEventListener("push",(e=>{e.waitUntil(AD(e,t))})),self.addEventListener("pushsubscriptionchange",(e=>{e.waitUntil(async function(e,t){var n,r;const{newSubscription:i}=e;if(!i)return void await CD(t);const s=await vD(t.firebaseDependencies);await CD(t),t.vapidKey=null!==(r=null===(n=null===s||void 0===s?void 0:s.subscriptionOptions)||void 0===n?void 0:n.vapidKey)&&void 0!==r?r:aD,await kD(t)}(e,t))})),self.addEventListener("notificationclick",(e=>{e.waitUntil(PD(e))})),t};function MD(e,t){return function(e,t){if(void 0!==self.document)throw bD.create("only-available-in-sw");return e.onBackgroundMessageHandler=t,()=>{e.onBackgroundMessageHandler=null}}(e=Rn(e),t)}Wr(new Dn("messaging-sw",LD,"PUBLIC"));class FD{constructor(e,t){this.app=e,this._delegate=t,this.app=e,this._delegate=t}async getToken(e){return async function(e,t){return XR(e=Rn(e),t)}(this._delegate,e)}async deleteToken(){return sD(this._delegate)}onMessage(e){return oD(this._delegate,e)}onBackgroundMessage(e){return MD(this._delegate,e)}}const UD=e=>self&&"ServiceWorkerGlobalScope"in self?new FD(e.getProvider("app-compat").getImmediate(),e.getProvider("messaging-sw").getImmediate()):new FD(e.getProvider("app-compat").getImmediate(),e.getProvider("messaging").getImmediate()),jD={isSupported:function(){return self&&"ServiceWorkerGlobalScope"in self?rn()&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"undefined"!==typeof window&&rn()&&on()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}};AI.INTERNAL.registerComponent(new Dn("messaging-compat",UD,"PUBLIC").setServiceProps(jD)),AI.registerVersion("@firebase/messaging-compat","0.2.20");const VD="firebasestorage.googleapis.com",zD="storageBucket";class qD extends an{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(WD(e),"Firebase Storage: ".concat(t," (").concat(WD(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,qD.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return WD(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var BD,HD;function WD(e){return"storage/"+e}function KD(){return new qD(BD.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function GD(){return new qD(BD.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function QD(){return new qD(BD.CANCELED,"User canceled the upload/download.")}function YD(){return new qD(BD.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function $D(e){return new qD(BD.INVALID_ARGUMENT,e)}function JD(){return new qD(BD.APP_DELETED,"The Firebase app was deleted.")}function XD(e){return new qD(BD.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ZD(e,t){return new qD(BD.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function eO(e){throw new qD(BD.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(BD||(BD={}));class tO{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=tO.makeFromUrl(e,t)}catch(WM){return new tO(e,"")}if(""===n.path)return n;throw r=e,new qD(BD.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function s(e){e.path_=decodeURIComponent(e.path)}const o=t.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(o,"/").concat("v[A-Za-z0-9_]+","/b/").concat(r,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp("^https?://".concat(t===VD?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(r,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:s}];for(let l=0;l<a.length;l++){const t=a[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new tO(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new qD(BD.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class nO{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function rO(e){return"string"===typeof e||e instanceof String}function iO(e){return sO()&&e instanceof Blob}function sO(){return"undefined"!==typeof Blob}function oO(e,t,n,r){if(r<t)throw $D("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw $D("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function aO(e,t,n){let r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function lO(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function cO(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(HD||(HD={}));class uO{constructor(e,t,n,r,i,s,o,a,l,c,u){let h=!(arguments.length>11&&void 0!==arguments[11])||arguments[11],d=arguments.length>12&&void 0!==arguments[12]&&arguments[12];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=s,this.callback_=o,this.errorCallback_=a,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=h,this.isUsingEmulator=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{if(t)return void e(!1,new hO(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===HD.NO_ERROR,i=n.getStatus();if(!t||cO(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===HD.ABORT;return void e(!1,new hO(!1,null,t))}const s=-1!==this.successCodes_.indexOf(i);e(!0,new hO(s,n))}))},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(WM){r(WM)}else if(null!==i){const e=KD();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?JD():QD())}else{r(GD())}};this.canceled_?t(0,new hO(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return 2===a}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function h(t){i=setTimeout((()=>{i=null,e(f,l())}),t)}function d(){s&&clearTimeout(s)}function f(e){if(c)return void d();for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return d(),void u.call(null,e,...n);if(l()||o)return d(),void u.call(null,e,...n);let s;r<64&&(r*=2),1===a?(a=2,s=0):s=1e3*(r+Math.random()),h(s)}let p=!1;function g(e){p||(p=!0,d(),c||(null!==i?(e||(a=2),clearTimeout(i),h(0)):e||(a=1)))}return h(0),s=setTimeout((()=>{o=!0,g(!0)}),n),g}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class hO{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function dO(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function fO(){const e=dO();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(sO())return new Blob(n);throw new qD(BD.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function pO(e){if("undefined"===typeof atob)throw t="base-64",new qD(BD.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}const gO={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class mO{constructor(e,t){this.data=e,this.contentType=t||null}}function yO(e,t){switch(e){case gO.RAW:return new mO(vO(t));case gO.BASE64:case gO.BASE64URL:return new mO(_O(e,t));case gO.DATA_URL:return new mO(function(e){const t=new wO(e);return t.base64?_O(gO.BASE64,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(WM){throw ZD(gO.DATA_URL,"Malformed data URL.")}return vO(t)}(t.rest)}(t),new wO(t).contentType)}throw KD()}function vO(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function _O(e,t){switch(e){case gO.BASE64:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw ZD(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case gO.BASE64URL:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw ZD(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=pO(t)}catch(WM){if(WM.message.includes("polyfill"))throw WM;throw ZD(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class wO{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw ZD(gO.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){const n=e.length>=t.length;if(!n)return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class bO{constructor(e,t){let n=0,r="";iO(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(iO(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new bO(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new bO(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(sO()){const e=t.map((e=>e instanceof bO?e.data_:e));return new bO(fO.apply(null,e))}{const e=t.map((e=>rO(e)?yO(gO.RAW,e).data:e.data_));let n=0;e.forEach((e=>{n+=e.byteLength}));const r=new Uint8Array(n);let i=0;return e.forEach((e=>{for(let t=0;t<e.length;t++)r[i++]=e[t]})),new bO(r,!0)}}uploadData(){return this.data_}}function TO(e){let t;try{t=JSON.parse(e)}catch(WM){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function IO(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function SO(e,t){return t}class EO{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||SO}}let kO=null;function CO(){if(kO)return kO;const e=[];e.push(new EO("bucket")),e.push(new EO("generation")),e.push(new EO("metageneration")),e.push(new EO("name","fullPath",!0));const t=new EO("name");t.xform=function(e,t){return function(e){return!rO(e)||e.length<2?e:IO(e)}(t)},e.push(t);const n=new EO("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new EO("timeCreated")),e.push(new EO("updated")),e.push(new EO("md5Hash",null,!0)),e.push(new EO("cacheControl",null,!0)),e.push(new EO("contentDisposition",null,!0)),e.push(new EO("contentEncoding",null,!0)),e.push(new EO("contentLanguage",null,!0)),e.push(new EO("contentType",null,!0)),e.push(new EO("metadata","customMetadata",!0)),kO=e,kO}function NO(e,t,n){const r={type:"file"},i=n.length;for(let s=0;s<i;s++){const e=n[s];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,i=new tO(n,r);return t._makeStorageReference(i)}})}(r,e),r}function xO(e,t,n){const r=TO(t);if(null===r)return null;return NO(e,r,n)}function AO(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const r=t[i];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}const PO="prefixes",RO="items";function DO(e,t,n){const r=TO(n);if(null===r)return null;return function(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[PO])for(const i of n[PO]){const n=i.replace(/\/$/,""),s=e._makeStorageReference(new tO(t,n));r.prefixes.push(s)}if(n[RO])for(const i of n[RO]){const n=e._makeStorageReference(new tO(t,i.name));r.items.push(n)}return r}(e,t,r)}class OO{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function LO(e){if(!e)throw KD()}function MO(e,t){return function(n,r){const i=xO(e,r,t);return LO(null!==i),i}}function FO(e,t){return function(n,r){const i=xO(e,r,t);return LO(null!==i),function(e,t,n,r){const i=TO(t);if(null===i)return null;if(!rO(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map((t=>{const i=e.bucket,s=e.fullPath;return aO("/b/"+o(i)+"/o/"+o(s),n,r)+lO({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function UO(e){return function(t,n){let r;var i,s;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new qD(BD.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new qD(BD.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(s=e.bucket,r=new qD(BD.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new qD(BD.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function jO(e){const t=UO(e);return function(n,r){let i=t(n,r);var s;return 404===n.getStatus()&&(s=e.path,i=new qD(BD.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function VO(e,t,n){const r=aO(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,s=new OO(r,"GET",MO(e,n),i);return s.errorHandler=jO(t),s}function zO(e,t,n,r,i){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",n&&n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=aO(t.bucketOnlyServerUrl(),e.host,e._protocol),a=e.maxOperationRetryTime,l=new OO(o,"GET",function(e,t){return function(n,r){const i=DO(e,t,r);return LO(null!==i),i}}(e,t.bucket),a);return l.urlParams=s,l.errorHandler=UO(t),l}function qO(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function BO(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};const a=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+a;const l=qO(t,r,i),c="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+AO(l,n)+"\r\n--"+a+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",u="\r\n--"+a+"--",h=bO.getBlob(c,r,u);if(null===h)throw YD();const d={name:l.fullPath},f=aO(s,e.host,e._protocol),p=e.maxUploadRetryTime,g=new OO(f,"POST",MO(e,n),p);return g.urlParams=d,g.headers=o,g.body=h.uploadData(),g.errorHandler=UO(t),g}class HO{constructor(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null}}function WO(e,t){let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(WM){LO(!1)}return LO(!!n&&-1!==(t||["active"]).indexOf(n)),n}const KO=262144;function GO(e,t,n,r,i,s,o,a){const l=new HO(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw new qD(BD.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");const c=l.total-l.current;let u=c;i>0&&(u=Math.min(u,i));const h=l.current,d=h+u;let f="";f=0===u?"finalize":c===u?"upload, finalize":"upload";const p={"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":"".concat(l.current)},g=r.slice(h,d);if(null===g)throw YD();const m=t.maxUploadRetryTime,y=new OO(n,"POST",(function(e,n){const i=WO(e,["active","final"]),o=l.current+u,a=r.size();let c;return c="final"===i?MO(t,s)(e,n):null,new HO(o,a,"final"===i,c)}),m);return y.headers=p,y.body=g.uploadData(),y.progressCallback=a||null,y.errorHandler=UO(e),y}const QO={STATE_CHANGED:"state_changed"},YO={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function $O(e){switch(e){case"running":case"pausing":case"canceling":return YO.RUNNING;case"paused":return YO.PAUSED;case"success":return YO.SUCCESS;case"canceled":return YO.CANCELED;default:return YO.ERROR}}class JO{constructor(e,t,n){const r=function(e){return"function"===typeof e}(e)||null!=t||null!=n;if(r)this.next=e,this.error=null!==t&&void 0!==t?t:void 0,this.complete=null!==n&&void 0!==n?n:void 0;else{const t=e;this.next=t.next,this.error=t.error,this.complete=t.complete}}}function XO(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((()=>e(...n)))}}class ZO{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=HD.NO_ERROR,this.sendPromise_=new Promise((e=>{this.xhr_.addEventListener("abort",(()=>{this.errorCode_=HD.ABORT,e()})),this.xhr_.addEventListener("error",(()=>{this.errorCode_=HD.NETWORK_ERROR,e()})),this.xhr_.addEventListener("load",(()=>{e()}))}))}send(e,t,n,r,i){if(this.sent_)throw eO("cannot .send() more than once");if(qt(e)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw eO("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw eO("cannot .getStatus() before sending");try{return this.xhr_.status}catch(WM){return-1}}getResponse(){if(!this.sent_)throw eO("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw eO("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class eL extends ZO{initXhr(){this.xhr_.responseType="text"}}function tL(){return new eL}class nL{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=n,this._mappings=CO(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=e=>{if(this._request=void 0,this._chunkMultiplier=1,e._codeEquals(BD.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const t=this.isExponentialBackoffExpired();if(cO(e.status,[])){if(!t)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();e=GD()}this._error=e,this._transition("error")}},this._metadataErrorHandler=e=>{this._request=void 0,e._codeEquals(BD.CANCELED)?this.completeTransitions_():(this._error=e,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise(((e,t)=>{this._resolve=e,this._reject=t,this._start()})),this._promise.then(null,(()=>{}))}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout((()=>{this.pendingTimeout=void 0,this._continueUpload()}),this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((t=>{let[n,r]=t;switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}}))}_createResumable(){this._resolveToken(((e,t)=>{const n=function(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o=qO(t,r,i),a={name:o.fullPath},l=aO(s,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},u=AO(o,n),h=e.maxUploadRetryTime,d=new OO(l,"POST",(function(e){let t;WO(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(WM){LO(!1)}return LO(rO(t)),t}),h);return d.urlParams=a,d.headers=c,d.body=u,d.errorHandler=UO(t),d}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,tL,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._uploadUrl=e,this._needToFetchStatus=!1,this.completeTransitions_()}),this._errorHandler)}))}_fetchStatus(){const e=this._uploadUrl;this._resolveToken(((t,n)=>{const r=function(e,t,n,r){const i=e.maxUploadRetryTime,s=new OO(n,"POST",(function(e){const t=WO(e,["active","final"]);let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(WM){LO(!1)}n||LO(!1);const i=Number(n);return LO(!isNaN(i)),new HO(i,r.size(),"final"===t)}),i);return s.headers={"X-Goog-Upload-Command":"query"},s.errorHandler=UO(t),s}(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(r,tL,t,n);this._request=i,i.getPromise().then((e=>{this._request=void 0,this._updateProgress(e.current),this._needToFetchStatus=!1,e.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()}),this._errorHandler)}))}_continueUpload(){const e=KO*this._chunkMultiplier,t=new HO(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken(((r,i)=>{let s;try{s=GO(this._ref._location,this._ref.storage,n,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(WM){return this._error=WM,void this._transition("error")}const o=this._ref.storage._makeRequest(s,tL,r,i,!1);this._request=o,o.getPromise().then((e=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(e.current),e.finalized?(this._metadata=e.metadata,this._transition("success")):this.completeTransitions_()}),this._errorHandler)}))}_increaseMultiplier(){2*(KO*this._chunkMultiplier)<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken(((e,t)=>{const n=VO(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(n,tL,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._metadata=e,this._transition("success")}),this._metadataErrorHandler)}))}_oneShotUpload(){this._resolveToken(((e,t)=>{const n=BO(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,tL,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._metadata=e,this._updateProgress(this._blob.size()),this._transition("success")}),this._errorHandler)}))}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=QD(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=$O(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,n,r){const i=new JO(t||void 0,n||void 0,r||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise();this._observers.slice().forEach((e=>{this._notifyObserver(e)}))}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch($O(this._state)){case YO.SUCCESS:XO(this._resolve.bind(null,this.snapshot))();break;case YO.CANCELED:case YO.ERROR:XO(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch($O(this._state)){case YO.RUNNING:case YO.PAUSED:e.next&&XO(e.next.bind(e,this.snapshot))();break;case YO.SUCCESS:e.complete&&XO(e.complete.bind(e))();break;default:e.error&&XO(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class rL{constructor(e,t){this._service=e,this._location=t instanceof tO?t:tO.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new rL(e,t)}get root(){const e=new tO(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return IO(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new tO(this._location.bucket,e);return new rL(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw XD(e)}}function iL(e){const t={prefixes:[],items:[]};return sL(e,t).then((()=>t))}async function sL(e,t,n){const r={pageToken:n},i=await oL(e,r);t.prefixes.push(...i.prefixes),t.items.push(...i.items),null!=i.nextPageToken&&await sL(e,t,i.nextPageToken)}function oL(e,t){null!=t&&"number"===typeof t.maxResults&&oO("options.maxResults",1,1e3,t.maxResults);const n=t||{},r=zO(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,tL)}function aL(e,t){e._throwIfRoot("updateMetadata");const n=function(e,t,n,r){const i=aO(t.fullServerUrl(),e.host,e._protocol),s=AO(n,r),o=e.maxOperationRetryTime,a=new OO(i,"PATCH",MO(e,r),o);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=s,a.errorHandler=jO(t),a}(e.storage,e._location,t,CO());return e.storage.makeRequestWithTokens(n,tL)}function lL(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=aO(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,s=new OO(r,"GET",FO(e,n),i);return s.errorHandler=jO(t),s}(e.storage,e._location,CO());return e.storage.makeRequestWithTokens(t,tL).then((e=>{if(null===e)throw new qD(BD.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function cL(e){e._throwIfRoot("deleteObject");const t=function(e,t){const n=aO(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new OO(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=jO(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,tL)}function uL(e,t){const n=function(e,t){const n=t.split("/").filter((e=>e.length>0)).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new tO(e._location.bucket,n);return new rL(e.storage,r)}function hL(e,t){if(e instanceof pL){const n=e;if(null==n._bucket)throw new qD(BD.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+zD+"' property when initializing the app?");const r=new rL(n,n._bucket);return null!=t?hL(r,t):r}return void 0!==t?uL(e,t):e}function dL(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof pL)return new rL(e,t);throw $D("To use ref(service, url), the first argument must be a Storage instance.")}return hL(e,t)}function fL(e,t){const n=null===t||void 0===t?void 0:t[zD];return null==n?null:tO.makeFromBucketSpec(n,e)}class pL{constructor(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._isUsingEmulator=s,this._bucket=null,this._host=VD,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?tO.makeFromBucketSpec(r,this._host):fL(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=tO.makeFromBucketSpec(this._url,e):this._bucket=fL(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){oO("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){oO("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){if(Yr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new rL(this,e)}_makeRequest(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new nO(JD());{const s=function(e,t,n,r,i,s){let o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],a=arguments.length>7&&void 0!==arguments[7]&&arguments[7];const l=lO(e.urlParams),c=e.url+l,u=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(u,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(u,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(u,s),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(u,r),new uO(c,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o,a)}(e,this._appId,n,r,t,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(s),s.getPromise().then((()=>this._requests.delete(s)),(()=>this._requests.delete(s))),s}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const gL="@firebase/storage",mL="0.13.10",yL="storage";function vL(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new nL(e,new bO(t),n)}(e=Rn(e),t,n)}function _L(e){return function(e){e._throwIfRoot("getMetadata");const t=VO(e.storage,e._location,CO());return e.storage.makeRequestWithTokens(t,tL)}(e=Rn(e))}function wL(e,t){return dL(e=Rn(e),t)}function bL(e,t,n){!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n);const i=qt(t);i&&(Bt("https://".concat(e.host)),Gt("Storage",!0)),e._isUsingEmulator=!0,e._protocol=i?"https":"http";const{mockUserToken:s}=r;s&&(e._overrideAuthToken="string"===typeof s?s:Ht(s,e.app.options.projectId))}(e,t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})}function TL(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return new pL(r,i,s,n,ti)}Wr(new Dn(yL,TL,"PUBLIC").setMultipleInstances(!0)),ai(gL,mL,""),ai(gL,mL,"esm2017");class IL{constructor(e,t,n){this._delegate=e,this.task=t,this.ref=n}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class SL{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new IL(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then((t=>{if(e)return e(new IL(t,this,this._ref))}),t)}on(e,t,n,r){let i;return t&&(i="function"===typeof t?e=>t(new IL(e,this,this._ref)):{next:t.next?e=>t.next(new IL(e,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,i,n||void 0,r||void 0)}}class EL{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map((e=>new kL(e,this._service)))}get items(){return this._delegate.items.map((e=>new kL(e,this._service)))}get nextPageToken(){return this._delegate.nextPageToken||null}}class kL{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function(e,t){return uL(e,t)}(this._delegate,e);return new kL(t,this.storage)}get root(){return new kL(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new kL(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new SL(vL(this._delegate,e,t),this)}putString(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:gO.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");const r=yO(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new SL(new nL(this._delegate,new bO(r.data,!0),i),this)}listAll(){return function(e){return iL(e=Rn(e))}(this._delegate).then((e=>new EL(e,this.storage)))}list(e){return function(e,t){return oL(e=Rn(e),t)}(this._delegate,e||void 0).then((e=>new EL(e,this.storage)))}getMetadata(){return _L(this._delegate)}updateMetadata(e){return function(e,t){return aL(e=Rn(e),t)}(this._delegate,e)}getDownloadURL(){return function(e){return lL(e=Rn(e))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function(e){return cL(e=Rn(e))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw XD(e)}}class CL{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(NL(e))throw $D("ref() expected a child path but got a URL, use refFromURL instead.");return new kL(wL(this._delegate,e),this)}refFromURL(e){if(!NL(e))throw $D("refFromURL() expected a full URL but got a child path, use ref() instead.");try{tO.makeFromUrl(e,this._delegate.host)}catch(WM){throw $D("refFromUrl() expected a valid full URL but got an invalid one.")}return new kL(wL(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};bL(this._delegate,e,t,n)}}function NL(e){return/^[A-Za-z]+:\/\//.test(e)}function xL(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new CL(r,i)}!function(e){const t={TaskState:YO,TaskEvent:QO,StringFormat:gO,Storage:CL,Reference:kL};e.INTERNAL.registerComponent(new Dn("storage-compat",xL,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.3.20")}(AI);const AL="analytics",PL="https://www.googletagmanager.com/gtag/js",RL=new Bn("@firebase/analytics"),DL=new ln("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function OL(e){if(!e.startsWith(PL)){const t=DL.create("invalid-gtag-resource",{gtagURL:e});return RL.warn(t.message),""}return e}function LL(e){return Promise.all(e.map((e=>e.catch((e=>e)))))}function ML(e,t){const n=function(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}("firebase-js-sdk-policy",{createScriptURL:OL}),r=document.createElement("script"),i="".concat(PL,"?l=").concat(e,"&id=").concat(t);r.src=n?null===n||void 0===n?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function FL(e,t,n,r){return async function(i){try{for(var s=arguments.length,o=new Array(s>1?s-1:0),a=1;a<s;a++)o[a-1]=arguments[a];if("event"===i){const[r,i]=o;await async function(e,t,n,r,i){try{let s=[];if(i&&i.send_to){let e=i.send_to;Array.isArray(e)||(e=[e]);const r=await LL(n);for(const n of e){const e=r.find((e=>e.measurementId===n)),i=e&&t[e.appId];if(!i){s=[];break}s.push(i)}}0===s.length&&(s=Object.values(t)),await Promise.all(s),e("event",r,i||{})}catch(WM){RL.error(WM)}}(e,t,n,r,i)}else if("config"===i){const[i,s]=o;await async function(e,t,n,r,i,s){const o=r[i];try{if(o)await t[o];else{const e=(await LL(n)).find((e=>e.measurementId===i));e&&await t[e.appId]}}catch(WM){RL.error(WM)}e("config",i,s)}(e,t,n,r,i,s)}else if("consent"===i){const[t,n]=o;e("consent",t,n)}else if("get"===i){const[t,n,r]=o;e("get",t,n,r)}else if("set"===i){const[t]=o;e("set",t)}else e(i,...o)}catch(WM){RL.error(WM)}}}const UL=new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function jL(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function VL(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:UL,n=arguments.length>2?arguments[2]:void 0;const{appId:r,apiKey:i,measurementId:s}=e.options;if(!r)throw DL.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw DL.create("no-api-key")}const o=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new qL;return setTimeout((async()=>{a.abort()}),void 0!==n?n:6e4),zL({appId:r,apiKey:i,measurementId:s},o,a,t)}async function zL(e,t,n){let{throttleEndTimeMillis:r,backoffCount:i}=t,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:UL;var o;const{appId:a,measurementId:l}=e;try{await function(e,t){return new Promise(((n,r)=>{const i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener((()=>{clearTimeout(s),r(DL.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}(n,r)}catch(WM){if(l)return RL.warn("Timed out fetching this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(l)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null===WM||void 0===WM?void 0:WM.message,"]")),{appId:a,measurementId:l};throw WM}try{const t=await async function(e){var t;const{appId:n,apiKey:r}=e,i={method:"GET",headers:jL(r)},s="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),o=await fetch(s,i);if(200!==o.status&&304!==o.status){let e="";try{const n=await o.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(a){}throw DL.create("config-fetch-failed",{httpStatus:o.status,responseMessage:e})}return o.json()}(e);return s.deleteThrottleMetadata(a),t}catch(WM){const r=WM;if(!function(e){if(!(e instanceof an)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(r)){if(s.deleteThrottleMetadata(a),l)return RL.warn("Failed to fetch this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(l)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null===r||void 0===r?void 0:r.message,"]")),{appId:a,measurementId:l};throw WM}const c=503===Number(null===(o=null===r||void 0===r?void 0:r.customData)||void 0===o?void 0:o.httpStatus)?Pn(i,s.intervalMillis,30):Pn(i,s.intervalMillis),u={throttleEndTimeMillis:Date.now()+c,backoffCount:i+1};return s.setThrottleMetadata(a,u),RL.debug("Calling attemptFetch again in ".concat(c," millis")),zL(e,u,n,s)}}class qL{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach((e=>e()))}}let BL,HL;function WL(e){HL=e}function KL(e){BL=e}async function GL(e,t,n,r,i,s,o){var a;const l=VL(e);l.then((t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&RL.warn("The measurement ID in the local Firebase config (".concat(e.options.measurementId,")")+" does not match the measurement ID fetched from the server (".concat(t.measurementId,").")+" To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((e=>RL.error(e))),t.push(l);const c=async function(){if(!rn())return RL.warn(DL.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await sn()}catch(WM){return RL.warn(DL.create("indexeddb-unavailable",{errorInfo:null===WM||void 0===WM?void 0:WM.toString()}).message),!1}return!0}().then((e=>e?r.getId():void 0)),[u,h]=await Promise.all([l,c]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(PL)&&n.src.includes(e))return n;return null})(s)||ML(s,u.measurementId),HL&&(i("consent","default",HL),WL(void 0)),i("js",new Date);const d=null!==(a=null===o||void 0===o?void 0:o.config)&&void 0!==a?a:{};return d.origin="firebase",d.update=!0,null!=h&&(d.firebase_id=h),i("config",u.measurementId,d),BL&&(i("set",BL),KL(void 0)),u.measurementId}class QL{constructor(e){this.app=e}_delete(){return delete YL[this.app.options.appId],Promise.resolve()}}let YL={},$L=[];const JL={};let XL,ZL,eM="dataLayer",tM="gtag",nM=!1;function rM(e){if(nM)throw DL.create("already-initialized");e.dataLayerName&&(eM=e.dataLayerName),e.gtagName&&(tM=e.gtagName)}function iM(e,t,n){!function(){const e=[];if(Xt()&&e.push("This is a browser extension environment."),on()||e.push("Cookies are not available."),e.length>0){const t=e.map(((e,t)=>"(".concat(t+1,") ").concat(e))).join(" "),n=DL.create("invalid-analytics-context",{errorInfo:t});RL.warn(n.message)}}();const r=e.options.appId;if(!r)throw DL.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw DL.create("no-api-key");RL.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest'+" measurement ID for this Firebase app. Falling back to the measurement ID ".concat(e.options.measurementId)+' provided in the "measurementId" field in the local Firebase config.')}if(null!=YL[r])throw DL.create("already-exists",{id:r});if(!nM){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(eM);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,r,i){let s=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window[r].push(arguments)};return window[i]&&"function"===typeof window[i]&&(s=window[i]),window[i]=FL(s,e,t,n),{gtagCore:s,wrappedGtag:window[i]}}(YL,$L,JL,eM,tM);ZL=e,XL=t,nM=!0}YL[r]=GL(e,$L,JL,t,XL,eM,n);return new QL(e)}async function sM(){if(Xt())return!1;if(!on())return!1;if(!rn())return!1;try{return await sn()}catch(MS){return!1}}function oM(e,t,n){e=Rn(e),async function(e,t,n,r){if(r&&r.global)return e("set",{screen_name:n}),Promise.resolve();e("config",await t,{update:!0,screen_name:n})}(ZL,YL[e.app.options.appId],t,n).catch((e=>RL.error(e)))}function aM(e,t,n){e=Rn(e),async function(e,t,n,r){if(r&&r.global)return e("set",{user_id:n}),Promise.resolve();e("config",await t,{update:!0,user_id:n})}(ZL,YL[e.app.options.appId],t,n).catch((e=>RL.error(e)))}function lM(e,t,n){e=Rn(e),async function(e,t,n,r){if(r&&r.global){const t={};for(const e of Object.keys(n))t["user_properties.".concat(e)]=n[e];return e("set",t),Promise.resolve()}e("config",await t,{update:!0,user_properties:n})}(ZL,YL[e.app.options.appId],t,n).catch((e=>RL.error(e)))}function cM(e,t){e=Rn(e),async function(e,t){const n=await e;window["ga-disable-".concat(n)]=!t}(YL[e.app.options.appId],t).catch((e=>RL.error(e)))}function uM(e,t,n,r){e=Rn(e),async function(e,t,n,r,i){if(i&&i.global)e("event",n,r);else{const i=await t;e("event",n,Object.assign(Object.assign({},r),{send_to:i}))}}(ZL,YL[e.app.options.appId],t,n,r).catch((e=>RL.error(e)))}const hM="@firebase/analytics",dM="0.10.15";Wr(new Dn(AL,((e,t)=>{let{options:n}=t;return iM(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n)}),"PUBLIC")),Wr(new Dn("analytics-internal",(function(e){try{const t=e.getProvider(AL).getImmediate();return{logEvent:(e,n,r)=>uM(t,e,n,r)}}catch(WM){throw DL.create("interop-component-reg-failed",{reason:WM})}}),"PRIVATE")),ai(hM,dM),ai(hM,dM,"esm2017");class fM{constructor(e,t){this.app=e,this._delegate=t}logEvent(e,t,n){uM(this._delegate,e,t,n)}setCurrentScreen(e,t){oM(this._delegate,e,t)}setUserId(e,t){aM(this._delegate,e,t)}setUserProperties(e,t){lM(this._delegate,e,t)}setAnalyticsCollectionEnabled(e){cM(this._delegate,e)}}var pM;!function(e){e.ADD_SHIPPING_INFO="add_shipping_info",e.ADD_PAYMENT_INFO="add_payment_info",e.ADD_TO_CART="add_to_cart",e.ADD_TO_WISHLIST="add_to_wishlist",e.BEGIN_CHECKOUT="begin_checkout",e.CHECKOUT_PROGRESS="checkout_progress",e.EXCEPTION="exception",e.GENERATE_LEAD="generate_lead",e.LOGIN="login",e.PAGE_VIEW="page_view",e.PURCHASE="purchase",e.REFUND="refund",e.REMOVE_FROM_CART="remove_from_cart",e.SCREEN_VIEW="screen_view",e.SEARCH="search",e.SELECT_CONTENT="select_content",e.SELECT_ITEM="select_item",e.SELECT_PROMOTION="select_promotion",e.SET_CHECKOUT_OPTION="set_checkout_option",e.SHARE="share",e.SIGN_UP="sign_up",e.TIMING_COMPLETE="timing_complete",e.VIEW_CART="view_cart",e.VIEW_ITEM="view_item",e.VIEW_ITEM_LIST="view_item_list",e.VIEW_PROMOTION="view_promotion",e.VIEW_SEARCH_RESULTS="view_search_results"}(pM||(pM={}));const gM=e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("analytics").getImmediate();return new fM(t,n)};!function(){const e={Analytics:fM,settings:rM,isSupported:sM,EventName:pM};AI.INTERNAL.registerComponent(new Dn("analytics-compat",gM,"PUBLIC").setServiceProps(e).setMultipleInstances(!0))}(),AI.registerVersion("@firebase/analytics-compat","0.2.21");const mM="@firebase/remote-config",yM="0.6.3";class vM{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach((e=>e()))}}const _M="remote-config",wM=new ln("remoteconfig","Remote Config",{"already-initialized":"Remote Config already initialized","registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser","custom-signal-max-allowed-signals":"Setting more than {$maxSignals} custom signals is not supported."});const bM=["1","true","t","yes","y","on"];class TM{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this._source=e,this._value=t}asString(){return this._value}asBoolean(){return"static"!==this._source&&bM.indexOf(this._value.toLowerCase())>=0}asNumber(){if("static"===this._source)return 0;let e=Number(this._value);return isNaN(e)&&(e=0),e}getSource(){return this._source}}async function IM(e){const t=Rn(e),[n,r]=await Promise.all([t._storage.getLastSuccessfulFetchResponse(),t._storage.getActiveConfigEtag()]);return!!(n&&n.config&&n.eTag&&n.eTag!==r)&&(await Promise.all([t._storageCache.setActiveConfig(n.config),t._storage.setActiveConfigEtag(n.eTag)]),!0)}function SM(e){const t=Rn(e);return t._initializePromise||(t._initializePromise=t._storageCache.loadFromStorage().then((()=>{t._isInitializationComplete=!0}))),t._initializePromise}async function EM(e){const t=Rn(e),n=new vM;setTimeout((async()=>{n.abort()}),t.settings.fetchTimeoutMillis);const r=t._storageCache.getCustomSignals();r&&t._logger.debug("Fetching config with custom signals: ".concat(JSON.stringify(r)));try{await t._client.fetch({cacheMaxAgeMillis:t.settings.minimumFetchIntervalMillis,signal:n,customSignals:r}),await t._storageCache.setLastFetchStatus("success")}catch(WM){const n=function(e,t){return e instanceof an&&-1!==e.code.indexOf(t)}(WM,"fetch-throttle")?"throttle":"failure";throw await t._storageCache.setLastFetchStatus(n),WM}}function kM(e){const t=Rn(e);return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(Object.assign(Object.assign({},e),t))}(t._storageCache.getActiveConfig(),t.defaultConfig).reduce(((t,n)=>(t[n]=CM(e,n),t)),{})}function CM(e,t){const n=Rn(e);n._isInitializationComplete||n._logger.debug('A value was requested for key "'.concat(t,'" before SDK initialization completed.')+" Await on ensureInitialized if the intent was to get a previously activated value.");const r=n._storageCache.getActiveConfig();return r&&void 0!==r[t]?new TM("remote",r[t]):n.defaultConfig&&void 0!==n.defaultConfig[t]?new TM("default",String(n.defaultConfig[t])):(n._logger.debug('Returning static value for key "'.concat(t,'".')+" Define a default or remote value if this is unintentional."),new TM("static"))}class NM{constructor(e,t,n,r){this.client=e,this.storage=t,this.storageCache=n,this.logger=r}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const n=Date.now()-t,r=n<=e;return this.logger.debug("Config fetch cache check."+" Cache age millis: ".concat(n,".")+" Cache max age millis (minimumFetchIntervalMillis setting): ".concat(e,".")+" Is cache hit: ".concat(r,".")),r}async fetch(e){const[t,n]=await Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()]);if(n&&this.isCachedDataFresh(e.cacheMaxAgeMillis,t))return n;e.eTag=n&&n.eTag;const r=await this.client.fetch(e),i=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===r.status&&i.push(this.storage.setLastSuccessfulFetchResponse(r)),await Promise.all(i),r}}function xM(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:navigator;return e.languages&&e.languages[0]||e.language}class AM{constructor(e,t,n,r,i,s){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=s}async fetch(e){const[t,n]=await Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()]),r=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",i="".concat(r,"/v1/projects/").concat(this.projectId,"/namespaces/").concat(this.namespace,":fetch?key=").concat(this.apiKey),s={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},o={sdk_version:this.sdkVersion,app_instance_id:t,app_instance_id_token:n,app_id:this.appId,language_code:xM(),custom_signals:e.customSignals},a={method:"POST",headers:s,body:JSON.stringify(o)},l=fetch(i,a),c=new Promise(((t,n)=>{e.signal.addEventListener((()=>{const e=new Error("The operation was aborted.");e.name="AbortError",n(e)}))}));let u;try{await Promise.race([l,c]),u=await l}catch(g){let e="fetch-client-network";throw"AbortError"===(null===g||void 0===g?void 0:g.name)&&(e="fetch-timeout"),wM.create(e,{originalErrorMessage:null===g||void 0===g?void 0:g.message})}let h=u.status;const d=u.headers.get("ETag")||void 0;let f,p;if(200===u.status){let e;try{e=await u.json()}catch(g){throw wM.create("fetch-client-parse",{originalErrorMessage:null===g||void 0===g?void 0:g.message})}f=e.entries,p=e.state}if("INSTANCE_STATE_UNSPECIFIED"===p?h=500:"NO_CHANGE"===p?h=304:"NO_TEMPLATE"!==p&&"EMPTY_CONFIG"!==p||(f={}),304!==h&&200!==h)throw wM.create("fetch-status",{httpStatus:h});return{status:h,eTag:d,config:f}}}class PM{constructor(e,t){this.client=e,this.storage=t}async fetch(e){const t=await this.storage.getThrottleMetadata()||{backoffCount:0,throttleEndTimeMillis:Date.now()};return this.attemptFetch(e,t)}async attemptFetch(e,t){let{throttleEndTimeMillis:n,backoffCount:r}=t;await function(e,t){return new Promise(((n,r)=>{const i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener((()=>{clearTimeout(s),r(wM.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}(e.signal,n);try{const t=await this.client.fetch(e);return await this.storage.deleteThrottleMetadata(),t}catch(WM){if(!function(e){if(!(e instanceof an)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(WM))throw WM;const n={throttleEndTimeMillis:Date.now()+Pn(r),backoffCount:r+1};return await this.storage.setThrottleMetadata(n),this.attemptFetch(e,n)}}}class RM{get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}constructor(e,t,n,r,i){this.app=e,this._client=t,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}}function DM(e,t){const n=e.target.error||void 0;return wM.create(t,{originalErrorMessage:n&&(null===n||void 0===n?void 0:n.message)})}const OM="app_namespace_store";class LM{getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}getCustomSignals(){return this.get("custom_signals")}}class MM extends LM{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Promise(((e,t)=>{try{const n=indexedDB.open("firebase_remote_config",1);n.onerror=e=>{t(DM(e,"storage-open"))},n.onsuccess=t=>{e(t.target.result)},n.onupgradeneeded=e=>{const t=e.target.result;0===e.oldVersion&&t.createObjectStore(OM,{keyPath:"compositeKey"})}}catch(MS){t(wM.create("storage-open",{originalErrorMessage:null===MS||void 0===MS?void 0:MS.message}))}}));super(),this.appId=e,this.appName=t,this.namespace=n,this.openDbPromise=r}async setCustomSignals(e){const t=(await this.openDbPromise).transaction([OM],"readwrite"),n=UM(e,await this.getWithTransaction("custom_signals",t)||{});return await this.setWithTransaction("custom_signals",n,t),n}async getWithTransaction(e,t){return new Promise(((n,r)=>{const i=t.objectStore(OM),s=this.createCompositeKey(e);try{const e=i.get(s);e.onerror=e=>{r(DM(e,"storage-get"))},e.onsuccess=e=>{const t=e.target.result;n(t?t.value:void 0)}}catch(WM){r(wM.create("storage-get",{originalErrorMessage:null===WM||void 0===WM?void 0:WM.message}))}}))}async setWithTransaction(e,t,n){return new Promise(((r,i)=>{const s=n.objectStore(OM),o=this.createCompositeKey(e);try{const e=s.put({compositeKey:o,value:t});e.onerror=e=>{i(DM(e,"storage-set"))},e.onsuccess=()=>{r()}}catch(WM){i(wM.create("storage-set",{originalErrorMessage:null===WM||void 0===WM?void 0:WM.message}))}}))}async get(e){const t=(await this.openDbPromise).transaction([OM],"readonly");return this.getWithTransaction(e,t)}async set(e,t){const n=(await this.openDbPromise).transaction([OM],"readwrite");return this.setWithTransaction(e,t,n)}async delete(e){const t=await this.openDbPromise;return new Promise(((n,r)=>{const i=t.transaction([OM],"readwrite").objectStore(OM),s=this.createCompositeKey(e);try{const e=i.delete(s);e.onerror=e=>{r(DM(e,"storage-delete"))},e.onsuccess=()=>{n()}}catch(WM){r(wM.create("storage-delete",{originalErrorMessage:null===WM||void 0===WM?void 0:WM.message}))}}))}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class FM extends LM{constructor(){super(...arguments),this.storage={}}async get(e){return Promise.resolve(this.storage[e])}async set(e,t){return this.storage[e]=t,Promise.resolve(void 0)}async delete(e){return this.storage[e]=void 0,Promise.resolve()}async setCustomSignals(e){const t=this.storage.custom_signals||{};return this.storage.custom_signals=UM(e,t),Promise.resolve(this.storage.custom_signals)}}function UM(e,t){const n=Object.assign(Object.assign({},t),e),r=Object.fromEntries(Object.entries(n).filter((e=>{let[t,n]=e;return null!==n})).map((e=>{let[t,n]=e;return"number"===typeof n?[t,n.toString()]:[t,n]})));if(Object.keys(r).length>100)throw wM.create("custom-signal-max-allowed-signals",{maxSignals:100});return r}class jM{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}getCustomSignals(){return this.customSignals}async loadFromStorage(){const e=this.storage.getLastFetchStatus(),t=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),r=this.storage.getCustomSignals(),i=await e;i&&(this.lastFetchStatus=i);const s=await t;s&&(this.lastSuccessfulFetchTimestampMillis=s);const o=await n;o&&(this.activeConfig=o);const a=await r;a&&(this.customSignals=a)}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}async setCustomSignals(e){this.customSignals=await this.storage.setCustomSignals(e)}}async function VM(){if(!rn())return!1;try{return await sn()}catch(MS){return!1}}Wr(new Dn(_M,(function(e,t){let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate(),{projectId:s,apiKey:o,appId:a}=r.options;if(!s)throw wM.create("registration-project-id");if(!o)throw wM.create("registration-api-key");if(!a)throw wM.create("registration-app-id");const l=(null===n||void 0===n?void 0:n.templateId)||"firebase",c=rn()?new MM(a,r.name,l):new FM,u=new jM(c),h=new Bn(mM);h.logLevel=Un.ERROR;const d=new AM(i,ti,l,s,o,a),f=new PM(d,c),p=new NM(f,c,u,h),g=new RM(r,p,u,c,h);return SM(g),g}),"PUBLIC").setMultipleInstances(!0)),ai(mM,yM),ai(mM,yM,"esm2017");class zM{constructor(e,t){this.app=e,this._delegate=t}get defaultConfig(){return this._delegate.defaultConfig}set defaultConfig(e){this._delegate.defaultConfig=e}get fetchTimeMillis(){return this._delegate.fetchTimeMillis}get lastFetchStatus(){return this._delegate.lastFetchStatus}get settings(){return this._delegate.settings}set settings(e){this._delegate.settings=e}activate(){return IM(this._delegate)}ensureInitialized(){return SM(this._delegate)}fetch(){return EM(this._delegate)}fetchAndActivate(){return async function(e){return e=Rn(e),await EM(e),IM(e)}(this._delegate)}getAll(){return kM(this._delegate)}getBoolean(e){return function(e,t){return CM(Rn(e),t).asBoolean()}(this._delegate,e)}getNumber(e){return function(e,t){return CM(Rn(e),t).asNumber()}(this._delegate,e)}getString(e){return function(e,t){return CM(Rn(e),t).asString()}(this._delegate,e)}getValue(e){return CM(this._delegate,e)}setLogLevel(e){!function(e,t){const n=Rn(e);switch(t){case"debug":n._logger.logLevel=Un.DEBUG;break;case"silent":n._logger.logLevel=Un.SILENT;break;default:n._logger.logLevel=Un.ERROR}}(this._delegate,e)}}function qM(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("remote-config").getImmediate({identifier:n});return new zM(r,i)}var BM;(BM=AI).INTERNAL.registerComponent(new Dn("remoteConfig-compat",qM,"PUBLIC").setMultipleInstances(!0).setServiceProps({isSupported:VM})),BM.registerVersion("@firebase/remote-config-compat","0.2.16");var HM,WM,KM=function(){var e=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(e&&e.responseStart>0&&e.responseStart<performance.now())return e},GM=function(e){if("loading"===document.readyState)return"loading";var t=KM();if(t){if(e<t.domInteractive)return"loading";if(0===t.domContentLoadedEventStart||e<t.domContentLoadedEventStart)return"dom-interactive";if(0===t.domComplete||e<t.domComplete)return"dom-content-loaded"}return"complete"},QM=function(e){var t=e.nodeName;return 1===e.nodeType?t.toLowerCase():t.toUpperCase().replace(/^#/,"")},YM=function(e,t){var n="";try{for(;e&&9!==e.nodeType;){var r=e,i=r.id?"#"+r.id:QM(r)+(r.classList&&r.classList.value&&r.classList.value.trim()&&r.classList.value.trim().length?"."+r.classList.value.trim().replace(/\s+/g,"."):"");if(n.length+i.length>(t||100)-1)return n||i;if(n=n?i+">"+n:i,r.id)break;e=r.parentNode}}catch(e){}return n},$M=-1,JM=function(){return $M},XM=function(e){addEventListener("pageshow",(function(t){t.persisted&&($M=t.timeStamp,e(t))}),!0)},ZM=function(){var e=KM();return e&&e.activationStart||0},eF=function(e,t){var n=KM(),r="navigate";return JM()>=0?r="back-forward-cache":n&&(document.prerendering||ZM()>0?r="prerender":document.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},tF=function(e,t,n){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var r=new PerformanceObserver((function(e){Promise.resolve().then((function(){t(e.getEntries())}))}));return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch(e){}},nF=function(e,t,n,r){var i,s;return function(o){t.value>=0&&(o||r)&&((s=t.value-(i||0))||void 0===i)&&(i=t.value,t.delta=s,t.rating=function(e,t){return e>t[1]?"poor":e>t[0]?"needs-improvement":"good"}(t.value,n),e(t))}},rF=function(e){requestAnimationFrame((function(){return requestAnimationFrame((function(){return e()}))}))},iF=function(e){document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&e()}))},sF=function(e){var t=!1;return function(){t||(e(),t=!0)}},oF=-1,aF=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},lF=function(e){"hidden"===document.visibilityState&&oF>-1&&(oF="visibilitychange"===e.type?e.timeStamp:0,uF())},cF=function(){addEventListener("visibilitychange",lF,!0),addEventListener("prerenderingchange",lF,!0)},uF=function(){removeEventListener("visibilitychange",lF,!0),removeEventListener("prerenderingchange",lF,!0)},hF=function(){return oF<0&&(oF=aF(),cF(),XM((function(){setTimeout((function(){oF=aF(),cF()}),0)}))),{get firstHiddenTime(){return oF}}},dF=function(e){document.prerendering?addEventListener("prerenderingchange",(function(){return e()}),!0):e()},fF=[1800,3e3],pF=function(e,t){t=t||{},dF((function(){var n,r=hF(),i=eF("FCP"),s=tF("paint",(function(e){e.forEach((function(e){"first-contentful-paint"===e.name&&(s.disconnect(),e.startTime<r.firstHiddenTime&&(i.value=Math.max(e.startTime-ZM(),0),i.entries.push(e),n(!0)))}))}));s&&(n=nF(e,i,fF,t.reportAllChanges),XM((function(r){i=eF("FCP"),n=nF(e,i,fF,t.reportAllChanges),rF((function(){i.value=performance.now()-r.timeStamp,n(!0)}))})))}))},gF=[.1,.25],mF=function(e,t){!function(e,t){t=t||{},pF(sF((function(){var n,r=eF("CLS",0),i=0,s=[],o=function(e){e.forEach((function(e){if(!e.hadRecentInput){var t=s[0],n=s[s.length-1];i&&e.startTime-n.startTime<1e3&&e.startTime-t.startTime<5e3?(i+=e.value,s.push(e)):(i=e.value,s=[e])}})),i>r.value&&(r.value=i,r.entries=s,n())},a=tF("layout-shift",o);a&&(n=nF(e,r,gF,t.reportAllChanges),iF((function(){o(a.takeRecords()),n(!0)})),XM((function(){i=0,r=eF("CLS",0),n=nF(e,r,gF,t.reportAllChanges),rF((function(){return n()}))})),setTimeout(n,0))})))}((function(t){var n=function(e){var t,n={};if(e.entries.length){var r=e.entries.reduce((function(e,t){return e&&e.value>t.value?e:t}));if(r&&r.sources&&r.sources.length){var i=(t=r.sources).find((function(e){return e.node&&1===e.node.nodeType}))||t[0];i&&(n={largestShiftTarget:YM(i.node),largestShiftTime:r.startTime,largestShiftValue:r.value,largestShiftSource:i,largestShiftEntry:r,loadState:GM(r.startTime)})}}return Object.assign(e,{attribution:n})}(t);e(n)}),t)},yF=0,vF=1/0,_F=0,wF=function(e){e.forEach((function(e){e.interactionId&&(vF=Math.min(vF,e.interactionId),_F=Math.max(_F,e.interactionId),yF=_F?(_F-vF)/7+1:0)}))},bF=function(){return HM?yF:performance.interactionCount||0},TF=function(){"interactionCount"in performance||HM||(HM=tF("event",wF,{type:"event",buffered:!0,durationThreshold:0}))},IF=[],SF=new Map,EF=0,kF=[],CF=function(e){if(kF.forEach((function(t){return t(e)})),e.interactionId||"first-input"===e.entryType){var t=IF[IF.length-1],n=SF.get(e.interactionId);if(n||IF.length<10||e.duration>t.latency){if(n)e.duration>n.latency?(n.entries=[e],n.latency=e.duration):e.duration===n.latency&&e.startTime===n.entries[0].startTime&&n.entries.push(e);else{var r={id:e.interactionId,latency:e.duration,entries:[e]};SF.set(r.id,r),IF.push(r)}IF.sort((function(e,t){return t.latency-e.latency})),IF.length>10&&IF.splice(10).forEach((function(e){return SF.delete(e.id)}))}}},NF=function(e){var t=self.requestIdleCallback||self.setTimeout,n=-1;return e=sF(e),"hidden"===document.visibilityState?e():(n=t(e),iF(e)),n},xF=[200,500],AF=function(e,t){"PerformanceEventTiming"in self&&"interactionId"in PerformanceEventTiming.prototype&&(t=t||{},dF((function(){var n;TF();var r,i=eF("INP"),s=function(e){NF((function(){e.forEach(CF);var t=function(){var e=Math.min(IF.length-1,Math.floor((bF()-EF)/50));return IF[e]}();t&&t.latency!==i.value&&(i.value=t.latency,i.entries=t.entries,r())}))},o=tF("event",s,{durationThreshold:null!==(n=t.durationThreshold)&&void 0!==n?n:40});r=nF(e,i,xF,t.reportAllChanges),o&&(o.observe({type:"first-input",buffered:!0}),iF((function(){s(o.takeRecords()),r(!0)})),XM((function(){EF=bF(),IF.length=0,SF.clear(),i=eF("INP"),r=nF(e,i,xF,t.reportAllChanges)})))})))},PF=[],RF=[],DF=0,OF=new WeakMap,LF=new Map,MF=-1,FF=function(e){PF=PF.concat(e),UF()},UF=function(){MF<0&&(MF=NF(jF))},jF=function(){LF.size>10&&LF.forEach((function(e,t){SF.has(t)||LF.delete(t)}));var e=IF.map((function(e){return OF.get(e.entries[0])})),t=RF.length-50;RF=RF.filter((function(n,r){return r>=t||e.includes(n)}));for(var n=new Set,r=0;r<RF.length;r++){var i=RF[r];VF(i.startTime,i.processingEnd).forEach((function(e){n.add(e)}))}var s=PF.length-1-50;PF=PF.filter((function(e,t){return e.startTime>DF&&t>s||n.has(e)})),MF=-1};kF.push((function(e){e.interactionId&&e.target&&!LF.has(e.interactionId)&&LF.set(e.interactionId,e.target)}),(function(e){var t,n=e.startTime+e.duration;DF=Math.max(DF,e.processingEnd);for(var r=RF.length-1;r>=0;r--){var i=RF[r];if(Math.abs(n-i.renderTime)<=8){(t=i).startTime=Math.min(e.startTime,t.startTime),t.processingStart=Math.min(e.processingStart,t.processingStart),t.processingEnd=Math.max(e.processingEnd,t.processingEnd),t.entries.push(e);break}}t||(t={startTime:e.startTime,processingStart:e.processingStart,processingEnd:e.processingEnd,renderTime:n,entries:[e]},RF.push(t)),(e.interactionId||"first-input"===e.entryType)&&OF.set(e,t),UF()}));var VF=function(e,t){for(var n,r=[],i=0;n=PF[i];i++)if(!(n.startTime+n.duration<e)){if(n.startTime>t)break;r.push(n)}return r},zF=function(e,t){WM||(WM=tF("long-animation-frame",FF)),AF((function(t){var n=function(e){var t=e.entries[0],n=OF.get(t),r=t.processingStart,i=n.processingEnd,s=n.entries.sort((function(e,t){return e.processingStart-t.processingStart})),o=VF(t.startTime,i),a=e.entries.find((function(e){return e.target})),l=a&&a.target||LF.get(t.interactionId),c=[t.startTime+t.duration,i].concat(o.map((function(e){return e.startTime+e.duration}))),u=Math.max.apply(Math,c),h={interactionTarget:YM(l),interactionTargetElement:l,interactionType:t.name.startsWith("key")?"keyboard":"pointer",interactionTime:t.startTime,nextPaintTime:u,processedEventEntries:s,longAnimationFrameEntries:o,inputDelay:r-t.startTime,processingDuration:i-r,presentationDelay:Math.max(u-i,0),loadState:GM(t.startTime)};return Object.assign(e,{attribution:h})}(t);e(n)}),t)},qF=[2500,4e3],BF={},HF=function(e,t){!function(e,t){t=t||{},dF((function(){var n,r=hF(),i=eF("LCP"),s=function(e){t.reportAllChanges||(e=e.slice(-1)),e.forEach((function(e){e.startTime<r.firstHiddenTime&&(i.value=Math.max(e.startTime-ZM(),0),i.entries=[e],n())}))},o=tF("largest-contentful-paint",s);if(o){n=nF(e,i,qF,t.reportAllChanges);var a=sF((function(){BF[i.id]||(s(o.takeRecords()),o.disconnect(),BF[i.id]=!0,n(!0))}));["keydown","click"].forEach((function(e){addEventListener(e,(function(){return NF(a)}),{once:!0,capture:!0})})),iF(a),XM((function(r){i=eF("LCP"),n=nF(e,i,qF,t.reportAllChanges),rF((function(){i.value=performance.now()-r.timeStamp,BF[i.id]=!0,n(!0)}))}))}}))}((function(t){var n=function(e){var t={timeToFirstByte:0,resourceLoadDelay:0,resourceLoadDuration:0,elementRenderDelay:e.value};if(e.entries.length){var n=KM();if(n){var r=n.activationStart||0,i=e.entries[e.entries.length-1],s=i.url&&performance.getEntriesByType("resource").filter((function(e){return e.name===i.url}))[0],o=Math.max(0,n.responseStart-r),a=Math.max(o,s?(s.requestStart||s.startTime)-r:0),l=Math.max(a,s?s.responseEnd-r:0),c=Math.max(l,i.startTime-r);t={element:YM(i.element),timeToFirstByte:o,resourceLoadDelay:a-o,resourceLoadDuration:l-a,elementRenderDelay:c-l,navigationEntry:n,lcpEntry:i},i.url&&(t.url=i.url),s&&(t.lcpResourceEntry=s)}}return Object.assign(e,{attribution:t})}(t);e(n)}),t)};new Date;const WF="@firebase/performance",KF="0.7.5",GF=KF,QF="FB-PERF-TRACE-MEASURE",YF="_wt_",$F="_fcp",JF="_fid",XF="_lcp",ZF="_inp",eU="_cls",tU="@firebase/performance/config",nU="@firebase/performance/configexpire",rU="Performance",iU=new ln("performance",rU,{"trace started":"Trace {$traceName} was started before.","trace stopped":"Trace {$traceName} is not running.","nonpositive trace startTime":"Trace {$traceName} startTime should be positive.","nonpositive trace duration":"Trace {$traceName} duration should be positive.","no window":"Window is not available.","no app id":"App id is not available.","no project id":"Project id is not available.","no api key":"Api key is not available.","invalid cc log":"Attempted to queue invalid cc event","FB not default":"Performance can only start when Firebase app instance is the default one.","RC response not ok":"RC response is not ok","invalid attribute name":"Attribute name {$attributeName} is invalid.","invalid attribute value":"Attribute value {$attributeValue} is invalid.","invalid custom metric name":"Custom metric name {$customMetricName} is invalid","invalid String merger input":"Input for String merger is invalid, contact support team to resolve.","already initialized":"initializePerformance() has already been called with different options. To avoid this error, call initializePerformance() with the same options as when it was originally called, or call getPerformance() to return the already initialized instance."}),sU=new Bn(rU);let oU,aU,lU,cU;sU.logLevel=Un.INFO;class uU{constructor(e){if(this.window=e,!e)throw iU.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay),this.onLCP=HF,this.onINP=zF,this.onCLS=mF}getUrl(){return this.windowLocation.href.split("?")[0]}mark(e){this.performance&&this.performance.mark&&this.performance.mark(e)}measure(e,t,n){this.performance&&this.performance.measure&&this.performance.measure(e,t,n)}getEntriesByType(e){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(e):[]}getEntriesByName(e){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(e):[]}getTimeOrigin(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)}requiredApisAvailable(){return fetch&&Promise&&on()?!!rn()||(sU.info("IndexedDB is not supported by current browser"),!1):(sU.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)}setupObserver(e,t){if(!this.PerformanceObserver)return;const n=new this.PerformanceObserver((e=>{for(const n of e.getEntries())t(n)}));n.observe({entryTypes:[e]})}static getInstance(){return void 0===oU&&(oU=new uU(aU)),oU}}function hU(){return lU}function dU(e,t){const n=e.length-t.length;if(n<0||n>1)throw iU.create("invalid String merger input");const r=[];for(let i=0;i<e.length;i++)r.push(e.charAt(i)),t.length>i&&r.push(t.charAt(i));return r.join("")}class fU{constructor(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=dU("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=dU("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}getFlTransportFullUrl(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)}static getInstance(){return void 0===cU&&(cU=new fU),cU}}var pU;!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.VISIBLE=1]="VISIBLE",e[e.HIDDEN=2]="HIDDEN"}(pU||(pU={}));const gU=["firebase_","google_","ga_"],mU=new RegExp("^[a-zA-Z]\\w*$");function yU(){const e=uU.getInstance().navigator;return(null===e||void 0===e?void 0:e.serviceWorker)?e.serviceWorker.controller?2:3:1}function vU(){switch(uU.getInstance().document.visibilityState){case"visible":return pU.VISIBLE;case"hidden":return pU.HIDDEN;default:return pU.UNKNOWN}}function _U(){const e=uU.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function wU(e){var t;const n=null===(t=e.options)||void 0===t?void 0:t.appId;if(!n)throw iU.create("no app id");return n}const bU="0.0.1",TU={loggingEnabled:!0},IU="FIREBASE_INSTALLATIONS_AUTH";function SU(e,t){const n=function(){const e=uU.getInstance().localStorage;if(!e)return;const t=e.getItem(nU);if(!t||(n=t,!(Number(n)>Date.now())))return;var n;const r=e.getItem(tU);if(!r)return;try{return JSON.parse(r)}catch(sj){return}}();return n?(kU(n),Promise.resolve()):function(e,t){return function(e){const t=e.getToken();return t.then((e=>{})),t}(e.installations).then((n=>{const r=function(e){var t;const n=null===(t=e.options)||void 0===t?void 0:t.projectId;if(!n)throw iU.create("no project id");return n}(e.app),i=function(e){var t;const n=null===(t=e.options)||void 0===t?void 0:t.apiKey;if(!n)throw iU.create("no api key");return n}(e.app),s="https://firebaseremoteconfig.googleapis.com/v1/projects/".concat(r,"/namespaces/fireperf:fetch?key=").concat(i),o=new Request(s,{method:"POST",headers:{Authorization:"".concat(IU," ").concat(n)},body:JSON.stringify({app_instance_id:t,app_instance_id_token:n,app_id:wU(e.app),app_version:GF,sdk_version:bU})});return fetch(o).then((e=>{if(e.ok)return e.json();throw iU.create("RC response not ok")}))})).catch((()=>{sU.info(EU)}))}(e,t).then(kU).then((e=>function(e){const t=uU.getInstance().localStorage;if(!e||!t)return;t.setItem(tU,JSON.stringify(e)),t.setItem(nU,String(Date.now()+60*fU.getInstance().configTimeToLive*60*1e3))}(e)),(()=>{}))}const EU="Could not fetch config, will use default configs";function kU(e){if(!e)return e;const t=fU.getInstance(),n=e.entries||{};return void 0!==n.fpr_enabled?t.loggingEnabled="true"===String(n.fpr_enabled):t.loggingEnabled=TU.loggingEnabled,n.fpr_log_source?t.logSource=Number(n.fpr_log_source):TU.logSource&&(t.logSource=TU.logSource),n.fpr_log_endpoint_url?t.logEndPointUrl=n.fpr_log_endpoint_url:TU.logEndPointUrl&&(t.logEndPointUrl=TU.logEndPointUrl),n.fpr_log_transport_key?t.transportKey=n.fpr_log_transport_key:TU.transportKey&&(t.transportKey=TU.transportKey),void 0!==n.fpr_vc_network_request_sampling_rate?t.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate):void 0!==TU.networkRequestsSamplingRate&&(t.networkRequestsSamplingRate=TU.networkRequestsSamplingRate),void 0!==n.fpr_vc_trace_sampling_rate?t.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate):void 0!==TU.tracesSamplingRate&&(t.tracesSamplingRate=TU.tracesSamplingRate),t.logTraceAfterSampling=CU(t.tracesSamplingRate),t.logNetworkAfterSampling=CU(t.networkRequestsSamplingRate),e}function CU(e){return Math.random()<=e}let NU,xU=1;function AU(e){return xU=2,NU=NU||function(e){return function(){const e=uU.getInstance().document;return new Promise((t=>{if(e&&"complete"!==e.readyState){const n=()=>{"complete"===e.readyState&&(e.removeEventListener("readystatechange",n),t())};e.addEventListener("readystatechange",n)}else t()}))}().then((()=>function(e){const t=e.getId();return t.then((e=>{lU=e})),t}(e.installations))).then((t=>SU(e,t))).then((()=>PU()),(()=>PU()))}(e),NU}function PU(){xU=3}let RU,DU=3,OU=[],LU=!1;function MU(e){setTimeout((()=>{DU<=0||(OU.length>0&&FU(),MU(1e4))}),e)}function FU(){const e=OU.splice(0,1e3),t=e.map((e=>({source_extension_json_proto3:e.message,event_time_ms:String(e.eventTime)})));(function(e){const t=fU.getInstance().getFlTransportFullUrl(),n=JSON.stringify(e);return navigator.sendBeacon&&navigator.sendBeacon(t,n)?Promise.resolve():fetch(t,{method:"POST",body:n,keepalive:!0}).then()})({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:fU.getInstance().logSource,log_event:t}).then((()=>{DU=3})).catch((()=>{OU=[...e,...OU],DU--,sU.info("Tries left: ".concat(DU,".")),MU(1e4)}))}function UU(e){return function(){!function(e){if(!e.eventTime||!e.message)throw iU.create("invalid cc log");OU=[...OU,e]}({message:e(...arguments),eventTime:Date.now()})}}function jU(){for(;OU.length>0;)FU()}function VU(e,t){RU||(RU={send:UU(BU),flush:jU}),RU.send(e,t)}function zU(e){const t=fU.getInstance();!t.instrumentationEnabled&&e.isAuto||(t.dataCollectionEnabled||e.isAuto)&&uU.getInstance().requiredApisAvailable()&&(3===xU?qU(e):AU(e.performanceController).then((()=>qU(e)),(()=>qU(e))))}function qU(e){if(!hU())return;const t=fU.getInstance();t.loggingEnabled&&t.logTraceAfterSampling&&VU(e,1)}function BU(e,t){return 0===t?function(e){const t={url:e.url,http_method:e.httpMethod||0,http_response_code:200,response_payload_bytes:e.responsePayloadBytes,client_start_time_us:e.startTimeUs,time_to_response_initiated_us:e.timeToResponseInitiatedUs,time_to_response_completed_us:e.timeToResponseCompletedUs},n={application_info:HU(e.performanceController.app),network_request_metric:t};return JSON.stringify(n)}(e):function(e){const t={name:e.name,is_auto:e.isAuto,client_start_time_us:e.startTimeUs,duration_us:e.durationUs};0!==Object.keys(e.counters).length&&(t.counters=e.counters);const n=e.getAttributes();0!==Object.keys(n).length&&(t.custom_attributes=n);const r={application_info:HU(e.performanceController.app),trace_metric:t};return JSON.stringify(r)}(e)}function HU(e){return{google_app_id:wU(e),app_instance_id:hU(),web_app_info:{sdk_version:GF,page_url:uU.getInstance().getUrl(),service_worker_status:yU(),visibility_state:vU(),effective_connection_type:_U()},application_process_state:0}}function WU(e,t){const n=t;if(!n||void 0===n.responseStart)return;const r=uU.getInstance().getTimeOrigin(),i=Math.floor(1e3*(n.startTime+r)),s=n.responseStart?Math.floor(1e3*(n.responseStart-n.startTime)):void 0,o=Math.floor(1e3*(n.responseEnd-n.startTime));!function(e){const t=fU.getInstance();if(!t.instrumentationEnabled)return;const n=e.url,r=t.logEndPointUrl.split("?")[0],i=t.flTransportEndpointUrl.split("?")[0];n!==r&&n!==i&&t.loggingEnabled&&t.logNetworkAfterSampling&&VU(e,0)}({performanceController:e,url:n.name&&n.name.split("?")[0],responsePayloadBytes:n.transferSize,startTimeUs:i,timeToResponseInitiatedUs:s,timeToResponseCompletedUs:o})}const KU=["_fp",$F,JF,XF,eU,ZF];class GU{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0;this.performanceController=e,this.name=t,this.isAuto=n,this.state=1,this.customAttributes={},this.counters={},this.api=uU.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="".concat("FB-PERF-TRACE-START","-").concat(this.randomId,"-").concat(this.name),this.traceStopMark="".concat("FB-PERF-TRACE-STOP","-").concat(this.randomId,"-").concat(this.name),this.traceMeasure=r||"".concat(QF,"-").concat(this.randomId,"-").concat(this.name),r&&this.calculateTraceMetrics())}start(){if(1!==this.state)throw iU.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2}stop(){if(2!==this.state)throw iU.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),zU(this)}record(e,t,n){if(e<=0)throw iU.create("nonpositive trace startTime",{traceName:this.name});if(t<=0)throw iU.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*t),this.startTimeUs=Math.floor(1e3*e),n&&n.attributes&&(this.customAttributes=Object.assign({},n.attributes)),n&&n.metrics)for(const r of Object.keys(n.metrics))isNaN(Number(n.metrics[r]))||(this.counters[r]=Math.floor(Number(n.metrics[r])));zU(this)}incrementMetric(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;void 0===this.counters[e]?this.putMetric(e,t):this.putMetric(e,this.counters[e]+t)}putMetric(e,t){if(n=e,r=this.name,0===n.length||n.length>100||!(r&&r.startsWith(YF)&&KU.indexOf(n)>-1)&&n.startsWith("_"))throw iU.create("invalid custom metric name",{customMetricName:e});var n,r;this.counters[e]=function(e){const t=Math.floor(e);return t<e&&sU.info("Metric value should be an Integer, setting the value as : ".concat(t,".")),t}(null!==t&&void 0!==t?t:0)}getMetric(e){return this.counters[e]||0}putAttribute(e,t){const n=!(0===(r=e).length||r.length>40)&&!gU.some((e=>r.startsWith(e)))&&!!r.match(mU);var r;const i=function(e){return 0!==e.length&&e.length<=100}(t);if(n&&i)this.customAttributes[e]=t;else{if(!n)throw iU.create("invalid attribute name",{attributeName:e});if(!i)throw iU.create("invalid attribute value",{attributeValue:t})}}getAttribute(e){return this.customAttributes[e]}removeAttribute(e){void 0!==this.customAttributes[e]&&delete this.customAttributes[e]}getAttributes(){return Object.assign({},this.customAttributes)}setStartTime(e){this.startTimeUs=e}setDuration(e){this.durationUs=e}calculateTraceMetrics(){const e=this.api.getEntriesByName(this.traceMeasure),t=e&&e[0];t&&(this.durationUs=Math.floor(1e3*t.duration),this.startTimeUs=Math.floor(1e3*(t.startTime+this.api.getTimeOrigin())))}static createOobTrace(e,t,n,r,i){const s=uU.getInstance().getUrl();if(!s)return;const o=new GU(e,YF+s,!0),a=Math.floor(1e3*uU.getInstance().getTimeOrigin());o.setStartTime(a),t&&t[0]&&(o.setDuration(Math.floor(1e3*t[0].duration)),o.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),o.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),o.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd)));if(n){const e=n.find((e=>"first-paint"===e.name));e&&e.startTime&&o.putMetric("_fp",Math.floor(1e3*e.startTime));const t=n.find((e=>"first-contentful-paint"===e.name));t&&t.startTime&&o.putMetric($F,Math.floor(1e3*t.startTime)),i&&o.putMetric(JF,Math.floor(1e3*i))}this.addWebVitalMetric(o,XF,"lcp_element",r.lcp),this.addWebVitalMetric(o,eU,"cls_largestShiftTarget",r.cls),this.addWebVitalMetric(o,ZF,"inp_interactionTarget",r.inp),zU(o),RU&&RU.flush()}static addWebVitalMetric(e,t,n,r){r&&(e.putMetric(t,Math.floor(1e3*r.value)),r.elementAttribution&&e.putAttribute(n,r.elementAttribution))}static createUserTimingTrace(e,t){zU(new GU(e,t,!1,t))}}let QU,YU={},$U=!1;function JU(e){hU()&&(setTimeout((()=>function(e){const t=uU.getInstance();"onpagehide"in window?t.document.addEventListener("pagehide",(()=>ZU(e))):t.document.addEventListener("unload",(()=>ZU(e)));t.document.addEventListener("visibilitychange",(()=>{"hidden"===t.document.visibilityState&&ZU(e)})),t.onFirstInputDelay&&t.onFirstInputDelay((e=>{QU=e}));t.onLCP((e=>{var t;YU.lcp={value:e.value,elementAttribution:null===(t=e.attribution)||void 0===t?void 0:t.element}})),t.onCLS((e=>{var t;YU.cls={value:e.value,elementAttribution:null===(t=e.attribution)||void 0===t?void 0:t.largestShiftTarget}})),t.onINP((e=>{var t;YU.inp={value:e.value,elementAttribution:null===(t=e.attribution)||void 0===t?void 0:t.interactionTarget}}))}(e)),0),setTimeout((()=>function(e){const t=uU.getInstance(),n=t.getEntriesByType("resource");for(const r of n)WU(e,r);t.setupObserver("resource",(t=>WU(e,t)))}(e)),0),setTimeout((()=>function(e){const t=uU.getInstance(),n=t.getEntriesByType("measure");for(const r of n)XU(e,r);t.setupObserver("measure",(t=>XU(e,t)))}(e)),0))}function XU(e,t){const n=t.name;n.substring(0,21)!==QF&&GU.createUserTimingTrace(e,n)}function ZU(e){if(!$U){$U=!0;const t=uU.getInstance(),n=t.getEntriesByType("navigation"),r=t.getEntriesByType("paint");setTimeout((()=>{GU.createOobTrace(e,n,r,YU,QU)}),0)}}class ej{constructor(e,t){this.app=e,this.installations=t,this.initialized=!1}_init(e){this.initialized||(void 0!==(null===e||void 0===e?void 0:e.dataCollectionEnabled)&&(this.dataCollectionEnabled=e.dataCollectionEnabled),void 0!==(null===e||void 0===e?void 0:e.instrumentationEnabled)&&(this.instrumentationEnabled=e.instrumentationEnabled),uU.getInstance().requiredApisAvailable()?sn().then((e=>{e&&(LU||(MU(5500),LU=!0),AU(this).then((()=>JU(this)),(()=>JU(this))),this.initialized=!0)})).catch((e=>{sU.info("Environment doesn't support IndexedDB: ".concat(e))})):sU.info('Firebase Performance cannot start if the browser does not support "Fetch" and "Promise", or cookies are disabled.'))}set instrumentationEnabled(e){fU.getInstance().instrumentationEnabled=e}get instrumentationEnabled(){return fU.getInstance().instrumentationEnabled}set dataCollectionEnabled(e){fU.getInstance().dataCollectionEnabled=e}get dataCollectionEnabled(){return fU.getInstance().dataCollectionEnabled}}const tj=(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if("[DEFAULT]"!==r.name)throw iU.create("FB not default");if("undefined"===typeof window)throw iU.create("no window");!function(e){aU=e}(window);const s=new ej(r,i);return s._init(n),s};Wr(new Dn("performance",tj,"PUBLIC")),ai(WF,KF),ai(WF,KF,"esm2017");class nj{constructor(e,t){this.app=e,this._delegate=t}get instrumentationEnabled(){return this._delegate.instrumentationEnabled}set instrumentationEnabled(e){this._delegate.instrumentationEnabled=e}get dataCollectionEnabled(){return this._delegate.dataCollectionEnabled}set dataCollectionEnabled(e){this._delegate.dataCollectionEnabled=e}trace(e){return function(e,t){return e=Rn(e),new GU(e,t)}(this._delegate,e)}}function rj(e){const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("performance").getImmediate();return new nj(t,n)}!function(e){e.INTERNAL.registerComponent(new Dn("performance-compat",rj,"PUBLIC")),e.registerVersion("@firebase/performance-compat","0.2.18")}(AI),document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("load");try{let t=AI.app(),n=["auth","database","firestore","functions","messaging","storage","analytics","remoteConfig","performance"].filter((e=>"function"===typeof t[e]));e&&(e.textContent="Firebase SDK loaded with ".concat(n.join(", ")))}catch(WM){console.error(WM),e&&(e.textContent="Error loading the Firebase SDK, check the console.")}}));const ij=document.getElementById("root");(0,s.createRoot)(ij).render((0,rI.jsx)(EI,{}))})();
//# sourceMappingURL=main.f5fc18ca.js.map