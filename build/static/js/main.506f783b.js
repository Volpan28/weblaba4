/*! For license information please see main.506f783b.js.LICENSE.txt */
(()=>{"use strict";var e={4:(e,t,n)=>{var r=n(853),i=n(43),s=n(950);function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(l(e)!==e)throw Error(o(188))}function h(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=h(e)))return t;e=e.sibling}return null}var d=Object.assign,f=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),b=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),k=Symbol.for("react.lazy");Symbol.for("react.scope");var C=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var x=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var N=Symbol.iterator;function A(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=N&&e[N]||e["@@iterator"])?e:null}var P=Symbol.for("react.client.reference");function R(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===P?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case m:return"Fragment";case v:return"Profiler";case y:return"StrictMode";case E:return"Suspense";case I:return"SuspenseList";case C:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case g:return"Portal";case b:return(e.displayName||"Context")+".Provider";case w:return(e._context.displayName||"Context")+".Consumer";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case S:return null!==(t=e.displayName||null)?t:R(e.type)||"Memo";case k:t=e._payload,e=e._init;try{return R(e(t))}catch(Ec){}}return null}var D=Array.isArray,O=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M={pending:!1,data:null,method:null,action:null},F=[],U=-1;function j(e){return{current:e}}function V(e){0>U||(e.current=F[U],F[U]=null,U--)}function z(e,t){U++,F[U]=e.current,e.current=t}var q=j(null),B=j(null),H=j(null),W=j(null);function K(e,t){switch(z(H,t),z(B,e),z(q,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?sh(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=oh(t=sh(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}V(q),z(q,e)}function G(){V(q),V(B),V(H)}function Q(e){null!==e.memoizedState&&z(W,e);var t=q.current,n=oh(t,e.type);t!==n&&(z(B,e),z(q,n))}function Y(e){B.current===e&&(V(q),V(B)),W.current===e&&(V(W),Yh._currentValue=M)}var J=Object.prototype.hasOwnProperty,$=r.unstable_scheduleCallback,X=r.unstable_cancelCallback,Z=r.unstable_shouldYield,ee=r.unstable_requestPaint,te=r.unstable_now,ne=r.unstable_getCurrentPriorityLevel,re=r.unstable_ImmediatePriority,ie=r.unstable_UserBlockingPriority,se=r.unstable_NormalPriority,oe=r.unstable_LowPriority,ae=r.unstable_IdlePriority,le=r.log,ce=r.unstable_setDisableYieldValue,ue=null,he=null;function de(e){if("function"===typeof le&&ce(e),he&&"function"===typeof he.setStrictMode)try{he.setStrictMode(ue,e)}catch(t){}}var fe=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(pe(e)/ge|0)|0},pe=Math.log,ge=Math.LN2;var me=256,ye=4194304;function ve(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function _e(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var i=0,s=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var a=134217727&r;return 0!==a?0!==(r=a&~s)?i=ve(r):0!==(o&=a)?i=ve(o):n||0!==(n=a&~e)&&(i=ve(n)):0!==(a=r&~s)?i=ve(a):0!==o?i=ve(o):n||0!==(n=r&~e)&&(i=ve(n)),0===i?0:0!==t&&t!==i&&0===(t&s)&&((s=i&-i)>=(n=t&-t)||32===s&&0!==(4194048&n))?t:i}function we(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function be(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Te(){var e=me;return 0===(4194048&(me<<=1))&&(me=256),e}function Ee(){var e=ye;return 0===(62914560&(ye<<=1))&&(ye=4194304),e}function Ie(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Se(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ke(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-fe(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194090&n}function Ce(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-fe(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function xe(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ne(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Ae(){var e=L.p;return 0!==e?e:void 0===(e=window.event)?32:ud(e.type)}var Pe=Math.random().toString(36).slice(2),Re="__reactFiber$"+Pe,De="__reactProps$"+Pe,Oe="__reactContainer$"+Pe,Le="__reactEvents$"+Pe,Me="__reactListeners$"+Pe,Fe="__reactHandles$"+Pe,Ue="__reactResources$"+Pe,je="__reactMarker$"+Pe;function Ve(e){delete e[Re],delete e[De],delete e[Le],delete e[Me],delete e[Fe]}function ze(e){var t=e[Re];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Oe]||n[Re]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=wh(e);null!==e;){if(n=e[Re])return n;e=wh(e)}return t}n=(e=n).parentNode}return null}function qe(e){if(e=e[Re]||e[Oe]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function Be(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(o(33))}function He(e){var t=e[Ue];return t||(t=e[Ue]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function We(e){e[je]=!0}var Ke=new Set,Ge={};function Qe(e,t){Ye(e,t),Ye(e+"Capture",t)}function Ye(e,t){for(Ge[e]=t,e=0;e<t.length;e++)Ke.add(t[e])}var Je,$e,Xe=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ze={},et={};function tt(e,t,n){if(i=t,J.call(et,i)||!J.call(Ze,i)&&(Xe.test(i)?et[i]=!0:(Ze[i]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var i}function nt(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function rt(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function it(e){if(void 0===Je)try{throw Error()}catch(Ec){var t=Ec.stack.trim().match(/\n( *(at )?)/);Je=t&&t[1]||"",$e=-1<Ec.stack.indexOf("\n    at")?" (<anonymous>)":-1<Ec.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Je+e+$e}var st=!1;function ot(e,t){if(!e||st)return"";st=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(Ec){var r=Ec}Reflect.construct(e,[],n)}else{try{n.call()}catch(i){r=i}e.call(n.prototype)}}else{try{throw Error()}catch(s){r=s}(n=e())&&"function"===typeof n.catch&&n.catch((function(){}))}}catch(o){if(o&&r&&"string"===typeof o.stack)return[o.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=r.DetermineComponentFrameRoot(),o=s[0],a=s[1];if(o&&a){var l=o.split("\n"),c=a.split("\n");for(i=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;i<c.length&&!c[i].includes("DetermineComponentFrameRoot");)i++;if(r===l.length||i===c.length)for(r=l.length-1,i=c.length-1;1<=r&&0<=i&&l[r]!==c[i];)i--;for(;1<=r&&0<=i;r--,i--)if(l[r]!==c[i]){if(1!==r||1!==i)do{if(r--,0>--i||l[r]!==c[i]){var u="\n"+l[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=i);break}}}finally{st=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?it(n):""}function at(e){switch(e.tag){case 26:case 27:case 5:return it(e.type);case 16:return it("Lazy");case 13:return it("Suspense");case 19:return it("SuspenseList");case 0:case 15:return ot(e.type,!1);case 11:return ot(e.type.render,!1);case 1:return ot(e.type,!0);case 31:return it("Activity");default:return""}}function lt(e){try{var t="";do{t+=at(e),e=e.return}while(e);return t}catch(Ec){return"\nError generating stack: "+Ec.message+"\n"+Ec.stack}}function ct(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ut(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ht(e){e._valueTracker||(e._valueTracker=function(e){var t=ut(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function dt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ut(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function ft(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch($M){return e.body}}var pt=/[\n"\\]/g;function gt(e){return e.replace(pt,(function(e){return"\\"+e.charCodeAt(0).toString(16)+" "}))}function mt(e,t,n,r,i,s,o,a){e.name="",null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.type=o:e.removeAttribute("type"),null!=t?"number"===o?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ct(t)):e.value!==""+ct(t)&&(e.value=""+ct(t)):"submit"!==o&&"reset"!==o||e.removeAttribute("value"),null!=t?vt(e,o,ct(t)):null!=n?vt(e,o,ct(n)):null!=r&&e.removeAttribute("value"),null==i&&null!=s&&(e.defaultChecked=!!s),null!=i&&(e.checked=i&&"function"!==typeof i&&"symbol"!==typeof i),null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.name=""+ct(a):e.removeAttribute("name")}function yt(e,t,n,r,i,s,o,a){if(null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s&&(e.type=s),null!=t||null!=n){if(!("submit"!==s&&"reset"!==s||void 0!==t&&null!==t))return;n=null!=n?""+ct(n):"",t=null!=t?""+ct(t):n,a||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:i)&&"symbol"!==typeof r&&!!r,e.checked=a?e.checked:!!r,e.defaultChecked=!!r,null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o&&(e.name=o)}function vt(e,t,n){"number"===t&&ft(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function _t(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ct(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function wt(e,t,n){null==t||((t=""+ct(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ct(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function bt(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(o(92));if(D(r)){if(1<r.length)throw Error(o(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=ct(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r)}function Tt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var Et=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function It(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||Et.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function St(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(o(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var i in t)r=t[i],t.hasOwnProperty(i)&&n[i]!==r&&It(e,i,r)}else for(var s in t)t.hasOwnProperty(s)&&It(e,s,t[s])}function kt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ct=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),xt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Nt(e){return xt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var At=null;function Pt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Rt=null,Dt=null;function Ot(e){var t=qe(e);if(t&&(e=t.stateNode)){var n=e[De]||null;e:switch(e=t.stateNode,t.type){case"input":if(mt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+gt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=r[De]||null;if(!i)throw Error(o(90));mt(r,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&dt(r)}break e;case"textarea":wt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&_t(e,!!n.multiple,t,!1)}}}var Lt=!1;function Mt(e,t,n){if(Lt)return e(t,n);Lt=!0;try{return e(t)}finally{if(Lt=!1,(null!==Rt||null!==Dt)&&(qc(),Rt&&(t=Rt,e=Dt,Dt=Rt=null,Ot(t),e)))for(t=0;t<e.length;t++)Ot(e[t])}}function Ft(e,t){var n=e.stateNode;if(null===n)return null;var r=n[De]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Ut=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),jt=!1;if(Ut)try{var Vt={};Object.defineProperty(Vt,"passive",{get:function(){jt=!0}}),window.addEventListener("test",Vt,Vt),window.removeEventListener("test",Vt,Vt)}catch($M){jt=!1}var zt=null,qt=null,Bt=null;function Ht(){if(Bt)return Bt;var e,t,n=qt,r=n.length,i="value"in zt?zt.value:zt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Bt=i.slice(e,1<t?1-t:void 0)}function Wt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Kt(){return!0}function Gt(){return!1}function Qt(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?Kt:Gt,this.isPropagationStopped=Gt,this}return d(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Kt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Kt)},persist:function(){},isPersistent:Kt}),t}var Yt,Jt,$t,Xt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zt=Qt(Xt),en=d({},Xt,{view:0,detail:0}),tn=Qt(en),nn=d({},en,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==$t&&($t&&"mousemove"===e.type?(Yt=e.screenX-$t.screenX,Jt=e.screenY-$t.screenY):Jt=Yt=0,$t=e),Yt)},movementY:function(e){return"movementY"in e?e.movementY:Jt}}),rn=Qt(nn),sn=Qt(d({},nn,{dataTransfer:0})),on=Qt(d({},en,{relatedTarget:0})),an=Qt(d({},Xt,{animationName:0,elapsedTime:0,pseudoElement:0})),ln=Qt(d({},Xt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),cn=Qt(d({},Xt,{data:0})),un={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=dn[e])&&!!t[e]}function pn(){return fn}var gn=Qt(d({},en,{key:function(e){if(e.key){var t=un[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Wt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?hn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pn,charCode:function(e){return"keypress"===e.type?Wt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Wt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),mn=Qt(d({},nn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),yn=Qt(d({},en,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pn})),vn=Qt(d({},Xt,{propertyName:0,elapsedTime:0,pseudoElement:0})),_n=Qt(d({},nn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),wn=Qt(d({},Xt,{newState:0,oldState:0})),bn=[9,13,27,32],Tn=Ut&&"CompositionEvent"in window,En=null;Ut&&"documentMode"in document&&(En=document.documentMode);var In=Ut&&"TextEvent"in window&&!En,Sn=Ut&&(!Tn||En&&8<En&&11>=En),kn=String.fromCharCode(32),Cn=!1;function xn(e,t){switch(e){case"keyup":return-1!==bn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Nn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var An=!1;var Pn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Pn[e.type]:"textarea"===t}function Dn(e,t,n,r){Rt?Dt?Dt.push(r):Dt=[r]:Rt=r,0<(t=Wu(t,"onChange")).length&&(n=new Zt("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var On=null,Ln=null;function Mn(e){Fu(e,0)}function Fn(e){if(dt(Be(e)))return e}function Un(e,t){if("change"===e)return t}var jn=!1;if(Ut){var Vn;if(Ut){var zn="oninput"in document;if(!zn){var qn=document.createElement("div");qn.setAttribute("oninput","return;"),zn="function"===typeof qn.oninput}Vn=zn}else Vn=!1;jn=Vn&&(!document.documentMode||9<document.documentMode)}function Bn(){On&&(On.detachEvent("onpropertychange",Hn),Ln=On=null)}function Hn(e){if("value"===e.propertyName&&Fn(Ln)){var t=[];Dn(t,Ln,e,Pt(e)),Mt(Mn,t)}}function Wn(e,t,n){"focusin"===e?(Bn(),Ln=n,(On=t).attachEvent("onpropertychange",Hn)):"focusout"===e&&Bn()}function Kn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Fn(Ln)}function Gn(e,t){if("click"===e)return Fn(t)}function Qn(e,t){if("input"===e||"change"===e)return Fn(t)}var Yn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Jn(e,t){if(Yn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!J.call(t,i)||!Yn(e[i],t[i]))return!1}return!0}function $n(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Xn(e,t){var n,r=$n(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=$n(r)}}function Zn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Zn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function er(e){for(var t=ft((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=ft((e=t.contentWindow).document)}return t}function tr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var nr=Ut&&"documentMode"in document&&11>=document.documentMode,rr=null,ir=null,sr=null,or=!1;function ar(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;or||null==rr||rr!==ft(r)||("selectionStart"in(r=rr)&&tr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},sr&&Jn(sr,r)||(sr=r,0<(r=Wu(ir,"onSelect")).length&&(t=new Zt("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=rr)))}function lr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var cr={animationend:lr("Animation","AnimationEnd"),animationiteration:lr("Animation","AnimationIteration"),animationstart:lr("Animation","AnimationStart"),transitionrun:lr("Transition","TransitionRun"),transitionstart:lr("Transition","TransitionStart"),transitioncancel:lr("Transition","TransitionCancel"),transitionend:lr("Transition","TransitionEnd")},ur={},hr={};function dr(e){if(ur[e])return ur[e];if(!cr[e])return e;var t,n=cr[e];for(t in n)if(n.hasOwnProperty(t)&&t in hr)return ur[e]=n[t];return e}Ut&&(hr=document.createElement("div").style,"AnimationEvent"in window||(delete cr.animationend.animation,delete cr.animationiteration.animation,delete cr.animationstart.animation),"TransitionEvent"in window||delete cr.transitionend.transition);var fr=dr("animationend"),pr=dr("animationiteration"),gr=dr("animationstart"),mr=dr("transitionrun"),yr=dr("transitionstart"),vr=dr("transitioncancel"),_r=dr("transitionend"),wr=new Map,br="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Tr(e,t){wr.set(e,t),Qe(t,[e])}br.push("scrollEnd");var Er=new WeakMap;function Ir(e,t){if("object"===typeof e&&null!==e){var n=Er.get(e);return void 0!==n?n:(t={value:e,source:t,stack:lt(t)},Er.set(e,t),t)}return{value:e,source:t,stack:lt(t)}}var Sr=[],kr=0,Cr=0;function xr(){for(var e=kr,t=Cr=kr=0;t<e;){var n=Sr[t];Sr[t++]=null;var r=Sr[t];Sr[t++]=null;var i=Sr[t];Sr[t++]=null;var s=Sr[t];if(Sr[t++]=null,null!==r&&null!==i){var o=r.pending;null===o?i.next=i:(i.next=o.next,o.next=i),r.pending=i}0!==s&&Rr(n,i,s)}}function Nr(e,t,n,r){Sr[kr++]=e,Sr[kr++]=t,Sr[kr++]=n,Sr[kr++]=r,Cr|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Ar(e,t,n,r){return Nr(e,t,n,r),Dr(e)}function Pr(e,t){return Nr(e,null,null,t),Dr(e)}function Rr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var i=!1,s=e.return;null!==s;)s.childLanes|=n,null!==(r=s.alternate)&&(r.childLanes|=n),22===s.tag&&(null===(e=s.stateNode)||1&e._visibility||(i=!0)),e=s,s=s.return;return 3===e.tag?(s=e.stateNode,i&&null!==t&&(i=31-fe(n),null===(r=(e=s.hiddenUpdates)[i])?e[i]=[t]:r.push(t),t.lane=536870912|n),s):null}function Dr(e){if(50<Dc)throw Dc=0,Oc=null,Error(o(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Or={};function Lr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mr(e,t,n,r){return new Lr(e,t,n,r)}function Fr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ur(e,t){var n=e.alternate;return null===n?((n=Mr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function jr(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Vr(e,t,n,r,i,s){var a=0;if(r=e,"function"===typeof e)Fr(e)&&(a=1);else if("string"===typeof e)a=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,q.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case C:return(e=Mr(31,n,t,i)).elementType=C,e.lanes=s,e;case m:return zr(n.children,i,s,t);case y:a=8,i|=24;break;case v:return(e=Mr(12,n,t,2|i)).elementType=v,e.lanes=s,e;case E:return(e=Mr(13,n,t,i)).elementType=E,e.lanes=s,e;case I:return(e=Mr(19,n,t,i)).elementType=I,e.lanes=s,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case _:case b:a=10;break e;case w:a=9;break e;case T:a=11;break e;case S:a=14;break e;case k:a=16,r=null;break e}a=29,n=Error(o(130,null===e?"null":typeof e,"")),r=null}return(t=Mr(a,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function zr(e,t,n,r){return(e=Mr(7,e,r,t)).lanes=n,e}function qr(e,t,n){return(e=Mr(6,e,null,t)).lanes=n,e}function Br(e,t,n){return(t=Mr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Hr=[],Wr=0,Kr=null,Gr=0,Qr=[],Yr=0,Jr=null,$r=1,Xr="";function Zr(e,t){Hr[Wr++]=Gr,Hr[Wr++]=Kr,Kr=e,Gr=t}function ei(e,t,n){Qr[Yr++]=$r,Qr[Yr++]=Xr,Qr[Yr++]=Jr,Jr=e;var r=$r;e=Xr;var i=32-fe(r)-1;r&=~(1<<i),n+=1;var s=32-fe(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,$r=1<<32-fe(t)+i|n<<i|r,Xr=s+e}else $r=1<<s|n<<i|r,Xr=e}function ti(e){null!==e.return&&(Zr(e,1),ei(e,1,0))}function ni(e){for(;e===Kr;)Kr=Hr[--Wr],Hr[Wr]=null,Gr=Hr[--Wr],Hr[Wr]=null;for(;e===Jr;)Jr=Qr[--Yr],Qr[Yr]=null,Xr=Qr[--Yr],Qr[Yr]=null,$r=Qr[--Yr],Qr[Yr]=null}var ri=null,ii=null,si=!1,oi=null,ai=!1,li=Error(o(519));function ci(e){throw gi(Ir(Error(o(418,"")),e)),li}function ui(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Re]=e,t[De]=r,n){case"dialog":Uu("cancel",t),Uu("close",t);break;case"iframe":case"object":case"embed":Uu("load",t);break;case"video":case"audio":for(n=0;n<Lu.length;n++)Uu(Lu[n],t);break;case"source":Uu("error",t);break;case"img":case"image":case"link":Uu("error",t),Uu("load",t);break;case"details":Uu("toggle",t);break;case"input":Uu("invalid",t),yt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),ht(t);break;case"select":Uu("invalid",t);break;case"textarea":Uu("invalid",t),bt(t,r.value,r.defaultValue,r.children),ht(t)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||$u(t.textContent,n)?(null!=r.popover&&(Uu("beforetoggle",t),Uu("toggle",t)),null!=r.onScroll&&Uu("scroll",t),null!=r.onScrollEnd&&Uu("scrollend",t),null!=r.onClick&&(t.onclick=Xu),t=!0):t=!1,t||ci(e)}function hi(e){for(ri=e.return;ri;)switch(ri.tag){case 5:case 13:return void(ai=!1);case 27:case 3:return void(ai=!0);default:ri=ri.return}}function di(e){if(e!==ri)return!1;if(!si)return hi(e),si=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||ah(e.type,e.memoizedProps)),t=!t),t&&ii&&ci(e),hi(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){ii=vh(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}ii=null}}else 27===n?(n=ii,ph(e.type)?(e=_h,_h=null,ii=e):ii=n):ii=ri?vh(e.stateNode.nextSibling):null;return!0}function fi(){ii=ri=null,si=!1}function pi(){var e=oi;return null!==e&&(null===_c?_c=e:_c.push.apply(_c,e),oi=null),e}function gi(e){null===oi?oi=[e]:oi.push(e)}var mi=j(null),yi=null,vi=null;function _i(e,t,n){z(mi,t._currentValue),t._currentValue=n}function wi(e){e._currentValue=mi.current,V(mi)}function bi(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ti(e,t,n,r){var i=e.child;for(null!==i&&(i.return=e);null!==i;){var s=i.dependencies;if(null!==s){var a=i.child;s=s.firstContext;e:for(;null!==s;){var l=s;s=i;for(var c=0;c<t.length;c++)if(l.context===t[c]){s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),bi(s.return,n,e),r||(a=null);break e}s=l.next}}else if(18===i.tag){if(null===(a=i.return))throw Error(o(341));a.lanes|=n,null!==(s=a.alternate)&&(s.lanes|=n),bi(a,n,e),a=null}else a=i.child;if(null!==a)a.return=i;else for(a=i;null!==a;){if(a===e){a=null;break}if(null!==(i=a.sibling)){i.return=a.return,a=i;break}a=a.return}i=a}}function Ei(e,t,n,r){e=null;for(var i=t,s=!1;null!==i;){if(!s)if(0!==(524288&i.flags))s=!0;else if(0!==(262144&i.flags))break;if(10===i.tag){var a=i.alternate;if(null===a)throw Error(o(387));if(null!==(a=a.memoizedProps)){var l=i.type;Yn(i.pendingProps.value,a.value)||(null!==e?e.push(l):e=[l])}}else if(i===W.current){if(null===(a=i.alternate))throw Error(o(387));a.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(null!==e?e.push(Yh):e=[Yh])}i=i.return}null!==e&&Ti(t,e,n,r),t.flags|=262144}function Ii(e){for(e=e.firstContext;null!==e;){if(!Yn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Si(e){yi=e,vi=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function ki(e){return xi(yi,e)}function Ci(e,t){return null===yi&&Si(e),xi(e,t)}function xi(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===vi){if(null===e)throw Error(o(308));vi=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else vi=vi.next=t;return n}var Ni="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach((function(e){return e()}))}},Ai=r.unstable_scheduleCallback,Pi=r.unstable_NormalPriority,Ri={$$typeof:b,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Di(){return{controller:new Ni,data:new Map,refCount:0}}function Oi(e){e.refCount--,0===e.refCount&&Ai(Pi,(function(){e.controller.abort()}))}var Li=null,Mi=0,Fi=0,Ui=null;function ji(){if(0===--Mi&&null!==Li){null!==Ui&&(Ui.status="fulfilled");var e=Li;Li=null,Fi=0,Ui=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Vi=O.S;O.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Li){var n=Li=[];Mi=0,Fi=Au(),Ui={status:"pending",value:void 0,then:function(e){n.push(e)}}}Mi++,t.then(ji,ji)}(0,t),null!==Vi&&Vi(e,t)};var zi=j(null);function qi(){var e=zi.current;return null!==e?e:rc.pooledCache}function Bi(e,t){z(zi,null===t?zi.current:t.pool)}function Hi(){var e=qi();return null===e?null:{parent:Ri._currentValue,pool:e}}var Wi=Error(o(460)),Ki=Error(o(474)),Gi=Error(o(542)),Qi={then:function(){}};function Yi(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Ji(){}function $i(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Ji,Ji),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw es(e=t.reason),e;default:if("string"===typeof t.status)t.then(Ji,Ji);else{if(null!==(e=rc)&&100<e.shellSuspendCounter)throw Error(o(482));(e=t).status="pending",e.then((function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}}),(function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}}))}switch(t.status){case"fulfilled":return t.value;case"rejected":throw es(e=t.reason),e}throw Xi=t,Wi}}var Xi=null;function Zi(){if(null===Xi)throw Error(o(459));var e=Xi;return Xi=null,e}function es(e){if(e===Wi||e===Gi)throw Error(o(483))}var ts=!1;function ns(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function rs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function is(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ss(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&nc)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=Dr(e),Rr(e,null,n),t}return Nr(e,r,t,n),Dr(e)}function os(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ce(e,n)}}function as(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var ls=!1;function cs(){if(ls){if(null!==Ui)throw Ui}}function us(e,t,n,r){ls=!1;var i=e.updateQueue;ts=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==s){var h=i.baseState;for(o=0,u=c=l=null,a=s;;){var f=-536870913&a.lane,p=f!==a.lane;if(p?(sc&f)===f:(r&f)===f){0!==f&&f===Fi&&(ls=!0),null!==u&&(u=u.next={lane:0,tag:a.tag,payload:a.payload,callback:null,next:null});e:{var g=e,m=a;f=t;var y=n;switch(m.tag){case 1:if("function"===typeof(g=m.payload)){h=g.call(y,h,f);break e}h=g;break e;case 3:g.flags=-65537&g.flags|128;case 0:if(null===(f="function"===typeof(g=m.payload)?g.call(y,h,f):g)||void 0===f)break e;h=d({},h,f);break e;case 2:ts=!0}}null!==(f=a.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=i.callbacks)?i.callbacks=[f]:p.push(f))}else p={lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=p,l=h):u=u.next=p,o|=f;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(p=a).next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null===s&&(i.shared.lanes=0),fc|=o,e.lanes=o,e.memoizedState=h}}function hs(e,t){if("function"!==typeof e)throw Error(o(191,e));e.call(t)}function ds(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)hs(n[e],t)}var fs=j(null),ps=j(0);function gs(e,t){z(ps,e=hc),z(fs,t),hc=e|t.baseLanes}function ms(){z(ps,hc),z(fs,fs.current)}function ys(){hc=ps.current,V(fs),V(ps)}var vs=0,_s=null,ws=null,bs=null,Ts=!1,Es=!1,Is=!1,Ss=0,ks=0,Cs=null,xs=0;function Ns(){throw Error(o(321))}function As(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Yn(e[n],t[n]))return!1;return!0}function Ps(e,t,n,r,i,s){return vs=s,_s=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,O.H=null===e||null===e.memoizedState?Ko:Go,Is=!1,s=n(r,i),Is=!1,Es&&(s=Ds(t,n,r,i)),Rs(e),s}function Rs(e){O.H=Wo;var t=null!==ws&&null!==ws.next;if(vs=0,bs=ws=_s=null,Ts=!1,ks=0,Cs=null,t)throw Error(o(300));null===e||Ca||null!==(e=e.dependencies)&&Ii(e)&&(Ca=!0)}function Ds(e,t,n,r){_s=e;var i=0;do{if(Es&&(Cs=null),ks=0,Es=!1,25<=i)throw Error(o(301));if(i+=1,bs=ws=null,null!=e.updateQueue){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,null!=s.memoCache&&(s.memoCache.index=0)}O.H=Qo,s=t(n,r)}while(Es);return s}function Os(){var e=O.H,t=e.useState()[0];return t="function"===typeof t.then?Vs(t):t,e=e.useState()[0],(null!==ws?ws.memoizedState:null)!==e&&(_s.flags|=1024),t}function Ls(){var e=0!==Ss;return Ss=0,e}function Ms(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Fs(e){if(Ts){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Ts=!1}vs=0,bs=ws=_s=null,Es=!1,ks=Ss=0,Cs=null}function Us(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===bs?_s.memoizedState=bs=e:bs=bs.next=e,bs}function js(){if(null===ws){var e=_s.alternate;e=null!==e?e.memoizedState:null}else e=ws.next;var t=null===bs?_s.memoizedState:bs.next;if(null!==t)bs=t,ws=e;else{if(null===e){if(null===_s.alternate)throw Error(o(467));throw Error(o(310))}e={memoizedState:(ws=e).memoizedState,baseState:ws.baseState,baseQueue:ws.baseQueue,queue:ws.queue,next:null},null===bs?_s.memoizedState=bs=e:bs=bs.next=e}return bs}function Vs(e){var t=ks;return ks+=1,null===Cs&&(Cs=[]),e=$i(Cs,e,t),t=_s,null===(null===bs?t.memoizedState:bs.next)&&(t=t.alternate,O.H=null===t||null===t.memoizedState?Ko:Go),e}function zs(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return Vs(e);if(e.$$typeof===b)return ki(e)}throw Error(o(438,String(e)))}function qs(e){var t=null,n=_s.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=_s.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map((function(e){return e.slice()})),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},_s.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=x;return t.index++,n}function Bs(e,t){return"function"===typeof t?t(e):t}function Hs(e){return Ws(js(),ws,e)}function Ws(e,t,n){var r=e.queue;if(null===r)throw Error(o(311));r.lastRenderedReducer=n;var i=e.baseQueue,s=r.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}t.baseQueue=i=s,r.pending=null}if(s=e.baseState,null===i)e.memoizedState=s;else{var l=a=null,c=null,u=t=i.next,h=!1;do{var d=-536870913&u.lane;if(d!==u.lane?(sc&d)===d:(vs&d)===d){var f=u.revertLane;if(0===f)null!==c&&(c=c.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),d===Fi&&(h=!0);else{if((vs&f)===f){u=u.next,f===Fi&&(h=!0);continue}d={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=d,a=s):c=c.next=d,_s.lanes|=f,fc|=f}d=u.action,Is&&n(s,d),s=u.hasEagerState?u.eagerState:n(s,d)}else f={lane:d,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=f,a=s):c=c.next=f,_s.lanes|=d,fc|=d;u=u.next}while(null!==u&&u!==t);if(null===c?a=s:c.next=l,!Yn(s,e.memoizedState)&&(Ca=!0,h&&null!==(n=Ui)))throw n;e.memoizedState=s,e.baseState=a,e.baseQueue=c,r.lastRenderedState=s}return null===i&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Ks(e){var t=js(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);Yn(s,t.memoizedState)||(Ca=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Gs(e,t,n){var r=_s,i=js(),s=si;if(s){if(void 0===n)throw Error(o(407));n=n()}else n=t();var a=!Yn((ws||i).memoizedState,n);if(a&&(i.memoizedState=n,Ca=!0),i=i.queue,yo(2048,8,Js.bind(null,r,i,e),[e]),i.getSnapshot!==t||a||null!==bs&&1&bs.memoizedState.tag){if(r.flags|=2048,po(9,{destroy:void 0,resource:void 0},Ys.bind(null,r,i,n,t),null),null===rc)throw Error(o(349));s||0!==(124&vs)||Qs(r,t,n)}return n}function Qs(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=_s.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},_s.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ys(e,t,n,r){t.value=n,t.getSnapshot=r,$s(t)&&Xs(e)}function Js(e,t,n){return n((function(){$s(t)&&Xs(e)}))}function $s(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Yn(e,n)}catch(qI){return!0}}function Xs(e){var t=Pr(e,2);null!==t&&Fc(t,e,2)}function Zs(e){var t=Us();if("function"===typeof e){var n=e;if(e=n(),Is){de(!0);try{n()}finally{de(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bs,lastRenderedState:e},t}function eo(e,t,n,r){return e.baseState=n,Ws(e,ws,"function"===typeof r?r:Bs)}function to(e,t,n,r,i){if(qo(e))throw Error(o(485));if(null!==(e=t.action)){var s={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){s.listeners.push(e)}};null!==O.T?n(!0):s.isTransition=!1,r(s),null===(n=t.pending)?(s.next=t.pending=s,no(t,s)):(s.next=n.next,t.pending=n.next=s)}}function no(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var s=O.T,o={};O.T=o;try{var a=n(i,r),l=O.S;null!==l&&l(o,a),ro(e,t,a)}catch(qI){so(e,t,qI)}finally{O.T=s}}else try{ro(e,t,s=n(i,r))}catch(c){so(e,t,c)}}function ro(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then((function(n){io(e,t,n)}),(function(n){return so(e,t,n)})):io(e,t,n)}function io(e,t,n){t.status="fulfilled",t.value=n,oo(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,no(e,n)))}function so(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,oo(t),t=t.next}while(t!==r)}e.action=null}function oo(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function ao(e,t){return t}function lo(e,t){if(si){var n=rc.formState;if(null!==n){e:{var r=_s;if(si){if(ii){t:{for(var i=ii,s=ai;8!==i.nodeType;){if(!s){i=null;break t}if(null===(i=vh(i.nextSibling))){i=null;break t}}i="F!"===(s=i.data)||"F"===s?i:null}if(i){ii=vh(i.nextSibling),r="F!"===i.data;break e}}ci(r)}r=!1}r&&(t=n[0])}}return(n=Us()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ao,lastRenderedState:t},n.queue=r,n=jo.bind(null,_s,r),r.dispatch=n,r=Zs(!1),s=zo.bind(null,_s,!1,r.queue),i={state:t,dispatch:null,action:e,pending:null},(r=Us()).queue=i,n=to.bind(null,_s,i,s,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function co(e){return uo(js(),ws,e)}function uo(e,t,n){if(t=Ws(e,t,ao)[0],e=Hs(Bs)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var r=Vs(t)}catch(Ec){if(Ec===Wi)throw Gi;throw Ec}else r=t;var i=(t=js()).queue,s=i.dispatch;return n!==t.memoizedState&&(_s.flags|=2048,po(9,{destroy:void 0,resource:void 0},ho.bind(null,i,n),null)),[r,s,e]}function ho(e,t){e.action=t}function fo(e){var t=js(),n=ws;if(null!==n)return uo(t,n,e);js(),t=t.memoizedState;var r=(n=js()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function po(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=_s.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},_s.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function go(){return js().memoizedState}function mo(e,t,n,r){var i=Us();r=void 0===r?null:r,_s.flags|=e,i.memoizedState=po(1|t,{destroy:void 0,resource:void 0},n,r)}function yo(e,t,n,r){var i=js();r=void 0===r?null:r;var s=i.memoizedState.inst;null!==ws&&null!==r&&As(r,ws.memoizedState.deps)?i.memoizedState=po(t,s,n,r):(_s.flags|=e,i.memoizedState=po(1|t,s,n,r))}function vo(e,t){mo(8390656,8,e,t)}function _o(e,t){yo(2048,8,e,t)}function wo(e,t){return yo(4,2,e,t)}function bo(e,t){return yo(4,4,e,t)}function To(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function Eo(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,yo(4,4,To.bind(null,t,e),n)}function Io(){}function So(e,t){var n=js();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&As(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function ko(e,t){var n=js();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&As(t,r[1]))return r[0];if(r=e(),Is){de(!0);try{e()}finally{de(!1)}}return n.memoizedState=[r,t],r}function Co(e,t,n){return void 0===n||0!==(1073741824&vs)?e.memoizedState=t:(e.memoizedState=n,e=Mc(),_s.lanes|=e,fc|=e,n)}function xo(e,t,n,r){return Yn(n,t)?n:null!==fs.current?(e=Co(e,n,r),Yn(e,t)||(Ca=!0),e):0===(42&vs)?(Ca=!0,e.memoizedState=n):(e=Mc(),_s.lanes|=e,fc|=e,t)}function No(e,t,n,r,i){var s=L.p;L.p=0!==s&&8>s?s:8;var o=O.T,a={};O.T=a,zo(e,!1,t,n);try{var l=i(),c=O.S;if(null!==c&&c(a,l),null!==l&&"object"===typeof l&&"function"===typeof l.then){var u=function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then((function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)}),(function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)})),r}(l,r);Vo(e,t,u,Lc())}else Vo(e,t,r,Lc())}catch(qI){Vo(e,t,{then:function(){},status:"rejected",reason:qI},Lc())}finally{L.p=s,O.T=o}}function Ao(){}function Po(e,t,n,r){if(5!==e.tag)throw Error(o(476));var i=Ro(e).queue;No(e,i,t,M,null===n?Ao:function(){return Do(e),n(r)})}function Ro(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:M,baseState:M,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bs,lastRenderedState:M},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bs,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Do(e){Vo(e,Ro(e).next.queue,{},Lc())}function Oo(){return ki(Yh)}function Lo(){return js().memoizedState}function Mo(){return js().memoizedState}function Fo(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Lc(),r=ss(t,e=is(n),n);return null!==r&&(Fc(r,t,n),os(r,t,n)),t={cache:Di()},void(e.payload=t)}t=t.return}}function Uo(e,t,n){var r=Lc();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},qo(e)?Bo(t,n):null!==(n=Ar(e,t,n,r))&&(Fc(n,e,r),Ho(n,t,r))}function jo(e,t,n){Vo(e,t,n,Lc())}function Vo(e,t,n,r){var i={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(qo(e))Bo(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Yn(a,o))return Nr(e,t,i,0),null===rc&&xr(),!1}catch(qI){}if(null!==(n=Ar(e,t,i,r)))return Fc(n,e,r),Ho(n,t,r),!0}return!1}function zo(e,t,n,r){if(r={lane:2,revertLane:Au(),action:r,hasEagerState:!1,eagerState:null,next:null},qo(e)){if(t)throw Error(o(479))}else null!==(t=Ar(e,n,r,2))&&Fc(t,e,2)}function qo(e){var t=e.alternate;return e===_s||null!==t&&t===_s}function Bo(e,t){Es=Ts=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ho(e,t,n){if(0!==(4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ce(e,n)}}var Wo={readContext:ki,use:zs,useCallback:Ns,useContext:Ns,useEffect:Ns,useImperativeHandle:Ns,useLayoutEffect:Ns,useInsertionEffect:Ns,useMemo:Ns,useReducer:Ns,useRef:Ns,useState:Ns,useDebugValue:Ns,useDeferredValue:Ns,useTransition:Ns,useSyncExternalStore:Ns,useId:Ns,useHostTransitionStatus:Ns,useFormState:Ns,useActionState:Ns,useOptimistic:Ns,useMemoCache:Ns,useCacheRefresh:Ns},Ko={readContext:ki,use:zs,useCallback:function(e,t){return Us().memoizedState=[e,void 0===t?null:t],e},useContext:ki,useEffect:vo,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,mo(4194308,4,To.bind(null,t,e),n)},useLayoutEffect:function(e,t){return mo(4194308,4,e,t)},useInsertionEffect:function(e,t){mo(4,2,e,t)},useMemo:function(e,t){var n=Us();t=void 0===t?null:t;var r=e();if(Is){de(!0);try{e()}finally{de(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=Us();if(void 0!==n){var i=n(t);if(Is){de(!0);try{n(t)}finally{de(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=Uo.bind(null,_s,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Us().memoizedState=e},useState:function(e){var t=(e=Zs(e)).queue,n=jo.bind(null,_s,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Io,useDeferredValue:function(e,t){return Co(Us(),e,t)},useTransition:function(){var e=Zs(!1);return e=No.bind(null,_s,e.queue,!0,!1),Us().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=_s,i=Us();if(si){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===rc)throw Error(o(349));0!==(124&sc)||Qs(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,vo(Js.bind(null,r,s,e),[e]),r.flags|=2048,po(9,{destroy:void 0,resource:void 0},Ys.bind(null,r,s,n,t),null),n},useId:function(){var e=Us(),t=rc.identifierPrefix;if(si){var n=Xr;t="\xab"+t+"R"+(n=($r&~(1<<32-fe($r)-1)).toString(32)+n),0<(n=Ss++)&&(t+="H"+n.toString(32)),t+="\xbb"}else t="\xab"+t+"r"+(n=xs++).toString(32)+"\xbb";return e.memoizedState=t},useHostTransitionStatus:Oo,useFormState:lo,useActionState:lo,useOptimistic:function(e){var t=Us();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=zo.bind(null,_s,!0,n),n.dispatch=t,[e,t]},useMemoCache:qs,useCacheRefresh:function(){return Us().memoizedState=Fo.bind(null,_s)}},Go={readContext:ki,use:zs,useCallback:So,useContext:ki,useEffect:_o,useImperativeHandle:Eo,useInsertionEffect:wo,useLayoutEffect:bo,useMemo:ko,useReducer:Hs,useRef:go,useState:function(){return Hs(Bs)},useDebugValue:Io,useDeferredValue:function(e,t){return xo(js(),ws.memoizedState,e,t)},useTransition:function(){var e=Hs(Bs)[0],t=js().memoizedState;return["boolean"===typeof e?e:Vs(e),t]},useSyncExternalStore:Gs,useId:Lo,useHostTransitionStatus:Oo,useFormState:co,useActionState:co,useOptimistic:function(e,t){return eo(js(),0,e,t)},useMemoCache:qs,useCacheRefresh:Mo},Qo={readContext:ki,use:zs,useCallback:So,useContext:ki,useEffect:_o,useImperativeHandle:Eo,useInsertionEffect:wo,useLayoutEffect:bo,useMemo:ko,useReducer:Ks,useRef:go,useState:function(){return Ks(Bs)},useDebugValue:Io,useDeferredValue:function(e,t){var n=js();return null===ws?Co(n,e,t):xo(n,ws.memoizedState,e,t)},useTransition:function(){var e=Ks(Bs)[0],t=js().memoizedState;return["boolean"===typeof e?e:Vs(e),t]},useSyncExternalStore:Gs,useId:Lo,useHostTransitionStatus:Oo,useFormState:fo,useActionState:fo,useOptimistic:function(e,t){var n=js();return null!==ws?eo(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:qs,useCacheRefresh:Mo},Yo=null,Jo=0;function $o(e){var t=Jo;return Jo+=1,null===Yo&&(Yo=[]),$i(Yo,e,t)}function Xo(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function Zo(e,t){if(t.$$typeof===f)throw Error(o(525));throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ea(e){return(0,e._init)(e._payload)}function ta(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(e,t){return(e=Ur(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=qr(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===m?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===k&&ea(s)===t.type)?(Xo(t=i(t,n.props),n),t.return=e,t):(Xo(t=Vr(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Br(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=zr(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=qr(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case p:return Xo(n=Vr(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case g:return(t=Br(t,e.mode,n)).return=e,t;case k:return d(e,t=(0,t._init)(t._payload),n)}if(D(t)||A(t))return(t=zr(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return d(e,$o(t),n);if(t.$$typeof===b)return d(e,Ci(e,t),n);Zo(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case p:return n.key===i?c(e,t,n,r):null;case g:return n.key===i?u(e,t,n,r):null;case k:return f(e,t,n=(i=n._init)(n._payload),r)}if(D(n)||A(n))return null!==i?null:h(e,t,n,r,null);if("function"===typeof n.then)return f(e,t,$o(n),r);if(n.$$typeof===b)return f(e,t,Ci(e,n),r);Zo(e,n)}return null}function y(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case p:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case g:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case k:return y(e,t,n,r=(0,r._init)(r._payload),i)}if(D(r)||A(r))return h(t,e=e.get(n)||null,r,i,null);if("function"===typeof r.then)return y(e,t,n,$o(r),i);if(r.$$typeof===b)return y(e,t,n,Ci(t,r),i);Zo(t,r)}return null}function v(l,c,u,h){if("object"===typeof u&&null!==u&&u.type===m&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case p:e:{for(var _=u.key;null!==c;){if(c.key===_){if((_=u.type)===m){if(7===c.tag){n(l,c.sibling),(h=i(c,u.props.children)).return=l,l=h;break e}}else if(c.elementType===_||"object"===typeof _&&null!==_&&_.$$typeof===k&&ea(_)===c.type){n(l,c.sibling),Xo(h=i(c,u.props),u),h.return=l,l=h;break e}n(l,c);break}t(l,c),c=c.sibling}u.type===m?((h=zr(u.props.children,l.mode,h,u.key)).return=l,l=h):(Xo(h=Vr(u.type,u.key,u.props,null,l.mode,h),u),h.return=l,l=h)}return a(l);case g:e:{for(_=u.key;null!==c;){if(c.key===_){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(h=i(c,u.children||[])).return=l,l=h;break e}n(l,c);break}t(l,c),c=c.sibling}(h=Br(u,l.mode,h)).return=l,l=h}return a(l);case k:return v(l,c,u=(_=u._init)(u._payload),h)}if(D(u))return function(i,o,a,l){for(var c=null,u=null,h=o,p=o=0,g=null;null!==h&&p<a.length;p++){h.index>p?(g=h,h=null):g=h.sibling;var m=f(i,h,a[p],l);if(null===m){null===h&&(h=g);break}e&&h&&null===m.alternate&&t(i,h),o=s(m,o,p),null===u?c=m:u.sibling=m,u=m,h=g}if(p===a.length)return n(i,h),si&&Zr(i,p),c;if(null===h){for(;p<a.length;p++)null!==(h=d(i,a[p],l))&&(o=s(h,o,p),null===u?c=h:u.sibling=h,u=h);return si&&Zr(i,p),c}for(h=r(h);p<a.length;p++)null!==(g=y(h,i,p,a[p],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?p:g.key),o=s(g,o,p),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach((function(e){return t(i,e)})),si&&Zr(i,p),c}(l,c,u,h);if(A(u)){if("function"!==typeof(_=A(u)))throw Error(o(150));return function(i,a,l,c){if(null==l)throw Error(o(151));for(var u=null,h=null,p=a,g=a=0,m=null,v=l.next();null!==p&&!v.done;g++,v=l.next()){p.index>g?(m=p,p=null):m=p.sibling;var _=f(i,p,v.value,c);if(null===_){null===p&&(p=m);break}e&&p&&null===_.alternate&&t(i,p),a=s(_,a,g),null===h?u=_:h.sibling=_,h=_,p=m}if(v.done)return n(i,p),si&&Zr(i,g),u;if(null===p){for(;!v.done;g++,v=l.next())null!==(v=d(i,v.value,c))&&(a=s(v,a,g),null===h?u=v:h.sibling=v,h=v);return si&&Zr(i,g),u}for(p=r(p);!v.done;g++,v=l.next())null!==(v=y(p,i,g,v.value,c))&&(e&&null!==v.alternate&&p.delete(null===v.key?g:v.key),a=s(v,a,g),null===h?u=v:h.sibling=v,h=v);return e&&p.forEach((function(e){return t(i,e)})),si&&Zr(i,g),u}(l,c,u=_.call(u),h)}if("function"===typeof u.then)return v(l,c,$o(u),h);if(u.$$typeof===b)return v(l,c,Ci(l,u),h);Zo(l,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(h=i(c,u)).return=l,l=h):(n(l,c),(h=qr(u,l.mode,h)).return=l,l=h),a(l)):n(l,c)}return function(e,t,n,r){try{Jo=0;var i=v(e,t,n,r);return Yo=null,i}catch(Ec){if(Ec===Wi||Ec===Gi)throw Ec;var s=Mr(29,Ec,null,e.mode);return s.lanes=r,s.return=e,s}}}var na=ta(!0),ra=ta(!1),ia=j(null),sa=null;function oa(e){var t=e.alternate;z(ua,1&ua.current),z(ia,e),null===sa&&(null===t||null!==fs.current||null!==t.memoizedState)&&(sa=e)}function aa(e){if(22===e.tag){if(z(ua,ua.current),z(ia,e),null===sa){var t=e.alternate;null!==t&&null!==t.memoizedState&&(sa=e)}}else la()}function la(){z(ua,ua.current),z(ia,ia.current)}function ca(e){V(ia),sa===e&&(sa=null),V(ua)}var ua=j(0);function ha(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||yh(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function da(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:d({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var fa={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Lc(),i=is(r);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=ss(e,i,r))&&(Fc(t,e,r),os(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Lc(),i=is(r);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=ss(e,i,r))&&(Fc(t,e,r),os(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Lc(),r=is(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=ss(e,r,n))&&(Fc(t,e,n),os(t,e,n))}};function pa(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!Jn(n,r)||!Jn(i,s))}function ga(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&fa.enqueueReplaceState(t,t.state,null)}function ma(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=d({},n)),e)void 0===n[i]&&(n[i]=e[i]);return n}var ya="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function va(e){ya(e)}function _a(e){console.error(e)}function wa(e){ya(e)}function ba(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout((function(){throw n}))}}function Ta(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout((function(){throw r}))}}function Ea(e,t,n){return(n=is(n)).tag=3,n.payload={element:null},n.callback=function(){ba(e,t)},n}function Ia(e){return(e=is(e)).tag=3,e}function Sa(e,t,n,r){var i=n.type.getDerivedStateFromError;if("function"===typeof i){var s=r.value;e.payload=function(){return i(s)},e.callback=function(){Ta(t,n,r)}}var o=n.stateNode;null!==o&&"function"===typeof o.componentDidCatch&&(e.callback=function(){Ta(t,n,r),"function"!==typeof i&&(null===Sc?Sc=new Set([this]):Sc.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var ka=Error(o(461)),Ca=!1;function xa(e,t,n,r){t.child=null===e?ra(t,null,n,r):na(t,e.child,n,r)}function Na(e,t,n,r,i){n=n.render;var s=t.ref;if("ref"in r){var o={};for(var a in r)"ref"!==a&&(o[a]=r[a])}else o=r;return Si(t),r=Ps(e,t,n,o,s,i),a=Ls(),null===e||Ca?(si&&a&&ti(t),t.flags|=1,xa(e,t,r,i),t.child):(Ms(e,t,i),Ya(e,t,i))}function Aa(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Fr(s)||void 0!==s.defaultProps||null!==n.compare?((e=Vr(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Pa(e,t,s,r,i))}if(s=e.child,!Ja(e,i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:Jn)(o,r)&&e.ref===t.ref)return Ya(e,t,i)}return t.flags|=1,(e=Ur(s,r)).ref=t.ref,e.return=t,t.child=e}function Pa(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(Jn(s,r)&&e.ref===t.ref){if(Ca=!1,t.pendingProps=r=s,!Ja(e,i))return t.lanes=e.lanes,Ya(e,t,i);0!==(131072&e.flags)&&(Ca=!0)}}return La(e,t,n,r,i)}function Ra(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode){if(0!==(128&t.flags)){if(r=null!==s?s.baseLanes|n:n,null!==e){for(i=t.child=e.child,s=0;null!==i;)s=s|i.lanes|i.childLanes,i=i.sibling;t.childLanes=s&~r}else t.childLanes=0,t.child=null;return Da(e,t,r,n)}if(0===(536870912&n))return t.lanes=t.childLanes=536870912,Da(e,t,null!==s?s.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Bi(0,null!==s?s.cachePool:null),null!==s?gs(t,s):ms(),aa(t)}else null!==s?(Bi(0,s.cachePool),gs(t,s),la(),t.memoizedState=null):(null!==e&&Bi(0,null),ms(),la());return xa(e,t,i,n),t.child}function Da(e,t,n,r){var i=qi();return i=null===i?null:{parent:Ri._currentValue,pool:i},t.memoizedState={baseLanes:n,cachePool:i},null!==e&&Bi(0,null),ms(),aa(t),null!==e&&Ei(e,t,r,!0),null}function Oa(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(o(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function La(e,t,n,r,i){return Si(t),n=Ps(e,t,n,r,void 0,i),r=Ls(),null===e||Ca?(si&&r&&ti(t),t.flags|=1,xa(e,t,n,i),t.child):(Ms(e,t,i),Ya(e,t,i))}function Ma(e,t,n,r,i,s){return Si(t),t.updateQueue=null,n=Ds(t,r,n,i),Rs(e),r=Ls(),null===e||Ca?(si&&r&&ti(t),t.flags|=1,xa(e,t,n,s),t.child):(Ms(e,t,s),Ya(e,t,s))}function Fa(e,t,n,r,i){if(Si(t),null===t.stateNode){var s=Or,o=n.contextType;"object"===typeof o&&null!==o&&(s=ki(o)),s=new n(r,s),t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,s.updater=fa,t.stateNode=s,s._reactInternals=t,(s=t.stateNode).props=r,s.state=t.memoizedState,s.refs={},ns(t),o=n.contextType,s.context="object"===typeof o&&null!==o?ki(o):Or,s.state=t.memoizedState,"function"===typeof(o=n.getDerivedStateFromProps)&&(da(t,n,o,r),s.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(o=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),o!==s.state&&fa.enqueueReplaceState(s,s.state,null),us(t,r,s,i),cs(),s.state=t.memoizedState),"function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){s=t.stateNode;var a=t.memoizedProps,l=ma(n,a);s.props=l;var c=s.context,u=n.contextType;o=Or,"object"===typeof u&&null!==u&&(o=ki(u));var h=n.getDerivedStateFromProps;u="function"===typeof h||"function"===typeof s.getSnapshotBeforeUpdate,a=t.pendingProps!==a,u||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a||c!==o)&&ga(t,s,r,o),ts=!1;var d=t.memoizedState;s.state=d,us(t,r,s,i),cs(),c=t.memoizedState,a||d!==c||ts?("function"===typeof h&&(da(t,n,h,r),c=t.memoizedState),(l=ts||pa(t,n,l,r,d,c,o))?(u||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),s.props=r,s.state=c,s.context=o,r=l):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,rs(e,t),u=ma(n,o=t.memoizedProps),s.props=u,h=t.pendingProps,d=s.context,c=n.contextType,l=Or,"object"===typeof c&&null!==c&&(l=ki(c)),(c="function"===typeof(a=n.getDerivedStateFromProps)||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==h||d!==l)&&ga(t,s,r,l),ts=!1,d=t.memoizedState,s.state=d,us(t,r,s,i),cs();var f=t.memoizedState;o!==h||d!==f||ts||null!==e&&null!==e.dependencies&&Ii(e.dependencies)?("function"===typeof a&&(da(t,n,a,r),f=t.memoizedState),(u=ts||pa(t,n,u,r,d,f,l)||null!==e&&null!==e.dependencies&&Ii(e.dependencies))?(c||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,f,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),s.props=r,s.state=f,s.context=l,r=u):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return s=r,Oa(e,t),r=0!==(128&t.flags),s||r?(s=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:s.render(),t.flags|=1,null!==e&&r?(t.child=na(t,e.child,null,i),t.child=na(t,null,n,i)):xa(e,t,n,i),t.memoizedState=s.state,e=t.child):e=Ya(e,t,i),e}function Ua(e,t,n,r){return fi(),t.flags|=256,xa(e,t,n,r),t.child}var ja={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Va(e){return{baseLanes:e,cachePool:Hi()}}function za(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=mc),e}function qa(e,t,n){var r,i=t.pendingProps,s=!1,a=0!==(128&t.flags);if((r=a)||(r=(null===e||null!==e.memoizedState)&&0!==(2&ua.current)),r&&(s=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(si){if(s?oa(t):la(),si){var l,c=ii;if(l=c){e:{for(l=c,c=ai;8!==l.nodeType;){if(!c){c=null;break e}if(null===(l=vh(l.nextSibling))){c=null;break e}}c=l}null!==c?(t.memoizedState={dehydrated:c,treeContext:null!==Jr?{id:$r,overflow:Xr}:null,retryLane:536870912,hydrationErrors:null},(l=Mr(18,null,null,0)).stateNode=c,l.return=t,t.child=l,ri=t,ii=null,l=!0):l=!1}l||ci(t)}if(null!==(c=t.memoizedState)&&null!==(c=c.dehydrated))return yh(c)?t.lanes=32:t.lanes=536870912,null;ca(t)}return c=i.children,i=i.fallback,s?(la(),c=Ha({mode:"hidden",children:c},s=t.mode),i=zr(i,s,n,null),c.return=t,i.return=t,c.sibling=i,t.child=c,(s=t.child).memoizedState=Va(n),s.childLanes=za(e,r,n),t.memoizedState=ja,i):(oa(t),Ba(t,c))}if(null!==(l=e.memoizedState)&&null!==(c=l.dehydrated)){if(a)256&t.flags?(oa(t),t.flags&=-257,t=Wa(e,t,n)):null!==t.memoizedState?(la(),t.child=e.child,t.flags|=128,t=null):(la(),s=i.fallback,c=t.mode,i=Ha({mode:"visible",children:i.children},c),(s=zr(s,c,n,null)).flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,na(t,e.child,null,n),(i=t.child).memoizedState=Va(n),i.childLanes=za(e,r,n),t.memoizedState=ja,t=s);else if(oa(t),yh(c)){if(r=c.nextSibling&&c.nextSibling.dataset)var u=r.dgst;r=u,(i=Error(o(419))).stack="",i.digest=r,gi({value:i,source:null,stack:null}),t=Wa(e,t,n)}else if(Ca||Ei(e,t,n,!1),r=0!==(n&e.childLanes),Ca||r){if(null!==(r=rc)&&(0!==(i=0!==((i=0!==(42&(i=n&-n))?1:xe(i))&(r.suspendedLanes|n))?0:i)&&i!==l.retryLane))throw l.retryLane=i,Pr(e,i),Fc(r,e,i),ka;"$?"===c.data||Qc(),t=Wa(e,t,n)}else"$?"===c.data?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,ii=vh(c.nextSibling),ri=t,si=!0,oi=null,ai=!1,null!==e&&(Qr[Yr++]=$r,Qr[Yr++]=Xr,Qr[Yr++]=Jr,$r=e.id,Xr=e.overflow,Jr=t),(t=Ba(t,i.children)).flags|=4096);return t}return s?(la(),s=i.fallback,c=t.mode,u=(l=e.child).sibling,(i=Ur(l,{mode:"hidden",children:i.children})).subtreeFlags=65011712&l.subtreeFlags,null!==u?s=Ur(u,s):(s=zr(s,c,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,null===(c=e.child.memoizedState)?c=Va(n):(null!==(l=c.cachePool)?(u=Ri._currentValue,l=l.parent!==u?{parent:u,pool:u}:l):l=Hi(),c={baseLanes:c.baseLanes|n,cachePool:l}),s.memoizedState=c,s.childLanes=za(e,r,n),t.memoizedState=ja,i):(oa(t),e=(n=e.child).sibling,(n=Ur(n,{mode:"visible",children:i.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function Ba(e,t){return(t=Ha({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Ha(e,t){return(e=Mr(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Wa(e,t,n){return na(t,e.child,null,n),(e=Ba(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ka(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),bi(e.return,t,n)}function Ga(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Qa(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(xa(e,t,r.children,n),0!==(2&(r=ua.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ka(e,n,t);else if(19===e.tag)Ka(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(z(ua,r),i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ha(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ga(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ha(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ga(t,!0,n,null,s);break;case"together":Ga(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ya(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),fc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Ei(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Ur(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ur(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ja(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Ii(e))}function $a(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Ca=!0;else{if(!Ja(e,n)&&0===(128&t.flags))return Ca=!1,function(e,t,n){switch(t.tag){case 3:K(t,t.stateNode.containerInfo),_i(0,Ri,e.memoizedState.cache),fi();break;case 27:case 5:Q(t);break;case 4:K(t,t.stateNode.containerInfo);break;case 10:_i(0,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(oa(t),t.flags|=128,null):0!==(n&t.child.childLanes)?qa(e,t,n):(oa(t),null!==(e=Ya(e,t,n))?e.sibling:null);oa(t);break;case 19:var i=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(Ei(e,t,n,!1),r=0!==(n&t.childLanes)),i){if(r)return Qa(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),z(ua,ua.current),r)break;return null;case 22:case 23:return t.lanes=0,Ra(e,t,n);case 24:_i(0,Ri,e.memoizedState.cache)}return Ya(e,t,n)}(e,t,n);Ca=0!==(131072&e.flags)}else Ca=!1,si&&0!==(1048576&t.flags)&&ei(t,Gr,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,i=r._init;if(r=i(r._payload),t.type=r,"function"!==typeof r){if(void 0!==r&&null!==r){if((i=r.$$typeof)===T){t.tag=11,t=Na(null,t,r,e,n);break e}if(i===S){t.tag=14,t=Aa(null,t,r,e,n);break e}}throw t=R(r)||r,Error(o(306,t,""))}Fr(r)?(e=ma(r,e),t.tag=1,t=Fa(null,t,r,e,n)):(t.tag=0,t=La(null,t,r,e,n))}return t;case 0:return La(e,t,t.type,t.pendingProps,n);case 1:return Fa(e,t,r=t.type,i=ma(r,t.pendingProps),n);case 3:e:{if(K(t,t.stateNode.containerInfo),null===e)throw Error(o(387));r=t.pendingProps;var s=t.memoizedState;i=s.element,rs(e,t),us(t,r,null,n);var a=t.memoizedState;if(r=a.cache,_i(0,Ri,r),r!==s.cache&&Ti(t,[Ri],n,!0),cs(),r=a.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:a.cache},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Ua(e,t,r,n);break e}if(r!==i){gi(i=Ir(Error(o(424)),t)),t=Ua(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(ii=vh(e.firstChild),ri=t,si=!0,oi=null,ai=!0,n=ra(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fi(),r===i){t=Ya(e,t,n);break e}xa(e,t,r,n)}t=t.child}return t;case 26:return Oa(e,t),null===e?(n=Nh(t.type,null,t.pendingProps,null))?t.memoizedState=n:si||(n=t.type,e=t.pendingProps,(r=ih(H.current).createElement(n))[Re]=t,r[De]=e,th(r,n,e),We(r),t.stateNode=r):t.memoizedState=Nh(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Q(t),null===e&&si&&(r=t.stateNode=bh(t.type,t.pendingProps,H.current),ri=t,ai=!0,i=ii,ph(t.type)?(_h=i,ii=vh(r.firstChild)):ii=i),xa(e,t,t.pendingProps.children,n),Oa(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&si&&((i=r=ii)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[je])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(s=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(s!==i.rel||e.getAttribute("href")!==(null==i.href||""===i.href?null:i.href)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin)||e.getAttribute("title")!==(null==i.title?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((s=e.getAttribute("src"))!==(null==i.src?null:i.src)||e.getAttribute("type")!==(null==i.type?null:i.type)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var s=null==i.name?null:""+i.name;if("hidden"===i.type&&e.getAttribute("name")===s)return e}if(null===(e=vh(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,ai))?(t.stateNode=r,ri=t,ii=vh(r.firstChild),ai=!1,i=!0):i=!1),i||ci(t)),Q(t),i=t.type,s=t.pendingProps,a=null!==e?e.memoizedProps:null,r=s.children,ah(i,s)?r=null:null!==a&&ah(i,a)&&(t.flags|=32),null!==t.memoizedState&&(i=Ps(e,t,Os,null,null,n),Yh._currentValue=i),Oa(e,t),xa(e,t,r,n),t.child;case 6:return null===e&&si&&((e=n=ii)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=vh(e.nextSibling)))return null}return e}(n,t.pendingProps,ai))?(t.stateNode=n,ri=t,ii=null,e=!0):e=!1),e||ci(t)),null;case 13:return qa(e,t,n);case 4:return K(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=na(t,null,r,n):xa(e,t,r,n),t.child;case 11:return Na(e,t,t.type,t.pendingProps,n);case 7:return xa(e,t,t.pendingProps,n),t.child;case 8:case 12:return xa(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,_i(0,t.type,r.value),xa(e,t,r.children,n),t.child;case 9:return i=t.type._context,r=t.pendingProps.children,Si(t),r=r(i=ki(i)),t.flags|=1,xa(e,t,r,n),t.child;case 14:return Aa(e,t,t.type,t.pendingProps,n);case 15:return Pa(e,t,t.type,t.pendingProps,n);case 19:return Qa(e,t,n);case 31:return r=t.pendingProps,n=t.mode,r={mode:r.mode,children:r.children},null===e?((n=Ha(r,n)).ref=t.ref,t.child=n,n.return=t,t=n):((n=Ur(e.child,r)).ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return Ra(e,t,n);case 24:return Si(t),r=ki(Ri),null===e?(null===(i=qi())&&(i=rc,s=Di(),i.pooledCache=s,s.refCount++,null!==s&&(i.pooledCacheLanes|=n),i=s),t.memoizedState={parent:r,cache:i},ns(t),_i(0,Ri,i)):(0!==(e.lanes&n)&&(rs(e,t),us(t,null,null,n),cs()),i=e.memoizedState,s=t.memoizedState,i.parent!==r?(i={parent:r,cache:r},t.memoizedState=i,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=i),_i(0,Ri,r)):(r=s.cache,_i(0,Ri,r),r!==i.cache&&Ti(t,[Ri],n,!0))),xa(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function Xa(e){e.flags|=4}function Za(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!qh(t)){if(null!==(t=ia.current)&&((4194048&sc)===sc?null!==sa:(62914560&sc)!==sc&&0===(536870912&sc)||t!==sa))throw Xi=Qi,Ki;e.flags|=8192}}function el(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Ee():536870912,e.lanes|=t,yc|=t)}function tl(e,t){if(!si)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function nl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=65011712&i.subtreeFlags,r|=65011712&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function rl(e,t,n){var r=t.pendingProps;switch(ni(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return nl(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),wi(Ri),G(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(di(t)?Xa(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,pi())),nl(t),null;case 26:return n=t.memoizedState,null===e?(Xa(t),null!==n?(nl(t),Za(t,n)):(nl(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Xa(t),nl(t),Za(t,n)):(nl(t),t.flags&=-16777217):(e.memoizedProps!==r&&Xa(t),nl(t),t.flags&=-16777217),null;case 27:Y(t),n=H.current;var i=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Xa(t);else{if(!r){if(null===t.stateNode)throw Error(o(166));return nl(t),null}e=q.current,di(t)?ui(t):(e=bh(i,r,n),t.stateNode=e,Xa(t))}return nl(t),null;case 5:if(Y(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Xa(t);else{if(!r){if(null===t.stateNode)throw Error(o(166));return nl(t),null}if(e=q.current,di(t))ui(t);else{switch(i=ih(H.current),e){case 1:e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=i.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof r.is?i.createElement("select",{is:r.is}):i.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e="string"===typeof r.is?i.createElement(n,{is:r.is}):i.createElement(n)}}e[Re]=t,e[De]=r;e:for(i=t.child;null!==i;){if(5===i.tag||6===i.tag)e.appendChild(i.stateNode);else if(4!==i.tag&&27!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;null===i.sibling;){if(null===i.return||i.return===t)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}t.stateNode=e;e:switch(th(e,n,r),n){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Xa(t)}}return nl(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&Xa(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(e=H.current,di(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(i=ri))switch(i.tag){case 27:case 5:r=i.memoizedProps}e[Re]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||$u(e.nodeValue,n)))||ci(t)}else(e=ih(e).createTextNode(r))[Re]=t,t.stateNode=e}return nl(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(i=di(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(o(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(o(317));i[Re]=t}else fi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;nl(t),i=!1}else i=pi(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return 256&t.flags?(ca(t),t):(ca(t),null)}if(ca(t),0!==(128&t.flags))return t.lanes=n,t;if(n=null!==r,e=null!==e&&null!==e.memoizedState,n){i=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(i=r.alternate.memoizedState.cachePool.pool);var s=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(s=r.memoizedState.cachePool.pool),s!==i&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),el(t,t.updateQueue),nl(t),null;case 4:return G(),null===e&&zu(t.stateNode.containerInfo),nl(t),null;case 10:return wi(t.type),nl(t),null;case 19:if(V(ua),null===(i=t.memoizedState))return nl(t),null;if(r=0!==(128&t.flags),null===(s=i.rendering))if(r)tl(i,!1);else{if(0!==dc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=ha(e))){for(t.flags|=128,tl(i,!1),e=s.updateQueue,t.updateQueue=e,el(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)jr(n,e),n=n.sibling;return z(ua,1&ua.current|2),t.child}e=e.sibling}null!==i.tail&&te()>Tc&&(t.flags|=128,r=!0,tl(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ha(s))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,el(t,e),tl(i,!0),null===i.tail&&"hidden"===i.tailMode&&!s.alternate&&!si)return nl(t),null}else 2*te()-i.renderingStartTime>Tc&&536870912!==n&&(t.flags|=128,r=!0,tl(i,!1),t.lanes=4194304);i.isBackwards?(s.sibling=t.child,t.child=s):(null!==(e=i.last)?e.sibling=s:t.child=s,i.last=s)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=te(),t.sibling=null,e=ua.current,z(ua,r?1&e|2:1&e),t):(nl(t),null);case 22:case 23:return ca(t),ys(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(nl(t),6&t.subtreeFlags&&(t.flags|=8192)):nl(t),null!==(n=t.updateQueue)&&el(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&V(zi),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),wi(Ri),nl(t),null;case 25:case 30:return null}throw Error(o(156,t.tag))}function il(e,t){switch(ni(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return wi(Ri),G(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return Y(t),null;case 13:if(ca(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));fi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return V(ua),null;case 4:return G(),null;case 10:return wi(t.type),null;case 22:case 23:return ca(t),ys(),null!==e&&V(zi),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return wi(Ri),null;default:return null}}function sl(e,t){switch(ni(t),t.tag){case 3:wi(Ri),G();break;case 26:case 27:case 5:Y(t);break;case 4:G();break;case 13:ca(t);break;case 19:V(ua);break;case 10:wi(t.type);break;case 22:case 23:ca(t),ys(),null!==e&&V(zi);break;case 24:wi(Ri)}}function ol(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var s=n.create,o=n.inst;r=s(),o.destroy=r}n=n.next}while(n!==i)}}catch(qI){hu(t,t.return,qI)}}function al(e,t,n){try{var r=t.updateQueue,i=null!==r?r.lastEffect:null;if(null!==i){var s=i.next;r=s;do{if((r.tag&e)===e){var o=r.inst,a=o.destroy;if(void 0!==a){o.destroy=void 0,i=t;var l=n,c=a;try{c()}catch(qI){hu(i,l,qI)}}}r=r.next}while(r!==s)}}catch(qI){hu(t,t.return,qI)}}function ll(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{ds(t,n)}catch(qI){hu(e,e.return,qI)}}}function cl(e,t,n){n.props=ma(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(qI){hu(e,t,qI)}}function ul(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"===typeof n?e.refCleanup=n(r):n.current=r}}catch(qI){hu(e,t,qI)}}function hl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(qI){hu(e,t,qI)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(i){hu(e,t,i)}else n.current=null}function dl(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(qI){hu(e,e.return,qI)}}function fl(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,s=null,a=null,l=null,c=null,u=null,h=null;for(p in n){var d=n[p];if(n.hasOwnProperty(p)&&null!=d)switch(p){case"checked":case"value":break;case"defaultValue":c=d;default:r.hasOwnProperty(p)||Zu(e,t,p,null,r,d)}}for(var f in r){var p=r[f];if(d=n[f],r.hasOwnProperty(f)&&(null!=p||null!=d))switch(f){case"type":s=p;break;case"name":i=p;break;case"checked":u=p;break;case"defaultChecked":h=p;break;case"value":a=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(o(137,t));break;default:p!==d&&Zu(e,t,f,p,r,d)}}return void mt(e,a,l,c,u,h,s,i);case"select":for(s in p=a=l=f=null,n)if(c=n[s],n.hasOwnProperty(s)&&null!=c)switch(s){case"value":break;case"multiple":p=c;default:r.hasOwnProperty(s)||Zu(e,t,s,null,r,c)}for(i in r)if(s=r[i],c=n[i],r.hasOwnProperty(i)&&(null!=s||null!=c))switch(i){case"value":f=s;break;case"defaultValue":l=s;break;case"multiple":a=s;default:s!==c&&Zu(e,t,i,s,r,c)}return t=l,n=a,r=p,void(null!=f?_t(e,!!n,f,!1):!!r!==!!n&&(null!=t?_t(e,!!n,t,!0):_t(e,!!n,n?[]:"",!1)));case"textarea":for(l in p=f=null,n)if(i=n[l],n.hasOwnProperty(l)&&null!=i&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:Zu(e,t,l,null,r,i)}for(a in r)if(i=r[a],s=n[a],r.hasOwnProperty(a)&&(null!=i||null!=s))switch(a){case"value":f=i;break;case"defaultValue":p=i;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=i)throw Error(o(91));break;default:i!==s&&Zu(e,t,a,i,r,s)}return void wt(e,f,p);case"option":for(var g in n)if(f=n[g],n.hasOwnProperty(g)&&null!=f&&!r.hasOwnProperty(g))if("selected"===g)e.selected=!1;else Zu(e,t,g,null,r,f);for(c in r)if(f=r[c],p=n[c],r.hasOwnProperty(c)&&f!==p&&(null!=f||null!=p))if("selected"===c)e.selected=f&&"function"!==typeof f&&"symbol"!==typeof f;else Zu(e,t,c,f,r,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var m in n)f=n[m],n.hasOwnProperty(m)&&null!=f&&!r.hasOwnProperty(m)&&Zu(e,t,m,null,r,f);for(u in r)if(f=r[u],p=n[u],r.hasOwnProperty(u)&&f!==p&&(null!=f||null!=p))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(o(137,t));break;default:Zu(e,t,u,f,r,p)}return;default:if(kt(t)){for(var y in n)f=n[y],n.hasOwnProperty(y)&&void 0!==f&&!r.hasOwnProperty(y)&&eh(e,t,y,void 0,r,f);for(h in r)f=r[h],p=n[h],!r.hasOwnProperty(h)||f===p||void 0===f&&void 0===p||eh(e,t,h,f,r,p);return}}for(var v in n)f=n[v],n.hasOwnProperty(v)&&null!=f&&!r.hasOwnProperty(v)&&Zu(e,t,v,null,r,f);for(d in r)f=r[d],p=n[d],!r.hasOwnProperty(d)||f===p||null==f&&null==p||Zu(e,t,d,f,r,p)}(r,e.type,n,t),r[De]=t}catch(qI){hu(e,e.return,qI)}}function pl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&ph(e.type)||4===e.tag}function gl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||pl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&ph(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ml(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Xu));else if(4!==r&&(27===r&&ph(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(ml(e,t,n),e=e.sibling;null!==e;)ml(e,t,n),e=e.sibling}function yl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&ph(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(yl(e,t,n),e=e.sibling;null!==e;)yl(e,t,n),e=e.sibling}function vl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);th(t,r,n),t[Re]=e,t[De]=n}catch(qI){hu(e,e.return,qI)}}var _l=!1,wl=!1,bl=!1,Tl="function"===typeof WeakSet?WeakSet:Set,El=null;function Il(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Fl(e,n),4&r&&ol(5,n);break;case 1:if(Fl(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(qI){hu(n,n.return,qI)}else{var i=ma(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){hu(n,n.return,o)}}64&r&&ll(n),512&r&&ul(n,n.return);break;case 3:if(Fl(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{ds(e,t)}catch(qI){hu(n,n.return,qI)}}break;case 27:null===t&&4&r&&vl(n);case 26:case 5:Fl(e,n),null===t&&4&r&&dl(n),512&r&&ul(n,n.return);break;case 12:Fl(e,n);break;case 13:Fl(e,n),4&r&&Al(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$?"!==e.data||"complete"===n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=gu.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||_l)){t=null!==t&&null!==t.memoizedState||wl,i=_l;var s=wl;_l=r,(wl=t)&&!s?jl(e,n,0!==(8772&n.subtreeFlags)):Fl(e,n),_l=i,wl=s}break;case 30:break;default:Fl(e,n)}}function Sl(e){var t=e.alternate;null!==t&&(e.alternate=null,Sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Ve(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var kl=null,Cl=!1;function xl(e,t,n){for(n=n.child;null!==n;)Nl(e,t,n),n=n.sibling}function Nl(e,t,n){if(he&&"function"===typeof he.onCommitFiberUnmount)try{he.onCommitFiberUnmount(ue,n)}catch(s){}switch(n.tag){case 26:wl||hl(n,t),xl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:wl||hl(n,t);var r=kl,i=Cl;ph(n.type)&&(kl=n.stateNode,Cl=!1),xl(e,t,n),Th(n.stateNode),kl=r,Cl=i;break;case 5:wl||hl(n,t);case 6:if(r=kl,i=Cl,kl=null,xl(e,t,n),Cl=i,null!==(kl=r))if(Cl)try{(9===kl.nodeType?kl.body:"HTML"===kl.nodeName?kl.ownerDocument.body:kl).removeChild(n.stateNode)}catch(qI){hu(n,t,qI)}else try{kl.removeChild(n.stateNode)}catch(qI){hu(n,t,qI)}break;case 18:null!==kl&&(Cl?(gh(9===(e=kl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),xd(e)):gh(kl,n.stateNode));break;case 4:r=kl,i=Cl,kl=n.stateNode.containerInfo,Cl=!0,xl(e,t,n),kl=r,Cl=i;break;case 0:case 11:case 14:case 15:wl||al(2,n,t),wl||al(4,n,t),xl(e,t,n);break;case 1:wl||(hl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&cl(n,t,r)),xl(e,t,n);break;case 21:xl(e,t,n);break;case 22:wl=(r=wl)||null!==n.memoizedState,xl(e,t,n),wl=r;break;default:xl(e,t,n)}}function Al(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{xd(e)}catch(qI){hu(t,t.return,qI)}}function Pl(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Tl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Tl),t;default:throw Error(o(435,e.tag))}}(e);t.forEach((function(t){var r=mu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}function Rl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r],s=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 27:if(ph(l.type)){kl=l.stateNode,Cl=!1;break e}break;case 5:kl=l.stateNode,Cl=!1;break e;case 3:case 4:kl=l.stateNode.containerInfo,Cl=!0;break e}l=l.return}if(null===kl)throw Error(o(160));Nl(s,a,i),kl=null,Cl=!1,null!==(s=i.alternate)&&(s.return=null),i.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Ol(t,e),t=t.sibling}var Dl=null;function Ol(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Rl(t,e),Ll(e),4&r&&(al(3,e,e.return),ol(3,e),al(5,e,e.return));break;case 1:Rl(t,e),Ll(e),512&r&&(wl||null===n||hl(n,n.return)),64&r&&_l&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var i=Dl;if(Rl(t,e),Ll(e),512&r&&(wl||null===n||hl(n,n.return)),4&r){var s=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,i=i.ownerDocument||i;t:switch(r){case"title":(!(s=i.getElementsByTagName("title")[0])||s[je]||s[Re]||"http://www.w3.org/2000/svg"===s.namespaceURI||s.hasAttribute("itemprop"))&&(s=i.createElement(r),i.head.insertBefore(s,i.querySelector("head > title"))),th(s,r,n),s[Re]=e,We(s),r=s;break e;case"link":var a=Vh("link","href",i).get(r+(n.href||""));if(a)for(var l=0;l<a.length;l++)if((s=a[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&s.getAttribute("rel")===(null==n.rel?null:n.rel)&&s.getAttribute("title")===(null==n.title?null:n.title)&&s.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){a.splice(l,1);break t}th(s=i.createElement(r),r,n),i.head.appendChild(s);break;case"meta":if(a=Vh("meta","content",i).get(r+(n.content||"")))for(l=0;l<a.length;l++)if((s=a[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&s.getAttribute("name")===(null==n.name?null:n.name)&&s.getAttribute("property")===(null==n.property?null:n.property)&&s.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&s.getAttribute("charset")===(null==n.charSet?null:n.charSet)){a.splice(l,1);break t}th(s=i.createElement(r),r,n),i.head.appendChild(s);break;default:throw Error(o(468,r))}s[Re]=e,We(s),r=s}e.stateNode=r}else zh(i,e.type,e.stateNode);else e.stateNode=Lh(i,r,e.memoizedProps);else s!==r?(null===s?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):s.count--,null===r?zh(i,e.type,e.stateNode):Lh(i,r,e.memoizedProps)):null===r&&null!==e.stateNode&&fl(e,e.memoizedProps,n.memoizedProps)}break;case 27:Rl(t,e),Ll(e),512&r&&(wl||null===n||hl(n,n.return)),null!==n&&4&r&&fl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Rl(t,e),Ll(e),512&r&&(wl||null===n||hl(n,n.return)),32&e.flags){i=e.stateNode;try{Tt(i,"")}catch(qI){hu(e,e.return,qI)}}4&r&&null!=e.stateNode&&fl(e,i=e.memoizedProps,null!==n?n.memoizedProps:i),1024&r&&(bl=!0);break;case 6:if(Rl(t,e),Ll(e),4&r){if(null===e.stateNode)throw Error(o(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(qI){hu(e,e.return,qI)}}break;case 3:if(jh=null,i=Dl,Dl=Sh(t.containerInfo),Rl(t,e),Dl=i,Ll(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{xd(t.containerInfo)}catch(qI){hu(e,e.return,qI)}bl&&(bl=!1,Ml(e));break;case 4:r=Dl,Dl=Sh(e.stateNode.containerInfo),Rl(t,e),Ll(e),Dl=r;break;case 12:default:Rl(t,e),Ll(e);break;case 13:Rl(t,e),Ll(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(bc=te()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Pl(e,r)));break;case 22:i=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=_l,h=wl;if(_l=u||i,wl=h||c,Rl(t,e),wl=h,_l=u,Ll(e),8192&r)e:for(t=e.stateNode,t._visibility=i?-2&t._visibility:1|t._visibility,i&&(null===n||c||_l||wl||Ul(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(s=c.stateNode,i)"function"===typeof(a=s.style).setProperty?a.setProperty("display","none","important"):a.display="none";else{l=c.stateNode;var d=c.memoizedProps.style,f=void 0!==d&&null!==d&&d.hasOwnProperty("display")?d.display:null;l.style.display=null==f||"boolean"===typeof f?"":(""+f).trim()}}catch(qI){hu(c,c.return,qI)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=i?"":c.memoizedProps}catch(qI){hu(c,c.return,qI)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,Pl(e,n))));break;case 19:Rl(t,e),Ll(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Pl(e,r)));case 30:case 21:}}function Ll(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(pl(r)){n=r;break}r=r.return}if(null==n)throw Error(o(160));switch(n.tag){case 27:var i=n.stateNode;yl(e,gl(e),i);break;case 5:var s=n.stateNode;32&n.flags&&(Tt(s,""),n.flags&=-33),yl(e,gl(e),s);break;case 3:case 4:var a=n.stateNode.containerInfo;ml(e,gl(e),a);break;default:throw Error(o(161))}}catch(qI){hu(e,e.return,qI)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Ml(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Ml(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Fl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Il(e,t.alternate,t),t=t.sibling}function Ul(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:al(4,t,t.return),Ul(t);break;case 1:hl(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&cl(t,t.return,n),Ul(t);break;case 27:Th(t.stateNode);case 26:case 5:hl(t,t.return),Ul(t);break;case 22:null===t.memoizedState&&Ul(t);break;default:Ul(t)}e=e.sibling}}function jl(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,i=e,s=t,o=s.flags;switch(s.tag){case 0:case 11:case 15:jl(i,s,n),ol(4,s);break;case 1:if(jl(i,s,n),"function"===typeof(i=(r=s).stateNode).componentDidMount)try{i.componentDidMount()}catch(qI){hu(r,r.return,qI)}if(null!==(i=(r=s).updateQueue)){var a=r.stateNode;try{var l=i.shared.hiddenCallbacks;if(null!==l)for(i.shared.hiddenCallbacks=null,i=0;i<l.length;i++)hs(l[i],a)}catch(qI){hu(r,r.return,qI)}}n&&64&o&&ll(s),ul(s,s.return);break;case 27:vl(s);case 26:case 5:jl(i,s,n),n&&null===r&&4&o&&dl(s),ul(s,s.return);break;case 12:jl(i,s,n);break;case 13:jl(i,s,n),n&&4&o&&Al(i,s);break;case 22:null===s.memoizedState&&jl(i,s,n),ul(s,s.return);break;case 30:break;default:jl(i,s,n)}t=t.sibling}}function Vl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Oi(n))}function zl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Oi(e))}function ql(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Bl(e,t,n,r),t=t.sibling}function Bl(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:ql(e,t,n,r),2048&i&&ol(9,t);break;case 1:case 13:default:ql(e,t,n,r);break;case 3:ql(e,t,n,r),2048&i&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Oi(e)));break;case 12:if(2048&i){ql(e,t,n,r),e=t.stateNode;try{var s=t.memoizedProps,o=s.id,a=s.onPostCommit;"function"===typeof a&&a(o,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(qI){hu(t,t.return,qI)}}else ql(e,t,n,r);break;case 23:break;case 22:s=t.stateNode,o=t.alternate,null!==t.memoizedState?2&s._visibility?ql(e,t,n,r):Wl(e,t):2&s._visibility?ql(e,t,n,r):(s._visibility|=2,Hl(e,t,n,r,0!==(10256&t.subtreeFlags))),2048&i&&Vl(o,t);break;case 24:ql(e,t,n,r),2048&i&&zl(t.alternate,t)}}function Hl(e,t,n,r,i){for(i=i&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var s=e,o=t,a=n,l=r,c=o.flags;switch(o.tag){case 0:case 11:case 15:Hl(s,o,a,l,i),ol(8,o);break;case 23:break;case 22:var u=o.stateNode;null!==o.memoizedState?2&u._visibility?Hl(s,o,a,l,i):Wl(s,o):(u._visibility|=2,Hl(s,o,a,l,i)),i&&2048&c&&Vl(o.alternate,o);break;case 24:Hl(s,o,a,l,i),i&&2048&c&&zl(o.alternate,o);break;default:Hl(s,o,a,l,i)}t=t.sibling}}function Wl(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:Wl(n,r),2048&i&&Vl(r.alternate,r);break;case 24:Wl(n,r),2048&i&&zl(r.alternate,r);break;default:Wl(n,r)}t=t.sibling}}var Kl=8192;function Gl(e){if(e.subtreeFlags&Kl)for(e=e.child;null!==e;)Ql(e),e=e.sibling}function Ql(e){switch(e.tag){case 26:Gl(e),e.flags&Kl&&null!==e.memoizedState&&function(e,t,n){if(null===Bh)throw Error(o(475));var r=Bh;if("stylesheet"===t.type&&("string"!==typeof n.media||!1!==matchMedia(n.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var i=Ah(n.href),s=e.querySelector(Ph(i));if(s)return null!==(e=s._p)&&"object"===typeof e&&"function"===typeof e.then&&(r.count++,r=Wh.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=s,void We(s);s=e.ownerDocument||e,n=Rh(n),(i=Eh.get(i))&&Fh(n,i),We(s=s.createElement("link"));var a=s;a._p=new Promise((function(e,t){a.onload=e,a.onerror=t})),th(s,"link",n),t.instance=s}null===r.stylesheets&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(r.count++,t=Wh.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}(Dl,e.memoizedState,e.memoizedProps);break;case 5:default:Gl(e);break;case 3:case 4:var t=Dl;Dl=Sh(e.stateNode.containerInfo),Gl(e),Dl=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Kl,Kl=16777216,Gl(e),Kl=t):Gl(e))}}function Yl(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Jl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];El=r,Zl(r,e)}Yl(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)$l(e),e=e.sibling}function $l(e){switch(e.tag){case 0:case 11:case 15:Jl(e),2048&e.flags&&al(9,e,e.return);break;case 3:case 12:default:Jl(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,Xl(e)):Jl(e)}}function Xl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];El=r,Zl(r,e)}Yl(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:al(8,t,t.return),Xl(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,Xl(t));break;default:Xl(t)}e=e.sibling}}function Zl(e,t){for(;null!==El;){var n=El;switch(n.tag){case 0:case 11:case 15:al(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Oi(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,El=r;else e:for(n=e;null!==El;){var i=(r=El).sibling,s=r.return;if(Sl(r),r===n){El=null;break e}if(null!==i){i.return=s,El=i;break e}El=s}}}var ec={getCacheForType:function(e){var t=ki(Ri),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},tc="function"===typeof WeakMap?WeakMap:Map,nc=0,rc=null,ic=null,sc=0,oc=0,ac=null,lc=!1,cc=!1,uc=!1,hc=0,dc=0,fc=0,pc=0,gc=0,mc=0,yc=0,vc=null,_c=null,wc=!1,bc=0,Tc=1/0,Ic=null,Sc=null,kc=0,Cc=null,xc=null,Nc=0,Ac=0,Pc=null,Rc=null,Dc=0,Oc=null;function Lc(){if(0!==(2&nc)&&0!==sc)return sc&-sc;if(null!==O.T){return 0!==Fi?Fi:Au()}return Ae()}function Mc(){0===mc&&(mc=0===(536870912&sc)||si?Te():536870912);var e=ia.current;return null!==e&&(e.flags|=32),mc}function Fc(e,t,n){(e!==rc||2!==oc&&9!==oc)&&null===e.cancelPendingCommit||(Hc(e,0),zc(e,sc,mc,!1)),Se(e,n),0!==(2&nc)&&e===rc||(e===rc&&(0===(2&nc)&&(pc|=n),4===dc&&zc(e,sc,mc,!1)),Eu(e))}function Uc(e,t,n){if(0!==(6&nc))throw Error(o(327));for(var r=!n&&0===(124&t)&&0===(t&e.expiredLanes)||we(e,t),i=r?function(e,t){var n=nc;nc|=2;var r=Kc(),i=Gc();rc!==e||sc!==t?(Ic=null,Tc=te()+500,Hc(e,t)):cc=we(e,t);e:for(;;)try{if(0!==oc&&null!==ic){t=ic;var s=ac;t:switch(oc){case 1:oc=0,ac=null,eu(e,t,s,1);break;case 2:case 9:if(Yi(s)){oc=0,ac=null,Zc(t);break}t=function(){2!==oc&&9!==oc||rc!==e||(oc=7),Eu(e)},s.then(t,t);break e;case 3:oc=7;break e;case 4:oc=5;break e;case 7:Yi(s)?(oc=0,ac=null,Zc(t)):(oc=0,ac=null,eu(e,t,s,7));break;case 5:var a=null;switch(ic.tag){case 26:a=ic.memoizedState;case 5:case 27:var l=ic;if(!a||qh(a)){oc=0,ac=null;var c=l.sibling;if(null!==c)ic=c;else{var u=l.return;null!==u?(ic=u,tu(u)):ic=null}break t}}oc=0,ac=null,eu(e,t,s,5);break;case 6:oc=0,ac=null,eu(e,t,s,6);break;case 8:Bc(),dc=6;break e;default:throw Error(o(462))}}$c();break}catch(h){Wc(e,h)}return vi=yi=null,O.H=r,O.A=i,nc=n,null!==ic?0:(rc=null,sc=0,xr(),dc)}(e,t):Yc(e,t,!0),s=r;;){if(0===i){cc&&!r&&zc(e,t,0,!1);break}if(n=e.current.alternate,!s||Vc(n)){if(2===i){if(s=t,e.errorRecoveryDisabledLanes&s)var a=0;else a=0!==(a=-536870913&e.pendingLanes)?a:536870912&a?536870912:0;if(0!==a){t=a;e:{var l=e;i=vc;var c=l.current.memoizedState.isDehydrated;if(c&&(Hc(l,a).flags|=256),2!==(a=Yc(l,a,!1))){if(uc&&!c){l.errorRecoveryDisabledLanes|=s,pc|=s,i=4;break e}s=_c,_c=i,null!==s&&(null===_c?_c=s:_c.push.apply(_c,s))}i=a}if(s=!1,2!==i)continue}}if(1===i){Hc(e,0),zc(e,t,0,!0);break}e:{switch(r=e,s=i){case 0:case 1:throw Error(o(345));case 4:if((4194048&t)!==t)break;case 6:zc(r,t,mc,!lc);break e;case 2:_c=null;break;case 3:case 5:break;default:throw Error(o(329))}if((62914560&t)===t&&10<(i=bc+300-te())){if(zc(r,t,mc,!lc),0!==_e(r,0,!0))break e;r.timeoutHandle=ch(jc.bind(null,r,n,_c,Ic,wc,t,mc,pc,yc,lc,s,2,-0,0),i)}else jc(r,n,_c,Ic,wc,t,mc,pc,yc,lc,s,0,-0,0)}break}i=Yc(e,t,!1),s=!1}Eu(e)}function jc(e,t,n,r,i,s,a,l,c,u,h,d,f,p){if(e.timeoutHandle=-1,(8192&(d=t.subtreeFlags)||16785408===(16785408&d))&&(Bh={stylesheets:null,count:0,unsuspend:Hh},Ql(t),null!==(d=function(){if(null===Bh)throw Error(o(475));var e=Bh;return e.stylesheets&&0===e.count&&Gh(e,e.stylesheets),0<e.count?function(t){var n=setTimeout((function(){if(e.stylesheets&&Gh(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}}),6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=d(ru.bind(null,e,t,s,n,r,i,a,l,c,h,1,f,p)),void zc(e,s,a,!u);ru(e,t,s,n,r,i,a,l,c)}function Vc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Yn(s(),i))return!1}catch(qI){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function zc(e,t,n,r){t&=~gc,t&=~pc,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var s=31-fe(i),o=1<<s;r[s]=-1,i&=~o}0!==n&&ke(e,n,t)}function qc(){return 0!==(6&nc)||(Iu(0,!1),!1)}function Bc(){if(null!==ic){if(0===oc)var e=ic.return;else vi=yi=null,Fs(e=ic),Yo=null,Jo=0,e=ic;for(;null!==e;)sl(e.alternate,e),e=e.return;ic=null}}function Hc(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,uh(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Bc(),rc=e,ic=n=Ur(e.current,null),sc=t,oc=0,ac=null,lc=!1,cc=we(e,t),uc=!1,yc=mc=gc=pc=fc=dc=0,_c=vc=null,wc=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var i=31-fe(r),s=1<<i;t|=e[i],r&=~s}return hc=t,xr(),n}function Wc(e,t){_s=null,O.H=Wo,t===Wi||t===Gi?(t=Zi(),oc=3):t===Ki?(t=Zi(),oc=4):oc=t===ka?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,ac=t,null===ic&&(dc=1,ba(e,Ir(t,e.current)))}function Kc(){var e=O.H;return O.H=Wo,null===e?Wo:e}function Gc(){var e=O.A;return O.A=ec,e}function Qc(){dc=4,lc||(4194048&sc)!==sc&&null!==ia.current||(cc=!0),0===(134217727&fc)&&0===(134217727&pc)||null===rc||zc(rc,sc,mc,!1)}function Yc(e,t,n){var r=nc;nc|=2;var i=Kc(),s=Gc();rc===e&&sc===t||(Ic=null,Hc(e,t)),t=!1;var o=dc;e:for(;;)try{if(0!==oc&&null!==ic){var a=ic,l=ac;switch(oc){case 8:Bc(),o=6;break e;case 3:case 2:case 9:case 6:null===ia.current&&(t=!0);var c=oc;if(oc=0,ac=null,eu(e,a,l,c),n&&cc){o=0;break e}break;default:c=oc,oc=0,ac=null,eu(e,a,l,c)}}Jc(),o=dc;break}catch(u){Wc(e,u)}return t&&e.shellSuspendCounter++,vi=yi=null,nc=r,O.H=i,O.A=s,null===ic&&(rc=null,sc=0,xr()),o}function Jc(){for(;null!==ic;)Xc(ic)}function $c(){for(;null!==ic&&!Z();)Xc(ic)}function Xc(e){var t=$a(e.alternate,e,hc);e.memoizedProps=e.pendingProps,null===t?tu(e):ic=t}function Zc(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Ma(n,t,t.pendingProps,t.type,void 0,sc);break;case 11:t=Ma(n,t,t.pendingProps,t.type.render,t.ref,sc);break;case 5:Fs(t);default:sl(n,t),t=$a(n,t=ic=jr(t,hc),hc)}e.memoizedProps=e.pendingProps,null===t?tu(e):ic=t}function eu(e,t,n,r){vi=yi=null,Fs(t),Yo=null,Jo=0;var i=t.return;try{if(function(e,t,n,r,i){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&Ei(t,n,i,!0),null!==(n=ia.current)){switch(n.tag){case 13:return null===sa?Qc():null===n.alternate&&0===dc&&(dc=3),n.flags&=-257,n.flags|=65536,n.lanes=i,r===Qi?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),du(e,r,i)),!1;case 22:return n.flags|=65536,r===Qi?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),du(e,r,i)),!1}throw Error(o(435,n.tag))}return du(e,r,i),Qc(),!1}if(si)return null!==(t=ia.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=i,r!==li&&gi(Ir(e=Error(o(422),{cause:r}),n))):(r!==li&&gi(Ir(t=Error(o(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,i&=-i,e.lanes|=i,r=Ir(r,n),as(e,i=Ea(e.stateNode,r,i)),4!==dc&&(dc=2)),!1;var s=Error(o(520),{cause:r});if(s=Ir(s,n),null===vc?vc=[s]:vc.push(s),4!==dc&&(dc=2),null===t)return!0;r=Ir(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=i&-i,n.lanes|=e,as(n,e=Ea(n.stateNode,r,e)),!1;case 1:if(t=n.type,s=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==s&&"function"===typeof s.componentDidCatch&&(null===Sc||!Sc.has(s))))return n.flags|=65536,i&=-i,n.lanes|=i,Sa(i=Ia(i),e,n,r),as(n,i),!1}n=n.return}while(null!==n);return!1}(e,i,t,n,sc))return dc=1,ba(e,Ir(n,e.current)),void(ic=null)}catch(qI){if(null!==i)throw ic=i,qI;return dc=1,ba(e,Ir(n,e.current)),void(ic=null)}32768&t.flags?(si||1===r?e=!0:cc||0!==(536870912&sc)?e=!1:(lc=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=ia.current)&&13===r.tag&&(r.flags|=16384))),nu(t,e)):tu(t)}function tu(e){var t=e;do{if(0!==(32768&t.flags))return void nu(t,lc);e=t.return;var n=rl(t.alternate,t,hc);if(null!==n)return void(ic=n);if(null!==(t=t.sibling))return void(ic=t);ic=t=e}while(null!==t);0===dc&&(dc=5)}function nu(e,t){do{var n=il(e.alternate,e);if(null!==n)return n.flags&=32767,void(ic=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(ic=e);ic=e=n}while(null!==e);dc=6,ic=null}function ru(e,t,n,r,i,s,a,l,c){e.cancelPendingCommit=null;do{lu()}while(0!==kc);if(0!==(6&nc))throw Error(o(327));if(null!==t){if(t===e.current)throw Error(o(177));if(s=t.lanes|t.childLanes,function(e,t,n,r,i,s){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var a=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=o&~n;0<n;){var u=31-fe(n),h=1<<u;a[u]=0,l[u]=-1;var d=c[u];if(null!==d)for(c[u]=null,u=0;u<d.length;u++){var f=d[u];null!==f&&(f.lane&=-536870913)}n&=~h}0!==r&&ke(e,r,0),0!==s&&0===i&&0!==e.tag&&(e.suspendedLanes|=s&~(o&~t))}(e,n,s|=Cr,a,l,c),e===rc&&(ic=rc=null,sc=0),xc=t,Cc=e,Nc=n,Ac=s,Pc=i,Rc=r,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,$(se,(function(){return cu(),null}))):(e.callbackNode=null,e.callbackPriority=0),r=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||r){r=O.T,O.T=null,i=L.p,L.p=2,a=nc,nc|=4;try{!function(e,t){if(e=e.containerInfo,nh=rd,tr(e=er(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(m){n=null;break e}var a=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=a+i),d!==s||0!==r&&3!==d.nodeType||(c=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===i&&(l=a),f===s&&++h===r&&(c=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(rh={focusedElem:e,selectionRange:n},rd=!1,El=t;null!==El;)if(e=(t=El).child,0!==(1024&t.subtreeFlags)&&null!==e)e.return=t,El=e;else for(;null!==El;){switch(s=(t=El).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==s){e=void 0,n=t,i=s.memoizedProps,s=s.memoizedState,r=n.stateNode;try{var g=ma(n.type,i,(n.elementType,n.type));e=r.getSnapshotBeforeUpdate(g,s),r.__reactInternalSnapshotBeforeUpdate=e}catch(qI){hu(n,n.return,qI)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))mh(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":mh(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(o(163))}if(null!==(e=t.sibling)){e.return=t.return,El=e;break}El=t.return}}(e,t)}finally{nc=a,L.p=i,O.T=r}}kc=1,iu(),su(),ou()}}function iu(){if(1===kc){kc=0;var e=Cc,t=xc,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=O.T,O.T=null;var r=L.p;L.p=2;var i=nc;nc|=4;try{Ol(t,e);var s=rh,o=er(e.containerInfo),a=s.focusedElem,l=s.selectionRange;if(o!==a&&a&&a.ownerDocument&&Zn(a.ownerDocument.documentElement,a)){if(null!==l&&tr(a)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in a)a.selectionStart=c,a.selectionEnd=Math.min(u,a.value.length);else{var h=a.ownerDocument||document,d=h&&h.defaultView||window;if(d.getSelection){var f=d.getSelection(),p=a.textContent.length,g=Math.min(l.start,p),m=void 0===l.end?g:Math.min(l.end,p);!f.extend&&g>m&&(o=m,m=g,g=o);var y=Xn(a,g),v=Xn(a,m);if(y&&v&&(1!==f.rangeCount||f.anchorNode!==y.node||f.anchorOffset!==y.offset||f.focusNode!==v.node||f.focusOffset!==v.offset)){var _=h.createRange();_.setStart(y.node,y.offset),f.removeAllRanges(),g>m?(f.addRange(_),f.extend(v.node,v.offset)):(_.setEnd(v.node,v.offset),f.addRange(_))}}}}for(h=[],f=a;f=f.parentNode;)1===f.nodeType&&h.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"===typeof a.focus&&a.focus(),a=0;a<h.length;a++){var w=h[a];w.element.scrollLeft=w.left,w.element.scrollTop=w.top}}rd=!!nh,rh=nh=null}finally{nc=i,L.p=r,O.T=n}}e.current=t,kc=2}}function su(){if(2===kc){kc=0;var e=Cc,t=xc,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=O.T,O.T=null;var r=L.p;L.p=2;var i=nc;nc|=4;try{Il(e,t.alternate,t)}finally{nc=i,L.p=r,O.T=n}}kc=3}}function ou(){if(4===kc||3===kc){kc=0,ee();var e=Cc,t=xc,n=Nc,r=Rc;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?kc=5:(kc=0,xc=Cc=null,au(e,e.pendingLanes));var i=e.pendingLanes;if(0===i&&(Sc=null),Ne(n),t=t.stateNode,he&&"function"===typeof he.onCommitFiberRoot)try{he.onCommitFiberRoot(ue,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==r){t=O.T,i=L.p,L.p=2,O.T=null;try{for(var s=e.onRecoverableError,o=0;o<r.length;o++){var a=r[o];s(a.value,{componentStack:a.stack})}}finally{O.T=t,L.p=i}}0!==(3&Nc)&&lu(),Eu(e),i=e.pendingLanes,0!==(4194090&n)&&0!==(42&i)?e===Oc?Dc++:(Dc=0,Oc=e):Dc=0,Iu(0,!1)}}function au(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Oi(t)))}function lu(e){return iu(),su(),ou(),cu()}function cu(){if(5!==kc)return!1;var e=Cc,t=Ac;Ac=0;var n=Ne(Nc),r=O.T,i=L.p;try{L.p=32>n?32:n,O.T=null,n=Pc,Pc=null;var s=Cc,a=Nc;if(kc=0,xc=Cc=null,Nc=0,0!==(6&nc))throw Error(o(331));var l=nc;if(nc|=4,$l(s.current),Bl(s,s.current,a,n),nc=l,Iu(0,!1),he&&"function"===typeof he.onPostCommitFiberRoot)try{he.onPostCommitFiberRoot(ue,s)}catch(c){}return!0}finally{L.p=i,O.T=r,au(e,t)}}function uu(e,t,n){t=Ir(n,t),null!==(e=ss(e,t=Ea(e.stateNode,t,2),2))&&(Se(e,2),Eu(e))}function hu(e,t,n){if(3===e.tag)uu(e,e,n);else for(;null!==t;){if(3===t.tag){uu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Sc||!Sc.has(r))){e=Ir(n,e),null!==(r=ss(t,n=Ia(2),2))&&(Sa(n,r,t,e),Se(r,2),Eu(r));break}}t=t.return}}function du(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new tc;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(uc=!0,i.add(n),e=fu.bind(null,e,t,n),t.then(e,e))}function fu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,rc===e&&(sc&n)===n&&(4===dc||3===dc&&(62914560&sc)===sc&&300>te()-bc?0===(2&nc)&&Hc(e,0):gc|=n,yc===sc&&(yc=0)),Eu(e)}function pu(e,t){0===t&&(t=Ee()),null!==(e=Pr(e,t))&&(Se(e,t),Eu(e))}function gu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),pu(e,n)}function mu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(o(314))}null!==r&&r.delete(t),pu(e,n)}var yu=null,vu=null,_u=!1,wu=!1,bu=!1,Tu=0;function Eu(e){e!==vu&&null===e.next&&(null===vu?yu=vu=e:vu=vu.next=e),wu=!0,_u||(_u=!0,dh((function(){0!==(6&nc)?$(re,Su):ku()})))}function Iu(e,t){if(!bu&&wu){bu=!0;do{for(var n=!1,r=yu;null!==r;){if(!t)if(0!==e){var i=r.pendingLanes;if(0===i)var s=0;else{var o=r.suspendedLanes,a=r.pingedLanes;s=(1<<31-fe(42|e)+1)-1,s=201326741&(s&=i&~(o&~a))?201326741&s|1:s?2|s:0}0!==s&&(n=!0,Nu(r,s))}else s=sc,0===(3&(s=_e(r,r===rc?s:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||we(r,s)||(n=!0,Nu(r,s));r=r.next}}while(n);bu=!1}}function Su(){ku()}function ku(){wu=_u=!1;var e=0;0!==Tu&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==lh&&(lh=e,!0);return lh=null,!1}()&&(e=Tu),Tu=0);for(var t=te(),n=null,r=yu;null!==r;){var i=r.next,s=Cu(r,t);0===s?(r.next=null,null===n?yu=i:n.next=i,null===i&&(vu=n)):(n=r,(0!==e||0!==(3&s))&&(wu=!0)),r=i}Iu(e,!1)}function Cu(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=-62914561&e.pendingLanes;0<s;){var o=31-fe(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=be(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}if(n=sc,n=_e(e,e===(t=rc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===oc||9===oc)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&X(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||we(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&X(r),Ne(n)){case 2:case 8:n=ie;break;case 32:default:n=se;break;case 268435456:n=ae}return r=xu.bind(null,e),n=$(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&X(r),e.callbackPriority=2,e.callbackNode=null,2}function xu(e,t){if(0!==kc&&5!==kc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(lu()&&e.callbackNode!==n)return null;var r=sc;return 0===(r=_e(e,e===rc?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Uc(e,r,t),Cu(e,te()),null!=e.callbackNode&&e.callbackNode===n?xu.bind(null,e):null)}function Nu(e,t){if(lu())return null;Uc(e,t,!0)}function Au(){return 0===Tu&&(Tu=Te()),Tu}function Pu(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:Nt(""+e)}function Ru(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Du=0;Du<br.length;Du++){var Ou=br[Du];Tr(Ou.toLowerCase(),"on"+(Ou[0].toUpperCase()+Ou.slice(1)))}Tr(fr,"onAnimationEnd"),Tr(pr,"onAnimationIteration"),Tr(gr,"onAnimationStart"),Tr("dblclick","onDoubleClick"),Tr("focusin","onFocus"),Tr("focusout","onBlur"),Tr(mr,"onTransitionRun"),Tr(yr,"onTransitionStart"),Tr(vr,"onTransitionCancel"),Tr(_r,"onTransitionEnd"),Ye("onMouseEnter",["mouseout","mouseover"]),Ye("onMouseLeave",["mouseout","mouseover"]),Ye("onPointerEnter",["pointerout","pointerover"]),Ye("onPointerLeave",["pointerout","pointerover"]),Qe("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Qe("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Qe("onBeforeInput",["compositionend","keypress","textInput","paste"]),Qe("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Qe("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Qe("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mu=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Lu));function Fu(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;s=a,i.currentTarget=c;try{s(i)}catch(qI){ya(qI)}i.currentTarget=null,s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;s=a,i.currentTarget=c;try{s(i)}catch(qI){ya(qI)}i.currentTarget=null,s=l}}}}function Uu(e,t){var n=t[Le];void 0===n&&(n=t[Le]=new Set);var r=e+"__bubble";n.has(r)||(qu(t,e,2,!1),n.add(r))}function ju(e,t,n){var r=0;t&&(r|=4),qu(n,e,r,t)}var Vu="_reactListening"+Math.random().toString(36).slice(2);function zu(e){if(!e[Vu]){e[Vu]=!0,Ke.forEach((function(t){"selectionchange"!==t&&(Mu.has(t)||ju(t,!1,e),ju(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vu]||(t[Vu]=!0,ju("selectionchange",!1,t))}}function qu(e,t,n,r){switch(ud(t)){case 2:var i=id;break;case 8:i=sd;break;default:i=od}n=i.bind(null,t,n,e),i=void 0,!jt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Bu(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i)break;if(4===o)for(o=r.return;null!==o;){var c=o.tag;if((3===c||4===c)&&o.stateNode.containerInfo===i)return;o=o.return}for(;null!==a;){if(null===(o=ze(a)))return;if(5===(c=o.tag)||6===c||26===c||27===c){r=s=o;continue e}a=a.parentNode}}r=r.return}Mt((function(){var r=s,i=Pt(n),o=[];e:{var a=wr.get(e);if(void 0!==a){var c=Zt,u=e;switch(e){case"keypress":if(0===Wt(n))break e;case"keydown":case"keyup":c=gn;break;case"focusin":u="focus",c=on;break;case"focusout":u="blur",c=on;break;case"beforeblur":case"afterblur":c=on;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=rn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=sn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=yn;break;case fr:case pr:case gr:c=an;break;case _r:c=vn;break;case"scroll":case"scrollend":c=tn;break;case"wheel":c=_n;break;case"copy":case"cut":case"paste":c=ln;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=mn;break;case"toggle":case"beforetoggle":c=wn}var h=0!==(4&t),d=!h&&("scroll"===e||"scrollend"===e),f=h?null!==a?a+"Capture":null:a;h=[];for(var p,g=r;null!==g;){var m=g;if(p=m.stateNode,5!==(m=m.tag)&&26!==m&&27!==m||null===p||null===f||null!=(m=Ft(g,f))&&h.push(Hu(g,m,p)),d)break;g=g.return}0<h.length&&(a=new c(a,u,null,n,i),o.push({event:a,listeners:h}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===At||!(u=n.relatedTarget||n.fromElement)||!ze(u)&&!u[Oe])&&(c||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?ze(u):null)&&(d=l(u),h=u.tag,u!==d||5!==h&&27!==h&&6!==h)&&(u=null)):(c=null,u=r),c!==u)){if(h=rn,m="onMouseLeave",f="onMouseEnter",g="mouse","pointerout"!==e&&"pointerover"!==e||(h=mn,m="onPointerLeave",f="onPointerEnter",g="pointer"),d=null==c?a:Be(c),p=null==u?a:Be(u),(a=new h(m,g+"leave",c,n,i)).target=d,a.relatedTarget=p,m=null,ze(i)===r&&((h=new h(f,g+"enter",u,n,i)).target=p,h.relatedTarget=d,m=h),d=m,c&&u)e:{for(f=u,g=0,p=h=c;p;p=Ku(p))g++;for(p=0,m=f;m;m=Ku(m))p++;for(;0<g-p;)h=Ku(h),g--;for(;0<p-g;)f=Ku(f),p--;for(;g--;){if(h===f||null!==f&&h===f.alternate)break e;h=Ku(h),f=Ku(f)}h=null}else h=null;null!==c&&Gu(o,a,c,h,!1),null!==u&&null!==d&&Gu(o,d,u,h,!0)}if("select"===(c=(a=r?Be(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===c&&"file"===a.type)var y=Un;else if(Rn(a))if(jn)y=Qn;else{y=Kn;var v=Wn}else!(c=a.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==a.type&&"radio"!==a.type?r&&kt(r.elementType)&&(y=Un):y=Gn;switch(y&&(y=y(e,r))?Dn(o,y,n,i):(v&&v(e,a,r),"focusout"===e&&r&&"number"===a.type&&null!=r.memoizedProps.value&&vt(a,"number",a.value)),v=r?Be(r):window,e){case"focusin":(Rn(v)||"true"===v.contentEditable)&&(rr=v,ir=r,sr=null);break;case"focusout":sr=ir=rr=null;break;case"mousedown":or=!0;break;case"contextmenu":case"mouseup":case"dragend":or=!1,ar(o,n,i);break;case"selectionchange":if(nr)break;case"keydown":case"keyup":ar(o,n,i)}var _;if(Tn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else An?xn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Sn&&"ko"!==n.locale&&(An||"onCompositionStart"!==w?"onCompositionEnd"===w&&An&&(_=Ht()):(qt="value"in(zt=i)?zt.value:zt.textContent,An=!0)),0<(v=Wu(r,w)).length&&(w=new cn(w,e,null,n,i),o.push({event:w,listeners:v}),_?w.data=_:null!==(_=Nn(n))&&(w.data=_))),(_=In?function(e,t){switch(e){case"compositionend":return Nn(t);case"keypress":return 32!==t.which?null:(Cn=!0,kn);case"textInput":return(e=t.data)===kn&&Cn?null:e;default:return null}}(e,n):function(e,t){if(An)return"compositionend"===e||!Tn&&xn(e,t)?(e=Ht(),Bt=qt=zt=null,An=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Sn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(w=Wu(r,"onBeforeInput")).length&&(v=new cn("onBeforeInput","beforeinput",null,n,i),o.push({event:v,listeners:w}),v.data=_)),function(e,t,n,r,i){if("submit"===t&&n&&n.stateNode===i){var s=Pu((i[De]||null).action),o=r.submitter;o&&null!==(t=(t=o[De]||null)?Pu(t.formAction):o.getAttribute("formAction"))&&(s=t,o=null);var a=new Zt("action","action",null,r,i);e.push({event:a,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==Tu){var e=o?Ru(i,o):new FormData(i);Po(n,{pending:!0,data:e,method:i.method,action:s},null,e)}}else"function"===typeof s&&(a.preventDefault(),e=o?Ru(i,o):new FormData(i),Po(n,{pending:!0,data:e,method:i.method,action:s},s,e))},currentTarget:i}]})}}(o,e,r,n,i)}Fu(o,t)}))}function Hu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wu(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;if(5!==(i=i.tag)&&26!==i&&27!==i||null===s||(null!=(i=Ft(e,n))&&r.unshift(Hu(e,i,s)),null!=(i=Ft(e,t))&&r.push(Hu(e,i,s))),3===e.tag)return r;e=e.return}return[]}function Ku(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Gu(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(a=a.tag,null!==l&&l===r)break;5!==a&&26!==a&&27!==a||null===c||(l=c,i?null!=(c=Ft(n,s))&&o.unshift(Hu(n,c,l)):i||null!=(c=Ft(n,s))&&o.push(Hu(n,c,l))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Qu=/\r\n?/g,Yu=/\u0000|\uFFFD/g;function Ju(e){return("string"===typeof e?e:""+e).replace(Qu,"\n").replace(Yu,"")}function $u(e,t){return t=Ju(t),Ju(e)===t}function Xu(){}function Zu(e,t,n,r,i,s){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||Tt(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&Tt(e,""+r);break;case"className":nt(e,"class",r);break;case"tabIndex":nt(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":nt(e,n,r);break;case"style":St(e,r,s);break;case"data":if("object"!==t){nt(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Nt(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof s&&("formAction"===n?("input"!==t&&Zu(e,t,"name",i.name,i,null),Zu(e,t,"formEncType",i.formEncType,i,null),Zu(e,t,"formMethod",i.formMethod,i,null),Zu(e,t,"formTarget",i.formTarget,i,null)):(Zu(e,t,"encType",i.encType,i,null),Zu(e,t,"method",i.method,i,null),Zu(e,t,"target",i.target,i,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Nt(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=Xu);break;case"onScroll":null!=r&&Uu("scroll",e);break;case"onScrollEnd":null!=r&&Uu("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(o(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(o(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=Nt(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Uu("beforetoggle",e),Uu("toggle",e),tt(e,"popover",r);break;case"xlinkActuate":rt(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":rt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":rt(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":rt(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":rt(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":rt(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":rt(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":rt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":rt(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":tt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&tt(e,n=Ct.get(n)||n,r)}}function eh(e,t,n,r,i,s){switch(n){case"style":St(e,r,s);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(o(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(o(60));e.innerHTML=n}}break;case"children":"string"===typeof r?Tt(e,r):("number"===typeof r||"bigint"===typeof r)&&Tt(e,""+r);break;case"onScroll":null!=r&&Uu("scroll",e);break;case"onScrollEnd":null!=r&&Uu("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Xu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Ge.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(i=n.endsWith("Capture"),t=n.slice(2,i?n.length-7:void 0),"function"===typeof(s=null!=(s=e[De]||null)?s[n]:null)&&e.removeEventListener(t,s,i),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):tt(e,n,r):("function"!==typeof s&&null!==s&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,i)))}}function th(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Uu("error",e),Uu("load",e);var r,i=!1,s=!1;for(r in n)if(n.hasOwnProperty(r)){var a=n[r];if(null!=a)switch(r){case"src":i=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Zu(e,t,r,a,n,null)}}return s&&Zu(e,t,"srcSet",n.srcSet,n,null),void(i&&Zu(e,t,"src",n.src,n,null));case"input":Uu("invalid",e);var l=r=a=s=null,c=null,u=null;for(i in n)if(n.hasOwnProperty(i)){var h=n[i];if(null!=h)switch(i){case"name":s=h;break;case"type":a=h;break;case"checked":c=h;break;case"defaultChecked":u=h;break;case"value":r=h;break;case"defaultValue":l=h;break;case"children":case"dangerouslySetInnerHTML":if(null!=h)throw Error(o(137,t));break;default:Zu(e,t,i,h,n,null)}}return yt(e,r,l,c,u,a,s,!1),void ht(e);case"select":for(s in Uu("invalid",e),i=a=r=null,n)if(n.hasOwnProperty(s)&&null!=(l=n[s]))switch(s){case"value":r=l;break;case"defaultValue":a=l;break;case"multiple":i=l;default:Zu(e,t,s,l,n,null)}return t=r,n=a,e.multiple=!!i,void(null!=t?_t(e,!!i,t,!1):null!=n&&_t(e,!!i,n,!0));case"textarea":for(a in Uu("invalid",e),r=s=i=null,n)if(n.hasOwnProperty(a)&&null!=(l=n[a]))switch(a){case"value":i=l;break;case"defaultValue":s=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(o(91));break;default:Zu(e,t,a,l,n,null)}return bt(e,i,s,r),void ht(e);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(i=n[c]))if("selected"===c)e.selected=i&&"function"!==typeof i&&"symbol"!==typeof i;else Zu(e,t,c,i,n,null);return;case"dialog":Uu("beforetoggle",e),Uu("toggle",e),Uu("cancel",e),Uu("close",e);break;case"iframe":case"object":Uu("load",e);break;case"video":case"audio":for(i=0;i<Lu.length;i++)Uu(Lu[i],e);break;case"image":Uu("error",e),Uu("load",e);break;case"details":Uu("toggle",e);break;case"embed":case"source":case"link":Uu("error",e),Uu("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(i=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Zu(e,t,u,i,n,null)}return;default:if(kt(t)){for(h in n)n.hasOwnProperty(h)&&(void 0!==(i=n[h])&&eh(e,t,h,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(i=n[l])&&Zu(e,t,l,i,n,null))}var nh=null,rh=null;function ih(e){return 9===e.nodeType?e:e.ownerDocument}function sh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function oh(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function ah(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var lh=null;var ch="function"===typeof setTimeout?setTimeout:void 0,uh="function"===typeof clearTimeout?clearTimeout:void 0,hh="function"===typeof Promise?Promise:void 0,dh="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof hh?function(e){return hh.resolve(null).then(e).catch(fh)}:ch;function fh(e){setTimeout((function(){throw e}))}function ph(e){return"head"===e}function gh(e,t){var n=t,r=0,i=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0<r&&8>r){n=r;var o=e.ownerDocument;if(1&n&&Th(o.documentElement),2&n&&Th(o.body),4&n)for(Th(n=o.head),o=n.firstChild;o;){var a=o.nextSibling,l=o.nodeName;o[je]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===o.rel.toLowerCase()||n.removeChild(o),o=a}}if(0===i)return e.removeChild(s),void xd(t);i--}else"$"===n||"$?"===n||"$!"===n?i++:r=n.charCodeAt(0)-48;else r=0;n=s}while(n);xd(t)}function mh(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":mh(n),Ve(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function yh(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function vh(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var _h=null;function wh(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function bh(e,t,n){switch(t=ih(n),e){case"html":if(!(e=t.documentElement))throw Error(o(452));return e;case"head":if(!(e=t.head))throw Error(o(453));return e;case"body":if(!(e=t.body))throw Error(o(454));return e;default:throw Error(o(451))}}function Th(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ve(e)}var Eh=new Map,Ih=new Set;function Sh(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var kh=L.d;L.d={f:function(){var e=kh.f(),t=qc();return e||t},r:function(e){var t=qe(e);null!==t&&5===t.tag&&"form"===t.type?Do(t):kh.r(e)},D:function(e){kh.D(e),xh("dns-prefetch",e,null)},C:function(e,t){kh.C(e,t),xh("preconnect",e,t)},L:function(e,t,n){kh.L(e,t,n);var r=Ch;if(r&&e&&t){var i='link[rel="preload"][as="'+gt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(i+='[imagesrcset="'+gt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(i+='[imagesizes="'+gt(n.imageSizes)+'"]')):i+='[href="'+gt(e)+'"]';var s=i;switch(t){case"style":s=Ah(e);break;case"script":s=Dh(e)}Eh.has(s)||(e=d({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),Eh.set(s,e),null!==r.querySelector(i)||"style"===t&&r.querySelector(Ph(s))||"script"===t&&r.querySelector(Oh(s))||(th(t=r.createElement("link"),"link",e),We(t),r.head.appendChild(t)))}},m:function(e,t){kh.m(e,t);var n=Ch;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",i='link[rel="modulepreload"][as="'+gt(r)+'"][href="'+gt(e)+'"]',s=i;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=Dh(e)}if(!Eh.has(s)&&(e=d({rel:"modulepreload",href:e},t),Eh.set(s,e),null===n.querySelector(i))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Oh(s)))return}th(r=n.createElement("link"),"link",e),We(r),n.head.appendChild(r)}}},X:function(e,t){kh.X(e,t);var n=Ch;if(n&&e){var r=He(n).hoistableScripts,i=Dh(e),s=r.get(i);s||((s=n.querySelector(Oh(i)))||(e=d({src:e,async:!0},t),(t=Eh.get(i))&&Uh(e,t),We(s=n.createElement("script")),th(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}},S:function(e,t,n){kh.S(e,t,n);var r=Ch;if(r&&e){var i=He(r).hoistableStyles,s=Ah(e);t=t||"default";var o=i.get(s);if(!o){var a={loading:0,preload:null};if(o=r.querySelector(Ph(s)))a.loading=5;else{e=d({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Eh.get(s))&&Fh(e,n);var l=o=r.createElement("link");We(l),th(l,"link",e),l._p=new Promise((function(e,t){l.onload=e,l.onerror=t})),l.addEventListener("load",(function(){a.loading|=1})),l.addEventListener("error",(function(){a.loading|=2})),a.loading|=4,Mh(o,t,r)}o={type:"stylesheet",instance:o,count:1,state:a},i.set(s,o)}}},M:function(e,t){kh.M(e,t);var n=Ch;if(n&&e){var r=He(n).hoistableScripts,i=Dh(e),s=r.get(i);s||((s=n.querySelector(Oh(i)))||(e=d({src:e,async:!0,type:"module"},t),(t=Eh.get(i))&&Uh(e,t),We(s=n.createElement("script")),th(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}}};var Ch="undefined"===typeof document?null:document;function xh(e,t,n){var r=Ch;if(r&&"string"===typeof t&&t){var i=gt(t);i='link[rel="'+e+'"][href="'+i+'"]',"string"===typeof n&&(i+='[crossorigin="'+n+'"]'),Ih.has(i)||(Ih.add(i),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(i)&&(th(t=r.createElement("link"),"link",e),We(t),r.head.appendChild(t)))}}function Nh(e,t,n,r){var i,s,a,l,c=(c=H.current)?Sh(c):null;if(!c)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Ah(n.href),(r=(n=He(c).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Ah(n.href);var u=He(c).hoistableStyles,h=u.get(e);if(h||(c=c.ownerDocument||c,h={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,h),(u=c.querySelector(Ph(e)))&&!u._p&&(h.instance=u,h.state.loading=5),Eh.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Eh.set(e,n),u||(i=c,s=e,a=n,l=h.state,i.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=i.createElement("link"),l.preload=s,s.addEventListener("load",(function(){return l.loading|=1})),s.addEventListener("error",(function(){return l.loading|=2})),th(s,"link",a),We(s),i.head.appendChild(s))))),t&&null===r)throw Error(o(528,""));return h}if(t&&null!==r)throw Error(o(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Dh(n),(r=(n=He(c).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function Ah(e){return'href="'+gt(e)+'"'}function Ph(e){return'link[rel="stylesheet"]['+e+"]"}function Rh(e){return d({},e,{"data-precedence":e.precedence,precedence:null})}function Dh(e){return'[src="'+gt(e)+'"]'}function Oh(e){return"script[async]"+e}function Lh(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+gt(n.href)+'"]');if(r)return t.instance=r,We(r),r;var i=d({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return We(r=(e.ownerDocument||e).createElement("style")),th(r,"style",i),Mh(r,n.precedence,e),t.instance=r;case"stylesheet":i=Ah(n.href);var s=e.querySelector(Ph(i));if(s)return t.state.loading|=4,t.instance=s,We(s),s;r=Rh(n),(i=Eh.get(i))&&Fh(r,i),We(s=(e.ownerDocument||e).createElement("link"));var a=s;return a._p=new Promise((function(e,t){a.onload=e,a.onerror=t})),th(s,"link",r),t.state.loading|=4,Mh(s,n.precedence,e),t.instance=s;case"script":return s=Dh(n.src),(i=e.querySelector(Oh(s)))?(t.instance=i,We(i),i):(r=n,(i=Eh.get(s))&&Uh(r=d({},n),i),We(i=(e=e.ownerDocument||e).createElement("script")),th(i,"link",r),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(o(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Mh(r,n.precedence,e));return t.instance}function Mh(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=r.length?r[r.length-1]:null,s=i,o=0;o<r.length;o++){var a=r[o];if(a.dataset.precedence===t)s=a;else if(s!==i)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Fh(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Uh(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var jh=null;function Vh(e,t,n){if(null===jh){var r=new Map,i=jh=new Map;i.set(n,r)}else(r=(i=jh).get(n))||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var s=n[i];if(!(s[je]||s[Re]||"link"===e&&"stylesheet"===s.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==s.namespaceURI){var o=s.getAttribute(t)||"";o=e+o;var a=r.get(o);a?a.push(s):r.set(o,[s])}}return r}function zh(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function qh(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var Bh=null;function Hh(){}function Wh(){if(this.count--,0===this.count)if(this.stylesheets)Gh(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Kh=null;function Gh(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Kh=new Map,t.forEach(Qh,e),Kh=null,Wh.call(e))}function Qh(e,t){if(!(4&t.state.loading)){var n=Kh.get(e);if(n)var r=n.get(null);else{n=new Map,Kh.set(e,n);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<i.length;s++){var o=i[s];"LINK"!==o.nodeName&&"not all"===o.getAttribute("media")||(n.set(o.dataset.precedence,o),r=o)}r&&n.set(null,r)}o=(i=t.instance).getAttribute("data-precedence"),(s=n.get(o)||r)===r&&n.set(null,i),n.set(o,i),this.count++,r=Wh.bind(this),i.addEventListener("load",r),i.addEventListener("error",r),s?s.parentNode.insertBefore(i,s.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(i,e.firstChild),t.state.loading|=4}}var Yh={$$typeof:b,Provider:null,Consumer:null,_currentValue:M,_currentValue2:M,_threadCount:0};function Jh(e,t,n,r,i,s,o,a){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ie(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ie(0),this.hiddenUpdates=Ie(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=s,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=a,this.incompleteTransitions=new Map}function $h(e,t,n,r,i,s,o,a,l,c,u,h){return e=new Jh(e,t,n,o,a,l,c,h),t=1,!0===s&&(t|=24),s=Mr(3,null,null,t),e.current=s,s.stateNode=e,(t=Di()).refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:r,isDehydrated:n,cache:t},ns(s),e}function Xh(e){return e?e=Or:Or}function Zh(e,t,n,r,i,s){i=Xh(i),null===r.context?r.context=i:r.pendingContext=i,(r=is(t)).payload={element:n},null!==(s=void 0===s?null:s)&&(r.callback=s),null!==(n=ss(e,r,t))&&(Fc(n,0,t),os(n,e,t))}function ed(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function td(e,t){ed(e,t),(e=e.alternate)&&ed(e,t)}function nd(e){if(13===e.tag){var t=Pr(e,67108864);null!==t&&Fc(t,0,67108864),td(e,67108864)}}var rd=!0;function id(e,t,n,r){var i=O.T;O.T=null;var s=L.p;try{L.p=2,od(e,t,n,r)}finally{L.p=s,O.T=i}}function sd(e,t,n,r){var i=O.T;O.T=null;var s=L.p;try{L.p=8,od(e,t,n,r)}finally{L.p=s,O.T=i}}function od(e,t,n,r){if(rd){var i=ad(r);if(null===i)Bu(e,t,r,ld,n),_d(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return dd=wd(dd,e,t,n,r,i),!0;case"dragenter":return fd=wd(fd,e,t,n,r,i),!0;case"mouseover":return pd=wd(pd,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return gd.set(s,wd(gd.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,md.set(s,wd(md.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(_d(e,r),4&t&&-1<vd.indexOf(e)){for(;null!==i;){var s=qe(i);if(null!==s)switch(s.tag){case 3:if((s=s.stateNode).current.memoizedState.isDehydrated){var o=ve(s.pendingLanes);if(0!==o){var a=s;for(a.pendingLanes|=2,a.entangledLanes|=2;o;){var l=1<<31-fe(o);a.entanglements[1]|=l,o&=~l}Eu(s),0===(6&nc)&&(Tc=te()+500,Iu(0,!1))}}break;case 13:null!==(a=Pr(s,2))&&Fc(a,0,2),qc(),td(s,2)}if(null===(s=ad(r))&&Bu(e,t,r,ld,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Bu(e,t,r,null,n)}}function ad(e){return cd(e=Pt(e))}var ld=null;function cd(e){if(ld=null,null!==(e=ze(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return ld=e,null}function ud(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ne()){case re:return 2;case ie:return 8;case se:case oe:return 32;case ae:return 268435456;default:return 32}default:return 32}}var hd=!1,dd=null,fd=null,pd=null,gd=new Map,md=new Map,yd=[],vd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function _d(e,t){switch(e){case"focusin":case"focusout":dd=null;break;case"dragenter":case"dragleave":fd=null;break;case"mouseover":case"mouseout":pd=null;break;case"pointerover":case"pointerout":gd.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":md.delete(t.pointerId)}}function wd(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=qe(t))&&nd(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function bd(e){var t=ze(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void function(e,t){var n=L.p;try{return L.p=e,t()}finally{L.p=n}}(e.priority,(function(){if(13===n.tag){var e=Lc();e=xe(e);var t=Pr(n,e);null!==t&&Fc(t,0,e),td(n,e)}}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Td(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=ad(e.nativeEvent);if(null!==n)return null!==(t=qe(n))&&nd(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);At=r,n.target.dispatchEvent(r),At=null,t.shift()}return!0}function Ed(e,t,n){Td(e)&&n.delete(t)}function Id(){hd=!1,null!==dd&&Td(dd)&&(dd=null),null!==fd&&Td(fd)&&(fd=null),null!==pd&&Td(pd)&&(pd=null),gd.forEach(Ed),md.forEach(Ed)}function Sd(e,t){e.blockedOn===t&&(e.blockedOn=null,hd||(hd=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Id)))}var kd=null;function Cd(e){kd!==e&&(kd=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,(function(){kd===e&&(kd=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],i=e[t+2];if("function"!==typeof r){if(null===cd(r||n))continue;break}var s=qe(n);null!==s&&(e.splice(t,3),t-=3,Po(s,{pending:!0,data:i,method:n.method,action:r},r,i))}})))}function xd(e){function t(t){return Sd(t,e)}null!==dd&&Sd(dd,e),null!==fd&&Sd(fd,e),null!==pd&&Sd(pd,e),gd.forEach(t),md.forEach(t);for(var n=0;n<yd.length;n++){var r=yd[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<yd.length&&null===(n=yd[0]).blockedOn;)bd(n),null===n.blockedOn&&yd.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var i=n[r],s=n[r+1],o=i[De]||null;if("function"===typeof s)o||Cd(n);else if(o){var a=null;if(s&&s.hasAttribute("formAction")){if(i=s,o=s[De]||null)a=o.formAction;else if(null!==cd(i))continue}else a=o.action;"function"===typeof a?n[r+1]=a:(n.splice(r,3),r-=3),Cd(n)}}}function Nd(e){this._internalRoot=e}function Ad(e){this._internalRoot=e}Ad.prototype.render=Nd.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Zh(t.current,Lc(),e,t,null,null)},Ad.prototype.unmount=Nd.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Zh(e.current,2,null,e,null,null),qc(),t[Oe]=null}},Ad.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ae();e={blockedOn:null,target:e,priority:t};for(var n=0;n<yd.length&&0!==t&&t<yd[n].priority;n++);yd.splice(n,0,e),0===n&&bd(e)}};var Pd=i.version;if("19.1.0"!==Pd)throw Error(o(527,Pd,"19.1.0"));L.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return u(i),e;if(s===r)return u(i),t;s=s.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,c=i.child;c;){if(c===n){a=!0,n=i,r=s;break}if(c===r){a=!0,r=i,n=s;break}c=c.sibling}if(!a){for(c=s.child;c;){if(c===n){a=!0,n=s,r=i;break}if(c===r){a=!0,r=s,n=i;break}c=c.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?h(e):null)?null:e.stateNode};var Rd={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.1.0"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Dd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dd.isDisabled&&Dd.supportsFiber)try{ue=Dd.inject(Rd),he=Dd}catch(Od){}}t.createRoot=function(e,t){if(!a(e))throw Error(o(299));var n=!1,r="",i=va,s=_a,l=wa;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(i=t.onUncaughtError),void 0!==t.onCaughtError&&(s=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=$h(e,1,!1,null,0,n,r,i,s,l,0,null),e[Oe]=t.current,zu(e),new Nd(t)}},43:(e,t,n)=>{e.exports=n(288)},288:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function v(){}function _(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var w=_.prototype=new v;w.constructor=_,g(w,y.prototype),w.isPureReactComponent=!0;var b=Array.isArray,T={H:null,A:null,T:null,S:null,V:null},E=Object.prototype.hasOwnProperty;function I(e,t,r,i,s,o){return r=o.ref,{$$typeof:n,type:e,key:t,ref:void 0!==r?r:null,props:o}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var k=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function x(){}function N(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(a){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0;break;case d:return N((u=e._init)(e._payload),t,i,s,o)}}if(u)return o=o(e),u=""===s?"."+C(e,0):s,b(o)?(i="",null!=u&&(i=u.replace(k,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(S(o)&&(l=o,c=i+(null==o.key||e&&e.key===o.key?"":(""+o.key).replace(k,"$&/")+"/")+u,o=I(l.type,c,void 0,0,0,l.props)),t.push(o)),1;u=0;var h,p=""===s?".":s+":";if(b(e))for(var g=0;g<e.length;g++)u+=N(s=e[g],t,i,a=p+C(s,g),o);else if("function"===typeof(g=null===(h=e)||"object"!==typeof h?null:"function"===typeof(h=f&&h[f]||h["@@iterator"])?h:null))for(e=g.call(e),g=0;!(s=e.next()).done;)u+=N(s=s.value,t,i,a=p+C(s,g++),o);else if("object"===a){if("function"===typeof e.then)return N(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(x,x):(e.status="pending",e.then((function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)}),(function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)}))),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,i,s,o);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function D(){}t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=_,t.StrictMode=s,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=T,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return T.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=g({},e.props),i=e.key;if(null!=t)for(s in void 0!==t.ref&&void 0,void 0!==t.key&&(i=""+t.key),t)!E.call(t,s)||"key"===s||"__self"===s||"__source"===s||"ref"===s&&void 0===t.ref||(r[s]=t[s]);var s=arguments.length-2;if(1===s)r.children=n;else if(1<s){for(var o=Array(s),a=0;a<s;a++)o[a]=arguments[a+2];r.children=o}return I(e.type,i,void 0,0,0,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:a,_context:e},e},t.createElement=function(e,t,n){var r,i={},s=null;if(null!=t)for(r in void 0!==t.key&&(s=""+t.key),t)E.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(i[r]=t[r]);var o=arguments.length-2;if(1===o)i.children=n;else if(1<o){for(var a=Array(o),l=0;l<o;l++)a[l]=arguments[l+2];i.children=a}if(e&&e.defaultProps)for(r in o=e.defaultProps)void 0===i[r]&&(i[r]=o[r]);return I(e,s,void 0,0,0,i)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=T.T,n={};T.T=n;try{var r=e(),i=T.S;null!==i&&i(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(D,R)}catch(qI){R(qI)}finally{T.T=t}},t.unstable_useCacheRefresh=function(){return T.H.useCacheRefresh()},t.use=function(e){return T.H.use(e)},t.useActionState=function(e,t,n){return T.H.useActionState(e,t,n)},t.useCallback=function(e,t){return T.H.useCallback(e,t)},t.useContext=function(e){return T.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return T.H.useDeferredValue(e,t)},t.useEffect=function(e,t,n){var r=T.H;if("function"===typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(e,t)},t.useId=function(){return T.H.useId()},t.useImperativeHandle=function(e,t,n){return T.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return T.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return T.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return T.H.useMemo(e,t)},t.useOptimistic=function(e,t){return T.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return T.H.useReducer(e,t,n)},t.useRef=function(e){return T.H.useRef(e)},t.useState=function(e){return T.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return T.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return T.H.useTransition()},t.version="19.1.0"},358:(e,t)=>{const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,r=/^[\u0021-\u003A\u003C-\u007E]*$/,i=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,a=(()=>{const e=function(){};return e.prototype=Object.create(null),e})();function l(e,t,n){do{const n=e.charCodeAt(t);if(32!==n&&9!==n)return t}while(++t<n);return n}function c(e,t,n){for(;t>n;){const n=e.charCodeAt(--t);if(32!==n&&9!==n)return t+1}return n}function u(e){if(-1===e.indexOf("%"))return e;try{return decodeURIComponent(e)}catch($M){return e}}},391:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},579:(e,t,n)=>{e.exports=n(799)},672:(e,t,n)=>{var r=n(43);function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var o={d:{f:s,r:function(){throw Error(i(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},a=Symbol.for("react.portal");var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(i(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:a,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=o.p;try{if(l.T=null,o.p=2,e)return e()}finally{l.T=t,o.p=n,o.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,o.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&o.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin),i="string"===typeof t.integrity?t.integrity:void 0,s="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?o.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:i,fetchPriority:s}):"script"===n&&o.d.X(e,{crossOrigin:r,integrity:i,fetchPriority:s,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);o.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&o.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin);o.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);o.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else o.d.m(e)},t.requestFormReset=function(e){o.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.1.0"},799:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function i(e,t,r){var i=null;if(void 0!==r&&(i=""+r),void 0!==t.key&&(i=""+t.key),"key"in t)for(var s in r={},t)"key"!==s&&(r[s]=t[s]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:i,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=i,t.jsxs=i},853:(e,t,n)=>{e.exports=n(896)},896:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,g=!1,m=!1,y=!1,v="function"===typeof setTimeout?setTimeout:null,_="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function T(e){if(m=!1,b(e),!g)if(null!==r(c))g=!0,I||(I=!0,E());else{var t=r(u);null!==t&&R(T,t.startTime-e)}}var E,I=!1,S=-1,k=5,C=-1;function x(){return!!y||!(t.unstable_now()-C<k)}function N(){if(y=!1,I){var e=t.unstable_now();C=e;var n=!0;try{e:{g=!1,m&&(m=!1,_(S),S=-1),p=!0;var s=f;try{t:{for(b(e),d=r(c);null!==d&&!(d.expirationTime>e&&x());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof a){d.callback=a,b(e),n=!0;break t}d===r(c)&&i(c),b(e)}else i(c);d=r(c)}if(null!==d)n=!0;else{var l=r(u);null!==l&&R(T,l.startTime-e),n=!1}}break e}finally{d=null,f=s,p=!1}n=void 0}}finally{n?E():I=!1}}}if("function"===typeof w)E=function(){w(N)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,P=A.port2;A.port1.onmessage=N,E=function(){P.postMessage(null)}}else E=function(){v(N,0)};function R(e,n){S=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_requestPaint=function(){y=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(m?(_(S),S=-1):m=!0,R(T,s-o))):(e.sortIndex=a,n(c,e),g||p||(g=!0,I||(I=!0,E()))),e},t.unstable_shouldYield=x,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch($M){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/";var r={};n.r(r),n.d(r,{FirebaseError:()=>ln,SDK_VERSION:()=>ni,_DEFAULT_ENTRY_NAME:()=>jr,_addComponent:()=>Hr,_addOrOverwriteComponent:()=>Wr,_apps:()=>zr,_clearComponents:()=>$r,_components:()=>Br,_getProvider:()=>Gr,_isFirebaseApp:()=>Yr,_isFirebaseServerApp:()=>Jr,_registerComponent:()=>Kr,_removeServiceInstance:()=>Qr,_serverApps:()=>qr,deleteApp:()=>ai,getApp:()=>si,getApps:()=>oi,initializeApp:()=>ri,initializeServerApp:()=>ii,onLog:()=>ci,registerVersion:()=>li,setLogLevel:()=>ui});var i=n(43),s=n(391);function o(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function l(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}function c(e,t,n){return(t=l(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n(358);const d=["sri"],f=["page"],p=["page","matches"],g=["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],m=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],y=["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"];var v="popstate";function _(){return k((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return E("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:I(t)}),null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function w(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function b(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch($M){}}}function T(e,t){return{usr:e.state,key:e.key,idx:t}}function E(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return h(h({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?S(t):t),{},{state:n,key:t&&t.key||r||Math.random().toString(36).substring(2,10)})}function I(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function S(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function k(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a="POP",l=null,c=u();function u(){return(o.state||{idx:null}).idx}function d(){a="POP";let e=u(),t=null==e?null:e-c;c=e,l&&l({action:a,location:p.location,delta:t})}function f(e){return C(e)}null==c&&(c=0,o.replaceState(h(h({},o.state),{},{idx:c}),""));let p={get action(){return a},get location(){return e(i,o)},listen(e){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(v,d),l=e,()=>{i.removeEventListener(v,d),l=null}},createHref:e=>t(i,e),createURL:f,encodeLocation(e){let t=f(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){a="PUSH";let r=E(p.location,e,t);n&&n(r,e),c=u()+1;let h=T(r,c),d=p.createHref(r);try{o.pushState(h,"",d)}catch(qI){if(qI instanceof DOMException&&"DataCloneError"===qI.name)throw qI;i.location.assign(d)}s&&l&&l({action:a,location:p.location,delta:1})},replace:function(e,t){a="REPLACE";let r=E(p.location,e,t);n&&n(r,e),c=u();let i=T(r,c),h=p.createHref(r);o.replaceState(i,"",h),s&&l&&l({action:a,location:p.location,delta:0})},go:e=>o.go(e)};return p}function C(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="http://localhost";"undefined"!==typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href),w(n,"No window.location.(origin|href) available to create URL");let r="string"===typeof e?e:I(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}new WeakMap;function x(e,t){return N(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function N(e,t,n,r){let i=H(("string"===typeof t?S(t):t).pathname||"/",n);if(null==i)return null;let s=A(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(s);let o=null;for(let a=0;null==o&&a<s.length;++a){let e=B(i);o=V(s[a],e,r)}return o}function A(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=(e,i,s)=>{let o={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(w(o.relativePath.startsWith(r),'Absolute route path "'.concat(o.relativePath,'" nested under path "').concat(r,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),o.relativePath=o.relativePath.slice(r.length));let a=Y([r,o.relativePath]),l=n.concat(o);e.children&&e.children.length>0&&(w(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(a,'".')),A(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:j(a,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!==(n=e.path)&&void 0!==n&&n.includes("?"))for(let r of P(e.path))i(e,t,r);else i(e,t)})),t}function P(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let o=P(r.join("/")),a=[];return a.push(...o.map((e=>""===e?s:[s,e].join("/")))),i&&a.push(...o),a.map((t=>e.startsWith("/")&&""===t?"/":t))}var R=/^:[\w-]+$/,D=3,O=2,L=1,M=10,F=-2,U=e=>"*"===e;function j(e,t){let n=e.split("/"),r=n.length;return n.some(U)&&(r+=F),t&&(r+=O),n.filter((e=>!U(e))).reduce(((e,t)=>e+(R.test(t)?D:""===t?L:M)),r)}function V(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:r}=e,i={},s="/",o=[];for(let a=0;a<r.length;++a){let e=r[a],l=a===r.length-1,c="/"===s?t:t.slice(s.length)||"/",u=z({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),h=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=z({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),o.push({params:i,pathname:Y([s,u.pathname]),pathnameBase:J(Y([s,u.pathnameBase])),route:h}),"/"!==u.pathnameBase&&(s=Y([s,u.pathnameBase]))}return o}function z(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=q(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{}),pathname:s,pathnameBase:o,pattern:e}}function q(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];b("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));return e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function B(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(qI){return b(!1,'The URL path "'.concat(e,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(qI,").")),e}}function H(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function W(e,t,n,r){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(t,"` field [").concat(JSON.stringify(r),"].  Please separate it out to the `to.").concat(n,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function K(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function G(e){let t=K(e);return t.map(((e,n)=>n===t.length-1?e.pathname:e.pathnameBase))}function Q(e,t,n){let r,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?r=S(e):(r=h({},e),w(!r.pathname||!r.pathname.includes("?"),W("?","pathname","search",r)),w(!r.pathname||!r.pathname.includes("#"),W("#","pathname","hash",r)),w(!r.search||!r.search.includes("#"),W("#","search","hash",r)));let s,o=""===e||""===r.pathname,a=o?"/":r.pathname;if(null==a)s=n;else{let e=t.length-1;if(!i&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}s=e>=0?t[e]:"/"}let l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:n,search:r="",hash:i=""}="string"===typeof e?S(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:$(r),hash:X(i)}}(r,s),c=a&&"/"!==a&&a.endsWith("/"),u=(o||"."===a)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}var Y=e=>e.join("/").replace(/\/\/+/g,"/"),J=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),$=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",X=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function Z(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var ee=["POST","PUT","PATCH","DELETE"],te=(new Set(ee),["GET",...ee]);new Set(te),Symbol("ResetLoaderData");var ne=i.createContext(null);ne.displayName="DataRouter";var re=i.createContext(null);re.displayName="DataRouterState";var ie=i.createContext({isTransitioning:!1});ie.displayName="ViewTransition";var se=i.createContext(new Map);se.displayName="Fetchers";var oe=i.createContext(null);oe.displayName="Await";var ae=i.createContext(null);ae.displayName="Navigation";var le=i.createContext(null);le.displayName="Location";var ce=i.createContext({outlet:null,matches:[],isDataRoute:!1});ce.displayName="Route";var ue=i.createContext(null);ue.displayName="RouteError";function he(){return null!=i.useContext(le)}function de(){return w(he(),"useLocation() may be used only in the context of a <Router> component."),i.useContext(le).location}var fe="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function pe(e){i.useContext(ae).static||i.useLayoutEffect(e)}function ge(){let{isDataRoute:e}=i.useContext(ce);return e?function(){let{router:e}=Ie("useNavigate"),t=ke("useNavigate"),n=i.useRef(!1);pe((()=>{n.current=!0}));let r=i.useCallback((async function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};b(n.current,fe),n.current&&("number"===typeof r?e.navigate(r):await e.navigate(r,h({fromRouteId:t},i)))}),[e,t]);return r}():function(){w(he(),"useNavigate() may be used only in the context of a <Router> component.");let e=i.useContext(ne),{basename:t,navigator:n}=i.useContext(ae),{matches:r}=i.useContext(ce),{pathname:s}=de(),o=JSON.stringify(G(r)),a=i.useRef(!1);pe((()=>{a.current=!0}));let l=i.useCallback((function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(b(a.current,fe),!a.current)return;if("number"===typeof r)return void n.go(r);let l=Q(r,JSON.parse(o),s,"path"===i.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:Y([t,l.pathname])),(i.replace?n.replace:n.push)(l,i.state,i)}),[t,n,o,s,e]);return l}()}i.createContext(null);function me(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:n}=i.useContext(ce),{pathname:r}=de(),s=JSON.stringify(G(n));return i.useMemo((()=>Q(e,JSON.parse(s),r,"path"===t)),[e,s,r,t])}function ye(e,t,n,r){w(he(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s,static:o}=i.useContext(ae),{matches:a}=i.useContext(ce),l=a[a.length-1],c=l?l.params:{},u=l?l.pathname:"/",d=l?l.pathnameBase:"/",f=l&&l.route;{let e=f&&f.path||"";Ne(u,!f||e.endsWith("*")||e.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(u,'" (under <Route path="').concat(e,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(e,'"> to <Route path="').concat("/"===e?"*":"".concat(e,"/*"),'">.'))}let p,g=de();if(t){var m;let e="string"===typeof t?S(t):t;w("/"===d||(null===(m=e.pathname)||void 0===m?void 0:m.startsWith(d)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(d,'" but pathname "').concat(e.pathname,'" was given in the `location` prop.')),p=e}else p=g;let y=p.pathname||"/",v=y;if("/"!==d){let e=d.replace(/^\//,"").split("/");v="/"+y.replace(/^\//,"").split("/").slice(e.length).join("/")}let _=!o&&n&&n.matches&&n.matches.length>0?n.matches:x(e,{pathname:v});b(f||null!=_,'No routes matched location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" ')),b(null==_||void 0!==_[_.length-1].route.element||void 0!==_[_.length-1].route.Component||void 0!==_[_.length-1].route.lazy,'Matched leaf route at location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let T=Te(_&&_.map((e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:Y([d,s.encodeLocation?s.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:Y([d,s.encodeLocation?s.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),a,n,r);return t&&T?i.createElement(le.Provider,{value:{location:h({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:"POP"}},T):T}function ve(){let e=Ce(),t=Z(e)?"".concat(e.status," ").concat(e.statusText):e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},a=null;return console.error("Error handled by React Router default ErrorBoundary:",e),a=i.createElement(i.Fragment,null,i.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),i.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",i.createElement("code",{style:o},"ErrorBoundary")," or"," ",i.createElement("code",{style:o},"errorElement")," prop on your route.")),i.createElement(i.Fragment,null,i.createElement("h2",null,"Unexpected Application Error!"),i.createElement("h3",{style:{fontStyle:"italic"}},t),n?i.createElement("pre",{style:s},n):null,a)}var _e=i.createElement(ve,null),we=class extends i.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?i.createElement(ce.Provider,{value:this.props.routeContext},i.createElement(ue.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function be(e){let{routeContext:t,match:n,children:r}=e,s=i.useContext(ne);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),i.createElement(ce.Provider,{value:t},r)}function Te(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null==e){if(!n)return null;if(n.errors)e=n.matches;else{if(0!==t.length||n.initialized||!(n.matches.length>0))return null;e=n.matches}}let r=e,s=null===n||void 0===n?void 0:n.errors;if(null!=s){let e=r.findIndex((e=>e.route.id&&void 0!==(null===s||void 0===s?void 0:s[e.route.id])));w(e>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(s).join(","))),r=r.slice(0,Math.min(r.length,e+1))}let o=!1,a=-1;if(n)for(let i=0;i<r.length;i++){let e=r[i];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(a=i),e.route.id){let{loaderData:t,errors:i}=n,s=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!i||void 0===i[e.route.id]);if(e.route.lazy||s){o=!0,r=a>=0?r.slice(0,a+1):[r[0]];break}}}return r.reduceRight(((e,l,c)=>{let u,h=!1,d=null,f=null;n&&(u=s&&l.route.id?s[l.route.id]:void 0,d=l.route.errorElement||_e,o&&(a<0&&0===c?(Ne("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,f=null):a===c&&(h=!0,f=l.route.hydrateFallbackElement||null)));let p=t.concat(r.slice(0,c+1)),g=()=>{let t;return t=u?d:h?f:l.route.Component?i.createElement(l.route.Component,null):l.route.element?l.route.element:e,i.createElement(be,{match:l,routeContext:{outlet:e,matches:p,isDataRoute:null!=n},children:t})};return n&&(l.route.ErrorBoundary||l.route.errorElement||0===c)?i.createElement(we,{location:n.location,revalidation:n.revalidation,component:d,error:u,children:g(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):g()}),null)}function Ee(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function Ie(e){let t=i.useContext(ne);return w(t,Ee(e)),t}function Se(e){let t=i.useContext(re);return w(t,Ee(e)),t}function ke(e){let t=function(e){let t=i.useContext(ce);return w(t,Ee(e)),t}(e),n=t.matches[t.matches.length-1];return w(n.route.id,"".concat(e,' can only be used on routes that contain a unique "id"')),n.route.id}function Ce(){var e;let t=i.useContext(ue),n=Se("useRouteError"),r=ke("useRouteError");return void 0!==t?t:null===(e=n.errors)||void 0===e?void 0:e[r]}var xe={};function Ne(e,t,n){t||xe[e]||(xe[e]=!0,b(!1,n))}i.memo((function(e){let{routes:t,future:n,state:r}=e;return ye(t,void 0,r,n)}));function Ae(e){let{to:t,replace:n,state:r,relative:s}=e;w(he(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=i.useContext(ae);b(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=i.useContext(ce),{pathname:l}=de(),c=ge(),u=Q(t,G(a),l,"path"===s),h=JSON.stringify(u);return i.useEffect((()=>{c(JSON.parse(h),{replace:n,state:r,relative:s})}),[c,h,s,n,r]),null}function Pe(e){w(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Re(e){let{basename:t="/",children:n=null,location:r,navigationType:s="POP",navigator:o,static:a=!1}=e;w(!he(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),c=i.useMemo((()=>({basename:l,navigator:o,static:a,future:{}})),[l,o,a]);"string"===typeof r&&(r=S(r));let{pathname:u="/",search:h="",hash:d="",state:f=null,key:p="default"}=r,g=i.useMemo((()=>{let e=H(u,l);return null==e?null:{location:{pathname:e,search:h,hash:d,state:f,key:p},navigationType:s}}),[l,u,h,d,f,p,s]);return b(null!=g,'<Router basename="'.concat(l,'"> is not able to match the URL "').concat(u).concat(h).concat(d,"\" because it does not start with the basename, so the <Router> won't render anything.")),null==g?null:i.createElement(ae.Provider,{value:c},i.createElement(le.Provider,{children:n,value:g}))}function De(e){let{children:t,location:n}=e;return ye(Oe(t),n)}i.Component;function Oe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];return i.Children.forEach(e,((e,r)=>{if(!i.isValidElement(e))return;let s=[...t,r];if(e.type===i.Fragment)return void n.push.apply(n,Oe(e.props.children,s));w(e.type===Pe,"[".concat("string"===typeof e.type?e.type:e.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),w(!e.props.index||!e.props.children,"An index route cannot have child routes.");let o={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=Oe(e.props.children,s)),n.push(o)})),n}var Le="get",Me="application/x-www-form-urlencoded";function Fe(e){return null!=e&&"string"===typeof e.tagName}var Ue=null;var je=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ve(e){return null==e||je.has(e)?e:(b(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(Me,'"')),null)}function ze(e,t){let n,r,i,s,o;if(Fe(a=e)&&"form"===a.tagName.toLowerCase()){let o=e.getAttribute("action");r=o?H(o,t):null,n=e.getAttribute("method")||Le,i=Ve(e.getAttribute("enctype"))||Me,s=new FormData(e)}else if(function(e){return Fe(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return Fe(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let o=e.form;if(null==o)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let a=e.getAttribute("formaction")||o.getAttribute("action");if(r=a?H(a,t):null,n=e.getAttribute("formmethod")||o.getAttribute("method")||Le,i=Ve(e.getAttribute("formenctype"))||Ve(o.getAttribute("enctype"))||Me,s=new FormData(o,e),!function(){if(null===Ue)try{new FormData(document.createElement("form"),0),Ue=!1}catch($M){Ue=!0}return Ue}()){let{name:t,type:n,value:r}=e;if("image"===n){let e=t?"".concat(t,"."):"";s.append("".concat(e,"x"),"0"),s.append("".concat(e,"y"),"0")}else t&&s.append(t,r)}}else{if(Fe(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Le,r=null,i=Me,o=e}var a;return s&&"text/plain"===i&&(o=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:o}}function qe(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}async function Be(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(qI){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(qI),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise((()=>{}))}}function He(e){return null!=e&&"string"===typeof e.page}function We(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function Ke(e,t,n,r,i,s){let o=(e,t)=>!n[t]||e.route.id!==n[t].route.id,a=(e,t)=>{var r;return n[t].pathname!==e.pathname||(null===(r=n[t].route.path)||void 0===r?void 0:r.endsWith("*"))&&n[t].params["*"]!==e.params["*"]};return"assets"===s?t.filter(((e,t)=>o(e,t)||a(e,t))):"data"===s?t.filter(((t,s)=>{let l=r.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(o(t,s)||a(t,s))return!0;if(t.route.shouldRevalidate){var c;let r=t.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:(null===(c=n[0])||void 0===c?void 0:c.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof r)return r}return!0})):[]}function Ge(e,t){let{includeHydrateFallback:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=e.map((e=>{let r=t.routes[e.route.id];if(!r)return[];let i=[r.module];return r.clientActionModule&&(i=i.concat(r.clientActionModule)),r.clientLoaderModule&&(i=i.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(i=i.concat(r.hydrateFallbackModule)),r.imports&&(i=i.concat(r.imports)),i})).flat(1),[...new Set(r)];var r}function Qe(e,t){let n=new Set,r=new Set(t);return e.reduce(((e,i)=>{if(t&&!He(i)&&"script"===i.as&&i.href&&r.has(i.href))return e;let s=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}(i));return n.has(s)||(n.add(s),e.push({key:s,link:i})),e}),[])}function Ye(e){return{__html:e}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;Symbol("SingleFetchRedirect");var Je=new Set([100,101,204,205]);function $e(e,t){let n="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===n.pathname?n.pathname="_root.data":t&&"/"===H(n.pathname,t)?n.pathname="".concat(t.replace(/\/$/,""),"/_root.data"):n.pathname="".concat(n.pathname.replace(/\/$/,""),".data"),n}i.Component;function Xe(e){let{error:t,isOutsideRemixApp:n}=e;console.error(t);let r,s=i.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if(Z(t))return i.createElement(Ze,{title:"Unhandled Thrown Response!"},i.createElement("h1",{style:{fontSize:"24px"}},t.status," ",t.statusText),s);if(t instanceof Error)r=t;else{let e=null==t?"Unknown Error":"object"===typeof t&&"toString"in t?t.toString():JSON.stringify(t);r=new Error(e)}return i.createElement(Ze,{title:"Application Error!",isOutsideRemixApp:n},i.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),i.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},r.stack),s)}function Ze(e){var t;let{title:n,renderScripts:r,isOutsideRemixApp:s,children:o}=e,{routeModules:a}=it();return null!==(t=a.root)&&void 0!==t&&t.Layout&&!s?o:i.createElement("html",{lang:"en"},i.createElement("head",null,i.createElement("meta",{charSet:"utf-8"}),i.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),i.createElement("title",null,n)),i.createElement("body",null,i.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},o,r?i.createElement(ht,null):null)))}function et(e,t){return"lazy"===e.mode&&!0===t}function tt(){let e=i.useContext(ne);return qe(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function nt(){let e=i.useContext(re);return qe(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var rt=i.createContext(void 0);function it(){let e=i.useContext(rt);return qe(e,"You must render this element inside a <HydratedRouter> element"),e}function st(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function ot(e,t,n){if(n&&!ut)return[e[0]];if(t){let n=e.findIndex((e=>void 0!==t[e.route.id]));return e.slice(0,n+1)}return e}function at(e){let{page:t}=e,n=o(e,f),{router:r}=tt(),s=i.useMemo((()=>x(r.routes,t,r.basename)),[r.routes,t,r.basename]);return s?i.createElement(ct,h({page:t,matches:s},n)):null}function lt(e){let{manifest:t,routeModules:n}=it(),[r,s]=i.useState([]);return i.useEffect((()=>{let r=!1;return async function(e,t,n){return Qe((await Promise.all(e.map((async e=>{let r=t.routes[e.route.id];if(r){let e=await Be(r,n);return e.links?e.links():[]}return[]})))).flat(1).filter(We).filter((e=>"stylesheet"===e.rel||"preload"===e.rel)).map((e=>"stylesheet"===e.rel?h(h({},e),{},{rel:"prefetch",as:"style"}):h(h({},e),{},{rel:"prefetch"}))))}(e,t,n).then((e=>{r||s(e)})),()=>{r=!0}}),[e,t,n]),r}function ct(e){let{page:t,matches:n}=e,r=o(e,p),s=de(),{manifest:a,routeModules:l}=it(),{basename:c}=tt(),{loaderData:u,matches:d}=nt(),f=i.useMemo((()=>Ke(t,n,d,a,s,"data")),[t,n,d,a,s]),g=i.useMemo((()=>Ke(t,n,d,a,s,"assets")),[t,n,d,a,s]),m=i.useMemo((()=>{if(t===s.pathname+s.search+s.hash)return[];let e=new Set,r=!1;if(n.forEach((t=>{var n;let i=a.routes[t.route.id];i&&i.hasLoader&&(!f.some((e=>e.route.id===t.route.id))&&t.route.id in u&&null!==(n=l[t.route.id])&&void 0!==n&&n.shouldRevalidate||i.hasClientLoader?r=!0:e.add(t.route.id))})),0===e.size)return[];let i=$e(t,c);return r&&e.size>0&&i.searchParams.set("_routes",n.filter((t=>e.has(t.route.id))).map((e=>e.route.id)).join(",")),[i.pathname+i.search]}),[c,u,s,a,f,n,t,l]),y=i.useMemo((()=>Ge(g,a)),[g,a]),v=lt(g);return i.createElement(i.Fragment,null,m.map((e=>i.createElement("link",h({key:e,rel:"prefetch",as:"fetch",href:e},r)))),y.map((e=>i.createElement("link",h({key:e,rel:"modulepreload",href:e},r)))),v.map((e=>{let{key:t,link:n}=e;return i.createElement("link",h({key:t},n))})))}rt.displayName="FrameworkContext";var ut=!1;function ht(e){let{manifest:t,serverHandoffString:n,isSpaMode:r,renderMeta:s,routeDiscovery:a,ssr:l}=it(),{router:c,static:u,staticContext:f}=tt(),{matches:p}=nt(),g=et(a,l);s&&(s.didRenderScripts=!0);let m=ot(p,null,r);i.useEffect((()=>{ut=!0}),[]);let y=i.useMemo((()=>{var r;let s=f?"window.__reactRouterContext = ".concat(n,";").concat("window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());"):" ",a=u?"".concat(null!==(r=t.hmr)&&void 0!==r&&r.runtime?"import ".concat(JSON.stringify(t.hmr.runtime),";"):"").concat(g?"":"import ".concat(JSON.stringify(t.url)),";\n").concat(m.map(((e,n)=>{let r="route".concat(n),i=t.routes[e.route.id];qe(i,"Route ".concat(e.route.id," not found in manifest"));let{clientActionModule:s,clientLoaderModule:o,clientMiddlewareModule:a,hydrateFallbackModule:l,module:c}=i,u=[...s?[{module:s,varName:"".concat(r,"_clientAction")}]:[],...o?[{module:o,varName:"".concat(r,"_clientLoader")}]:[],...a?[{module:a,varName:"".concat(r,"_clientMiddleware")}]:[],...l?[{module:l,varName:"".concat(r,"_HydrateFallback")}]:[],{module:c,varName:"".concat(r,"_main")}];return 1===u.length?"import * as ".concat(r," from ").concat(JSON.stringify(c),";"):[u.map((e=>"import * as ".concat(e.varName,' from "').concat(e.module,'";'))).join("\n"),"const ".concat(r," = {").concat(u.map((e=>"...".concat(e.varName))).join(","),"};")].join("\n")})).join("\n"),"\n  ").concat(g?"window.__reactRouterManifest = ".concat(JSON.stringify(function(e,t){let{sri:n}=e,r=o(e,d),i=new Set(t.state.matches.map((e=>e.route.id))),s=t.state.location.pathname.split("/").filter(Boolean),a=["/"];for(s.pop();s.length>0;)a.push("/".concat(s.join("/"))),s.pop();a.forEach((e=>{let n=x(t.routes,e,t.basename);n&&n.forEach((e=>i.add(e.route.id)))}));let l=[...i].reduce(((e,t)=>Object.assign(e,{[t]:r.routes[t]})),{});return h(h({},r),{},{routes:l,sri:!!n||void 0})}(t,c),null,2),";"):"","\n  window.__reactRouterRouteModules = {").concat(m.map(((e,t)=>"".concat(JSON.stringify(e.route.id),":route").concat(t))).join(","),"};\n\nimport(").concat(JSON.stringify(t.entry.module),");"):" ";return i.createElement(i.Fragment,null,i.createElement("script",h(h({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:Ye(s),type:void 0})),i.createElement("script",h(h({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:Ye(a),type:"module",async:!0})))}),[]),v=ut?[]:(_=t.entry.imports.concat(Ge(m,t,{includeHydrateFallback:!0})),[...new Set(_)]);var _;let w="object"===typeof t.sri?t.sri:{};return ut?null:i.createElement(i.Fragment,null,"object"===typeof t.sri?i.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:w})}}):null,g?null:i.createElement("link",{rel:"modulepreload",href:t.url,crossOrigin:e.crossOrigin,integrity:w[t.url],suppressHydrationWarning:!0}),i.createElement("link",{rel:"modulepreload",href:t.entry.module,crossOrigin:e.crossOrigin,integrity:w[t.entry.module],suppressHydrationWarning:!0}),v.map((t=>i.createElement("link",{key:t,rel:"modulepreload",href:t,crossOrigin:e.crossOrigin,integrity:w[t],suppressHydrationWarning:!0}))),y)}function dt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach((t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)}))}}var ft="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{ft&&(window.__reactRouterVersion="7.6.0")}catch($M){}function pt(e){let{basename:t,children:n,window:r}=e,s=i.useRef();null==s.current&&(s.current=_({window:r,v5Compat:!0}));let o=s.current,[a,l]=i.useState({action:o.action,location:o.location}),c=i.useCallback((e=>{i.startTransition((()=>l(e)))}),[l]);return i.useLayoutEffect((()=>o.listen(c)),[o,c]),i.createElement(Re,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:o})}var gt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,mt=i.forwardRef((function(e,t){let n,{onClick:r,discover:s="render",prefetch:a="none",relative:l,reloadDocument:c,replace:u,state:d,target:f,to:p,preventScrollReset:m,viewTransition:y}=e,v=o(e,g),{basename:_}=i.useContext(ae),T="string"===typeof p&&gt.test(p),E=!1;if("string"===typeof p&&T&&(n=p,ft))try{let e=new URL(window.location.href),t=p.startsWith("//")?new URL(e.protocol+p):new URL(p),n=H(t.pathname,_);t.origin===e.origin&&null!=n?p=n+t.search+t.hash:E=!0}catch($M){b(!1,'<Link to="'.concat(p,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}let S=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};w(he(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=i.useContext(ae),{hash:s,pathname:o,search:a}=me(e,{relative:t}),l=o;return"/"!==n&&(l="/"===o?n:Y([n,o])),r.createHref({pathname:l,search:a,hash:s})}(p,{relative:l}),[k,C,x]=function(e,t){let n=i.useContext(rt),[r,s]=i.useState(!1),[o,a]=i.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:h,onTouchStart:d}=t,f=i.useRef(null);i.useEffect((()=>{if("render"===e&&a(!0),"viewport"===e){let e=new IntersectionObserver((e=>{e.forEach((e=>{a(e.isIntersecting)}))}),{threshold:.5});return f.current&&e.observe(f.current),()=>{e.disconnect()}}}),[e]),i.useEffect((()=>{if(r){let e=setTimeout((()=>{a(!0)}),100);return()=>{clearTimeout(e)}}}),[r]);let p=()=>{s(!0)},g=()=>{s(!1),a(!1)};return n?"intent"!==e?[o,f,{}]:[o,f,{onFocus:st(l,p),onBlur:st(c,g),onMouseEnter:st(u,p),onMouseLeave:st(h,g),onTouchStart:st(d,p)}]:[!1,f,{}]}(a,v),N=function(e){let{target:t,replace:n,state:r,preventScrollReset:s,relative:o,viewTransition:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=ge(),c=de(),u=me(e,{relative:o});return i.useCallback((i=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(i,t)){i.preventDefault();let t=void 0!==n?n:I(c)===I(u);l(e,{replace:t,state:r,preventScrollReset:s,relative:o,viewTransition:a})}}),[c,l,u,n,r,t,e,s,o,a])}(p,{replace:u,state:d,target:f,preventScrollReset:m,relative:l,viewTransition:y});let A=i.createElement("a",h(h(h({},v),x),{},{href:n||S,onClick:E||c?r:function(e){r&&r(e),e.defaultPrevented||N(e)},ref:dt(t,C),target:f,"data-discover":T||"render"!==s?void 0:"true"}));return k&&!T?i.createElement(i.Fragment,null,A,i.createElement(at,{page:S})):A}));mt.displayName="Link";var yt=i.forwardRef((function(e,t){let{"aria-current":n="page",caseSensitive:r=!1,className:s="",end:a=!1,style:l,to:c,viewTransition:u,children:d}=e,f=o(e,m),p=me(c,{relative:f.relative}),g=de(),y=i.useContext(re),{navigator:v,basename:_}=i.useContext(ae),b=null!=y&&function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=i.useContext(ie);w(null!=n,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=wt("useViewTransitionState"),s=me(e,{relative:t.relative});if(!n.isTransitioning)return!1;let o=H(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=H(n.nextLocation.pathname,r)||n.nextLocation.pathname;return null!=z(s.pathname,a)||null!=z(s.pathname,o)}(p)&&!0===u,T=v.encodeLocation?v.encodeLocation(p).pathname:p.pathname,E=g.pathname,I=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;r||(E=E.toLowerCase(),I=I?I.toLowerCase():null,T=T.toLowerCase()),I&&_&&(I=H(I,_)||I);const S="/"!==T&&T.endsWith("/")?T.length-1:T.length;let k,C=E===T||!a&&E.startsWith(T)&&"/"===E.charAt(S),x=null!=I&&(I===T||!a&&I.startsWith(T)&&"/"===I.charAt(T.length)),N={isActive:C,isPending:x,isTransitioning:b},A=C?n:void 0;k="function"===typeof s?s(N):[s,C?"active":null,x?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let P="function"===typeof l?l(N):l;return i.createElement(mt,h(h({},f),{},{"aria-current":A,className:k,ref:t,style:P,to:c,viewTransition:u}),"function"===typeof d?d(N):d)}));yt.displayName="NavLink";var vt=i.forwardRef(((e,t)=>{let{discover:n="render",fetcherKey:r,navigate:s,reloadDocument:a,replace:l,state:c,method:u=Le,action:d,onSubmit:f,relative:p,preventScrollReset:g,viewTransition:m}=e,v=o(e,y),_=Et(),b=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:n}=i.useContext(ae),r=i.useContext(ce);w(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),o=h({},me(e||".",{relative:t})),a=de();if(null==e){o.search=a.search;let e=new URLSearchParams(o.search),t=e.getAll("index"),n=t.some((e=>""===e));if(n){e.delete("index"),t.filter((e=>e)).forEach((t=>e.append("index",t)));let n=e.toString();o.search=n?"?".concat(n):""}}e&&"."!==e||!s.route.index||(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index");"/"!==n&&(o.pathname="/"===o.pathname?n:Y([n,o.pathname]));return I(o)}(d,{relative:p}),T="get"===u.toLowerCase()?"get":"post",E="string"===typeof d&&gt.test(d);return i.createElement("form",h(h({ref:t,method:T,action:b,onSubmit:a?f:e=>{if(f&&f(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,n=(null===t||void 0===t?void 0:t.getAttribute("formmethod"))||u;_(t||e.currentTarget,{fetcherKey:r,method:n,navigate:s,replace:l,state:c,relative:p,preventScrollReset:g,viewTransition:m})}},v),{},{"data-discover":E||"render"!==n?void 0:"true"}))}));function _t(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function wt(e){let t=i.useContext(ne);return w(t,_t(e)),t}vt.displayName="Form";var bt=0,Tt=()=>"__".concat(String(++bt),"__");function Et(){let{router:e}=wt("useSubmit"),{basename:t}=i.useContext(ae),n=ke("useRouteId");return i.useCallback((async function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:s,method:o,encType:a,formData:l,body:c}=ze(r,t);if(!1===i.navigate){let t=i.fetcherKey||Tt();await e.fetch(t,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||o,formEncType:i.encType||a,flushSync:i.flushSync})}else await e.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||o,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})}),[e,t,n])}const It=!1,St=!1,kt="${JSCORE_VERSION}",Ct=function(e,t){if(!e)throw xt(t)},xt=function(e){return new Error("Firebase Database ("+kt+") INTERNAL ASSERT FAILED: "+e)},Nt=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},At={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),r.push(n[c],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Nt(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new Pt;const l=t<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Pt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Rt=function(e){const t=Nt(e);return At.encodeByteArray(t,!0)},Dt=function(e){return Rt(e).replace(/\./g,"")},Ot=function(e){try{return At.decodeString(e,!0)}catch($M){console.error("base64Decode failed: ",$M)}return null};function Lt(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Lt(e[n],t[n]));return e}function Mt(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const Ft=()=>{try{return Mt().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch($M){return}const t=e&&Ot(e[1]);return t&&JSON.parse(t)})()}catch($M){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat($M))}},Ut=e=>{var t,n;return null===(n=null===(t=Ft())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},jt=()=>{var e;return null===(e=Ft())||void 0===e?void 0:e.config},Vt=e=>{var t;return null===(t=Ft())||void 0===t?void 0:t["_".concat(e)]};class zt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function qt(e){return e.endsWith(".cloudworkstations.dev")}async function Bt(e){return(await fetch(e,{credentials:"include"})).ok}function Ht(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Dt(JSON.stringify({alg:"none",type:"JWT"})),Dt(JSON.stringify(s)),""].join(".")}const Wt={};let Kt=!1;function Gt(e,t){if("undefined"===typeof window||"undefined"===typeof document||!qt(window.location.host)||Wt[e]===t||Wt[e]||Kt)return;function n(e){return"__firebase__banner__".concat(e)}Wt[e]=t;const r="__firebase__banner",i=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(Wt))Wt[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function s(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{Kt=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function o(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),o=document.getElementById(t)||document.createElement("span"),a=n("learnmore"),l=document.getElementById(a)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,a);const n=s();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,o,l,n),document.body.appendChild(t)}i?(o.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',o.innerText="Preview backend running in this workspace."),o.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",o):o()}function Qt(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Yt(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qt())}function Jt(){var e;const t=null===(e=Ft())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch($M){return!1}}function $t(){return"undefined"!==typeof WorkerGlobalScope&&"undefined"!==typeof self&&self instanceof WorkerGlobalScope}function Xt(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Zt(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function en(){const e=Qt();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function tn(){return!0===It||!0===St}function nn(){return!Jt()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function rn(){return!Jt()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function sn(){try{return"object"===typeof indexedDB}catch($M){return!1}}function on(){return new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(qI){t(qI)}}))}function an(){return!("undefined"===typeof navigator||!navigator.cookieEnabled)}class ln extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,ln.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cn.prototype.create)}}class cn{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(un,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new ln(n,s,t)}}const un=/\{\$([^}]+)}/g;function hn(e){return JSON.parse(e)}function dn(e){return JSON.stringify(e)}const fn=function(e){let t={},n={},r={},i="";try{const s=e.split(".");t=hn(Ot(s[0])||""),n=hn(Ot(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch($M){}return{header:t,claims:n,data:r,signature:i}};function pn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function gn(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function mn(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function yn(e,t,n){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function vn(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(_n(n)&&_n(s)){if(!vn(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function _n(e){return null!==e&&"object"===typeof e}function wn(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function bn(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function Tn(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class En{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"===typeof e)for(let u=0;u<16;u++)n[u]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let u=0;u<16;u++)n[u]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let u=16;u<80;u++){const e=n[u-3]^n[u-8]^n[u-14]^n[u-16];n[u]=4294967295&(e<<1|e>>>31)}let r,i,s=this.chain_[0],o=this.chain_[1],a=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(let u=0;u<80;u++){u<40?u<20?(r=l^o&(a^l),i=1518500249):(r=o^a^l,i=1859775393):u<60?(r=o&a|l&(o|a),i=2400959708):(r=o^a^l,i=3395469782);const e=(s<<5|s>>>27)+r+c+i+n[u]&4294967295;c=l,l=a,a=4294967295&(o<<30|o>>>2),o=s,s=e}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let r=0;const i=this.buf_;let s=this.inbuf_;for(;r<t;){if(0===s)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[s]=e.charCodeAt(r),++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}else for(;r<t;)if(i[s]=e[r],++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let r=0;r<5;r++)for(let t=24;t>=0;t-=8)e[n]=this.chain_[r]>>t&255,++n;return e}}function In(e,t){const n=new Sn(e,t);return n.subscribe.bind(n)}class Sn{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=kn),void 0===r.error&&(r.error=kn),void 0===r.complete&&(r.complete=kn);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch($M){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch($M){"undefined"!==typeof console&&console.error&&console.error($M)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function kn(){}const Cn=function(e,t,n,r){let i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i){throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")}};function xn(e,t){return"".concat(e," failed: ").concat(t," argument ")}function Nn(e,t,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(xn(e,t)+"must be a valid function.")}function An(e,t,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(xn(e,t)+"must be a valid context object.")}const Pn=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function Rn(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3)*Math.pow(t,e),r=Math.round(.5*n*(Math.random()-.5)*2);return Math.min(144e5,n+r)}function Dn(e){return e&&e._delegate?e._delegate:e}class On{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ln="[DEFAULT]";class Mn{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new zt;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch($M){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch($M){if(r)return null;throw $M}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Ln})}catch($M){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch($M){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ln;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ln;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ln;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===Ln?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ln;return this.component?this.component.multipleInstances?e:Ln:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Fn{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Mn(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Un=[];var jn;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(jn||(jn={}));const Vn={debug:jn.DEBUG,verbose:jn.VERBOSE,info:jn.INFO,warn:jn.WARN,error:jn.ERROR,silent:jn.SILENT},zn=jn.INFO,qn={[jn.DEBUG]:"log",[jn.VERBOSE]:"log",[jn.INFO]:"info",[jn.WARN]:"warn",[jn.ERROR]:"error"},Bn=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=qn[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class Hn{constructor(e){this.name=e,this._logLevel=zn,this._logHandler=Bn,this._userLogHandler=null,Un.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in jn))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Vn[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,jn.DEBUG,...t),this._logHandler(this,jn.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,jn.VERBOSE,...t),this._logHandler(this,jn.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,jn.INFO,...t),this._logHandler(this,jn.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,jn.WARN,...t),this._logHandler(this,jn.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,jn.ERROR,...t),this._logHandler(this,jn.ERROR,...t)}}let Wn,Kn;const Gn=new WeakMap,Qn=new WeakMap,Yn=new WeakMap,Jn=new WeakMap,$n=new WeakMap;let Xn={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Qn.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Yn.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return tr(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Zn(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Kn||(Kn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(nr(this),n),tr(Gn.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return tr(e.apply(nr(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(nr(this),t,...r);return Yn.set(s,t.sort?t.sort():[t]),tr(s)}}function er(e){return"function"===typeof e?Zn(e):(e instanceof IDBTransaction&&function(e){if(Qn.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));Qn.set(e,t)}(e),t=e,(Wn||(Wn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,Xn):e);var t}function tr(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(tr(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&Gn.set(t,e)})).catch((()=>{})),$n.set(t,e),t}(e);if(Jn.has(e))return Jn.get(e);const t=er(e);return t!==e&&(Jn.set(e,t),$n.set(t,e)),t}const nr=e=>$n.get(e);function rr(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=tr(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(tr(o.result),e.oldVersion,e.newVersion,tr(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}function ir(e){let{blocked:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",(e=>t(e.oldVersion,e))),tr(n).then((()=>{}))}const sr=["get","getKey","getAll","getAllKeys","count"],or=["put","add","delete","clear"],ar=new Map;function lr(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(ar.get(t))return ar.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=or.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!sr.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return ar.set(t,s),s}Xn=(e=>h(h({},e),{},{get:(t,n,r)=>lr(t,n)||e.get(t,n,r),has:(t,n)=>!!lr(t,n)||e.has(t,n)}))(Xn);class cr{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const ur="@firebase/app",hr="0.13.0",dr=new Hn("@firebase/app"),fr="@firebase/app-compat",pr="@firebase/analytics-compat",gr="@firebase/analytics",mr="@firebase/app-check-compat",yr="@firebase/app-check",vr="@firebase/auth",_r="@firebase/auth-compat",wr="@firebase/database",br="@firebase/data-connect",Tr="@firebase/database-compat",Er="@firebase/functions",Ir="@firebase/functions-compat",Sr="@firebase/installations",kr="@firebase/installations-compat",Cr="@firebase/messaging",xr="@firebase/messaging-compat",Nr="@firebase/performance",Ar="@firebase/performance-compat",Pr="@firebase/remote-config",Rr="@firebase/remote-config-compat",Dr="@firebase/storage",Or="@firebase/storage-compat",Lr="@firebase/firestore",Mr="@firebase/ai",Fr="@firebase/firestore-compat",Ur="firebase",jr="[DEFAULT]",Vr={[ur]:"fire-core",[fr]:"fire-core-compat",[gr]:"fire-analytics",[pr]:"fire-analytics-compat",[yr]:"fire-app-check",[mr]:"fire-app-check-compat",[vr]:"fire-auth",[_r]:"fire-auth-compat",[wr]:"fire-rtdb",[br]:"fire-data-connect",[Tr]:"fire-rtdb-compat",[Er]:"fire-fn",[Ir]:"fire-fn-compat",[Sr]:"fire-iid",[kr]:"fire-iid-compat",[Cr]:"fire-fcm",[xr]:"fire-fcm-compat",[Nr]:"fire-perf",[Ar]:"fire-perf-compat",[Pr]:"fire-rc",[Rr]:"fire-rc-compat",[Dr]:"fire-gcs",[Or]:"fire-gcs-compat",[Lr]:"fire-fst",[Fr]:"fire-fst-compat",[Mr]:"fire-vertex","fire-js":"fire-js",[Ur]:"fire-js-all"},zr=new Map,qr=new Map,Br=new Map;function Hr(e,t){try{e.container.addComponent(t)}catch($M){dr.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),$M)}}function Wr(e,t){e.container.addOrOverwriteComponent(t)}function Kr(e){const t=e.name;if(Br.has(t))return dr.debug("There were multiple attempts to register component ".concat(t,".")),!1;Br.set(t,e);for(const n of zr.values())Hr(n,e);for(const n of qr.values())Hr(n,e);return!0}function Gr(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Qr(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:jr;Gr(e,t).clearInstance(n)}function Yr(e){return void 0!==e.options}function Jr(e){return null!==e&&void 0!==e&&void 0!==e.settings}function $r(){Br.clear()}const Xr=new cn("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Zr{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new On("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Xr.create("app-deleted",{appName:this._name})}}function ei(e,t){const n=Ot(e.split(".")[1]);if(null===n)return void console.error("FirebaseServerApp ".concat(t," is invalid: second part could not be parsed."));if(void 0===JSON.parse(n).exp)return void console.error("FirebaseServerApp ".concat(t," is invalid: expiration claim could not be parsed"));1e3*JSON.parse(n).exp-(new Date).getTime()<=0&&console.error("FirebaseServerApp ".concat(t," is invalid: the token has expired."))}class ti extends Zr{constructor(e,t,n,r){const i=void 0===t.automaticDataCollectionEnabled||t.automaticDataCollectionEnabled,s={name:n,automaticDataCollectionEnabled:i};if(void 0!==e.apiKey)super(e,s,r);else{super(e.options,s,r)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:i},t),this._serverConfig.authIdToken&&ei(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&ei(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,"undefined"!==typeof FinalizationRegistry&&(this._finalizationRegistry=new FinalizationRegistry((()=>{this.automaticCleanup()}))),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,li(ur,hr,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,void 0!==e&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){ai(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Xr.create("server-app-deleted")}}const ni="11.8.0";function ri(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:jr,automaticDataCollectionEnabled:!0},t),i=r.name;if("string"!==typeof i||!i)throw Xr.create("bad-app-name",{appName:String(i)});if(n||(n=jt()),!n)throw Xr.create("no-options");const s=zr.get(i);if(s){if(vn(n,s.options)&&vn(r,s.config))return s;throw Xr.create("duplicate-app",{appName:i})}const o=new Fn(i);for(const l of Br.values())o.addComponent(l);const a=new Zr(n,r,o);return zr.set(i,a),a}function ii(e,t){if(("undefined"!==typeof window||$t())&&!$t())throw Xr.create("invalid-server-app-environment");let n;void 0===t.automaticDataCollectionEnabled&&(t.automaticDataCollectionEnabled=!0),n=Yr(e)?e.options:e;const r=Object.assign(Object.assign({},t),n);void 0!==r.releaseOnDeref&&delete r.releaseOnDeref;if(void 0!==t.releaseOnDeref&&"undefined"===typeof FinalizationRegistry)throw Xr.create("finalization-registry-not-supported",{});const i=""+(e=>[...e].reduce(((e,t)=>Math.imul(31,e)+t.charCodeAt(0)|0),0))(JSON.stringify(r)),s=qr.get(i);if(s)return s.incRefCount(t.releaseOnDeref),s;const o=new Fn(i);for(const l of Br.values())o.addComponent(l);const a=new ti(n,t,i,o);return qr.set(i,a),a}function si(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jr;const t=zr.get(e);if(!t&&e===jr&&jt())return ri();if(!t)throw Xr.create("no-app",{appName:e});return t}function oi(){return Array.from(zr.values())}async function ai(e){let t=!1;const n=e.name;if(zr.has(n))t=!0,zr.delete(n);else if(qr.has(n)){e.decRefCount()<=0&&(qr.delete(n),t=!0)}t&&(await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function li(e,t,n){var r;let i=null!==(r=Vr[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void dr.warn(e.join(" "))}Kr(new On("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}function ci(e,t){if(null!==e&&"function"!==typeof e)throw Xr.create("invalid-log-argument");!function(e,t){for(const n of Un){let r=null;t&&t.level&&(r=Vn[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];const a=s.map((e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((e=>e)).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:jn[n].toLowerCase(),message:a,args:s,type:t.name})}}}(e,t)}function ui(e){var t;t=e,Un.forEach((e=>{e.setLogLevel(t)}))}const hi="firebase-heartbeat-store";let di=null;function fi(){return di||(di=rr("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(hi)}catch($M){console.warn($M)}}}).catch((e=>{throw Xr.create("idb-open",{originalErrorMessage:e.message})}))),di}async function pi(e,t){try{const n=(await fi()).transaction(hi,"readwrite"),r=n.objectStore(hi);await r.put(t,gi(e)),await n.done}catch($M){if($M instanceof ln)dr.warn($M.message);else{const t=Xr.create("idb-set",{originalErrorMessage:null===$M||void 0===$M?void 0:$M.message});dr.warn(t.message)}}}function gi(e){return"".concat(e.name,"!").concat(e.options.appId)}class mi{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new vi(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=yi();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch($M){dr.warn($M)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=yi(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),_i(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),_i(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=Dt(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch($M){return dr.warn($M),""}}}function yi(){return(new Date).toISOString().substring(0,10)}class vi{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!sn()&&on().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await fi()).transaction(hi),n=await t.objectStore(hi).get(gi(e));return await t.done,n}catch($M){if($M instanceof ln)dr.warn($M.message);else{const t=Xr.create("idb-get",{originalErrorMessage:null===$M||void 0===$M?void 0:$M.message});dr.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return pi(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return pi(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function _i(e){return Dt(JSON.stringify({version:2,heartbeats:e})).length}var wi;wi="",Kr(new On("platform-logger",(e=>new cr(e)),"PRIVATE")),Kr(new On("heartbeat",(e=>new mi(e)),"PRIVATE")),li(ur,hr,wi),li(ur,hr,"esm2017"),li("fire-js","");function bi(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;const Ti="facebook.com",Ei="github.com",Ii="google.com",Si="password",ki="twitter.com",Ci="EMAIL_SIGNIN",xi="PASSWORD_RESET",Ni="RECOVER_EMAIL",Ai="REVERT_SECOND_FACTOR_ADDITION",Pi="VERIFY_AND_CHANGE_EMAIL",Ri="VERIFY_EMAIL";function Di(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Oi=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}},Li=Di,Mi=new cn("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Fi=new Hn("@firebase/auth");function Ui(e){if(Fi.logLevel<=jn.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Fi.error("Auth (".concat(ni,"): ").concat(e),...n)}}function ji(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Hi(e,...n)}function Vi(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Hi(e,...n)}function zi(e,t,n){const r=Object.assign(Object.assign({},Li()),{[t]:n});return new cn("auth","Firebase",r).create(t,{appName:e.name})}function qi(e){return zi(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Bi(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&ji(e,"argument-error"),zi(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Hi(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Mi.create(e,...n)}function Wi(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Hi(t,...r)}}function Ki(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Ui(t),new Error(t)}function Gi(e,t){e||Ki(t)}function Qi(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Yi(){return"http:"===Ji()||"https:"===Ji()}function Ji(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class $i{constructor(e,t){this.shortDelay=e,this.longDelay=t,Gi(t>e,"Short delay should be less than long delay!"),this.isMobile=Yt()||Zt()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Yi()||Xt()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Xi(e,t){Gi(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class Zi{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Ki("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Ki("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Ki("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const es={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},ts=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ns=new $i(3e4,6e4);function rs(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function is(e,t,n,r){return ss(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=wn(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:a},i);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),e.emulatorConfig&&qt(e.emulatorConfig.host)&&(l.credentials="include"),Zi.fetch()(await as(e,e.config.apiHost,n,o),l)}))}async function ss(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},es),t);try{const t=new cs(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw us(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw us(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw us(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw us(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw zi(e,a,o);ji(e,a)}}catch($M){if($M instanceof ln)throw $M;ji(e,"network-request-failed",{message:String($M)})}}async function os(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await is(e,t,n,r,i);return"mfaPendingCredential"in s&&ji(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function as(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r),s=e,o=s.config.emulator?Xi(e.config,i):"".concat(e.config.apiScheme,"://").concat(i);if(ts.includes(n)&&(await s._persistenceManagerAvailable,"COOKIE"===s._getPersistenceType())){return s._getPersistence()._getFinalTarget(o).toString()}return o}function ls(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class cs{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(Vi(this.auth,"network-request-failed"))),ns.get())}))}}function us(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Vi(e,t,r);return i.customData._tokenResponse=n,i}function hs(e){return void 0!==e&&void 0!==e.getResponse}function ds(e){return void 0!==e&&void 0!==e.enterprise}class fs{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return ls(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function ps(e,t){return is(e,"GET","/v2/recaptchaConfig",rs(e,t))}async function gs(e,t){return is(e,"POST","/v1/accounts:lookup",t)}function ms(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch($M){}}function ys(e){return 1e3*Number(e)}function vs(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Ui("JWT malformed, contained fewer than 3 sections"),null;try{const e=Ot(n);return e?JSON.parse(e):(Ui("Failed to decode base64 JWT payload"),null)}catch($M){return Ui("Caught error parsing JWT payload as JSON",null===$M||void 0===$M?void 0:$M.toString()),null}}function _s(e){const t=vs(e);return Wi(t,"internal-error"),Wi("undefined"!==typeof t.exp,"internal-error"),Wi("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function ws(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch($M){throw $M instanceof ln&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}($M)&&e.auth.currentUser===e&&await e.auth.signOut(),$M}}class bs{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch($M){return void((null===$M||void 0===$M?void 0:$M.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class Ts{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ms(this.lastLoginAt),this.creationTime=ms(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Es(e){var t;const n=e.auth,r=await e.getIdToken(),i=await ws(e,gs(n,{idToken:r}));Wi(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?Is(s.providerUserInfo):[],a=function(e,t){const n=e.filter((e=>!t.some((t=>t.providerId===e.providerId))));return[...n,...t]}(e.providerData,o),l=e.isAnonymous,c=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),u=!!l&&c,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Ts(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(e,h)}function Is(e){return e.map((e=>{var{providerId:t}=e,n=bi(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class Ss{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Wi(e.idToken,"internal-error"),Wi("undefined"!==typeof e.idToken,"internal-error"),Wi("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):_s(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Wi(0!==e.length,"internal-error");const t=_s(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(Wi(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await ss(e,{},(async()=>{const n=wn({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=await as(e,r,"/v1/token","key=".concat(i)),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",Zi.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new Ss;return n&&(Wi("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(Wi("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(Wi("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ss,this.toJSON())}_performRefresh(){return Ki("not implemented")}}function ks(e,t){Wi("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Cs{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=bi(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new bs(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Ts(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await ws(this,this.stsTokenManager.getToken(this.auth,e));return Wi(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Dn(e),r=await n.getIdToken(t),i=vs(r);Wi(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:ms(ys(i.auth_time)),issuedAtTime:ms(ys(i.iat)),expirationTime:ms(ys(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Dn(e);await Es(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Wi(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Cs(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Wi(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Es(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Jr(this.auth.app))return Promise.reject(qi(this.auth));const e=await this.getIdToken();return await ws(this,async function(e,t){return is(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,g=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,m=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:_,isAnonymous:w,providerData:b,stsTokenManager:T}=t;Wi(v&&T,e,"internal-error");const E=Ss.fromJSON(this.name,T);Wi("string"===typeof v,e,"internal-error"),ks(u,e.name),ks(h,e.name),Wi("boolean"===typeof _,e,"internal-error"),Wi("boolean"===typeof w,e,"internal-error"),ks(d,e.name),ks(f,e.name),ks(p,e.name),ks(g,e.name),ks(m,e.name),ks(y,e.name);const I=new Cs({uid:v,auth:e,email:h,emailVerified:_,displayName:u,isAnonymous:w,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:E,createdAt:m,lastLoginAt:y});return b&&Array.isArray(b)&&(I.providerData=b.map((e=>Object.assign({},e)))),g&&(I._redirectEventId=g),I}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Ss;r.updateFromServerResponse(t);const i=new Cs({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Es(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Wi(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?Is(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),o=new Ss;o.updateFromIdToken(n);const a=new Cs({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Ts(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(a,l),a}}const xs=new Map;function Ns(e){Gi(e instanceof Function,"Expected a class definition");let t=xs.get(e);return t?(Gi(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,xs.set(e,t),t)}class As{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}As.type="NONE";const Ps=As;function Rs(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class Ds{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Rs(this.userKey,r.apiKey,i),this.fullPersistenceKey=Rs("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await gs(this.auth,{idToken:e}).catch((()=>{}));return t?Cs._fromGetAccountInfoResponse(this.auth,t,e):null}return Cs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Ds(Ns(Ps),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||Ns(Ps);const s=Rs(n,e.config.apiKey,e.name);let o=null;for(const c of t)try{const t=await c._get(s);if(t){let n;if("string"===typeof t){const r=await gs(e,{idToken:t}).catch((()=>{}));if(!r)break;n=await Cs._fromGetAccountInfoResponse(e,r,t)}else n=Cs._fromJSON(e,t);c!==i&&(o=n),i=c;break}}catch(l){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(l){}}))),new Ds(i,e,n)):new Ds(i,e,n)}}function Os(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Us(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Ls(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Vs(t))return"Blackberry";if(zs(t))return"Webos";if(Ms(t))return"Safari";if((t.includes("chrome/")||Fs(t))&&!t.includes("edge/"))return"Chrome";if(js(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Ls(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qt();return/firefox\//i.test(e)}function Ms(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qt()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Fs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qt();return/crios\//i.test(e)}function Us(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qt();return/iemobile/i.test(e)}function js(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qt();return/android/i.test(e)}function Vs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qt();return/blackberry/i.test(e)}function zs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qt();return/webos/i.test(e)}function qs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qt();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Bs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qt();return qs(e)||js(e)||zs(e)||Vs(e)||/windows phone/i.test(e)||Us(e)}function Hs(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Os(Qt());break;case"Worker":t="".concat(Os(Qt()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(ni,"/").concat(r)}class Ws{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch($M){r($M)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch($M){t.reverse();for(const n of t)try{n()}catch(jF){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===$M||void 0===$M?void 0:$M.message})}}}class Ks{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class Gs{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ys(this),this.idTokenSubscription=new Ys(this),this.beforeStateQueue=new Ws(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Mi,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise((e=>this._resolvePersistenceManagerAvailable=e))}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ns(t)),this._initializationPromise=this.queue((async()=>{var n,r,i;if(!this._deleted&&(this.persistenceManager=await Ds.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null===(r=this._popupRedirectResolver)||void 0===r?void 0:r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch($M){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await gs(this,{idToken:e}),n=await Cs._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Jr(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch($M){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject($M)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Wi(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch($M){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Es(e)}catch($M){if((null===$M||void 0===$M?void 0:$M.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Jr(this.app))return Promise.reject(qi(this));const t=e?Dn(e):null;return t&&Wi(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Wi(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return Jr(this.app)?Promise.reject(qi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Jr(this.app)?Promise.reject(qi(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(Ns(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return is(e,"GET","/v2/passwordPolicy",rs(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Ks(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new cn("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return is(e,"POST","/v2/accounts:revokeToken",rs(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ns(e)||this._popupRedirectResolver;Wi(t,this,"argument-error"),this.redirectPersistenceManager=await Ds.create(this,[Ns(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Wi(o,this,"internal-error"),o.then((()=>{s||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Wi(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Hs(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(Jr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Fi.logLevel<=jn.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Fi.warn("Auth (".concat(ni,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Qs(e){return Dn(e)}class Ys{constructor(e){this.auth=e,this.observer=null,this.addObserver=In((e=>this.observer=e))}get next(){return Wi(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Js={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $s(e){return Js.loadJS(e)}function Xs(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}const Zs=1e12;class eo{constructor(e){this.auth=e,this.counter=Zs,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new ro(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||Zs;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||Zs;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||Zs;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class to{constructor(){this.enterprise=new no}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class no{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class ro{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"===typeof e?document.getElementById(e):e;Wi(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch($M){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch($M){}this.isVisible&&this.execute()}),6e4)}),500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const io="NO_RECAPTCHA";class so{constructor(e){this.type="recaptcha-enterprise",this.auth=Qs(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;ds(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n(io)}))})):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new to).execute("siteKey",{action:"verify"})}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{ps(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new fs(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&ds(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Js.recaptchaEnterpriseScript;0!==t.length&&(t+=i),$s(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function oo(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=new so(e);let o;if(i)o=io;else try{o=await s.verify(n)}catch(qI){o=await s.verify(n,!0)}const a=Object.assign({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in a){const e=a.phoneEnrollmentInfo.phoneNumber,t=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const e=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function ao(e,t,n,r,i){var s,o;if("EMAIL_PASSWORD_PROVIDER"===i){if(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await oo(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await oo(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}if("PHONE_PROVIDER"===i){if(null===(o=e._getRecaptchaConfig())||void 0===o?void 0:o.isProviderEnabled("PHONE_PROVIDER")){const i=await oo(e,t,n);return r(e,i).catch((async i=>{var s;if("AUDIT"===(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.getProviderEnforcementState("PHONE_PROVIDER"))&&(i.code==="auth/".concat("missing-recaptcha-token")||i.code==="auth/".concat("invalid-app-credential"))){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(n," flow."));const i=await oo(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)}))}{const i=await oo(e,t,n,!1,!0);return r(e,i)}}return Promise.reject(i+" provider is not supported.")}async function lo(e){const t=Qs(e),n=await ps(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new fs(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new so(t).verify()}}function co(e,t,n){const r=Qs(e);Wi(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=uo(t),{host:o,port:a}=function(e){const t=uo(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:ho(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:ho(t)}}}(t),l=null===a?"":":".concat(a),c={url:"".concat(s,"//").concat(o).concat(l,"/")},u=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return Wi(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void Wi(vn(c,r.config.emulator)&&vn(u,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,qt(o)?(Gt("Auth",!0),Bt("".concat(s,"//").concat(o).concat(l))):i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function uo(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function ho(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class fo{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ki("not implemented")}_getIdTokenResponse(e){return Ki("not implemented")}_linkToIdToken(e,t){return Ki("not implemented")}_getReauthenticationResolver(e){return Ki("not implemented")}}async function po(e,t){return is(e,"POST","/v1/accounts:resetPassword",rs(e,t))}async function go(e,t){return is(e,"POST","/v1/accounts:signUp",t)}async function mo(e,t){return os(e,"POST","/v1/accounts:signInWithPassword",rs(e,t))}async function yo(e,t){return is(e,"POST","/v1/accounts:sendOobCode",rs(e,t))}async function vo(e,t){return yo(e,t)}async function _o(e,t){return yo(e,t)}class wo extends fo{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new wo(e,t,"password")}static _fromEmailAndCode(e,t){return new wo(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return ao(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",mo,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return os(e,"POST","/v1/accounts:signInWithEmailLink",rs(e,t))}(e,{email:this._email,oobCode:this._password});default:ji(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return ao(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",go,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return os(e,"POST","/v1/accounts:signInWithEmailLink",rs(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:ji(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function bo(e,t){return os(e,"POST","/v1/accounts:signInWithIdp",rs(e,t))}class To extends fo{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new To(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ji("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=bi(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new To(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return bo(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,bo(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,bo(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=wn(t)}return e}}async function Eo(e,t){return is(e,"POST","/v1/accounts:sendVerificationCode",rs(e,t))}const Io={USER_NOT_FOUND:"user-not-found"};class So extends fo{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new So({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new So({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return os(e,"POST","/v1/accounts:signInWithPhoneNumber",rs(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await os(e,"POST","/v1/accounts:signInWithPhoneNumber",rs(e,t));if(n.temporaryProof)throw us(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return os(e,"POST","/v1/accounts:signInWithPhoneNumber",rs(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Io)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new So({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class ko{constructor(e){var t,n,r,i,s,o;const a=bn(Tn(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);Wi(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.lang)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=bn(Tn(e)).link,n=t?bn(Tn(t)).deep_link_id:null,r=bn(Tn(e)).deep_link_id;return(r?bn(Tn(r)).link:null)||r||n||t||e}(e);try{return new ko(t)}catch(n){return null}}}class Co{constructor(){this.providerId=Co.PROVIDER_ID}static credential(e,t){return wo._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=ko.parseLink(t);return Wi(n,"argument-error"),wo._fromEmailAndCode(e,n.code,n.tenantId)}}Co.PROVIDER_ID="password",Co.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Co.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class xo{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class No extends xo{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ao extends No{static credentialFromJSON(e){const t="string"===typeof e?JSON.parse(e):e;return Wi("providerId"in t&&"signInMethod"in t,"argument-error"),To._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return Wi(e.idToken||e.accessToken,"argument-error"),To._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Ao.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Ao.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=t;if(!r&&!i&&!n&&!s)return null;if(!a)return null;try{return new Ao(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch($M){return null}}}class Po extends No{constructor(){super("facebook.com")}static credential(e){return To._fromParams({providerId:Po.PROVIDER_ID,signInMethod:Po.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Po.credentialFromTaggedObject(e)}static credentialFromError(e){return Po.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Po.credential(t.oauthAccessToken)}catch(n){return null}}}Po.FACEBOOK_SIGN_IN_METHOD="facebook.com",Po.PROVIDER_ID="facebook.com";class Ro extends No{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return To._fromParams({providerId:Ro.PROVIDER_ID,signInMethod:Ro.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ro.credentialFromTaggedObject(e)}static credentialFromError(e){return Ro.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Ro.credential(n,r)}catch(i){return null}}}Ro.GOOGLE_SIGN_IN_METHOD="google.com",Ro.PROVIDER_ID="google.com";class Do extends No{constructor(){super("github.com")}static credential(e){return To._fromParams({providerId:Do.PROVIDER_ID,signInMethod:Do.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Do.credentialFromTaggedObject(e)}static credentialFromError(e){return Do.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Do.credential(t.oauthAccessToken)}catch(n){return null}}}Do.GITHUB_SIGN_IN_METHOD="github.com",Do.PROVIDER_ID="github.com";class Oo extends fo{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return bo(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,bo(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,bo(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new Oo(n,i):null}static _create(e,t){return new Oo(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Lo extends xo{constructor(e){Wi(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return Lo.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Lo.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=Oo.fromJSON(e);return Wi(t,"argument-error"),t}static samlCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{pendingToken:n,providerId:r}=t;if(!n||!r)return null;try{return Oo._create(r,n)}catch($M){return null}}}class Mo extends No{constructor(){super("twitter.com")}static credential(e,t){return To._fromParams({providerId:Mo.PROVIDER_ID,signInMethod:Mo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Mo.credentialFromTaggedObject(e)}static credentialFromError(e){return Mo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Mo.credential(n,r)}catch(i){return null}}}async function Fo(e,t){return os(e,"POST","/v1/accounts:signUp",rs(e,t))}Mo.TWITTER_SIGN_IN_METHOD="twitter.com",Mo.PROVIDER_ID="twitter.com";class Uo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await Cs._fromIdTokenResponse(e,n,r),s=jo(n);return new Uo({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=jo(n);return new Uo({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function jo(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Vo extends ln{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Vo.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Vo(e,t,n,r)}}function zo(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw Vo._fromErrorAndOperation(e,n,t,r);throw n}))}function qo(e){return new Set(e.map((e=>{let{providerId:t}=e;return t})).filter((e=>!!e)))}async function Bo(e,t){const n=Dn(e);await Wo(!0,n,t);const{providerUserInfo:r}=await async function(e,t){return is(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),i=qo(r||[]);return n.providerData=n.providerData.filter((e=>i.has(e.providerId))),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function Ho(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await ws(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Uo._forOperation(e,"link",r)}async function Wo(e,t,n){await Es(t);const r=!1===e?"provider-already-linked":"no-such-provider";Wi(qo(t.providerData).has(n)===e,t.auth,r)}async function Ko(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(Jr(r.app))return Promise.reject(qi(r));const i="reauthenticate";try{const s=await ws(e,zo(r,i,t,e),n);Wi(s.idToken,r,"internal-error");const o=vs(s.idToken);Wi(o,r,"internal-error");const{sub:a}=o;return Wi(e.uid===a,r,"user-mismatch"),Uo._forOperation(e,i,s)}catch($M){throw(null===$M||void 0===$M?void 0:$M.code)==="auth/".concat("user-not-found")&&ji(r,"user-mismatch"),$M}}async function Go(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Jr(e.app))return Promise.reject(qi(e));const r="signIn",i=await zo(e,r,t),s=await Uo._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function Qo(e,t){return Go(Qs(e),t)}async function Yo(e,t){const n=Dn(e);return await Wo(!1,n,t.providerId),Ho(n,t)}async function Jo(e,t){return Ko(Dn(e),t)}async function $o(e,t){if(Jr(e.app))return Promise.reject(qi(e));const n=Qs(e),r=await async function(e,t){return os(e,"POST","/v1/accounts:signInWithCustomToken",rs(e,t))}(n,{token:t,returnSecureToken:!0}),i=await Uo._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}class Xo{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?Zo._fromServerResponse(e,t):"totpInfo"in t?ea._fromServerResponse(e,t):ji(e,"internal-error")}}class Zo extends Xo{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new Zo(t)}}class ea extends Xo{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new ea(t)}}function ta(e,t,n){var r;Wi((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Wi("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),Wi("undefined"===typeof n.linkDomain||n.linkDomain.length>0,e,"invalid-hosting-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.linkDomain=n.linkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Wi(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Wi(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function na(e){const t=Qs(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function ra(e,t){await async function(e,t){return is(e,"POST","/v1/accounts:update",rs(e,t))}(Dn(e),{oobCode:t})}async function ia(e,t){const n=Dn(e),r=await po(n,{oobCode:t}),i=r.requestType;switch(Wi(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Wi(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Wi(r.mfaInfo,n,"internal-error");default:Wi(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=Xo._fromServerResponse(Qs(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function sa(e,t,n){if(Jr(e.app))return Promise.reject(qi(e));const r=Qs(e),i=ao(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Fo,"EMAIL_PASSWORD_PROVIDER"),s=await i.catch((t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&na(e),t})),o=await Uo._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}function oa(e,t,n){return Jr(e.app)?Promise.reject(qi(e)):Qo(Dn(e),Co.credential(t,n)).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&na(e),t}))}async function aa(e,t){const n={identifier:t,continueUri:Yi()?Qi():"http://localhost"},{signinMethods:r}=await async function(e,t){return is(e,"POST","/v1/accounts:createAuthUri",rs(e,t))}(Dn(e),n);return r||[]}async function la(e,t){const n=Dn(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&ta(n.auth,r,t);const{email:i}=await async function(e,t){return yo(e,t)}(n.auth,r);i!==e.email&&await e.reload()}async function ca(e,t,n){const r=Dn(e),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&ta(r.auth,i,n);const{email:s}=await async function(e,t){return yo(e,t)}(r.auth,i);s!==e.email&&await e.reload()}async function ua(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=Dn(e),s={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},o=await ws(i,async function(e,t){return is(e,"POST","/v1/accounts:update",t)}(i.auth,s));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const a=i.providerData.find((e=>{let{providerId:t}=e;return"password"===t}));a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(o)}async function ha(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=await ws(e,async function(e,t){return is(e,"POST","/v1/accounts:update",t)}(r,i));await e._updateTokensIfNecessary(s,!0)}class da{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.isNewUser=e,this.providerId=t,this.profile=n}}class fa extends da{constructor(e,t,n,r){super(e,t,n),this.username=r}}class pa extends da{constructor(e,t){super(e,"facebook.com",t)}}class ga extends fa{constructor(e,t){super(e,"github.com",t,"string"===typeof(null===t||void 0===t?void 0:t.login)?null===t||void 0===t?void 0:t.login:null)}}class ma extends da{constructor(e,t){super(e,"google.com",t)}}class ya extends fa{constructor(e,t,n){super(e,"twitter.com",t,n)}}function va(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){const r=null===(n=null===(t=vs(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new da(s,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new pa(s,i);case"github.com":return new ga(s,i);case"google.com":return new ma(s,i);case"twitter.com":return new ya(s,i,e.screenName||null);case"custom":case"anonymous":return new da(s,null);default:return new da(s,r,i)}}(n)}function _a(e,t,n,r){return Dn(e).onAuthStateChanged(t,n,r)}class wa{constructor(e,t,n){this.type=e,this.credential=t,this.user=n}static _fromIdtoken(e,t){return new wa("enroll",e,t)}static _fromMfaPendingCredential(e){return new wa("signin",e)}toJSON(){const e="enroll"===this.type?"idToken":"pendingCredential";return{multiFactorSession:{[e]:this.credential}}}static fromJSON(e){var t,n;if(null===e||void 0===e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return wa._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return wa._fromIdtoken(e.multiFactorSession.idToken)}return null}}class ba{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=Qs(e),r=t.customData._serverResponse,i=(r.mfaInfo||[]).map((e=>Xo._fromServerResponse(n,e)));Wi(r.mfaPendingCredential,n,"internal-error");const s=wa._fromMfaPendingCredential(r.mfaPendingCredential);return new ba(s,i,(async e=>{const i=await e._process(n,s);delete r.mfaInfo,delete r.mfaPendingCredential;const o=Object.assign(Object.assign({},r),{idToken:i.idToken,refreshToken:i.refreshToken});switch(t.operationType){case"signIn":const e=await Uo._fromIdTokenResponse(n,t.operationType,o);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return Wi(t.user,n,"internal-error"),Uo._forOperation(t.user,t.operationType,o);default:ji(n,"internal-error")}}))}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function Ta(e,t){return is(e,"POST","/v2/accounts/mfaEnrollment:start",rs(e,t))}class Ea{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload((t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map((t=>Xo._fromServerResponse(e.auth,t))))}))}static _fromUser(e){return new Ea(e)}async getSession(){return wa._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const n=e,r=await this.getSession(),i=await ws(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const t="string"===typeof e?e:e.uid,n=await this.user.getIdToken();try{const e=await ws(this.user,function(e,t){return is(e,"POST","/v2/accounts/mfaEnrollment:withdraw",rs(e,t))}(this.user.auth,{idToken:n,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter((e=>{let{uid:n}=e;return n!==t})),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch($M){throw $M}}}const Ia=new WeakMap;const Sa="__sak";class ka{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Sa,"1"),this.storage.removeItem(Sa),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Ca extends ka{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Bs(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);en()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ca.type="LOCAL";const xa=Ca;function Na(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),i=RegExp("".concat(r,"=([^;]+)"));return null!==(n=null===(t=document.cookie.match(i))||void 0===t?void 0:t[1])&&void 0!==n?n:null}function Aa(e){const t="http:"===window.location.protocol;return"".concat(t?"__dev_":"__HOST-","FIREBASE_").concat(e.split(":")[3])}class Pa{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL("".concat(window.location.origin,"/__cookies__"));return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=Aa(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return Na(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=Aa(e);document.cookie="".concat(t,"=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High"),await fetch("/__cookies__",{method:"DELETE"}).catch((()=>{}))}_addListener(e,t){if(!this._isAvailable())return;const n=Aa(e);if(window.cookieStore){const e=e=>{const r=e.changed.find((e=>e.name===n));r&&t(r.value);e.deleted.find((e=>e.name===n))&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=Na(n);const i=setInterval((()=>{const e=Na(n);e!==r&&(t(e),r=e)}),1e3);this.listenerUnsubscribes.set(t,(()=>clearInterval(i)))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}Pa.type="COOKIE";class Ra extends ka{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Ra.type="SESSION";const Da=Ra;class Oa{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Oa(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function La(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Oa.receivers=[];class Ma{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const l=La("",20);r.port1.start();const c=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function Fa(){return window}function Ua(){return"undefined"!==typeof Fa().WorkerGlobalScope&&"function"===typeof Fa().importScripts}const ja="firebaseLocalStorageDb",Va="firebaseLocalStorage",za="fbase_key";class qa{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function Ba(e,t){return e.transaction([Va],t?"readwrite":"readonly").objectStore(Va)}function Ha(){const e=indexedDB.open(ja,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Va,{keyPath:za})}catch($M){n($M)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(Va)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(ja);return new qa(e).toPromise()}(),t(await Ha()))}))}))}async function Wa(e,t,n){const r=Ba(e,!0).put({[za]:t,value:n});return new qa(r).toPromise()}function Ka(e,t){const n=Ba(e,!0).delete(t);return new qa(n).toPromise()}class Ga{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Ha()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch($M){if(t++>3)throw $M;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ua()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Oa._getInstance(Ua()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Ma(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ha();return await Wa(e,Sa,"1"),await Ka(e,Sa),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>Wa(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=Ba(e,!1).get(t),r=await new qa(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Ka(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=Ba(e,!1).getAll();return new qa(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Ga.type="LOCAL";const Qa=Ga;function Ya(e,t){return is(e,"POST","/v2/accounts/mfaSignIn:start",rs(e,t))}const Ja=Xs("rcb"),$a=new $i(3e4,6e4);class Xa{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=Fa().grecaptcha)||void 0===e?void 0:e.render)}load(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Wi(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&hs(Fa().grecaptcha)?Promise.resolve(Fa().grecaptcha):new Promise(((n,r)=>{const i=Fa().setTimeout((()=>{r(Vi(e,"network-request-failed"))}),$a.get());Fa()[Ja]=()=>{Fa().clearTimeout(i),delete Fa()[Ja];const s=Fa().grecaptcha;if(!s||!hs(s))return void r(Vi(e,"internal-error"));const o=s.render;s.render=(e,t)=>{const n=o(e,t);return this.counter++,n},this.hostLanguage=t,n(s)};$s("".concat(Js.recaptchaV2Script,"?").concat(wn({onload:Ja,render:"explicit",hl:t}))).catch((()=>{clearTimeout(i),r(Vi(e,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(null===(t=Fa().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Za{async load(e){return new eo(e)}clearedOneInstance(){}}const el="recaptcha",tl={theme:"light",type:"image"};class nl{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.assign({},tl);this.parameters=n,this.type=el,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Qs(e),this.isInvisible="invisible"===this.parameters.size,Wi("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"===typeof t?document.getElementById(t):t;Wi(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Za:new Xa,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise((n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)}))}render(){try{this.assertNotDestroyed()}catch($M){return Promise.reject($M)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((e=>{throw this.renderPromise=null,e}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((e=>{this.container.removeChild(e)}))}validateStartingState(){Wi(!this.parameters.sitekey,this.auth,"argument-error"),Wi(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Wi("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach((e=>e(t))),"function"===typeof e)e(t);else if("string"===typeof e){const n=Fa()[e];"function"===typeof n&&n(t)}}}assertNotDestroyed(){Wi(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){Wi(Yi()&&!Ua(),this.auth,"internal-error"),await function(){let e=null;return new Promise((t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()})).catch((t=>{throw e&&window.removeEventListener("load",e),t}))}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await is(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);Wi(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return Wi(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class rl{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=So._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function il(e,t,n){var r;if(!e._getRecaptchaConfig())try{await lo(e)}catch(qI){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){Wi("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},s=ao(e,r,"mfaSmsEnrollment",(async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===io){Wi((null===n||void 0===n?void 0:n.type)===el,e,"argument-error");return Ta(e,await sl(e,t,n))}return Ta(e,t)}),"PHONE_PROVIDER"),o=await s.catch((e=>Promise.reject(e)));return o.phoneSessionInfo.sessionInfo}{Wi("signin"===t.type,e,"internal-error");const s=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;Wi(s,e,"missing-multi-factor-info");const o={mfaPendingCredential:t.credential,mfaEnrollmentId:s,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},a=ao(e,o,"mfaSmsSignIn",(async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===io){Wi((null===n||void 0===n?void 0:n.type)===el,e,"argument-error");return Ya(e,await sl(e,t,n))}return Ya(e,t)}),"PHONE_PROVIDER"),l=await a.catch((e=>Promise.reject(e)));return l.phoneResponseInfo.sessionInfo}}{const t={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=ao(e,t,"sendVerificationCode",(async(e,t)=>{if(t.captchaResponse===io){Wi((null===n||void 0===n?void 0:n.type)===el,e,"argument-error");return Eo(e,await sl(e,t,n))}return Eo(e,t)}),"PHONE_PROVIDER"),s=await r.catch((e=>Promise.reject(e)));return s.sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function sl(e,t,n){Wi(n.type===el,e,"argument-error");const r=await n.verify();Wi("string"===typeof r,e,"argument-error");const i=Object.assign({},t);if("phoneEnrollmentInfo"in i){const e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,s=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:s}}),i}if("phoneSignInInfo"in i){const e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}return Object.assign(i,{recaptchaToken:r}),i}class ol{constructor(e){this.providerId=ol.PROVIDER_ID,this.auth=Qs(e)}verifyPhoneNumber(e,t){return il(this.auth,e,Dn(t))}static credential(e,t){return So._fromVerification(e,t)}static credentialFromResult(e){const t=e;return ol.credentialFromTaggedObject(t)}static credentialFromError(e){return ol.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?So._fromTokenResponse(n,r):null}}function al(e,t){return t?Ns(t):(Wi(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}ol.PROVIDER_ID="phone",ol.PHONE_SIGN_IN_METHOD="phone";class ll extends fo{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return bo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return bo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return bo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function cl(e){return Go(e.auth,new ll(e),e.bypassAuthState)}function ul(e){const{auth:t,user:n}=e;return Wi(n,t,"internal-error"),Ko(n,new ll(e),e.bypassAuthState)}async function hl(e){const{auth:t,user:n}=e;return Wi(n,t,"internal-error"),Ho(n,new ll(e),e.bypassAuthState)}class dl{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch($M){this.reject($M)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch($M){this.reject($M)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return cl;case"linkViaPopup":case"linkViaRedirect":return hl;case"reauthViaPopup":case"reauthViaRedirect":return ul;default:ji(this.auth,"internal-error")}}resolve(e){Gi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Gi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const fl=new $i(2e3,1e4);class pl extends dl{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,pl.currentPopupAction&&pl.currentPopupAction.cancel(),pl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Wi(e,this.auth,"internal-error"),e}async onExecution(){Gi(1===this.filter.length,"Popup operations only handle one event");const e=La();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(Vi(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Vi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,pl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Vi(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,fl.get())};e()}}pl.currentPopupAction=null;const gl=new Map;class ml extends dl{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=gl.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=wl(t),r=_l(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch($M){e=()=>Promise.reject($M)}gl.set(this.auth._key(),e)}return this.bypassAuthState||gl.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function yl(e,t){return _l(e)._set(wl(t),"true")}function vl(e,t){gl.set(e._key(),t)}function _l(e){return Ns(e._redirectPersistence)}function wl(e){return Rs("pendingRedirect",e.config.apiKey,e.name)}function bl(e,t,n){return async function(e,t,n){if(Jr(e.app))return Promise.reject(qi(e));const r=Qs(e);Bi(e,t,xo),await r._initializationPromise;const i=al(r,n);return await yl(i,r),i._openRedirect(r,t,"signInViaRedirect")}(e,t,n)}function Tl(e,t,n){return async function(e,t,n){const r=Dn(e);if(Bi(r.auth,t,xo),Jr(r.auth.app))return Promise.reject(qi(r.auth));await r.auth._initializationPromise;const i=al(r.auth,n);await yl(i,r.auth);const s=await Sl(r);return i._openRedirect(r.auth,t,"reauthViaRedirect",s)}(e,t,n)}function El(e,t,n){return async function(e,t,n){const r=Dn(e);Bi(r.auth,t,xo),await r.auth._initializationPromise;const i=al(r.auth,n);await Wo(!1,r,t.providerId),await yl(i,r.auth);const s=await Sl(r);return i._openRedirect(r.auth,t,"linkViaRedirect",s)}(e,t,n)}async function Il(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Jr(e.app))return Promise.reject(qi(e));const r=Qs(e),i=al(r,t),s=new ml(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}async function Sl(e){const t=La("".concat(e.uid,":::"));return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class kl{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xl(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!xl(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Vi(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Cl(e))}saveEventToCache(e){this.cachedEventUids.add(Cl(e)),this.lastProcessedEventTime=Date.now()}}function Cl(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function xl(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}async function Nl(e){return is(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}const Al=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Pl=/^https?/;function Rl(e){const t=Qi(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Pl.test(n))return!1;if(Al.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Dl=new $i(3e4,6e4);function Ol(){const e=Fa().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Ll(e){return new Promise(((t,n)=>{var r,i,s;function o(){Ol(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Ol(),n(Vi(e,"network-request-failed"))},timeout:Dl.get()})}if(null===(i=null===(r=Fa().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Fa().gapi)||void 0===s?void 0:s.load)){const t=Xs("iframefcb");return Fa()[t]=()=>{gapi.load?o():n(Vi(e,"network-request-failed"))},$s("".concat(Js.gapiScript,"?onload=").concat(t)).catch((e=>n(e)))}o()}})).catch((e=>{throw Ml=null,e}))}let Ml=null;const Fl=new $i(5e3,15e3),Ul={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},jl=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Vl(e){const t=e.config;Wi(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Xi(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:ni},i=jl.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(wn(r).slice(1))}async function zl(e){const t=await function(e){return Ml=Ml||Ll(e),Ml}(e),n=Fa().gapi;return Wi(n,e,"internal-error"),t.open({where:document.body,url:Vl(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ul,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Vi(e,"network-request-failed"),s=Fa().setTimeout((()=>{r(i)}),Fl.get());function o(){Fa().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}const ql={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Bl{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch($M){}}}function Hl(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},ql),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Qt().toLowerCase();n&&(a=Fs(c)?"_blank":n),Ls(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return qs(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qt())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new Bl(null);const h=window.open(t||"",a,u);Wi(h,e,"popup-blocked");try{h.focus()}catch($M){}return new Bl(h)}const Wl="__/auth/handler",Kl="emulator/auth/handler",Gl=encodeURIComponent("fac");async function Ql(e,t,n,r,i,s){Wi(e.config.authDomain,e,"auth-domain-config-required"),Wi(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:ni,eventId:i};if(t instanceof xo){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",mn(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof No){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?"#".concat(Gl,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Wl);return Xi(t,Kl)}(e),"?").concat(wn(a).slice(1)).concat(c)}const Yl="webStorageSupport";const Jl=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Da,this._completeRedirectFn=Il,this._overrideRedirectResult=vl}async _openPopup(e,t,n,r){var i;Gi(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Hl(e,await Ql(e,t,n,Qi(),r),La())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Fa().location.href=e}(await Ql(e,t,n,Qi(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Gi(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await zl(e),n=new kl(e);return t.register("authEvent",(t=>{Wi(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Yl,{type:Yl},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Yl];void 0!==i&&t(!!i),ji(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await Nl(e);for(const r of t)try{if(Rl(r))return}catch(n){}ji(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Bs()||Ms()||qs()}};class $l{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Ki("unexpected MultiFactorSessionType")}}}class Xl extends $l{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Xl(e)}_finalizeEnroll(e,t,n){return function(e,t){return is(e,"POST","/v2/accounts/mfaEnrollment:finalize",rs(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return is(e,"POST","/v2/accounts/mfaSignIn:finalize",rs(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class Zl{constructor(){}static assertion(e){return Xl._fromCredential(e)}}Zl.FACTOR_ID="phone";var ec="@firebase/auth",tc="1.10.5";class nc{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Wi(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const rc=Vt("authIdTokenMaxAge")||300;let ic=null;var sc;!function(e){Js=e}({loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Vi("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),sc="Browser",Kr(new On("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Wi(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:sc,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Hs(sc)},c=new Gs(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ns);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),Kr(new On("auth-internal",(e=>(e=>new nc(e))(Qs(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),li(ec,tc,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(sc)),li(ec,tc,"esm2017");li("firebase","11.8.0","app");var oc,ac,lc="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},cc={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,(function(){this.blockSize=-1})),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,s=this.h,o=0;o<t;){if(0==s)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(i[s++]=e.charCodeAt(o++),s==this.blockSize){n(this,i),s=0;break}}else for(;o<t;)if(i[s++]=e[o++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function s(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new r([0|e],0>e?-1:0)})):new r([0|e],0>e?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return a;if(0>e)return d(o(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var a=s(0),l=s(1),c=s(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function h(e){return-1==e.h}function d(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(l)}function f(e,t){return e.add(d(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function g(e,t){this.g=e,this.h=t}function m(e,t){if(u(t))throw Error("division by zero");if(u(e))return new g(a,a);if(h(e))return t=m(d(e),t),new g(d(t.g),d(t.h));if(h(t))return t=m(e,d(t)),new g(d(t.g),t.h);if(30<e.g.length){if(h(e)||h(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=y(n),r=y(r);var i=v(n,1),s=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var c=s.add(r);0>=c.l(e)&&(i=i.add(n),s=c),r=v(r,1),n=v(n,1)}return t=f(e,i.j(t)),new g(i,t)}for(i=a;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(s=o(n)).j(t);h(c)||0<c.l(e);)c=(s=o(n-=r)).j(t);u(s)&&(s=l),i=i.add(s),e=f(e,c)}return new g(i,e)}function y(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function v(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,s=[],o=0;o<i;o++)s[o]=0<t?e.i(o+n)>>>t|e.i(o+n+1)<<32-t:e.i(o+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(h(this))return-d(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(h(this))return"-"+d(this).toString(e);for(var t=o(Math.pow(e,6)),n=this,r="";;){var i=m(n,t).g,s=((0<(n=f(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return h(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return h(this)?d(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,s=0;s<=t;s++){var o=i+(65535&this.i(s))+(65535&e.i(s)),a=(o>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);i=a>>>16,o&=65535,a&=65535,n[s]=a<<16|o}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return a;if(h(this))return h(e)?d(this).j(d(e)):d(d(this).j(e));if(h(e))return d(this.j(d(e)));if(0>this.l(c)&&0>e.l(c))return o(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<e.g.length;s++){var l=this.i(i)>>>16,f=65535&this.i(i),g=e.i(s)>>>16,m=65535&e.i(s);n[2*i+2*s]+=f*m,p(n,2*i+2*s),n[2*i+2*s+1]+=l*m,p(n,2*i+2*s+1),n[2*i+2*s+1]+=f*g,p(n,2*i+2*s+1),n[2*i+2*s+2]+=l*g,p(n,2*i+2*s+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return m(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,ac=cc.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=o,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=o(Math.pow(n,8)),i=a,s=0;s<t.length;s+=8){var l=Math.min(8,t.length-s),c=parseInt(t.substring(s,s+l),n);8>l?(l=o(Math.pow(n,l)),i=i.j(l).add(o(c))):i=(i=i.j(r)).add(o(c))}return i},oc=cc.Integer=r}).apply("undefined"!==typeof lc?lc:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var uc,hc,dc,fc,pc,gc,mc,yc,vc="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},_c={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof vc&&vc];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var o=e[s];if(!(o in i))break e;i=i[o]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e,t){return t}))}}));var r=r||{},i=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function h(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function d(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function g(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function m(e){return m[" "](e),e}m[" "]=function(){};var y=-1!=g().indexOf("Gecko")&&!(-1!=g().toLowerCase().indexOf("webkit")&&-1==g().indexOf("Edge"))&&!(-1!=g().indexOf("Trident")||-1!=g().indexOf("MSIE"))&&-1==g().indexOf("Edge");function v(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function _(e){const t={};for(const n in e)t[n]=e[n];return t}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<w.length;t++)n=w[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function T(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function E(e){i.setTimeout((()=>{throw e}),0)}function I(){var e=N;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var S=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new k),(e=>e.reset()));class k{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let C,x=!1,N=new class{constructor(){this.h=this.g=null}add(e,t){const n=S.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},A=()=>{const e=i.Promise.resolve(void 0);C=()=>{e.then(P)}};var P=()=>{for(var e;e=I();){try{e.h.call(e.g)}catch(rF){E(rF)}var t=S;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}x=!1};function R(){this.s=this.s,this.C=this.C}function D(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}R.prototype.s=!1,R.prototype.ma=function(){this.s||(this.s=!0,this.N())},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},D.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(rF){}return e}();function L(e,t){if(D.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{m(t.nodeName);var i=!0;break e}catch(oF){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:M[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&L.aa.h.call(this)}}h(L,D);var M={2:"touch",3:"pen",4:"mouse"};L.prototype.h=function(){L.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var F="closure_listenable_"+(1e6*Math.random()|0),U=0;function j(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++U,this.da=this.fa=!1}function V(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function z(e){this.src=e,this.g={},this.h=0}function q(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(V(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function B(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}z.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=B(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new j(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var H="closure_lm_"+(1e6*Math.random()|0),W={};function K(e,t,n,r,i){if(r&&r.once)return Q(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)K(e,t[s],n,r,i);return null}return n=te(n),e&&e[F]?e.K(t,n,o(r)?!!r.capture:!!r,i):G(e,t,n,!1,r,i)}function G(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var a=o(i)?!!i.capture:!!i,l=Z(e);if(l||(e[H]=l=new z(e)),(n=l.add(t,n,r,a,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=X;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)O||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent($(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Q(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Q(e,t[s],n,r,i);return null}return n=te(n),e&&e[F]?e.L(t,n,o(r)?!!r.capture:!!r,i):G(e,t,n,!0,r,i)}function Y(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Y(e,t[s],n,r,i);else r=o(r)?!!r.capture:!!r,n=te(n),e&&e[F]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=B(s=e.g[t],n,r,i))&&(V(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=B(t,n,r,i)),(n=-1<e?t[e]:null)&&J(n))}function J(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[F])q(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent($(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(q(n,e),0==n.h&&(n.src=null,t[H]=null)):V(e)}}}function $(e){return e in W?W[e]:W[e]="on"+e}function X(e,t){if(e.da)e=!0;else{t=new L(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&J(e),e=n.call(r,t)}return e}function Z(e){return(e=e[H])instanceof z?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){R.call(this),this.i=new z(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new D(t,e);else if(t instanceof D)t.target=t.target||e;else{var i=t;b(t=new D(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=ie(o,r,!0,t)&&i}if(i=ie(o=t.g=e,r,!0,t)&&i,i=ie(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ie(o=t.g=n[s],r,!1,t)&&i}function ie(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.da&&o.capture==n){var a=o.listener,l=o.ha||o.src;o.fa&&q(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}function se(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function oe(e){e.g=se((()=>{e.g=null,e.i&&(e.i=!1,oe(e))}),e.l);const t=e.h;e.h=null,e.m.apply(null,t)}h(ne,R),ne.prototype[F]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Y(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)V(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class ae extends R{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:oe(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){R.call(this),this.h=e,this.g={}}h(le,R);var ce=[];function ue(e){v(e.g,(function(e,t){this.g.hasOwnProperty(t)&&J(e)}),e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var he=i.JSON.stringify,de=i.JSON.parse,fe=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function pe(){}function ge(e){return e.h||(e.h=e.i())}function me(){}pe.prototype.h=null;var ye={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ve(){D.call(this,"d")}function _e(){D.call(this,"c")}h(ve,D),h(_e,D);var we={},be=null;function Te(){return be=be||new ne}function Ee(e){D.call(this,we.La,e)}function Ie(e){const t=Te();re(t,new Ee(t))}function Se(e,t){D.call(this,we.STAT_EVENT,e),this.stat=t}function ke(e){const t=Te();re(t,new Se(t,e))}function Ce(e,t){D.call(this,we.Ma,e),this.size=t}function xe(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout((function(){e()}),t)}function Ne(){this.g=!0}function Ae(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return he(n)}catch(cF){return t}}(e,n)+(r?" "+r:"")}))}we.La="serverreachability",h(Ee,D),we.STAT_EVENT="statevent",h(Se,D),we.Ma="timingevent",h(Ce,D),Ne.prototype.xa=function(){this.g=!1},Ne.prototype.info=function(){};var Pe,Re={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},De={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Oe(){}function Le(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Me}function Me(){this.i=null,this.g="",this.h=!1}h(Oe,pe),Oe.prototype.g=function(){return new XMLHttpRequest},Oe.prototype.i=function(){return{}},Pe=new Oe;var Fe={},Ue={};function je(e,t,n){e.L=1,e.v=ht(ot(t)),e.m=n,e.P=!0,Ve(e,null)}function Ve(e,t){e.F=Date.now(),Be(e),e.A=ot(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),It(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Me,e.g=dn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ae(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ce[0]=i.toString()),i=ce);for(var s=0;s<i.length;s++){var o=K(n,i[s],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}t=e.H?_(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Ie(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.i,e.u,e.A,e.l,e.R,e.m)}function ze(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function qe(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ue:(n=Number(t.substring(n,r)),isNaN(n)?Fe:(r+=1)+n>t.length?Ue:(t=t.slice(r,r+n),e.C=r+n,t))}function Be(e){e.S=Date.now()+e.I,He(e,e.I)}function He(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=xe(c(e.ba,e),t)}function We(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function Ke(e){0==e.j.G||e.J||an(e.j,e)}function Ge(e){We(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Qe(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(lF){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;on(n),Yt(n)}nn(n),ke(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=xe(c(n.Za,n),6e3));if(1>=Xe(n.h)&&n.ca){try{n.ca()}catch(lF){}n.ca=void 0}}else cn(n,11)}else if((e.K||n.g==e)&&on(n),!p(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=c[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(et(s,s.h),s.h=null))}if(r.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ut(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=e;if((r=n).qa=hn(r,r.J?r.ia:null,r.W),o.K){tt(r.h,o);var a=o,l=r.L;l&&(a.I=l),a.B&&(We(a),Be(a)),r.g=o}else tn(r);0<n.i.length&&$t(n)}else"stop"!=c[0]&&"close"!=c[0]||cn(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?cn(n,7):Qt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Ie()}catch(lF){}}Le.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Ht(e)?t.j():this.Y(e)},Le.prototype.Y=function(e){try{if(e==this.g)e:{const d=Ht(this.g);var t=this.g.Ba();this.g.Z();if(!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||Wt(this.g)))){this.J||4!=d||7==t||Ie(),We(this);var n=this.g.Z();this.X=n;t:if(ze(this)){var r=Wt(this.g);e="";var s=r.length,o=4==Ht(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ge(this),Ke(this);var a="";break t}this.h.i=new i.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(o&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,ke(12),Ge(this),Ke(this);break e}Ae(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qe(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<a.length;){if(e=qe(this,a),e==Ue){4==d&&(this.s=4,ke(14),n=!1),Ae(this.i,this.l,null,"[Incomplete Response]");break}if(e==Fe){this.s=4,ke(15),Ae(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}Ae(this.i,this.l,e,null),Qe(this,e)}if(ze(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=a.length||this.h.h||(this.s=1,ke(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var h=this.j;h.g==this&&h.ba&&!h.M&&(h.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),rn(h),h.M=!0,ke(11))}}else Ae(this.i,this.l,a,"[Invalid Chunked Response]"),Ge(this),Ke(this)}else Ae(this.i,this.l,a,null),Qe(this,a);4==d&&Ge(this),this.o&&!this.J&&(4==d?an(this.j,this):(this.o=!1,Be(this)))}else(function(e){const t={};e=(e.g&&2<=Ht(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=T(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,ke(12)):(this.s=0,ke(13)),Ge(this),Ke(this)}}}catch(d){}},Le.prototype.cancel=function(){this.J=!0,Ge(this)},Le.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.i,this.A),2!=this.L&&(Ie(),ke(17)),Ge(this),this.s=2,Ke(this)):He(this,this.S-e)};var Ye=class{constructor(e,t){this.g=e,this.map=t}};function Je(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function $e(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Xe(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return d(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(s(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}Je.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var it=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function st(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof st){this.h=e.h,at(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new wt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(it))?(this.h=!1,at(this,t[1]||"",!0),this.o=dt(t[2]||""),this.g=dt(t[3]||"",!0),lt(this,t[4]),this.l=dt(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=dt(t[7]||"")):(this.h=!1,this.i=new wt(null,this.h))}function ot(e){return new st(e)}function at(e,t,n){e.j=n?dt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof wt?(e.i=t,function(e,t){t&&!e.j&&(bt(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Tt(this,t),It(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=ft(t,vt)),e.i=new wt(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function ht(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function dt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ft(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,pt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function pt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}st.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ft(t,gt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ft(t,gt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ft(n,"/"==n.charAt(0)?yt:mt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ft(n,_t)),e.join("")};var gt=/[#\/\?@]/g,mt=/[#\?:]/g,yt=/[#\?]/g,vt=/[#\?@]/g,_t=/#/g;function wt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function bt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Tt(e,t){bt(e),t=St(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Et(e,t){return bt(e),t=St(e,t),e.g.has(t)}function It(e,t,n){Tt(e,t),0<n.length&&(e.i=null,e.g.set(St(e,t),d(n)),e.h+=n.length)}function St(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function kt(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(oF){}}function Ct(){this.g=new fe}function xt(e,t,n){const r=n||"";try{rt(e,(function(e,n){let i=e;o(e)&&(i=he(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch($M){throw t.push(r+"type="+encodeURIComponent("_badmap")),$M}}function Nt(e){this.l=e.Ub||null,this.j=e.eb||!1}function At(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Pt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Rt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Dt(e)}function Dt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Ot(e){let t="";return v(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Lt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Ot(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function Mt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=wt.prototype).add=function(e,t){bt(this),this.i=null,e=St(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){bt(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},e.na=function(){bt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){bt(this);let t=[];if("string"===typeof e)Et(this,e)&&(t=t.concat(this.g.get(St(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return bt(this),this.i=null,Et(this,e=St(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.V(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")},h(Nt,pe),Nt.prototype.g=function(){return new At(this.l,this.j)},Nt.prototype.i=function(e){return function(){return e}}({}),h(At,ne),(e=At.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Dt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Rt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Dt(this)),this.g&&(this.readyState=3,Dt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Pt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Rt(this):Dt(this),3==this.readyState&&Pt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Rt(this))},e.Qa=function(e){this.g&&(this.response=e,Rt(this))},e.ga=function(){this.g&&Rt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(At.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),h(Mt,ne);var Ft=/^https?$/i,Ut=["POST","PUT"];function jt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Vt(e),qt(e)}function Vt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function zt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=Ht(e)||2!=e.Z()))if(e.u&&4==Ht(e))se(e.Ea,0,e);else if(re(e,"readystatechange"),4==Ht(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var o=String(e.D).match(it)[1]||null;!o&&i.self&&i.self.location&&(o=i.self.location.protocol.slice(0,-1)),s=!Ft.test(o?o.toLowerCase():"")}n=s}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var a=2<Ht(e)?e.g.statusText:""}catch(cF){a=""}e.l=a+" ["+e.Z()+"]",Vt(e)}}finally{qt(e)}}}function qt(e,t){if(e.g){Bt(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{n.onreadystatechange=r}catch($M){}}}function Bt(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function Ht(e){return e.g?e.g.readyState:0}function Wt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(vF){return null}}function Kt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Gt(e){this.Aa=0,this.i=[],this.j=new Ne,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Kt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Kt("baseRetryDelayMs",5e3,e),this.cb=Kt("retryDelaySeedMs",1e4,e),this.Wa=Kt("forwardChannelMaxRetries",2,e),this.wa=Kt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Je(e&&e.concurrentRequestLimit),this.Da=new Ct,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Qt(e){if(Jt(e),3==e.G){var t=e.U++,n=ot(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),Zt(e,n),(t=new Le(e,e.j,t)).L=2,t.v=ht(ot(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(aF){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=dn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),Be(t)}un(e)}function Yt(e){e.g&&(rn(e),e.g.cancel(),e.g=null)}function Jt(e){Yt(e),e.u&&(i.clearTimeout(e.u),e.u=null),on(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function $t(e){if(!$e(e.h)&&!e.s){e.s=!0;var t=e.Ga;C||A(),x||(C(),x=!0),N.add(t,e),e.B=0}}function Xt(e,t){var n;n=t?t.l:e.U++;const r=ot(e.I);ut(r,"SID",e.K),ut(r,"RID",n),ut(r,"AID",e.T),Zt(e,r),e.m&&e.o&&Lt(r,e.m,e.o),n=new Le(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=en(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),je(n,r,t)}function Zt(e,t){e.H&&v(e.H,(function(e,n){ut(t,n,e)})),e.l&&rt({},(function(e,n){ut(t,n,e)}))}function en(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let a=0;a<n;a++){let n=i[a].g;const l=i[a].map;if(n-=t,0>n)t=Math.max(0,i[a].g-100),o=!1;else try{xt(l,e,"req"+n+"_")}catch(s){r&&r(l)}}if(o){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function tn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;C||A(),x||(C(),x=!0),N.add(t,e),e.v=0}}function nn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=xe(c(e.Fa,e),ln(e,e.v)),e.v++,!0)}function rn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function sn(e){e.g=new Le(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=ot(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),Zt(e,t),e.m&&e.o&&Lt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=ht(ot(t)),n.m=null,n.P=!0,Ve(n,e)}function on(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function an(e,t){var n=null;if(e.g==t){on(e),rn(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;re(r=Te(),new Ce(r,n)),$t(e)}else tn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(Xe(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=xe(c(e.Ga,e,t),ln(e,e.B)),e.B++,!0))}(e,t)||2==r&&nn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:cn(e,5);break;case 4:cn(e,10);break;case 3:cn(e,6);break;default:cn(e,2)}}function ln(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function cn(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new st(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||at(r,"https"),ht(r),t?function(e,t){const n=new Ne;if(i.Image){const r=new Image;r.onload=u(kt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(kt,n,"TestLoadImage: error",!1,t,r),r.onabort=u(kt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(kt,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ne;const n=new AbortController,r=setTimeout((()=>{n.abort(),kt(0,0,!1,t)}),1e4);fetch(e,{signal:n.signal}).then((e=>{clearTimeout(r),e.ok?kt(0,0,!0,t):kt(0,0,!1,t)})).catch((()=>{clearTimeout(r),kt(0,0,!1,t)}))}(r.toString(),n)}else ke(2);e.G=0,e.l&&e.l.sa(t),un(e),Jt(e)}function un(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.ra()}}function hn(e,t,n){var r=n instanceof st?ot(n):new st(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var o=new st(null);r&&at(o,r),t&&(o.g=t),s&&lt(o,s),n&&(o.l=n),r=o}return n=e.D,t=e.ya,n&&t&&ut(r,n,t),ut(r,"VER",e.la),Zt(e,r),r}function dn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Mt(new Nt({eb:n})):new Mt(e.pa)).Ha(e.J),t}function fn(){}function pn(){}function gn(e,t){ne.call(this),this.g=new Gt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new vn(this)}function mn(e){ve.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function yn(){_e.call(this),this.status=1}function vn(e){this.g=e}(e=Mt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Pe.g(),this.v=this.o?ge(this.o):ge(Pe),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(oF){return void jt(this,oF)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),s=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Ut,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Bt(this),this.u=!0,this.g.send(e),this.u=!1}catch(oF){jt(this,oF)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),qt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qt(this,!0)),Mt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?zt(this):this.bb())},e.bb=function(){zt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Ht(this)?this.g.status:-1}catch(tF){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(tF){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),de(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Gt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){ke(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=hn(this,null,this.W),$t(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new Le(this,this.j,e);let s=this.o;if(this.S&&(s?(s=_(s),b(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=en(this,i,t),ut(n=ot(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),Zt(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Ot(s)))+"&"+t:this.m&&Lt(n,this.m,s)),et(this.h,i),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),i.T=!0,je(i,n,null)):je(i,n,t),this.G=2}}else 3==this.G&&(e?Xt(this,e):0==this.i.length||$e(this.h)||Xt(this))},e.Fa=function(){if(this.u=null,sn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=xe(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ke(10),Yt(this),sn(this))},e.Za=function(){null!=this.C&&(this.C=null,Yt(this),nn(this),ke(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),ke(2)):(this.j.info("Failed to ping google.com"),ke(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=fn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},pn.prototype.g=function(e,t){return new gn(e,t)},h(gn,ne),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Qt(this.g)},gn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=he(e),e=n);t.i.push(new Ye(t.Ya++,e)),3==t.G&&$t(t)},gn.prototype.N=function(){this.g.l=null,delete this.j,Qt(this.g),delete this.g,gn.aa.N.call(this)},h(mn,ve),h(yn,_e),h(vn,fn),vn.prototype.ua=function(){re(this.g,"a")},vn.prototype.ta=function(e){re(this.g,new mn(e))},vn.prototype.sa=function(e){re(this.g,new yn)},vn.prototype.ra=function(){re(this.g,"b")},pn.prototype.createWebChannel=pn.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,yc=_c.createWebChannelTransport=function(){return new pn},mc=_c.getStatEventTarget=function(){return Te()},gc=_c.Event=we,pc=_c.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Re.NO_ERROR=0,Re.TIMEOUT=8,Re.HTTP_ERROR=6,fc=_c.ErrorCode=Re,De.COMPLETE="complete",dc=_c.EventType=De,me.EventType=ye,ye.OPEN="a",ye.CLOSE="b",ye.ERROR="c",ye.MESSAGE="d",ne.prototype.listen=ne.prototype.K,hc=_c.WebChannel=me,_c.FetchXmlHttpFactory=Nt,Mt.prototype.listenOnce=Mt.prototype.L,Mt.prototype.getLastError=Mt.prototype.Ka,Mt.prototype.getLastErrorCode=Mt.prototype.Ba,Mt.prototype.getStatus=Mt.prototype.Z,Mt.prototype.getResponseJson=Mt.prototype.Oa,Mt.prototype.getResponseText=Mt.prototype.oa,Mt.prototype.send=Mt.prototype.ea,Mt.prototype.setWithCredentials=Mt.prototype.Ha,uc=_c.XhrIo=Mt}).apply("undefined"!==typeof vc?vc:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const wc="@firebase/firestore",bc="4.7.15";class Tc{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Tc.UNAUTHENTICATED=new Tc(null),Tc.GOOGLE_CREDENTIALS=new Tc("google-credentials-uid"),Tc.FIRST_PARTY=new Tc("first-party-uid"),Tc.MOCK_USER=new Tc("mock-user");let Ec="11.8.0";const Ic=new Hn("@firebase/firestore");function Sc(){return Ic.logLevel}function kc(e){if(Ic.logLevel<=jn.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Nc);Ic.debug("Firestore (".concat(Ec,"): ").concat(e),...i)}}function Cc(e){if(Ic.logLevel<=jn.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Nc);Ic.error("Firestore (".concat(Ec,"): ").concat(e),...i)}}function xc(e){if(Ic.logLevel<=jn.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Nc);Ic.warn("Firestore (".concat(Ec,"): ").concat(e),...i)}}function Nc(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(JM){return e}}function Ac(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,Pc(e,r,n)}function Pc(e,t,n){let r="FIRESTORE (".concat(Ec,") INTERNAL ASSERTION FAILED: ").concat(t," (ID: ").concat(e.toString(16),")");if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw Cc(r),new Error(r)}function Rc(e,t,n,r){let i="Unexpected state";"string"==typeof n?i=n:r=n,e||Pc(t,i,r)}function Dc(e,t){return e}const Oc={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Lc extends ln{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Mc{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Fc{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Uc{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Tc.UNAUTHENTICATED)))}shutdown(){}}class jc{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Vc{constructor(e){this.t=e,this.currentUser=Tc.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Rc(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Mc;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Mc,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{kc("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(kc("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Mc)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(kc("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Rc("string"==typeof t.accessToken,31837,{l:t}),new Fc(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Rc(null===e||"string"==typeof e,2055,{h:e}),new Tc(e)}}class zc{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=Tc.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class qc{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new zc(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Tc.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Bc{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Hc{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Jr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Rc(void 0===this.o,3512);const n=e=>{null!=e.error&&kc("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.m;return this.m=e.token,kc("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{kc("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):kc("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Bc(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Rc("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new Bc(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Wc(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}function Kc(){return new TextEncoder}class Gc{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=Wc(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function Qc(e,t){return e<t?-1:e>t?1:0}function Yc(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),i=t.codePointAt(n);if(r!==i){if(r<128&&i<128)return Qc(r,i);{const s=Kc(),o=$c(s.encode(Jc(e,n)),s.encode(Jc(t,n)));return 0!==o?o:Qc(r,i)}}n+=r>65535?2:1}return Qc(e.length,t.length)}function Jc(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function $c(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return Qc(e[n],t[n]);return Qc(e.length,t.length)}function Xc(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function Zc(e){return e+"\0"}const eu=-62135596800,tu=1e6;class nu{static now(){return nu.fromMillis(Date.now())}static fromDate(e){return nu.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*tu);return new nu(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Lc(Oc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Lc(Oc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<eu)throw new Lc(Oc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Lc(Oc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/tu}_compareTo(e){return this.seconds===e.seconds?Qc(this.nanoseconds,e.nanoseconds):Qc(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-eu;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ru{static fromTimestamp(e){return new ru(e)}static min(){return new ru(new nu(0,0))}static max(){return new ru(new nu(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const iu="__name__";class su{constructor(e,t,n){void 0===t?t=0:t>e.length&&Ac(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&Ac(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===su.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof su?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=su.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return Qc(e.length,t.length)}static compareSegments(e,t){const n=su.isNumericId(e),r=su.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?su.extractNumericId(e).compare(su.extractNumericId(t)):Yc(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return oc.fromString(e.substring(4,e.length-2))}}class ou extends su{construct(e,t,n){return new ou(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Lc(Oc.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new ou(e)}static emptyPath(){return new ou([])}}const au=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class lu extends su{construct(e,t,n){return new lu(e,t,n)}static isValidIdentifier(e){return au.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),lu.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===iu}static keyField(){return new lu([iu])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Lc(Oc.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Lc(Oc.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Lc(Oc.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Lc(Oc.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new lu(t)}static emptyPath(){return new lu([])}}class cu{constructor(e){this.path=e}static fromPath(e){return new cu(ou.fromString(e))}static fromName(e){return new cu(ou.fromString(e).popFirst(5))}static empty(){return new cu(ou.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ou.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ou.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new cu(new ou(e.slice()))}}const uu=-1;class hu{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function du(e){return e.fields.find((e=>2===e.kind))}function fu(e){return e.fields.filter((e=>2!==e.kind))}hu.UNKNOWN_ID=-1;class pu{constructor(e,t){this.fieldPath=e,this.kind=t}}class gu{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new gu(0,vu.min())}}function mu(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=ru.fromTimestamp(1e9===r?new nu(n+1,0):new nu(n,r));return new vu(i,cu.empty(),t)}function yu(e){return new vu(e.readTime,e.key,uu)}class vu{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new vu(ru.min(),cu.empty(),uu)}static max(){return new vu(ru.max(),cu.empty(),uu)}}function _u(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=cu.comparator(e.documentKey,t.documentKey),0!==n?n:Qc(e.largestBatchId,t.largestBatchId))}const wu="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class bu{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Tu(e){if(e.code!==Oc.FAILED_PRECONDITION||e.message!==wu)throw e;kc("LocalStore","Unexpectedly lost primary lease")}class Eu{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ac(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Eu(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Eu?t:Eu.resolve(t)}catch(e){return Eu.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Eu.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Eu.reject(t)}static resolve(e){return new Eu(((t,n)=>{t(e)}))}static reject(e){return new Eu(((t,n)=>{n(e)}))}static waitFor(e){return new Eu(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=Eu.resolve(!1);for(const n of e)t=t.next((e=>e?Eu.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new Eu(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{s[l]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new Eu(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}const Iu="SimpleDb";class Su{static open(e,t,n,r){try{return new Su(t,e.transaction(r,n))}catch(e){throw new Nu(t,e)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Mc,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Nu(e,t.error)):this.S.resolve()},this.transaction.onerror=t=>{const n=Ou(t.target.error);this.S.reject(new Nu(e,n))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(kc(Iu,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}v(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Pu(t)}}class ku{static delete(e){return kc(Iu,"Removing database:",e),Ru(Mt().indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!sn())return!1;if(ku.F())return!0;const e=Qt(),t=ku.M(e),n=0<t&&t<10,r=Cu(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static F(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.O)}static N(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}constructor(e,t,n){this.name=e,this.version=t,this.B=n,this.L=null,12.2===ku.M(Qt())&&Cc("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async k(e){return this.db||(kc(Iu,"Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new Nu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new Lc(Oc.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new Lc(Oc.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new Nu(e,r))},r.onupgradeneeded=e=>{kc(Iu,'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;if(null!==this.L&&this.L!==e.oldVersion)throw new Error('refusing to open IndexedDB database due to potential corruption of the IndexedDB database data; this corruption could be caused by clicking the "clear site data" button in a web browser; try reloading the web page to re-initialize the IndexedDB database: lastClosedDbVersion='.concat(this.L,", event.oldVersion=").concat(e.oldVersion,", event.newVersion=").concat(e.newVersion,", db.version=").concat(t.version));this.B.q(t,r.transaction,e.oldVersion,this.version).next((()=>{kc(Iu,"Database upgrade to version "+this.version+" complete")}))}})),this.db.addEventListener("close",(e=>{const t=e.target;this.L=t.version}),{passive:!0})),this.$&&(this.db.onversionchange=e=>this.$(e)),this.db}U(e){this.$=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.k(e);const t=Su.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next((e=>(t.v(),e))).catch((e=>(t.abort(e),Eu.reject(e)))).toPromise();return s.catch((()=>{})),await t.D,s}catch(e){const t=e,n="FirebaseError"!==t.name&&s<3;if(kc(Iu,"Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Cu(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class xu{constructor(e){this.K=e,this.W=!1,this.G=null}get isDone(){return this.W}get j(){return this.G}set cursor(e){this.K=e}done(){this.W=!0}H(e){this.G=e}delete(){return Ru(this.K.delete())}}class Nu extends Lc{constructor(e,t){super(Oc.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function Au(e){return"IndexedDbTransactionError"===e.name}class Pu{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(kc(Iu,"PUT",this.store.name,e,t),n=this.store.put(t,e)):(kc(Iu,"PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Ru(n)}add(e){return kc(Iu,"ADD",this.store.name,e,e),Ru(this.store.add(e))}get(e){return Ru(this.store.get(e)).next((t=>(void 0===t&&(t=null),kc(Iu,"GET",this.store.name,e,t),t)))}delete(e){return kc(Iu,"DELETE",this.store.name,e),Ru(this.store.delete(e))}count(){return kc(Iu,"COUNT",this.store.name),Ru(this.store.count())}J(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new Eu(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}{const e=this.cursor(n),t=[];return this.Y(e,((e,n)=>{t.push(n)})).next((()=>t))}}Z(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new Eu(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}X(e,t){kc(Iu,"DELETE ALL",this.store.name);const n=this.options(e,t);n.ee=!1;const r=this.cursor(n);return this.Y(r,((e,t,n)=>n.delete()))}te(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.Y(r,t)}ne(e){const t=this.cursor({});return new Eu(((n,r)=>{t.onerror=e=>{const t=Ou(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}Y(e,t){const n=[];return new Eu(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new xu(i),o=t(i.primaryKey,i.value,s);if(o instanceof Eu){const e=o.catch((e=>(s.done(),Eu.reject(e))));n.push(e)}s.isDone?r():null===s.j?i.continue():i.continue(s.j)}})).next((()=>Eu.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.ee?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ru(e){return new Eu(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=Ou(e.target.error);n(t)}}))}let Du=!1;function Ou(e){const t=ku.M(Qt());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new Lc("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Du||(Du=!0,setTimeout((()=>{throw e}),0)),e}}return e}const Lu="IndexBackfiller";class Mu{constructor(e,t){this.asyncQueue=e,this.re=t,this.task=null}start(){this.ie(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ie(e){kc(Lu,"Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const e=await this.re.se();kc(Lu,"Documents written: ".concat(e))}catch(e){Au(e)?kc(Lu,"Ignoring IndexedDB error during index backfill: ",e):await Tu(e)}await this.ie(6e4)}))}}class Fu{constructor(e,t){this.localStore=e,this.persistence=t}async se(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.oe(t,e)))}oe(e,t){const n=new Set;let r=t,i=!0;return Eu.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return kc(Lu,"Processing collection: ".concat(t)),this._e(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}_e(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.ae(r,n))).next((n=>(kc(Lu,"Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}ae(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=yu(t);_u(r,n)>0&&(n=r)})),new vu(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Uu{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ue(e),this.ce=e=>t.writeSequenceNumber(e))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Uu.le=-1;const ju=-1;function Vu(e){return null==e}function zu(e){return 0===e&&1/e==-1/0}function qu(e){return"number"==typeof e&&Number.isInteger(e)&&!zu(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const Bu="\x01";function Hu(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Ku(t)),t=Wu(e.get(n),t);return Ku(t)}function Wu(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case Bu:n+="\x01\x11";break;default:n+=t}}return n}function Ku(e){return e+Bu+"\x01"}function Gu(e){const t=e.length;if(Rc(t>=2,64408,{path:e}),2===t)return Rc(e.charAt(0)===Bu&&"\x01"===e.charAt(1),56145,{path:e}),ou.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf(Bu,s);switch((t<0||t>n)&&Ac(50515,{path:e}),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:Ac(61167,{path:e})}s=t+2}return new ou(r)}const Qu="remoteDocuments",Yu="owner",Ju="owner",$u="mutationQueues",Xu="mutations",Zu="batchId",eh="userMutationsIndex",th=["userId","batchId"];function nh(e,t){return[e,Hu(t)]}function rh(e,t,n){return[e,Hu(t),n]}const ih={},sh="documentMutations",oh="remoteDocumentsV14",ah=["prefixPath","collectionGroup","readTime","documentId"],lh="documentKeyIndex",ch=["prefixPath","collectionGroup","documentId"],uh="collectionGroupIndex",hh=["collectionGroup","readTime","prefixPath","documentId"],dh="remoteDocumentGlobal",fh="remoteDocumentGlobalKey",ph="targets",gh="queryTargetsIndex",mh=["canonicalId","targetId"],yh="targetDocuments",vh=["targetId","path"],_h="documentTargetsIndex",wh=["path","targetId"],bh="targetGlobalKey",Th="targetGlobal",Eh="collectionParents",Ih=["collectionId","parent"],Sh="clientMetadata",kh="bundles",Ch="namedQueries",xh="indexConfiguration",Nh="collectionGroupIndex",Ah="indexState",Ph=["indexId","uid"],Rh="sequenceNumberIndex",Dh=["uid","sequenceNumber"],Oh="indexEntries",Lh=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Mh="documentKeyIndex",Fh=["indexId","uid","orderedDocumentKey"],Uh="documentOverlays",jh=["userId","collectionPath","documentId"],Vh="collectionPathOverlayIndex",zh=["userId","collectionPath","largestBatchId"],qh="collectionGroupOverlayIndex",Bh=["userId","collectionGroup","largestBatchId"],Hh="globals",Wh=[$u,Xu,sh,Qu,ph,Yu,Th,yh,Sh,dh,Eh,kh,Ch],Kh=[...Wh,Uh],Gh=[$u,Xu,sh,oh,ph,Yu,Th,yh,Sh,dh,Eh,kh,Ch,Uh],Qh=Gh,Yh=[...Qh,xh,Ah,Oh],Jh=Yh,$h=[...Yh,Hh],Xh=$h;class Zh extends bu{constructor(e,t){super(),this.he=e,this.currentSequenceNumber=t}}function ed(e,t){const n=Dc(e);return ku.N(n.he,t)}function td(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function nd(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function rd(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class id{constructor(e,t){this.comparator=e,this.root=t||od.EMPTY}insert(e,t){return new id(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,od.BLACK,null,null))}remove(e){return new id(this.comparator,this.root.remove(e,this.comparator).copy(null,null,od.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sd(this.root,e,this.comparator,!1)}getReverseIterator(){return new sd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sd(this.root,e,this.comparator,!0)}}class sd{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class od{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:od.RED,this.left=null!=r?r:od.EMPTY,this.right=null!=i?i:od.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new od(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return od.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return od.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,od.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,od.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ac(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ac(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ac(27949);return e+(this.isRed()?0:1)}}od.EMPTY=null,od.RED=!0,od.BLACK=!1,od.EMPTY=new class{constructor(){this.size=0}get key(){throw Ac(57766)}get value(){throw Ac(16141)}get color(){throw Ac(16727)}get left(){throw Ac(29726)}get right(){throw Ac(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new od(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ad{constructor(e){this.comparator=e,this.data=new id(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ld(this.data.getIterator())}getIteratorFrom(e){return new ld(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof ad))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new ad(this.comparator);return t.data=e,t}}class ld{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function cd(e){return e.hasNext()?e.getNext():void 0}class ud{constructor(e){this.fields=e,e.sort(lu.comparator)}static empty(){return new ud([])}unionWith(e){let t=new ad(lu.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new ud(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Xc(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class hd extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class dd{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new hd("Invalid base64 string: "+e):e}}(e);return new dd(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new dd(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Qc(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dd.EMPTY_BYTE_STRING=new dd("");const fd=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pd(e){if(Rc(!!e,39018),"string"==typeof e){let t=0;const n=fd.exec(e);if(Rc(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:gd(e.seconds),nanos:gd(e.nanos)}}function gd(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function md(e){return"string"==typeof e?dd.fromBase64String(e):dd.fromUint8Array(e)}const yd="server_timestamp",vd="__type__",_d="__previous_value__",wd="__local_write_time__";function bd(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[vd])||void 0===n?void 0:n.stringValue)===yd}function Td(e){const t=e.mapValue.fields[_d];return bd(t)?Td(t):t}function Ed(e){const t=pd(e.mapValue.fields[wd].timestampValue);return new nu(t.seconds,t.nanos)}class Id{constructor(e,t,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l,this.isUsingEmulator=c}}const Sd="(default)";class kd{constructor(e,t){this.projectId=e,this.database=t||Sd}static empty(){return new kd("","")}get isDefaultDatabase(){return this.database===Sd}isEqual(e){return e instanceof kd&&e.projectId===this.projectId&&e.database===this.database}}const Cd="__type__",xd="__max__",Nd={mapValue:{fields:{__type__:{stringValue:xd}}}},Ad="__vector__",Pd="value",Rd={nullValue:"NULL_VALUE"};function Dd(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?bd(e)?4:Jd(e)?9007199254740991:Qd(e)?10:11:Ac(28295,{value:e})}function Od(e,t){if(e===t)return!0;const n=Dd(e);if(n!==Dd(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Ed(e).isEqual(Ed(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=pd(e.timestampValue),r=pd(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return md(e.bytesValue).isEqual(md(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return gd(e.geoPointValue.latitude)===gd(t.geoPointValue.latitude)&&gd(e.geoPointValue.longitude)===gd(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return gd(e.integerValue)===gd(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=gd(e.doubleValue),r=gd(t.doubleValue);return n===r?zu(n)===zu(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Xc(e.arrayValue.values||[],t.arrayValue.values||[],Od);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(td(n)!==td(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Od(n[i],r[i])))return!1;return!0}(e,t);default:return Ac(52216,{left:e})}}function Ld(e,t){return void 0!==(e.values||[]).find((e=>Od(e,t)))}function Md(e,t){if(e===t)return 0;const n=Dd(e),r=Dd(t);if(n!==r)return Qc(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Qc(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=gd(e.integerValue||e.doubleValue),r=gd(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Fd(e.timestampValue,t.timestampValue);case 4:return Fd(Ed(e),Ed(t));case 5:return Yc(e.stringValue,t.stringValue);case 6:return function(e,t){const n=md(e),r=md(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Qc(n[i],r[i]);if(0!==e)return e}return Qc(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Qc(gd(e.latitude),gd(t.latitude));return 0!==n?n:Qc(gd(e.longitude),gd(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Ud(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,s;const o=e.fields||{},a=t.fields||{},l=null===(n=o[Pd])||void 0===n?void 0:n.arrayValue,c=null===(r=a[Pd])||void 0===r?void 0:r.arrayValue,u=Qc((null===(i=null==l?void 0:l.values)||void 0===i?void 0:i.length)||0,(null===(s=null==c?void 0:c.values)||void 0===s?void 0:s.length)||0);return 0!==u?u:Ud(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Nd.mapValue&&t===Nd.mapValue)return 0;if(e===Nd.mapValue)return 1;if(t===Nd.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=Yc(r[o],s[o]);if(0!==e)return e;const t=Md(n[r[o]],i[s[o]]);if(0!==t)return t}return Qc(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Ac(23264,{Pe:n})}}function Fd(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Qc(e,t);const n=pd(e),r=pd(t),i=Qc(n.seconds,r.seconds);return 0!==i?i:Qc(n.nanos,r.nanos)}function Ud(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Md(n[i],r[i]);if(e)return e}return Qc(n.length,r.length)}function jd(e){return Vd(e)}function Vd(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=pd(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return md(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return cu.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Vd(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(Vd(e.fields[i]));return n+"}"}(e.mapValue):Ac(61005,{value:e})}function zd(e){switch(Dd(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Td(e);return t?16+zd(t):16;case 5:return 2*e.stringValue.length;case 6:return md(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce(((e,t)=>e+zd(t)),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return nd(e.fields,((e,n)=>{t+=e.length+zd(n)})),t}(e.mapValue);default:throw Ac(13486,{value:e})}}function qd(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Bd(e){return!!e&&"integerValue"in e}function Hd(e){return!!e&&"arrayValue"in e}function Wd(e){return!!e&&"nullValue"in e}function Kd(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Gd(e){return!!e&&"mapValue"in e}function Qd(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[Cd])||void 0===n?void 0:n.stringValue)===Ad}function Yd(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return nd(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Yd(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Yd(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Jd(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===xd}const $d={mapValue:{fields:{[Cd]:{stringValue:Ad},[Pd]:{arrayValue:{}}}}};function Xd(e){return"nullValue"in e?Rd:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?qd(kd.empty(),cu.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?Qd(e)?$d:{mapValue:{}}:Ac(35942,{value:e})}function Zd(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?qd(kd.empty(),cu.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?$d:"mapValue"in e?Qd(e)?{mapValue:{}}:Nd:Ac(61959,{value:e})}function ef(e,t){const n=Md(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function tf(e,t){const n=Md(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class nf{constructor(e){this.value=e}static empty(){return new nf({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Gd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Yd(t)}setAll(e){let t=lu.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Yd(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Gd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Od(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Gd(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){nd(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new nf(Yd(this.value))}}function rf(e){const t=[];return nd(e.fields,((e,n)=>{const r=new lu([e]);if(Gd(n)){const e=rf(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new ud(t)}class sf{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new sf(e,0,ru.min(),ru.min(),ru.min(),nf.empty(),0)}static newFoundDocument(e,t,n,r){return new sf(e,1,t,ru.min(),n,r,0)}static newNoDocument(e,t){return new sf(e,2,t,ru.min(),ru.min(),nf.empty(),0)}static newUnknownDocument(e,t){return new sf(e,3,t,ru.min(),ru.min(),nf.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ru.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=nf.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=nf.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ru.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof sf&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new sf(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class of{constructor(e,t){this.position=e,this.inclusive=t}}function af(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?cu.comparator(cu.fromName(o.referenceValue),n.key):Md(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function lf(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Od(e.position[n],t.position[n]))return!1;return!0}class cf{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function uf(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class hf{}class df extends hf{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Tf(e,t,n):"array-contains"===t?new kf(e,n):"in"===t?new Cf(e,n):"not-in"===t?new xf(e,n):"array-contains-any"===t?new Nf(e,n):new df(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Ef(e,n):new If(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(Md(t,this.value)):null!==t&&Dd(this.value)===Dd(t)&&this.matchesComparison(Md(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ac(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ff extends hf{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new ff(e,t)}matches(e){return pf(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.Te||(this.Te=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function pf(e){return"and"===e.op}function gf(e){return"or"===e.op}function mf(e){return yf(e)&&pf(e)}function yf(e){for(const t of e.filters)if(t instanceof ff)return!1;return!0}function vf(e){if(e instanceof df)return e.field.canonicalString()+e.op.toString()+jd(e.value);if(mf(e))return e.filters.map((e=>vf(e))).join(",");{const t=e.filters.map((e=>vf(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function _f(e,t){return e instanceof df?function(e,t){return t instanceof df&&e.op===t.op&&e.field.isEqual(t.field)&&Od(e.value,t.value)}(e,t):e instanceof ff?function(e,t){return t instanceof ff&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&_f(n,t.filters[r])),!0)}(e,t):void Ac(19439)}function wf(e,t){const n=e.filters.concat(t);return ff.create(n,e.op)}function bf(e){return e instanceof df?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(jd(e.value))}(e):e instanceof ff?function(e){return e.op.toString()+" {"+e.getFilters().map(bf).join(" ,")+"}"}(e):"Filter"}class Tf extends df{constructor(e,t,n){super(e,t,n),this.key=cu.fromName(n.referenceValue)}matches(e){const t=cu.comparator(e.key,this.key);return this.matchesComparison(t)}}class Ef extends df{constructor(e,t){super(e,"in",t),this.keys=Sf("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class If extends df{constructor(e,t){super(e,"not-in",t),this.keys=Sf("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Sf(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>cu.fromName(e.referenceValue)))}class kf extends df{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Hd(t)&&Ld(t.arrayValue,this.value)}}class Cf extends df{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Ld(this.value.arrayValue,t)}}class xf extends df{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ld(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!Ld(this.value.arrayValue,t)}}class Nf extends df{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Hd(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Ld(this.value.arrayValue,e)))}}class Af{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.Ie=null}}function Pf(e){return new Af(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Rf(e){const t=Dc(e);if(null===t.Ie){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>vf(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Vu(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>jd(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>jd(e))).join(",")),t.Ie=e}return t.Ie}function Df(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!uf(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!_f(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!lf(e.startAt,t.startAt)&&lf(e.endAt,t.endAt)}function Of(e){return cu.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Lf(e,t){return e.filters.filter((e=>e instanceof df&&e.field.isEqual(t)))}function Mf(e,t,n){let r=Rd,i=!0;for(const s of Lf(e,t)){let e=Rd,t=!0;switch(s.op){case"<":case"<=":e=Xd(s.value);break;case"==":case"in":case">=":e=s.value;break;case">":e=s.value,t=!1;break;case"!=":case"not-in":e=Rd}ef({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];ef({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function Ff(e,t,n){let r=Nd,i=!0;for(const s of Lf(e,t)){let e=Nd,t=!0;switch(s.op){case">=":case">":e=Zd(s.value),t=!1;break;case"==":case"in":case"<=":e=s.value;break;case"<":e=s.value,t=!1;break;case"!=":case"not-in":e=Nd}tf({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];tf({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class Uf{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function jf(e,t,n,r,i,s,o,a){return new Uf(e,t,n,r,i,s,o,a)}function Vf(e){return new Uf(e)}function zf(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function qf(e){return null!==e.collectionGroup}function Bf(e){const t=Dc(e);if(null===t.Ee){t.Ee=[];const e=new Set;for(const i of t.explicitOrderBy)t.Ee.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new ad(lu.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ee.push(new cf(r,n))})),e.has(lu.keyField().canonicalString())||t.Ee.push(new cf(lu.keyField(),n))}return t.Ee}function Hf(e){const t=Dc(e);return t.de||(t.de=Wf(t,Bf(e))),t.de}function Wf(e,t){if("F"===e.limitType)return Pf(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new cf(e.field,t)}));const n=e.endAt?new of(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new of(e.startAt.position,e.startAt.inclusive):null;return Pf(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Kf(e,t){const n=e.filters.concat([t]);return new Uf(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Gf(e,t,n){return new Uf(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Qf(e,t){return Df(Hf(e),Hf(t))&&e.limitType===t.limitType}function Yf(e){return"".concat(Rf(Hf(e)),"|lt:").concat(e.limitType)}function Jf(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>bf(e))).join(", "),"]")),Vu(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>jd(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>jd(e))).join(",")),"Target(".concat(t,")")}(Hf(e)),"; limitType=").concat(e.limitType,")")}function $f(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):cu.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Bf(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=af(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Bf(e),t))&&!(e.endAt&&!function(e,t,n){const r=af(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Bf(e),t))}(e,t)}function Xf(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Zf(e){return(t,n)=>{let r=!1;for(const i of Bf(e)){const e=ep(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function ep(e,t,n){const r=e.field.isKeyField()?cu.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Md(r,i):Ac(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Ac(19790,{direction:e.dir})}}class tp{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){nd(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return rd(this.inner)}size(){return this.innerSize}}const np=new id(cu.comparator);function rp(){return np}const ip=new id(cu.comparator);function sp(){let e=ip;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function op(e){let t=ip;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function ap(){return cp()}function lp(){return cp()}function cp(){return new tp((e=>e.toString()),((e,t)=>e.isEqual(t)))}const up=new id(cu.comparator),hp=new ad(cu.comparator);function dp(){let e=hp;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const fp=new ad(Qc);function pp(){return fp}function gp(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zu(t)?"-0":t}}function mp(e){return{integerValue:""+e}}function yp(e,t){return qu(t)?mp(t):gp(e,t)}class vp{constructor(){this._=void 0}}function _p(e,t,n){return e instanceof Tp?function(e,t){const n={fields:{[vd]:{stringValue:yd},[wd]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&bd(t)&&(t=Td(t)),t&&(n.fields[_d]=t),{mapValue:n}}(n,t):e instanceof Ep?Ip(e,t):e instanceof Sp?kp(e,t):function(e,t){const n=bp(e,t),r=xp(n)+xp(e.Re);return Bd(n)&&Bd(e.Re)?mp(r):gp(e.serializer,r)}(e,t)}function wp(e,t,n){return e instanceof Ep?Ip(e,t):e instanceof Sp?kp(e,t):n}function bp(e,t){return e instanceof Cp?function(e){return Bd(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Tp extends vp{}class Ep extends vp{constructor(e){super(),this.elements=e}}function Ip(e,t){const n=Np(t);for(const r of e.elements)n.some((e=>Od(e,r)))||n.push(r);return{arrayValue:{values:n}}}class Sp extends vp{constructor(e){super(),this.elements=e}}function kp(e,t){let n=Np(t);for(const r of e.elements)n=n.filter((e=>!Od(e,r)));return{arrayValue:{values:n}}}class Cp extends vp{constructor(e,t){super(),this.serializer=e,this.Re=t}}function xp(e){return gd(e.integerValue||e.doubleValue)}function Np(e){return Hd(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Ap{constructor(e,t){this.field=e,this.transform=t}}class Pp{constructor(e,t){this.version=e,this.transformResults=t}}class Rp{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Rp}static exists(e){return new Rp(void 0,e)}static updateTime(e){return new Rp(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Dp(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Op{}function Lp(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Wp(e.key,Rp.none()):new Vp(e.key,e.data,Rp.none());{const n=e.data,r=nf.empty();let i=new ad(lu.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new zp(e.key,r,new ud(i.toArray()),Rp.none())}}function Mp(e,t,n){e instanceof Vp?function(e,t,n){const r=e.value.clone(),i=Bp(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof zp?function(e,t,n){if(!Dp(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Bp(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(qp(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Fp(e,t,n,r){return e instanceof Vp?function(e,t,n,r){if(!Dp(e.precondition,t))return n;const i=e.value.clone(),s=Hp(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof zp?function(e,t,n,r){if(!Dp(e.precondition,t))return n;const i=Hp(e.fieldTransforms,r,t),s=t.data;return s.setAll(qp(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return Dp(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Up(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=bp(r.transform,e||null);null!=i&&(null===n&&(n=nf.empty()),n.set(r.field,i))}return n||null}function jp(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Xc(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Ep&&t instanceof Ep||e instanceof Sp&&t instanceof Sp?Xc(e.elements,t.elements,Od):e instanceof Cp&&t instanceof Cp?Od(e.Re,t.Re):e instanceof Tp&&t instanceof Tp}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Vp extends Op{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class zp extends Op{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function qp(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Bp(e,t,n){const r=new Map;Rc(e.length===n.length,32656,{Ve:n.length,me:e.length});for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,wp(o,a,n[i]))}return r}function Hp(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,_p(e,s,t))}return r}class Wp extends Op{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Kp extends Op{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Gp{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Mp(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Fp(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Fp(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=lp();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=Lp(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(ru.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),dp())}isEqual(e){return this.batchId===e.batchId&&Xc(this.mutations,e.mutations,((e,t)=>jp(e,t)))&&Xc(this.baseMutations,e.baseMutations,((e,t)=>jp(e,t)))}}class Qp{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Rc(e.mutations.length===n.length,58842,{fe:e.mutations.length,ge:n.length});let r=up;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Qp(e,t,n,r)}}class Yp{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Jp{constructor(e,t){this.count=e,this.unchangedNames=t}}var $p,Xp;function Zp(e){switch(e){case Oc.OK:return Ac(64938);case Oc.CANCELLED:case Oc.UNKNOWN:case Oc.DEADLINE_EXCEEDED:case Oc.RESOURCE_EXHAUSTED:case Oc.INTERNAL:case Oc.UNAVAILABLE:case Oc.UNAUTHENTICATED:return!1;case Oc.INVALID_ARGUMENT:case Oc.NOT_FOUND:case Oc.ALREADY_EXISTS:case Oc.PERMISSION_DENIED:case Oc.FAILED_PRECONDITION:case Oc.ABORTED:case Oc.OUT_OF_RANGE:case Oc.UNIMPLEMENTED:case Oc.DATA_LOSS:return!0;default:return Ac(15467,{code:e})}}function eg(e){if(void 0===e)return Cc("GRPC error has no .code"),Oc.UNKNOWN;switch(e){case $p.OK:return Oc.OK;case $p.CANCELLED:return Oc.CANCELLED;case $p.UNKNOWN:return Oc.UNKNOWN;case $p.DEADLINE_EXCEEDED:return Oc.DEADLINE_EXCEEDED;case $p.RESOURCE_EXHAUSTED:return Oc.RESOURCE_EXHAUSTED;case $p.INTERNAL:return Oc.INTERNAL;case $p.UNAVAILABLE:return Oc.UNAVAILABLE;case $p.UNAUTHENTICATED:return Oc.UNAUTHENTICATED;case $p.INVALID_ARGUMENT:return Oc.INVALID_ARGUMENT;case $p.NOT_FOUND:return Oc.NOT_FOUND;case $p.ALREADY_EXISTS:return Oc.ALREADY_EXISTS;case $p.PERMISSION_DENIED:return Oc.PERMISSION_DENIED;case $p.FAILED_PRECONDITION:return Oc.FAILED_PRECONDITION;case $p.ABORTED:return Oc.ABORTED;case $p.OUT_OF_RANGE:return Oc.OUT_OF_RANGE;case $p.UNIMPLEMENTED:return Oc.UNIMPLEMENTED;case $p.DATA_LOSS:return Oc.DATA_LOSS;default:return Ac(39323,{code:e})}}(Xp=$p||($p={}))[Xp.OK=0]="OK",Xp[Xp.CANCELLED=1]="CANCELLED",Xp[Xp.UNKNOWN=2]="UNKNOWN",Xp[Xp.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xp[Xp.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xp[Xp.NOT_FOUND=5]="NOT_FOUND",Xp[Xp.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xp[Xp.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xp[Xp.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xp[Xp.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xp[Xp.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xp[Xp.ABORTED=10]="ABORTED",Xp[Xp.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xp[Xp.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xp[Xp.INTERNAL=13]="INTERNAL",Xp[Xp.UNAVAILABLE=14]="UNAVAILABLE",Xp[Xp.DATA_LOSS=15]="DATA_LOSS";let tg=null;const ng=new oc([4294967295,4294967295],0);function rg(e){const t=Kc().encode(e),n=new ac;return n.update(t),new Uint8Array(n.digest())}function ig(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new oc([n,r],0),new oc([i,s],0)]}class sg{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new og("Invalid padding: ".concat(t));if(n<0)throw new og("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new og("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new og("Invalid padding when bitmap length is 0: ".concat(t));this.pe=8*e.length-t,this.ye=oc.fromNumber(this.pe)}we(e,t,n){let r=e.add(t.multiply(oc.fromNumber(n)));return 1===r.compare(ng)&&(r=new oc([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ye).toNumber()}Se(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.pe)return!1;const t=rg(e),[n,r]=ig(t);for(let i=0;i<this.hashCount;i++){const e=this.we(n,r,i);if(!this.Se(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new sg(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.pe)return;const t=rg(e),[n,r]=ig(t);for(let i=0;i<this.hashCount;i++){const e=this.we(n,r,i);this.be(e)}}be(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class og extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ag{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,lg.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new ag(ru.min(),r,new id(Qc),rp(),dp())}}class lg{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new lg(n,t,dp(),dp(),dp())}}class cg{constructor(e,t,n,r){this.De=e,this.removedTargetIds=t,this.key=n,this.ve=r}}class ug{constructor(e,t){this.targetId=e,this.Ce=t}}class hg{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:dd.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class dg{constructor(){this.Fe=0,this.Me=gg(),this.xe=dd.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return 0!==this.Fe}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=dp(),t=dp(),n=dp();return this.Me.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Ac(38017,{changeType:i})}})),new lg(this.xe,this.Oe,e,t,n)}Qe(){this.Ne=!1,this.Me=gg()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Rc(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class fg{constructor(e){this.ze=e,this.je=new Map,this.He=rp(),this.Je=pg(),this.Ye=pg(),this.Ze=new id(Qc)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,(t=>{const n=this.rt(t);switch(e.state){case 0:this.it(t)&&n.ke(e.resumeToken);break;case 1:n.We(),n.Be||n.Qe(),n.ke(e.resumeToken);break;case 2:n.We(),n.Be||this.removeTarget(t);break;case 3:this.it(t)&&(n.Ge(),n.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),n.ke(e.resumeToken));break;default:Ac(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach(((e,n)=>{this.it(n)&&t(n)}))}ot(e){const t=e.targetId,n=e.Ce.count,r=this._t(t);if(r){const i=r.target;if(Of(i))if(0===n){const e=new cu(i.path);this.tt(t,e,sf.newNoDocument(e,ru.min()))}else Rc(1===n,20013,{expectedCount:n});else{const r=this.ut(t);if(r!==n){const n=this.ct(e),i=n?this.lt(n,e,r):1;if(0!==i){this.st(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,e)}null==tg||tg.ht(function(e,t,n,r,i){var s,o,a,l,c,u;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(s=null==d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(a=null===(o=null==d?void 0:d.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==d?void 0:d.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.Ce,this.ze.Pt(),n,i))}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=md(n).toUint8Array()}catch(e){if(e instanceof hd)return xc("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new sg(s,r,i)}catch(e){return xc(e instanceof og?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.pe?null:o}lt(e,t,n){return t.Ce.count===n-this.Tt(e,t.targetId)?0:2}Tt(e,t){const n=this.ze.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.ze.Pt(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.tt(t,n,null),r++)})),r}It(e){const t=new Map;this.je.forEach(((n,r)=>{const i=this._t(r);if(i){if(n.current&&Of(i.target)){const t=new cu(i.target.path);this.Et(t).has(r)||this.dt(r,t)||this.tt(r,t,sf.newNoDocument(t,e))}n.Le&&(t.set(r,n.qe()),n.Qe())}}));let n=dp();this.Ye.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this._t(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.He.forEach(((t,n)=>n.setReadTime(e)));const r=new ag(e,t,this.Ze,this.He,n);return this.He=rp(),this.Je=pg(),this.Ye=pg(),this.Ze=new id(Qc),r}et(e,t){if(!this.it(e))return;const n=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,n),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,n){if(!this.it(e))return;const r=this.rt(e);this.dt(e,t)?r.$e(t,1):r.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),n&&(this.He=this.He.insert(t,n))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new dg,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new ad(Qc),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new ad(Qc),this.Je=this.Je.insert(e,t)),t}it(e){const t=null!==this._t(e);return t||kc("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new dg),this.ze.getRemoteKeysForTarget(e).forEach((t=>{this.tt(e,t,null)}))}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function pg(){return new id(cu.comparator)}function gg(){return new id(cu.comparator)}const mg={asc:"ASCENDING",desc:"DESCENDING"},yg={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vg={and:"AND",or:"OR"};class _g{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function wg(e,t){return e.useProto3Json||Vu(t)?t:{value:t}}function bg(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Tg(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Eg(e,t){return bg(e,t.toTimestamp())}function Ig(e){return Rc(!!e,49232),ru.fromTimestamp(function(e){const t=pd(e);return new nu(t.seconds,t.nanos)}(e))}function Sg(e,t){return kg(e,t).canonicalString()}function kg(e,t){const n=function(e){return new ou(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Cg(e){const t=ou.fromString(e);return Rc(Yg(t),10190,{key:t.toString()}),t}function xg(e,t){return Sg(e.databaseId,t.path)}function Ng(e,t){const n=Cg(t);if(n.get(1)!==e.databaseId.projectId)throw new Lc(Oc.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Lc(Oc.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new cu(Dg(n))}function Ag(e,t){return Sg(e.databaseId,t)}function Pg(e){const t=Cg(e);return 4===t.length?ou.emptyPath():Dg(t)}function Rg(e){return new ou(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Dg(e){return Rc(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function Og(e,t,n){return{name:xg(e,t),fields:n.value.mapValue.fields}}function Lg(e,t,n){const r=Ng(e,t.name),i=Ig(t.updateTime),s=t.createTime?Ig(t.createTime):ru.min(),o=new nf({mapValue:{fields:t.fields}}),a=sf.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Mg(e,t){let n;if(t instanceof Vp)n={update:Og(e,t.key,t.value)};else if(t instanceof Wp)n={delete:xg(e,t.key)};else if(t instanceof zp)n={update:Og(e,t.key,t.data),updateMask:Qg(t.fieldMask)};else{if(!(t instanceof Kp))return Ac(16599,{ft:t.type});n={verify:xg(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof Tp)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ep)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Sp)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Cp)return{fieldPath:t.field.canonicalString(),increment:n.Re};throw Ac(20930,{transform:t.transform})}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Eg(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Ac(27497)}(e,t.precondition)),n}function Fg(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?Rp.updateTime(Ig(e.updateTime)):void 0!==e.exists?Rp.exists(e.exists):Rp.none()}(t.currentDocument):Rp.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)Rc("REQUEST_TIME"===t.setToServerValue,16630,{proto:t}),n=new Tp;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new Ep(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new Sp(e)}else"increment"in t?n=new Cp(e,t.increment):Ac(16584,{proto:t});const r=lu.fromServerFormat(t.fieldPath);return new Ap(r,n)}(e,t))):[];if(t.update){t.update.name;const i=Ng(e,t.update.name),s=new nf({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new ud(t.map((e=>lu.fromServerFormat(e))))}(t.updateMask);return new zp(i,s,e,n,r)}return new Vp(i,s,n,r)}if(t.delete){const r=Ng(e,t.delete);return new Wp(r,n)}if(t.verify){const r=Ng(e,t.verify);return new Kp(r,n)}return Ac(1463,{proto:t})}function Ug(e,t){return{documents:[Ag(e,t.path)]}}function jg(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Ag(e,i);const s=function(e){if(0!==e.length)return Gg(ff.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:Wg(e.field),direction:qg(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=wg(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{gt:n,parent:i}}function Vg(e){let t=Pg(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Rc(1===r,65062);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=zg(e);return t instanceof ff&&mf(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new cf(Kg(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Vu(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new of(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new of(n,t)}(n.endAt)),jf(t,i,o,s,a,"F",l,c)}function zg(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Kg(e.unaryFilter.field);return df.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Kg(e.unaryFilter.field);return df.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Kg(e.unaryFilter.field);return df.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Kg(e.unaryFilter.field);return df.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ac(61313);default:return Ac(60726)}}(e):void 0!==e.fieldFilter?function(e){return df.create(Kg(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ac(58110);default:return Ac(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return ff.create(e.compositeFilter.filters.map((e=>zg(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Ac(1026)}}(e.compositeFilter.op))}(e):Ac(30097,{filter:e})}function qg(e){return mg[e]}function Bg(e){return yg[e]}function Hg(e){return vg[e]}function Wg(e){return{fieldPath:e.canonicalString()}}function Kg(e){return lu.fromServerFormat(e.fieldPath)}function Gg(e){return e instanceof df?function(e){if("=="===e.op){if(Kd(e.value))return{unaryFilter:{field:Wg(e.field),op:"IS_NAN"}};if(Wd(e.value))return{unaryFilter:{field:Wg(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Kd(e.value))return{unaryFilter:{field:Wg(e.field),op:"IS_NOT_NAN"}};if(Wd(e.value))return{unaryFilter:{field:Wg(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wg(e.field),op:Bg(e.op),value:e.value}}}(e):e instanceof ff?function(e){const t=e.getFilters().map((e=>Gg(e)));return 1===t.length?t[0]:{compositeFilter:{op:Hg(e.op),filters:t}}}(e):Ac(54877,{filter:e})}function Qg(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Yg(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Jg{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ru.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ru.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:dd.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new Jg(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Jg(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Jg(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Jg(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class $g{constructor(e){this.wt=e}}function Xg(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Zg(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:xg(e,t.key),fields:t.data.value.mapValue.fields,updateTime:bg(e,t.version.toTimestamp()),createTime:bg(e,t.createTime.toTimestamp())}}(e.wt,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:em(t.version)};else{if(!t.isUnknownDocument())return Ac(57904,{document:t});r.unknownDocument={path:n.path.toArray(),version:em(t.version)}}return r}function Zg(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function em(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function tm(e){const t=new nu(e.seconds,e.nanoseconds);return ru.fromTimestamp(t)}function nm(e,t){const n=(t.baseMutations||[]).map((t=>Fg(e.wt,t)));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];if(s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform){const n=t.mutations[s+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}const r=t.mutations.map((t=>Fg(e.wt,t))),i=nu.fromMillis(t.localWriteTimeMs);return new Gp(t.batchId,i,n,r)}function rm(e){const t=tm(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?tm(e.lastLimboFreeSnapshotVersion):ru.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){const t=e.documents.length;return Rc(1===t,1966,{count:t}),Hf(Vf(Pg(e.documents[0])))}(e.query):function(e){return Hf(Vg(e))}(e.query),new Jg(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,dd.fromBase64String(e.resumeToken))}function im(e,t){const n=em(t.snapshotVersion),r=em(t.lastLimboFreeSnapshotVersion);let i;i=Of(t.target)?Ug(e.wt,t.target):jg(e.wt,t.target).gt;const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Rf(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function sm(e){const t=Vg({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Gf(t,t.limit,"L"):t}function om(e,t){return new Yp(t.largestBatchId,Fg(e.wt,t.overlayMutation))}function am(e,t){const n=t.path.lastSegment();return[e,Hu(t.path.popLast()),n]}function lm(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:em(r.readTime),documentKey:Hu(r.documentKey.path),largestBatchId:r.largestBatchId}}class cm{getBundleMetadata(e,t){return um(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:tm(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return um(e).put(function(e){return{bundleId:e.id,createTime:em(Ig(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return hm(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:sm(e.bundledQuery),readTime:tm(e.readTime)}}(e)}))}saveNamedQuery(e,t){return hm(e).put(function(e){return{name:e.name,readTime:em(Ig(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function um(e){return ed(e,kh)}function hm(e){return ed(e,Ch)}class dm{constructor(e,t){this.serializer=e,this.userId=t}static St(e,t){const n=t.uid||"";return new dm(e,n)}getOverlay(e,t){return fm(e).get(am(this.userId,t)).next((e=>e?om(this.serializer,e):null))}getOverlays(e,t){const n=ap();return Eu.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const s=new Yp(t,i);r.push(this.bt(e,s))})),Eu.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(Hu(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(fm(e).X(Vh,r))})),Eu.waitFor(i)}getOverlaysForCollection(e,t,n){const r=ap(),i=Hu(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return fm(e).J(Vh,s).next((e=>{for(const t of e){const e=om(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=ap();let s;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return fm(e).te({index:qh,range:o},((e,t,n)=>{const o=om(this.serializer,t);i.size()<r||o.largestBatchId===s?(i.set(o.getKey(),o),s=o.largestBatchId):n.done()})).next((()=>i))}bt(e,t){return fm(e).put(function(e,t,n){const[r,i,s]=am(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Mg(e.wt,n.mutation)}}(this.serializer,this.userId,t))}}function fm(e){return ed(e,Uh)}class pm{Dt(e){return ed(e,Hh)}getSessionToken(e){return this.Dt(e).get("sessionToken").next((e=>{const t=null==e?void 0:e.value;return t?dd.fromUint8Array(t):dd.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.Dt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class gm{constructor(){}vt(e,t){this.Ct(e,t),t.Ft()}Ct(e,t){if("nullValue"in e)this.Mt(t,5);else if("booleanValue"in e)this.Mt(t,10),t.xt(e.booleanValue?1:0);else if("integerValue"in e)this.Mt(t,15),t.xt(gd(e.integerValue));else if("doubleValue"in e){const n=gd(e.doubleValue);isNaN(n)?this.Mt(t,13):(this.Mt(t,15),zu(n)?t.xt(0):t.xt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Mt(t,20),"string"==typeof n&&(n=pd(n)),t.Ot("".concat(n.seconds||"")),t.xt(n.nanos||0)}else if("stringValue"in e)this.Nt(e.stringValue,t),this.Bt(t);else if("bytesValue"in e)this.Mt(t,30),t.Lt(md(e.bytesValue)),this.Bt(t);else if("referenceValue"in e)this.kt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Mt(t,45),t.xt(n.latitude||0),t.xt(n.longitude||0)}else"mapValue"in e?Jd(e)?this.Mt(t,Number.MAX_SAFE_INTEGER):Qd(e)?this.qt(e.mapValue,t):(this.Qt(e.mapValue,t),this.Bt(t)):"arrayValue"in e?(this.$t(e.arrayValue,t),this.Bt(t)):Ac(19022,{Ut:e})}Nt(e,t){this.Mt(t,25),this.Kt(e,t)}Kt(e,t){t.Ot(e)}Qt(e,t){const n=e.fields||{};this.Mt(t,55);for(const r of Object.keys(n))this.Nt(r,t),this.Ct(n[r],t)}qt(e,t){var n,r;const i=e.fields||{};this.Mt(t,53);const s=Pd,o=(null===(r=null===(n=i[s].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.Mt(t,15),t.xt(gd(o)),this.Nt(s,t),this.Ct(i[s],t)}$t(e,t){const n=e.values||[];this.Mt(t,50);for(const r of n)this.Ct(r,t)}kt(e,t){this.Mt(t,37),cu.fromName(e).path.forEach((e=>{this.Mt(t,60),this.Kt(e,t)}))}Mt(e,t){e.xt(t)}Bt(e){e.xt(2)}}gm.Wt=new gm;const mm=255;function ym(e){if(0===e)return 8;let t=0;return e>>4||(t+=4,e<<=4),e>>6||(t+=2,e<<=2),e>>7||(t+=1),t}function vm(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=ym(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}class _m{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Gt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.zt(n.value),n=t.next();this.jt()}Ht(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Jt(n.value),n=t.next();this.Yt()}Zt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.zt(e);else if(e<2048)this.zt(960|e>>>6),this.zt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.zt(480|e>>>12),this.zt(128|63&e>>>6),this.zt(128|63&e);else{const e=t.codePointAt(0);this.zt(240|e>>>18),this.zt(128|63&e>>>12),this.zt(128|63&e>>>6),this.zt(128|63&e)}}this.jt()}Xt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Jt(e);else if(e<2048)this.Jt(960|e>>>6),this.Jt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Jt(480|e>>>12),this.Jt(128|63&e>>>6),this.Jt(128|63&e);else{const e=t.codePointAt(0);this.Jt(240|e>>>18),this.Jt(128|63&e>>>12),this.Jt(128|63&e>>>6),this.Jt(128|63&e)}}this.Yt()}en(e){const t=this.tn(e),n=vm(t);this.nn(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}rn(e){const t=this.tn(e),n=vm(t);this.nn(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}sn(){this._n(mm),this._n(255)}an(){this.un(mm),this.un(255)}reset(){this.position=0}seed(e){this.nn(e.length),this.buffer.set(e,this.position),this.position+=e.length}cn(){return this.buffer.slice(0,this.position)}tn(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=!!(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}zt(e){const t=255&e;0===t?(this._n(0),this._n(255)):t===mm?(this._n(mm),this._n(0)):this._n(t)}Jt(e){const t=255&e;0===t?(this.un(0),this.un(255)):t===mm?(this.un(mm),this.un(0)):this.un(e)}jt(){this._n(0),this._n(1)}Yt(){this.un(0),this.un(1)}_n(e){this.nn(1),this.buffer[this.position++]=e}un(e){this.nn(1),this.buffer[this.position++]=~e}nn(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class wm{constructor(e){this.ln=e}Lt(e){this.ln.Gt(e)}Ot(e){this.ln.Zt(e)}xt(e){this.ln.en(e)}Ft(){this.ln.sn()}}class bm{constructor(e){this.ln=e}Lt(e){this.ln.Ht(e)}Ot(e){this.ln.Xt(e)}xt(e){this.ln.rn(e)}Ft(){this.ln.an()}}class Tm{constructor(){this.ln=new _m,this.hn=new wm(this.ln),this.Pn=new bm(this.ln)}seed(e){this.ln.seed(e)}Tn(e){return 0===e?this.hn:this.Pn}cn(){return this.ln.cn()}reset(){this.ln.reset()}}class Em{constructor(e,t,n,r){this.In=e,this.En=t,this.dn=n,this.An=r}Rn(){const e=this.An.length,t=0===e||255===this.An[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.An,0),t!==e?n.set([0],this.An.length):++n[n.length-1],new Em(this.In,this.En,this.dn,n)}Vn(e,t,n){return{indexId:this.In,uid:e,arrayValue:km(this.dn),directionalValue:km(this.An),orderedDocumentKey:km(t),documentKey:n.path.toArray()}}mn(e,t,n){const r=this.Vn(e,t,n);return[r.indexId,r.uid,r.arrayValue,r.directionalValue,r.orderedDocumentKey,r.documentKey]}}function Im(e,t){let n=e.In-t.In;return 0!==n?n:(n=Sm(e.dn,t.dn),0!==n?n:(n=Sm(e.An,t.An),0!==n?n:cu.comparator(e.En,t.En)))}function Sm(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}function km(e){return rn()?function(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t}(e):e}function Cm(e){return"string"!=typeof e?e:function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(e)}class xm{constructor(e){this.fn=new ad(((e,t)=>lu.comparator(e.field,t.field))),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.gn=e.orderBy,this.pn=[];for(const t of e.filters){const e=t;e.isInequality()?this.fn=this.fn.add(e):this.pn.push(e)}}get yn(){return this.fn.size>1}wn(e){if(Rc(e.collectionGroup===this.collectionId,49279),this.yn)return!1;const t=du(e);if(void 0!==t&&!this.Sn(t))return!1;const n=fu(e);let r=new Set,i=0,s=0;for(;i<n.length&&this.Sn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.fn.size>0){const e=this.fn.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[i];if(!this.bn(e,t)||!this.Dn(this.gn[s++],t))return!1}++i}for(;i<n.length;++i){const e=n[i];if(s>=this.gn.length||!this.Dn(this.gn[s++],e))return!1}return!0}vn(){if(this.yn)return null;let e=new ad(lu.comparator);const t=[];for(const n of this.pn)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new pu(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new pu(n.field,0))}for(const n of this.gn)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new pu(n.field,"asc"===n.dir?0:1)));return new hu(hu.UNKNOWN_ID,this.collectionId,t,gu.empty())}Sn(e){for(const t of this.pn)if(this.bn(t,e))return!0;return!1}bn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}Dn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Nm(e){var t,n;if(Rc(e instanceof df||e instanceof ff,20012),e instanceof df){if(e instanceof Cf){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>df.create(e.field,"==",t))))||[];return ff.create(r,"or")}return e}const r=e.filters.map((e=>Nm(e)));return ff.create(r,e.op)}function Am(e){if(0===e.getFilters().length)return[];const t=Om(Nm(e));return Rc(Dm(t),7391),Pm(t)||Rm(t)?[t]:t.getFilters()}function Pm(e){return e instanceof df}function Rm(e){return e instanceof ff&&mf(e)}function Dm(e){return Pm(e)||Rm(e)||function(e){if(e instanceof ff&&gf(e)){for(const t of e.getFilters())if(!Pm(t)&&!Rm(t))return!1;return!0}return!1}(e)}function Om(e){if(Rc(e instanceof df||e instanceof ff,34018),e instanceof df)return e;if(1===e.filters.length)return Om(e.filters[0]);const t=e.filters.map((e=>Om(e)));let n=ff.create(t,e.op);return n=Fm(n),Dm(n)?n:(Rc(n instanceof ff,64498),Rc(pf(n),40251),Rc(n.filters.length>1,57927),n.filters.reduce(((e,t)=>Lm(e,t))))}function Lm(e,t){let n;return Rc(e instanceof df||e instanceof ff,38388),Rc(t instanceof df||t instanceof ff,25473),n=e instanceof df?t instanceof df?function(e,t){return ff.create([e,t],"and")}(e,t):Mm(e,t):t instanceof df?Mm(t,e):function(e,t){if(Rc(e.filters.length>0&&t.filters.length>0,48005),pf(e)&&pf(t))return wf(e,t.getFilters());const n=gf(e)?e:t,r=gf(e)?t:e,i=n.filters.map((e=>Lm(e,r)));return ff.create(i,"or")}(e,t),Fm(n)}function Mm(e,t){if(pf(t))return wf(t,e.getFilters());{const n=t.filters.map((t=>Lm(e,t)));return ff.create(n,"or")}}function Fm(e){if(Rc(e instanceof df||e instanceof ff,11850),e instanceof df)return e;const t=e.getFilters();if(1===t.length)return Fm(t[0]);if(yf(e))return e;const n=t.map((e=>Fm(e))),r=[];return n.forEach((t=>{t instanceof df?r.push(t):t instanceof ff&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:ff.create(r,e.op)}class Um{constructor(){this.Cn=new jm}addToCollectionParentIndex(e,t){return this.Cn.add(t),Eu.resolve()}getCollectionParents(e,t){return Eu.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Eu.resolve()}deleteFieldIndex(e,t){return Eu.resolve()}deleteAllFieldIndexes(e){return Eu.resolve()}createTargetIndexes(e,t){return Eu.resolve()}getDocumentsMatchingTarget(e,t){return Eu.resolve(null)}getIndexType(e,t){return Eu.resolve(0)}getFieldIndexes(e,t){return Eu.resolve([])}getNextCollectionGroupToUpdate(e){return Eu.resolve(null)}getMinOffset(e,t){return Eu.resolve(vu.min())}getMinOffsetFromCollectionGroup(e,t){return Eu.resolve(vu.min())}updateCollectionGroup(e,t,n){return Eu.resolve()}updateIndexEntries(e,t){return Eu.resolve()}}class jm{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new ad(ou.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new ad(ou.comparator)).toArray()}}const Vm="IndexedDbIndexManager",zm=new Uint8Array(0);class qm{constructor(e,t){this.databaseId=t,this.Fn=new jm,this.Mn=new tp((e=>Rf(e)),((e,t)=>Df(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Fn.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.Fn.add(t)}));const i={collectionId:n,parent:Hu(r)};return Bm(e).put(i)}return Eu.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[Zc(t),""],!1,!0);return Bm(e).J(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(Gu(r.parent))}return n}))}addFieldIndex(e,t){const n=Wm(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=Km(e);return i.next((e=>{n.put(lm(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=Wm(e),r=Km(e),i=Hm(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Wm(e),n=Hm(e),r=Km(e);return t.X().next((()=>n.X())).next((()=>r.X()))}createTargetIndexes(e,t){return Eu.forEach(this.xn(t),(t=>this.getIndexType(e,t).next((n=>{if(0===n||1===n){const n=new xm(t).vn();if(null!=n)return this.addFieldIndex(e,n)}}))))}getDocumentsMatchingTarget(e,t){const n=Hm(e);let r=!0;const i=new Map;return Eu.forEach(this.xn(t),(t=>this.On(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=dp();const r=[];return Eu.forEach(i,((i,s)=>{kc(Vm,"Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((e=>"".concat(e.fieldPath,":").concat(e.kind))).join(","))}(i)," to execute ").concat(Rf(t)));const o=function(e,t){const n=du(t);if(void 0===n)return null;for(const r of Lf(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(s,i),a=function(e,t){const n=new Map;for(const r of fu(t))for(const t of Lf(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,i),l=function(e,t){const n=[];let r=!0;for(const i of fu(t)){const t=0===i.kind?Mf(e,i.fieldPath,e.startAt):Ff(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new of(n,r)}(s,i),c=function(e,t){const n=[];let r=!0;for(const i of fu(t)){const t=0===i.kind?Ff(e,i.fieldPath,e.endAt):Mf(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new of(n,r)}(s,i),u=this.Nn(i,s,l),h=this.Nn(i,s,c),d=this.Bn(i,s,a),f=this.Ln(i.indexId,o,u,l.inclusive,h,c.inclusive,d);return Eu.forEach(f,(i=>n.Z(i,t.limit).next((t=>{t.forEach((t=>{const n=cu.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return Eu.resolve(null)}))}xn(e){let t=this.Mn.get(e);return t||(t=0===e.filters.length?[e]:Am(ff.create(e.filters,"and")).map((t=>Pf(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.Mn.set(e,t),t)}Ln(e,t,n,r,i,s,o){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),l=a/(null!=t?t.length:1),c=[];for(let u=0;u<a;++u){const a=t?this.kn(t[u/l]):zm,h=this.qn(e,a,n[u%l],r),d=this.Qn(e,a,i[u%l],s),f=o.map((t=>this.qn(e,a,t,!0)));c.push(...this.createRange(h,d,f))}return c}qn(e,t,n,r){const i=new Em(e,cu.empty(),t,n);return r?i:i.Rn()}Qn(e,t,n,r){const i=new Em(e,cu.empty(),t,n);return r?i.Rn():i}On(e,t){const n=new xm(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.wn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.xn(t);return Eu.forEach(r,(t=>this.On(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new ad(lu.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}$n(e,t){const n=new Tm;for(const r of fu(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.Tn(r.kind);gm.Wt.vt(e,i)}return n.cn()}kn(e){const t=new Tm;return gm.Wt.vt(e,t.Tn(0)),t.cn()}Un(e,t){const n=new Tm;return gm.Wt.vt(qd(this.databaseId,t),n.Tn(function(e){const t=fu(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.cn()}Bn(e,t,n){if(null===n)return[];let r=[];r.push(new Tm);let i=0;for(const s of fu(e)){const e=n[i++];for(const n of r)if(this.Kn(t,s.fieldPath)&&Hd(e))r=this.Wn(r,s,e);else{const t=n.Tn(s.kind);gm.Wt.vt(e,t)}}return this.Gn(r)}Nn(e,t,n){return this.Bn(e,t,n.position)}Gn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].cn();return t}Wn(e,t,n){const r=[...e],i=[];for(const s of n.arrayValue.values||[])for(const e of r){const n=new Tm;n.seed(e.cn()),gm.Wt.vt(s,n.Tn(t.kind)),i.push(n)}return i}Kn(e,t){return!!e.filters.find((e=>e instanceof df&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=Wm(e),r=Km(e);return(t?n.J(Nh,IDBKeyRange.bound(t,t)):n.J()).next((e=>{const t=[];return Eu.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new gu(t.sequenceNumber,new vu(tm(t.readTime),new cu(Gu(t.documentKey)),t.largestBatchId)):gu.empty(),r=e.fields.map((e=>{let[t,n]=e;return new pu(lu.fromServerFormat(t),n)}));return new hu(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Qc(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=Wm(e),i=Km(e);return this.zn(e).next((e=>r.J(Nh,IDBKeyRange.bound(t,t)).next((t=>Eu.forEach(t,(t=>i.put(lm(t.indexId,this.uid,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return Eu.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?Eu.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),Eu.forEach(i,(n=>this.jn(e,t,n).next((t=>{const i=this.Hn(r,n);return t.isEqual(i)?Eu.resolve():this.Jn(e,r,n,t,i)})))))))}))}Yn(e,t,n,r){return Hm(e).put(r.Vn(this.uid,this.Un(n,t.key),t.key))}Zn(e,t,n,r){return Hm(e).delete(r.mn(this.uid,this.Un(n,t.key),t.key))}jn(e,t,n){const r=Hm(e);let i=new ad(Im);return r.te({index:Mh,range:IDBKeyRange.only([n.indexId,this.uid,km(this.Un(n,t))])},((e,r)=>{i=i.add(new Em(n.indexId,t,Cm(r.arrayValue),Cm(r.directionalValue)))})).next((()=>i))}Hn(e,t){let n=new ad(Im);const r=this.$n(t,e);if(null==r)return n;const i=du(t);if(null!=i){const s=e.data.field(i.fieldPath);if(Hd(s))for(const i of s.arrayValue.values||[])n=n.add(new Em(t.indexId,e.key,this.kn(i),r))}else n=n.add(new Em(t.indexId,e.key,zm,r));return n}Jn(e,t,n,r,i){kc(Vm,"Updating index entries for document '%s'",t.key);const s=[];return function(e,t,n,r,i){const s=e.getIterator(),o=t.getIterator();let a=cd(s),l=cd(o);for(;a||l;){let e=!1,t=!1;if(a&&l){const r=n(a,l);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(l),l=cd(o)):t?(i(a),a=cd(s)):(a=cd(s),l=cd(o))}}(r,i,Im,(r=>{s.push(this.Yn(e,t,n,r))}),(r=>{s.push(this.Zn(e,t,n,r))})),Eu.waitFor(s)}zn(e){let t=1;return Km(e).te({index:Rh,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>Im(e,t))).filter(((e,t,n)=>!t||0!==Im(e,n[t-1])));const r=[];r.push(e);for(const s of n){const n=Im(s,e),i=Im(s,t);if(0===n)r[0]=e.Rn();else if(n>0&&i<0)r.push(s),r.push(s.Rn());else if(i>0)break}r.push(t);const i=[];for(let s=0;s<r.length;s+=2){if(this.Xn(r[s],r[s+1]))return[];const e=r[s].mn(this.uid,zm,cu.empty()),t=r[s+1].mn(this.uid,zm,cu.empty());i.push(IDBKeyRange.bound(e,t))}return i}Xn(e,t){return Im(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Gm)}getMinOffset(e,t){return Eu.mapArray(this.xn(t),(t=>this.On(e,t).next((e=>e||Ac(44426))))).next(Gm)}}function Bm(e){return ed(e,Eh)}function Hm(e){return ed(e,Oh)}function Wm(e){return ed(e,xh)}function Km(e){return ed(e,Ah)}function Gm(e){Rc(0!==e.length,28825);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;_u(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new vu(t.readTime,t.documentKey,n)}const Qm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ym=41943040;class Jm{static withCacheSize(e){return new Jm(e,Jm.DEFAULT_COLLECTION_PERCENTILE,Jm.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}function $m(e,t,n){const r=e.store(Xu),i=e.store(sh),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.te({range:o},((e,t,n)=>(a++,n.delete())));s.push(l.next((()=>{Rc(1===a,47070,{batchId:n.batchId})})));const c=[];for(const u of n.mutations){const e=rh(t,u.key.path,n.batchId);s.push(i.delete(e)),c.push(u.key)}return Eu.waitFor(s).next((()=>c))}function Xm(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Ac(14731);t=e.noDocument}return JSON.stringify(t).length}Jm.DEFAULT_COLLECTION_PERCENTILE=10,Jm.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Jm.DEFAULT=new Jm(Ym,Jm.DEFAULT_COLLECTION_PERCENTILE,Jm.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Jm.DISABLED=new Jm(-1,0,0);class Zm{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.er={}}static St(e,t,n,r){Rc(""!==e.uid,64387);const i=e.isAuthenticated()?e.uid:"";return new Zm(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ty(e).te({index:eh,range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=ny(e),s=ty(e);return s.add({}).next((o=>{Rc("number"==typeof o,49019);const a=new Gp(o,t,n,r),l=function(e,t,n){const r=n.baseMutations.map((t=>Mg(e.wt,t))),i=n.mutations.map((t=>Mg(e.wt,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),c=[];let u=new ad(((e,t)=>Qc(e.canonicalString(),t.canonicalString())));for(const e of r){const t=rh(this.userId,e.key.path,o);u=u.add(e.key.path.popLast()),c.push(s.put(l)),c.push(i.put(t,ih))}return u.forEach((t=>{c.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.er[o]=a.keys()})),Eu.waitFor(c).next((()=>a))}))}lookupMutationBatch(e,t){return ty(e).get(t).next((e=>e?(Rc(e.userId===this.userId,48,"Unexpected user for mutation batch",{userId:e.userId,batchId:t}),nm(this.serializer,e)):null))}tr(e,t){return this.er[t]?Eu.resolve(this.er[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.er[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return ty(e).te({index:eh,range:r},((e,t,r)=>{t.userId===this.userId&&(Rc(t.batchId>=n,47524,{nr:n}),i=nm(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=ju;return ty(e).te({index:eh,range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,ju],[this.userId,Number.POSITIVE_INFINITY]);return ty(e).J(eh,t).next((e=>e.map((e=>nm(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=nh(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return ny(e).te({range:r},((n,r,s)=>{const[o,a,l]=n,c=Gu(a);if(o===this.userId&&t.path.isEqual(c))return ty(e).get(l).next((e=>{if(!e)throw Ac(61480,{rr:n,batchId:l});Rc(e.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:e.userId,batchId:l}),i.push(nm(this.serializer,e))}));s.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new ad(Qc);const r=[];return t.forEach((t=>{const i=nh(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=ny(e).te({range:s},((e,r,i)=>{const[s,o,a]=e,l=Gu(o);s===this.userId&&t.path.isEqual(l)?n=n.add(a):i.done()}));r.push(o)})),Eu.waitFor(r).next((()=>this.ir(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=nh(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new ad(Qc);return ny(e).te({range:s},((e,t,i)=>{const[s,a,l]=e,c=Gu(a);s===this.userId&&n.isPrefixOf(c)?c.length===r&&(o=o.add(l)):i.done()})).next((()=>this.ir(e,o)))}ir(e,t){const n=[],r=[];return t.forEach((t=>{r.push(ty(e).get(t).next((e=>{if(null===e)throw Ac(35274,{batchId:t});Rc(e.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:e.userId,batchId:t}),n.push(nm(this.serializer,e))})))})),Eu.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return $m(e.he,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.sr(t.batchId)})),Eu.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}sr(e){delete this.er[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return Eu.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return ny(e).te({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=Gu(e[1]);r.push(t)}else n.done()})).next((()=>{Rc(0===r.length,56720,{_r:r.map((e=>e.canonicalString()))})}))}))}containsKey(e,t){return ey(e,this.userId,t)}ar(e){return ry(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:ju,lastStreamToken:""}))}}function ey(e,t,n){const r=nh(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return ny(e).te({range:s,ee:!0},((e,n,r)=>{const[s,a,l]=e;s===t&&a===i&&(o=!0),r.done()})).next((()=>o))}function ty(e){return ed(e,Xu)}function ny(e){return ed(e,sh)}function ry(e){return ed(e,$u)}class iy{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new iy(0)}static lr(){return new iy(-1)}}class sy{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.hr(e).next((t=>{const n=new iy(t.highestTargetId);return t.highestTargetId=n.next(),this.Pr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.hr(e).next((e=>ru.fromTimestamp(new nu(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.hr(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.hr(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.Pr(e,r))))}addTargetData(e,t){return this.Tr(e,t).next((()=>this.hr(e).next((n=>(n.targetCount+=1,this.Ir(t,n),this.Pr(e,n))))))}updateTargetData(e,t){return this.Tr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>oy(e).delete(t.targetId))).next((()=>this.hr(e))).next((t=>(Rc(t.targetCount>0,8065),t.targetCount-=1,this.Pr(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return oy(e).te(((s,o)=>{const a=rm(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>Eu.waitFor(i))).next((()=>r))}forEachTarget(e,t){return oy(e).te(((e,n)=>{const r=rm(n);t(r)}))}hr(e){return ay(e).get(bh).next((e=>(Rc(null!==e,2888),e)))}Pr(e,t){return ay(e).put(bh,t)}Tr(e,t){return oy(e).put(im(this.serializer,t))}Ir(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.hr(e).next((e=>e.targetCount))}getTargetData(e,t){const n=Rf(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return oy(e).te({range:r,index:gh},((e,n,r)=>{const s=rm(n);Df(t,s.target)&&(i=s,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=ly(e);return t.forEach((t=>{const s=Hu(t.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(e,n,t))})),Eu.waitFor(r)}removeMatchingKeys(e,t,n){const r=ly(e);return Eu.forEach(t,(t=>{const i=Hu(t.path);return Eu.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=ly(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=ly(e);let i=dp();return r.te({range:n,ee:!0},((e,t,n)=>{const r=Gu(e[1]),s=new cu(r);i=i.add(s)})).next((()=>i))}containsKey(e,t){const n=Hu(t.path),r=IDBKeyRange.bound([n],[Zc(n)],!1,!0);let i=0;return ly(e).te({index:_h,ee:!0,range:r},((e,t,n)=>{let[r,s]=e;0!==r&&(i++,n.done())})).next((()=>i>0))}Rt(e,t){return oy(e).get(t).next((e=>e?rm(e):null))}}function oy(e){return ed(e,ph)}function ay(e){return ed(e,Th)}function ly(e){return ed(e,yh)}const cy="LruGarbageCollector",uy=1048576;function hy(e,t){let[n,r]=e,[i,s]=t;const o=Qc(n,i);return 0===o?Qc(r,s):o}class dy{constructor(e){this.Er=e,this.buffer=new ad(hy),this.dr=0}Ar(){return++this.dr}Rr(e){const t=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();hy(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class fy{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Vr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return null!==this.Vr}mr(e){kc(cy,"Garbage collection scheduled in ".concat(e,"ms")),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Au(e)?kc(cy,"Ignoring IndexedDB error during garbage collection: ",e):await Tu(e)}await this.mr(3e5)}))}}class py{constructor(e,t){this.gr=e,this.params=t}calculateTargetCount(e,t){return this.gr.pr(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return Eu.resolve(Uu.le);const n=new dy(t);return this.gr.forEachTarget(e,(e=>n.Rr(e.sequenceNumber))).next((()=>this.gr.yr(e,(e=>n.Rr(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.gr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.gr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(kc("LruGarbageCollector","Garbage collection skipped; disabled"),Eu.resolve(Qm)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(kc("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),Qm):this.wr(e,t)))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,t){let n,r,i,s,o,a,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(kc("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),Sc()<=jn.DEBUG&&kc("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-a)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),Eu.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function gy(e,t){return new py(e,t)}class my{constructor(e,t){this.db=e,this.garbageCollector=gy(this,t)}pr(e){const t=this.Sr(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Sr(e){let t=0;return this.yr(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}yr(e,t){return this.br(e,((e,n)=>t(n)))}addReference(e,t,n){return yy(e,n)}removeReference(e,t,n){return yy(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return yy(e,t)}Dr(e,t){return function(e,t){let n=!1;return ry(e).ne((r=>ey(e,r,t).next((e=>(e&&(n=!0),Eu.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.br(e,((s,o)=>{if(o<=t){const t=this.Dr(e,s).next((t=>{if(!t)return i++,n.getEntry(e,s).next((()=>(n.removeEntry(s,ru.min()),ly(e).delete(function(e){return[0,Hu(e.path)]}(s)))))}));r.push(t)}})).next((()=>Eu.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return yy(e,t)}br(e,t){const n=ly(e);let r,i=Uu.le;return n.te({index:_h},((e,n)=>{let[s,o]=e,{path:a,sequenceNumber:l}=n;0===s?(i!==Uu.le&&t(new cu(Gu(r)),i),i=l,r=a):i=Uu.le})).next((()=>{i!==Uu.le&&t(new cu(Gu(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function yy(e,t){return ly(e).put(function(e,t){return{targetId:0,path:Hu(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class vy{constructor(){this.changes=new tp((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,sf.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Eu.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class _y{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return Ey(e).put(n)}removeEntry(e,t,n){return Ey(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Zg(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.vr(e,n))))}getEntry(e,t){let n=sf.newInvalidDocument(t);return Ey(e).te({index:lh,range:IDBKeyRange.only(Iy(t))},((e,r)=>{n=this.Cr(t,r)})).next((()=>n))}Fr(e,t){let n={size:0,document:sf.newInvalidDocument(t)};return Ey(e).te({index:lh,range:IDBKeyRange.only(Iy(t))},((e,r)=>{n={document:this.Cr(t,r),size:Xm(r)}})).next((()=>n))}getEntries(e,t){let n=rp();return this.Mr(e,t,((e,t)=>{const r=this.Cr(e,t);n=n.insert(e,r)})).next((()=>n))}Or(e,t){let n=rp(),r=new id(cu.comparator);return this.Mr(e,t,((e,t)=>{const i=this.Cr(e,t);n=n.insert(e,i),r=r.insert(e,Xm(t))})).next((()=>({documents:n,Nr:r})))}Mr(e,t,n){if(t.isEmpty())return Eu.resolve();let r=new ad(ky);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(Iy(r.first()),Iy(r.last())),s=r.getIterator();let o=s.getNext();return Ey(e).te({index:lh,range:i},((e,t,r)=>{const i=cu.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&ky(o,i)<0;)n(o,null),o=s.getNext();o&&o.isEqual(i)&&(n(o,t),o=s.hasNext()?s.getNext():null),o?r.H(Iy(o)):r.done()})).next((()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r,i){const s=t.path,o=[s.popLast().toArray(),s.lastSegment(),Zg(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ey(e).J(IDBKeyRange.bound(o,a,!0)).next((e=>{null==i||i.incrementDocumentReadCount(e.length);let n=rp();for(const i of e){const e=this.Cr(cu.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&($f(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=rp();const s=Sy(t,n),o=Sy(t,vu.max());return Ey(e).te({index:uh,range:IDBKeyRange.bound(s,o,!0)},((e,t,n)=>{const s=this.Cr(cu.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(s.key,s),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new by(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return Ty(e).get(fh).next((e=>(Rc(!!e,20021),e)))}vr(e,t){return Ty(e).put(fh,t)}Cr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=Lg(e.wt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=cu.fromSegments(t.noDocument.path),r=tm(t.noDocument.readTime);n=sf.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Ac(56709);{const e=cu.fromSegments(t.unknownDocument.path),r=tm(t.unknownDocument.version);n=sf.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new nu(e[0],e[1]);return ru.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(ru.min()))return e}return sf.newInvalidDocument(e)}}function wy(e){return new _y(e)}class by extends vy{constructor(e,t){super(),this.Br=e,this.trackRemovals=t,this.Lr=new tp((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new ad(((e,t)=>Qc(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,s)=>{const o=this.Lr.get(i);if(t.push(this.Br.removeEntry(e,i,o.readTime)),s.isValidDocument()){const a=Xg(this.Br.serializer,s);r=r.add(i.path.popLast());const l=Xm(a);n+=l-o.size,t.push(this.Br.addEntry(e,i,a))}else if(n-=o.size,this.trackRemovals){const n=Xg(this.Br.serializer,s.convertToNoDocument(ru.min()));t.push(this.Br.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this.Br.indexManager.addToCollectionParentIndex(e,n))})),t.push(this.Br.updateMetadata(e,n)),Eu.waitFor(t)}getFromCache(e,t){return this.Br.Fr(e,t).next((e=>(this.Lr.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this.Br.Or(e,t).next((e=>{let{documents:t,Nr:n}=e;return n.forEach(((e,n)=>{this.Lr.set(e,{size:n,readTime:t.get(e).readTime})})),t}))}}function Ty(e){return ed(e,dh)}function Ey(e){return ed(e,oh)}function Iy(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Sy(e,t){const n=t.documentKey.path.toArray();return[e,Zg(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function ky(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=Qc(n[s],r[s]),i)return i;return i=Qc(n.length,r.length),i||(i=Qc(n[n.length-2],r[r.length-2]),i||Qc(n[n.length-1],r[r.length-1]))}class Cy{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class xy{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Fp(n.mutation,e,ud.empty(),nu.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,dp()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:dp();const r=ap();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=sp();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=ap();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,dp())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=rp();const s=cp(),o=cp();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof zp)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),Fp(o.mutation,t,o.mutation.getFieldMask(),nu.now())):s.set(t.key,ud.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new Cy(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=cp();let r=new id(((e,t)=>e-t)),i=dp();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||ud.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||dp()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,c=lp();l.forEach((e=>{if(!i.has(e)){const r=Lp(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,c))}return Eu.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return cu.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):qf(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Eu.resolve(ap());let o=uu,a=i;return s.next((t=>Eu.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?Eu.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,dp()))).next((e=>({batchId:o,changes:op(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new cu(t)).next((e=>{let t=sp();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=sp();return this.indexManager.getCollectionParents(e,i).next((o=>Eu.forEach(o,(o=>{const a=function(e,t){return new Uf(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,sf.newInvalidDocument(r)))}));let n=sp();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&Fp(s.mutation,r,ud.empty(),nu.now()),$f(t,r)&&(n=n.insert(e,r))})),n}))}}class Ny{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,t){return Eu.resolve(this.kr.get(t))}saveBundleMetadata(e,t){return this.kr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Ig(e.createTime)}}(t)),Eu.resolve()}getNamedQuery(e,t){return Eu.resolve(this.qr.get(t))}saveNamedQuery(e,t){return this.qr.set(t.name,function(e){return{name:e.name,query:sm(e.bundledQuery),readTime:Ig(e.readTime)}}(t)),Eu.resolve()}}class Ay{constructor(){this.overlays=new id(cu.comparator),this.Qr=new Map}getOverlay(e,t){return Eu.resolve(this.overlays.get(t))}getOverlays(e,t){const n=ap();return Eu.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.bt(e,t,r)})),Eu.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Qr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.Qr.delete(n)),Eu.resolve()}getOverlaysForCollection(e,t,n){const r=ap(),i=t.length+1,s=new cu(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Eu.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new id(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=ap(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=ap(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return Eu.resolve(o)}bt(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Qr.get(r.largestBatchId).delete(n.key);this.Qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Yp(t,n));let i=this.Qr.get(t);void 0===i&&(i=dp(),this.Qr.set(t,i)),this.Qr.set(t,i.add(n.key))}}class Py{constructor(){this.sessionToken=dd.EMPTY_BYTE_STRING}getSessionToken(e){return Eu.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Eu.resolve()}}class Ry{constructor(){this.$r=new ad(Dy.Ur),this.Kr=new ad(Dy.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,t){const n=new Dy(e,t);this.$r=this.$r.add(n),this.Kr=this.Kr.add(n)}Gr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.zr(new Dy(e,t))}jr(e,t){e.forEach((e=>this.removeReference(e,t)))}Hr(e){const t=new cu(new ou([])),n=new Dy(t,e),r=new Dy(t,e+1),i=[];return this.Kr.forEachInRange([n,r],(e=>{this.zr(e),i.push(e.key)})),i}Jr(){this.$r.forEach((e=>this.zr(e)))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const t=new cu(new ou([])),n=new Dy(t,e),r=new Dy(t,e+1);let i=dp();return this.Kr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new Dy(e,0),n=this.$r.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Dy{constructor(e,t){this.key=e,this.Zr=t}static Ur(e,t){return cu.comparator(e.key,t.key)||Qc(e.Zr,t.Zr)}static Wr(e,t){return Qc(e.Zr,t.Zr)||cu.comparator(e.key,t.key)}}class Oy{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nr=1,this.Xr=new ad(Dy.Ur)}checkEmpty(e){return Eu.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Gp(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.Xr=this.Xr.add(new Dy(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Eu.resolve(s)}lookupMutationBatch(e,t){return Eu.resolve(this.ei(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ti(n),i=r<0?0:r;return Eu.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Eu.resolve(0===this.mutationQueue.length?ju:this.nr-1)}getAllMutationBatches(e){return Eu.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Dy(t,0),r=new Dy(t,Number.POSITIVE_INFINITY),i=[];return this.Xr.forEachInRange([n,r],(e=>{const t=this.ei(e.Zr);i.push(t)})),Eu.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new ad(Qc);return t.forEach((e=>{const t=new Dy(e,0),r=new Dy(e,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([t,r],(e=>{n=n.add(e.Zr)}))})),Eu.resolve(this.ni(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;cu.isDocumentKey(i)||(i=i.child(""));const s=new Dy(new cu(i),0);let o=new ad(Qc);return this.Xr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Zr)),!0)}),s),Eu.resolve(this.ni(o))}ni(e){const t=[];return e.forEach((e=>{const n=this.ei(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Rc(0===this.ri(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Xr;return Eu.forEach(t.mutations,(r=>{const i=new Dy(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Xr=n}))}sr(e){}containsKey(e,t){const n=new Dy(t,0),r=this.Xr.firstAfterOrEqual(n);return Eu.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Eu.resolve()}ri(e,t){return this.ti(e)}ti(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ei(e){const t=this.ti(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Ly{constructor(e){this.ii=e,this.docs=new id(cu.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.ii(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Eu.resolve(n?n.document.mutableCopy():sf.newInvalidDocument(t))}getEntries(e,t){let n=rp();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():sf.newInvalidDocument(e))})),Eu.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=rp();const s=t.path,o=new cu(s.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||_u(yu(o),n)<=0||(r.has(o.key)||$f(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return Eu.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Ac(9500)}si(e,t){return Eu.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new My(this)}getSize(e){return Eu.resolve(this.size)}}class My extends vy{constructor(e){super(),this.Br=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.Br.addEntry(e,r)):this.Br.removeEntry(n)})),Eu.waitFor(t)}getFromCache(e,t){return this.Br.getEntry(e,t)}getAllFromCache(e,t){return this.Br.getEntries(e,t)}}class Fy{constructor(e){this.persistence=e,this.oi=new tp((e=>Rf(e)),Df),this.lastRemoteSnapshotVersion=ru.min(),this.highestTargetId=0,this._i=0,this.ai=new Ry,this.targetCount=0,this.ui=iy.cr()}forEachTarget(e,t){return this.oi.forEach(((e,n)=>t(n))),Eu.resolve()}getLastRemoteSnapshotVersion(e){return Eu.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Eu.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),Eu.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this._i&&(this._i=t),Eu.resolve()}Tr(e){this.oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ui=new iy(t),this.highestTargetId=t),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,t){return this.Tr(t),this.targetCount+=1,Eu.resolve()}updateTargetData(e,t){return this.Tr(t),Eu.resolve()}removeTargetData(e,t){return this.oi.delete(t.target),this.ai.Hr(t.targetId),this.targetCount-=1,Eu.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.oi.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.oi.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),Eu.waitFor(i).next((()=>r))}getTargetCount(e){return Eu.resolve(this.targetCount)}getTargetData(e,t){const n=this.oi.get(t)||null;return Eu.resolve(n)}addMatchingKeys(e,t,n){return this.ai.Gr(t,n),Eu.resolve()}removeMatchingKeys(e,t,n){this.ai.jr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),Eu.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.ai.Hr(t),Eu.resolve()}getMatchingKeysForTargetId(e,t){const n=this.ai.Yr(t);return Eu.resolve(n)}containsKey(e,t){return Eu.resolve(this.ai.containsKey(t))}}class Uy{constructor(e,t){this.ci={},this.overlays={},this.li=new Uu(0),this.hi=!1,this.hi=!0,this.Pi=new Py,this.referenceDelegate=e(this),this.Ti=new Fy(this),this.indexManager=new Um,this.remoteDocumentCache=function(e){return new Ly(e)}((e=>this.referenceDelegate.Ii(e))),this.serializer=new $g(t),this.Ei=new Ny(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Ay,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ci[e.toKey()];return n||(n=new Oy(t,this.referenceDelegate),this.ci[e.toKey()]=n),n}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,t,n){kc("MemoryPersistence","Starting transaction:",e);const r=new jy(this.li.next());return this.referenceDelegate.di(),n(r).next((e=>this.referenceDelegate.Ai(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Ri(e,t){return Eu.or(Object.values(this.ci).map((n=>()=>n.containsKey(e,t))))}}class jy extends bu{constructor(e){super(),this.currentSequenceNumber=e}}class Vy{constructor(e){this.persistence=e,this.Vi=new Ry,this.mi=null}static fi(e){return new Vy(e)}get gi(){if(this.mi)return this.mi;throw Ac(60996)}addReference(e,t,n){return this.Vi.addReference(n,t),this.gi.delete(n.toString()),Eu.resolve()}removeReference(e,t,n){return this.Vi.removeReference(n,t),this.gi.add(n.toString()),Eu.resolve()}markPotentiallyOrphaned(e,t){return this.gi.add(t.toString()),Eu.resolve()}removeTarget(e,t){this.Vi.Hr(t.targetId).forEach((e=>this.gi.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.gi.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}di(){this.mi=new Set}Ai(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Eu.forEach(this.gi,(n=>{const r=cu.fromPath(n);return this.pi(e,r).next((e=>{e||t.removeEntry(r,ru.min())}))})).next((()=>(this.mi=null,t.apply(e))))}updateLimboDocument(e,t){return this.pi(e,t).next((e=>{e?this.gi.delete(t.toString()):this.gi.add(t.toString())}))}Ii(e){return 0}pi(e,t){return Eu.or([()=>Eu.resolve(this.Vi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ri(e,t)])}}class zy{constructor(e,t){this.persistence=e,this.yi=new tp((e=>Hu(e.path)),((e,t)=>e.isEqual(t))),this.garbageCollector=gy(this,t)}static fi(e,t){return new zy(e,t)}di(){}Ai(e){return Eu.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}pr(e){const t=this.Sr(e);return this.persistence.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Sr(e){let t=0;return this.yr(e,(e=>{t++})).next((()=>t))}yr(e,t){return Eu.forEach(this.yi,((n,r)=>this.Dr(e,n,r).next((e=>e?Eu.resolve():t(r)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.si(e,(r=>this.Dr(e,r,t).next((e=>{e||(n++,i.removeEntry(r,ru.min()))})))).next((()=>i.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.yi.set(t,e.currentSequenceNumber),Eu.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.yi.set(n,e.currentSequenceNumber),Eu.resolve()}removeReference(e,t,n){return this.yi.set(n,e.currentSequenceNumber),Eu.resolve()}updateLimboDocument(e,t){return this.yi.set(t,e.currentSequenceNumber),Eu.resolve()}Ii(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=zd(e.data.value)),t}Dr(e,t,n){return Eu.or([()=>this.persistence.Ri(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.yi.get(t);return Eu.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class qy{constructor(e){this.serializer=e}q(e,t,n,r){const i=new Su("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore(Yu)}(e),function(e){e.createObjectStore($u,{keyPath:"userId"});e.createObjectStore(Xu,{keyPath:Zu,autoIncrement:!0}).createIndex(eh,th,{unique:!0}),e.createObjectStore(sh)}(e),By(e),function(e){e.createObjectStore(Qu)}(e));let s=Eu.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(yh),e.deleteObjectStore(ph),e.deleteObjectStore(Th)}(e),By(e)),s=s.next((()=>function(e){const t=e.store(Th),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ru.min().toTimestamp(),targetCount:0};return t.put(bh,n)}(i)))),n<4&&r>=4&&(0!==n&&(s=s.next((()=>function(e,t){return t.store(Xu).J().next((n=>{e.deleteObjectStore(Xu),e.createObjectStore(Xu,{keyPath:Zu,autoIncrement:!0}).createIndex(eh,th,{unique:!0});const r=t.store(Xu),i=n.map((e=>r.put(e)));return Eu.waitFor(i)}))}(e,i)))),s=s.next((()=>{!function(e){e.createObjectStore(Sh,{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(s=s.next((()=>this.wi(i)))),n<6&&r>=6&&(s=s.next((()=>(function(e){e.createObjectStore(dh)}(e),this.Si(i))))),n<7&&r>=7&&(s=s.next((()=>this.bi(i)))),n<8&&r>=8&&(s=s.next((()=>this.Di(e,i)))),n<9&&r>=9&&(s=s.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(s=s.next((()=>this.Ci(i)))),n<11&&r>=11&&(s=s.next((()=>{!function(e){e.createObjectStore(kh,{keyPath:"bundleId"})}(e),function(e){e.createObjectStore(Ch,{keyPath:"name"})}(e)}))),n<12&&r>=12&&(s=s.next((()=>{!function(e){const t=e.createObjectStore(Uh,{keyPath:jh});t.createIndex(Vh,zh,{unique:!1}),t.createIndex(qh,Bh,{unique:!1})}(e)}))),n<13&&r>=13&&(s=s.next((()=>function(e){const t=e.createObjectStore(oh,{keyPath:ah});t.createIndex(lh,ch),t.createIndex(uh,hh)}(e))).next((()=>this.Fi(e,i))).next((()=>e.deleteObjectStore(Qu)))),n<14&&r>=14&&(s=s.next((()=>this.Mi(e,i)))),n<15&&r>=15&&(s=s.next((()=>function(e){e.createObjectStore(xh,{keyPath:"indexId",autoIncrement:!0}).createIndex(Nh,"collectionGroup",{unique:!1});e.createObjectStore(Ah,{keyPath:Ph}).createIndex(Rh,Dh,{unique:!1});e.createObjectStore(Oh,{keyPath:Lh}).createIndex(Mh,Fh,{unique:!1})}(e)))),n<16&&r>=16&&(s=s.next((()=>{t.objectStore(Ah).clear()})).next((()=>{t.objectStore(Oh).clear()}))),n<17&&r>=17&&(s=s.next((()=>{!function(e){e.createObjectStore(Hh,{keyPath:"name"})}(e)}))),n<18&&r>=18&&rn()&&(s=s.next((()=>{t.objectStore(Ah).clear()})).next((()=>{t.objectStore(Oh).clear()}))),s}Si(e){let t=0;return e.store(Qu).te(((e,n)=>{t+=Xm(n)})).next((()=>{const n={byteSize:t};return e.store(dh).put(fh,n)}))}wi(e){const t=e.store($u),n=e.store(Xu);return t.J().next((t=>Eu.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,ju],[t.userId,t.lastAcknowledgedBatchId]);return n.J(eh,r).next((n=>Eu.forEach(n,(n=>{Rc(n.userId===t.userId,18650,"Cannot process batch from unexpected user",{batchId:n.batchId});const r=nm(this.serializer,n);return $m(e,t.userId,r).next((()=>{}))}))))}))))}bi(e){const t=e.store(yh),n=e.store(Qu);return e.store(Th).get(bh).next((e=>{const r=[];return n.te(((n,i)=>{const s=new ou(n),o=function(e){return[0,Hu(e)]}(s);r.push(t.get(o).next((n=>n?Eu.resolve():(n=>t.put({targetId:0,path:Hu(n),sequenceNumber:e.highestListenSequenceNumber}))(s))))})).next((()=>Eu.waitFor(r)))}))}Di(e,t){e.createObjectStore(Eh,{keyPath:Ih});const n=t.store(Eh),r=new jm,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:Hu(r)})}};return t.store(Qu).te({ee:!0},((e,t)=>{const n=new ou(e);return i(n.popLast())})).next((()=>t.store(sh).te({ee:!0},((e,t)=>{let[n,r,s]=e;const o=Gu(r);return i(o.popLast())}))))}Ci(e){const t=e.store(ph);return t.te(((e,n)=>{const r=rm(n),i=im(this.serializer,r);return t.put(i)}))}Fi(e,t){const n=t.store(Qu),r=[];return n.te(((e,n)=>{const i=t.store(oh),s=function(e){return e.document?new cu(ou.fromString(e.document.name).popFirst(5)):e.noDocument?cu.fromSegments(e.noDocument.path):e.unknownDocument?cu.fromSegments(e.unknownDocument.path):Ac(36783)}(n).path.toArray(),o={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))})).next((()=>Eu.waitFor(r)))}Mi(e,t){const n=t.store(Xu),r=wy(this.serializer),i=new Uy(Vy.fi,this.serializer.wt);return n.J().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:dp();nm(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),Eu.forEach(n,((e,n)=>{const s=new Tc(n),o=dm.St(this.serializer,s),a=i.getIndexManager(s),l=Zm.St(s,this.serializer,a,i.referenceDelegate);return new xy(r,l,o,a).recalculateAndSaveOverlaysForDocumentKeys(new Zh(t,Uu.le),e).next()}))}))}}function By(e){e.createObjectStore(yh,{keyPath:vh}).createIndex(_h,wh,{unique:!0}),e.createObjectStore(ph,{keyPath:"targetId"}).createIndex(gh,mh,{unique:!0}),e.createObjectStore(Th)}const Hy="IndexedDbPersistence",Wy=18e5,Ky=5e3,Gy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Qy="main";class Yy{constructor(e,t,n,r,i,s,o,a,l,c){let u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:18;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.xi=i,this.window=s,this.document=o,this.Oi=l,this.Ni=c,this.Bi=u,this.li=null,this.hi=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Li=null,this.inForeground=!1,this.ki=null,this.qi=null,this.Qi=Number.NEGATIVE_INFINITY,this.$i=e=>Promise.resolve(),!Yy.C())throw new Lc(Oc.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new my(this,r),this.Ui=t+Qy,this.serializer=new $g(a),this.Ki=new ku(this.Ui,this.Bi,new qy(this.serializer)),this.Pi=new pm,this.Ti=new sy(this.referenceDelegate,this.serializer),this.remoteDocumentCache=wy(this.serializer),this.Ei=new cm,this.window&&this.window.localStorage?this.Wi=this.window.localStorage:(this.Wi=null,!1===c&&Cc(Hy,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Gi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Lc(Oc.FAILED_PRECONDITION,Gy);return this.zi(),this.ji(),this.Hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Ti.getHighestSequenceNumber(e)))})).then((e=>{this.li=new Uu(e,this.Oi)})).then((()=>{this.hi=!0})).catch((e=>(this.Ki&&this.Ki.close(),Promise.reject(e))))}Ji(e){return this.$i=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ki.U((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.xi.enqueueAndForget((async()=>{this.started&&await this.Gi()})))}Gi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>$y(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Yi(e).next((e=>{e||(this.isPrimary=!1,this.xi.enqueueRetryable((()=>this.$i(!1))))}))})).next((()=>this.Zi(e))).next((t=>this.isPrimary&&!t?this.Xi(e).next((()=>!1)):!!t&&this.es(e).next((()=>!0)))))).catch((e=>{if(Au(e))return kc(Hy,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return kc(Hy,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.xi.enqueueRetryable((()=>this.$i(e))),this.isPrimary=e}))}Yi(e){return Jy(e).get(Ju).next((e=>Eu.resolve(this.ts(e))))}ns(e){return $y(e).delete(this.clientId)}async rs(){if(this.isPrimary&&!this.ss(this.Qi,Wy)){this.Qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=ed(e,Sh);return t.J().next((e=>{const n=this._s(e,Wy),r=e.filter((e=>-1===n.indexOf(e)));return Eu.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.Wi)for(const t of e)this.Wi.removeItem(this.us(t.clientId))}}Hi(){this.qi=this.xi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Gi().then((()=>this.rs())).then((()=>this.Hi()))))}ts(e){return!!e&&e.ownerId===this.clientId}Zi(e){return this.Ni?Eu.resolve(!0):Jy(e).get(Ju).next((t=>{if(null!==t&&this.ss(t.leaseTimestampMs,Ky)&&!this.cs(t.ownerId)){if(this.ts(t)&&this.networkEnabled)return!0;if(!this.ts(t)){if(!t.allowTabSynchronization)throw new Lc(Oc.FAILED_PRECONDITION,Gy);return!1}}return!(!this.networkEnabled||!this.inForeground)||$y(e).J().next((e=>void 0===this._s(e,Ky).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&kc(Hy,"Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e)))}async shutdown(){this.hi=!1,this.ls(),this.qi&&(this.qi.cancel(),this.qi=null),this.hs(),this.Ps(),await this.Ki.runTransaction("shutdown","readwrite",[Yu,Sh],(e=>{const t=new Zh(e,Uu.le);return this.Xi(t).next((()=>this.ns(t)))})),this.Ki.close(),this.Ts()}_s(e,t){return e.filter((e=>this.ss(e.updateTimeMs,t)&&!this.cs(e.clientId)))}Is(){return this.runTransaction("getActiveClients","readonly",(e=>$y(e).J().next((e=>this._s(e,Wy).map((e=>e.clientId))))))}get started(){return this.hi}getGlobalsCache(){return this.Pi}getMutationQueue(e,t){return Zm.St(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new qm(e,this.serializer.wt.databaseId)}getDocumentOverlayCache(e){return dm.St(this.serializer,e)}getBundleCache(){return this.Ei}runTransaction(e,t,n){kc(Hy,"Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 18===e?Xh:17===e?$h:16===e?Jh:15===e?Yh:14===e?Qh:13===e?Gh:12===e?Kh:11===e?Wh:void Ac(60245)}(this.Bi);let s;return this.Ki.runTransaction(e,r,i,(r=>(s=new Zh(r,this.li?this.li.next():Uu.le),"readwrite-primary"===t?this.Yi(s).next((e=>!!e||this.Zi(s))).next((t=>{if(!t)throw Cc("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.xi.enqueueRetryable((()=>this.$i(!1))),new Lc(Oc.FAILED_PRECONDITION,wu);return n(s)})).next((e=>this.es(s).next((()=>e)))):this.Es(s).next((()=>n(s)))))).then((e=>(s.raiseOnCommittedEvent(),e)))}Es(e){return Jy(e).get(Ju).next((e=>{if(null!==e&&this.ss(e.leaseTimestampMs,Ky)&&!this.cs(e.ownerId)&&!this.ts(e)&&!(this.Ni||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Lc(Oc.FAILED_PRECONDITION,Gy)}))}es(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Jy(e).put(Ju,t)}static C(){return ku.C()}Xi(e){const t=Jy(e);return t.get(Ju).next((e=>this.ts(e)?(kc(Hy,"Releasing primary lease."),t.delete(Ju)):Eu.resolve()))}ss(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(Cc("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}zi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ki=()=>{this.xi.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.Gi())))},this.document.addEventListener("visibilitychange",this.ki),this.inForeground="visible"===this.document.visibilityState)}hs(){this.ki&&(this.document.removeEventListener("visibilitychange",this.ki),this.ki=null)}ji(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Li=()=>{this.ls();const e=/(?:Version|Mobile)\/1[456]/;nn()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.xi.enterRestrictedMode(!0),this.xi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Li))}Ps(){this.Li&&(this.window.removeEventListener("pagehide",this.Li),this.Li=null)}cs(e){var t;try{const n=null!==(null===(t=this.Wi)||void 0===t?void 0:t.getItem(this.us(e)));return kc(Hy,"Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Cc(Hy,"Failed to get zombied client id.",e),!1}}ls(){if(this.Wi)try{this.Wi.setItem(this.us(this.clientId),String(Date.now()))}catch($M){Cc("Failed to set zombie client id.",$M)}}Ts(){if(this.Wi)try{this.Wi.removeItem(this.us(this.clientId))}catch($M){}}us(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function Jy(e){return ed(e,Yu)}function $y(e){return ed(e,Sh)}function Xy(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class Zy{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.ds=n,this.As=r}static Rs(e,t){let n=dp(),r=dp();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Zy(e,t.fromCache,n,r)}}class ev{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class tv{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=nn()?8:Cu(Qt())>0?6:4}initialize(e,t){this.ys=e,this.indexManager=t,this.Vs=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ws(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.Ss(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new ev;return this.bs(e,t,n).next((r=>{if(i.result=r,this.fs)return this.Ds(e,t,n,r.size)}))})).next((()=>i.result))}Ds(e,t,n,r){return n.documentReadCount<this.gs?(Sc()<=jn.DEBUG&&kc("QueryEngine","SDK will not create cache indexes for query:",Jf(t),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),Eu.resolve()):(Sc()<=jn.DEBUG&&kc("QueryEngine","Query:",Jf(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.ps*r?(Sc()<=jn.DEBUG&&kc("QueryEngine","The SDK decides to create cache indexes for query:",Jf(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Hf(t))):Eu.resolve())}ws(e,t){if(zf(t))return Eu.resolve(null);let n=Hf(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=Gf(t,null,"F"),n=Hf(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=dp(...r);return this.ys.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.vs(t,r);return this.Cs(t,s,i,n.readTime)?this.ws(e,Gf(t,null,"F")):this.Fs(e,s,t,n)}))))})))))}Ss(e,t,n,r){return zf(t)||r.isEqual(ru.min())?Eu.resolve(null):this.ys.getDocuments(e,n).next((i=>{const s=this.vs(t,i);return this.Cs(t,s,n,r)?Eu.resolve(null):(Sc()<=jn.DEBUG&&kc("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Jf(t)),this.Fs(e,s,t,mu(r,uu)).next((e=>e)))}))}vs(e,t){let n=new ad(Zf(e));return t.forEach(((t,r)=>{$f(e,r)&&(n=n.add(r))})),n}Cs(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}bs(e,t,n){return Sc()<=jn.DEBUG&&kc("QueryEngine","Using full collection scan to execute query:",Jf(t)),this.ys.getDocumentsMatchingQuery(e,t,vu.min(),n)}Fs(e,t,n,r){return this.ys.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}const nv="LocalStore";class rv{constructor(e,t,n,r){this.persistence=e,this.Ms=t,this.serializer=r,this.xs=new id(Qc),this.Os=new tp((e=>Rf(e)),Df),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(n)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new xy(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.xs)))}}function iv(e,t,n,r){return new rv(e,t,n,r)}async function sv(e,t){const n=Dc(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.Ls(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=dp();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({ks:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function ov(e){const t=Dc(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Ti.getLastRemoteSnapshotVersion(e)))}function av(e,t,n){let r=dp(),i=dp();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=rp();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(ru.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):kc(nv,"Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{qs:r,Qs:i}}))}function lv(e,t){const n=Dc(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=ju),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function cv(e,t){const n=Dc(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Ti.getTargetData(e,t).next((i=>i?(r=i,Eu.resolve(r)):n.Ti.allocateTargetId(e).next((i=>(r=new Jg(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Ti.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.xs.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.xs=n.xs.insert(e.targetId,e),n.Os.set(t,e.targetId)),e}))}async function uv(e,t,n){const r=Dc(e),i=r.xs.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!Au(e))throw e;kc(nv,"Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.xs=r.xs.remove(t),r.Os.delete(i.target)}function hv(e,t,n){const r=Dc(e);let i=ru.min(),s=dp();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=Dc(e),i=r.Os.get(n);return void 0!==i?Eu.resolve(r.xs.get(i)):r.Ti.getTargetData(t,n)}(r,e,Hf(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.Ms.getDocumentsMatchingQuery(e,t,n?i:ru.min(),n?s:dp()))).next((e=>(pv(r,Xf(t),e),{documents:e,$s:s})))))}function dv(e,t){const n=Dc(e),r=Dc(n.Ti),i=n.xs.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r.Rt(e,t).next((e=>e?e.target:null))))}function fv(e,t){const n=Dc(e),r=n.Ns.get(t)||ru.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.Bs.getAllFromCollectionGroup(e,t,mu(r,uu),Number.MAX_SAFE_INTEGER))).then((e=>(pv(n,t,e),e)))}function pv(e,t,n){let r=e.Ns.get(t)||ru.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Ns.set(t,r)}async function gv(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:dp();const r=await cv(e,Hf(sm(t.bundledQuery))),i=Dc(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const s=Ig(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.Ei.saveNamedQuery(e,t);const o=r.withResumeToken(dd.EMPTY_BYTE_STRING,s);return i.xs=i.xs.insert(o.targetId,o),i.Ti.updateTargetData(e,o).next((()=>i.Ti.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.Ti.addMatchingKeys(e,n,r.targetId))).next((()=>i.Ei.saveNamedQuery(e,t)))}))}const mv="firestore_clients";function yv(e,t){return"".concat(mv,"_").concat(e,"_").concat(t)}const vv="firestore_mutations";function _v(e,t,n){let r="".concat(vv,"_").concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}const wv="firestore_targets";function bv(e,t){return"".concat(wv,"_").concat(e,"_").concat(t)}const Tv="SharedClientState";class Ev{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Gs(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Lc(r.error.code,r.error.message))),s?new Ev(e,t,r.state,i):(Cc(Tv,"Failed to parse mutation state for ID '".concat(t,"': ").concat(n)),null)}zs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Iv{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Gs(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new Lc(n.error.code,n.error.message))),i?new Iv(e,n.state,r):(Cc(Tv,"Failed to parse target state for ID '".concat(e,"': ").concat(t)),null)}zs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Sv{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Gs(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=pp();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=qu(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new Sv(e,i):(Cc(Tv,"Failed to parse client data for instance '".concat(e,"': ").concat(t)),null)}}class kv{constructor(e,t){this.clientId=e,this.onlineState=t}static Gs(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new kv(t.clientId,t.onlineState):(Cc(Tv,"Failed to parse online state: ".concat(e)),null)}}class Cv{constructor(){this.activeTargetIds=pp()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class xv{constructor(e,t,n,r,i){this.window=e,this.xi=t,this.persistenceKey=n,this.Js=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Ys=this.Zs.bind(this),this.Xs=new id(Qc),this.started=!1,this.eo=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.no=yv(this.persistenceKey,this.Js),this.ro=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.Xs=this.Xs.insert(this.Js,new Cv),this.io=new RegExp("^".concat(mv,"_").concat(s,"_([^_]*)$")),this.so=new RegExp("^".concat(vv,"_").concat(s,"_(\\d+)(?:_(.*))?$")),this.oo=new RegExp("^".concat(wv,"_").concat(s,"_(\\d+)$")),this._o=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.ao=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.Ys)}static C(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Is();for(const n of e){if(n===this.Js)continue;const e=this.getItem(yv(this.persistenceKey,n));if(e){const t=Sv.Gs(n,e);t&&(this.Xs=this.Xs.insert(t.clientId,t))}}this.uo();const t=this.storage.getItem(this._o);if(t){const e=this.co(t);e&&this.lo(e)}for(const n of this.eo)this.Zs(n);this.eo=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.ro,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ho(this.Xs)}isActiveQueryTarget(e){let t=!1;return this.Xs.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.Po(e,"pending")}updateMutationState(e,t,n){this.Po(e,t,n),this.To(e)}addLocalQueryTarget(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n="not-current";if(this.isActiveQueryTarget(e)){const t=this.storage.getItem(bv(this.persistenceKey,e));if(t){const r=Iv.Gs(e,t);r&&(n=r.state)}}return t&&this.Io.js(e),this.uo(),n}removeLocalQueryTarget(e){this.Io.Hs(e),this.uo()}isLocalQueryTarget(e){return this.Io.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(bv(this.persistenceKey,e))}updateQueryState(e,t,n){this.Eo(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.To(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.Ao(e)}notifyBundleLoaded(e){this.Ro(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Ys),this.removeItem(this.no),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return kc(Tv,"READ",e,t),t}setItem(e,t){kc(Tv,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){kc(Tv,"REMOVE",e),this.storage.removeItem(e)}Zs(e){const t=e;if(t.storageArea===this.storage){if(kc(Tv,"EVENT",t.key,t.newValue),t.key===this.no)return void Cc("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.xi.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.io.test(t.key)){if(null==t.newValue){const e=this.Vo(t.key);return this.mo(e,null)}{const e=this.fo(t.key,t.newValue);if(e)return this.mo(e.clientId,e)}}else if(this.so.test(t.key)){if(null!==t.newValue){const e=this.po(t.key,t.newValue);if(e)return this.yo(e)}}else if(this.oo.test(t.key)){if(null!==t.newValue){const e=this.wo(t.key,t.newValue);if(e)return this.So(e)}}else if(t.key===this._o){if(null!==t.newValue){const e=this.co(t.newValue);if(e)return this.lo(e)}}else if(t.key===this.ro){const e=function(e){let t=Uu.le;if(null!=e)try{const n=JSON.parse(e);Rc("number"==typeof n,30636,{bo:e}),t=n}catch(e){Cc(Tv,"Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==Uu.le&&this.sequenceNumberHandler(e)}else if(t.key===this.ao){const e=this.Do(t.newValue);await Promise.all(e.map((e=>this.syncEngine.vo(e))))}}else this.eo.push(t)}))}}get Io(){return this.Xs.get(this.Js)}uo(){this.setItem(this.no,this.Io.zs())}Po(e,t,n){const r=new Ev(this.currentUser,e,t,n),i=_v(this.persistenceKey,this.currentUser,e);this.setItem(i,r.zs())}To(e){const t=_v(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Ao(e){const t={clientId:this.Js,onlineState:e};this.storage.setItem(this._o,JSON.stringify(t))}Eo(e,t,n){const r=bv(this.persistenceKey,e),i=new Iv(e,t,n);this.setItem(r,i.zs())}Ro(e){const t=JSON.stringify(Array.from(e));this.setItem(this.ao,t)}Vo(e){const t=this.io.exec(e);return t?t[1]:null}fo(e,t){const n=this.Vo(e);return Sv.Gs(n,t)}po(e,t){const n=this.so.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Ev.Gs(new Tc(i),r,t)}wo(e,t){const n=this.oo.exec(e),r=Number(n[1]);return Iv.Gs(r,t)}co(e){return kv.Gs(e)}Do(e){return JSON.parse(e)}async yo(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);kc(Tv,"Ignoring mutation for non-active user ".concat(e.user.uid))}So(e){return this.syncEngine.Fo(e.targetId,e.state,e.error)}mo(e,t){const n=t?this.Xs.insert(e,t):this.Xs.remove(e),r=this.ho(this.Xs),i=this.ho(n),s=[],o=[];return i.forEach((e=>{r.has(e)||s.push(e)})),r.forEach((e=>{i.has(e)||o.push(e)})),this.syncEngine.Mo(s,o).then((()=>{this.Xs=n}))}lo(e){this.Xs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ho(e){let t=pp();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class Nv{constructor(){this.xo=new Cv,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,t,n){this.Oo[e]=t}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new Cv,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Av{No(e){}shutdown(){}}const Pv="ConnectivityMonitor";class Rv{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){kc(Pv,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){kc(Pv,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Dv=null;function Ov(){return null===Dv?Dv=268435456+Math.round(2147483648*Math.random()):Dv++,"0x"+Dv.toString(16)}const Lv="RestConnection",Mv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Fv{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Ko=t+"://"+e.host,this.Wo="projects/".concat(n,"/databases/").concat(r),this.Go=this.databaseId.database===Sd?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}zo(e,t,n,r,i){const s=Ov(),o=this.jo(e,t.toUriEncodedString());kc(Lv,"Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(a,r,i);const{host:l}=new URL(o),c=qt(l);return this.Jo(e,o,a,n,c).then((t=>(kc(Lv,"Received RPC '".concat(e,"' ").concat(s,": "),t),t)),(t=>{throw xc(Lv,"RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t}))}Yo(e,t,n,r,i,s){return this.zo(e,t,n,r,i)}Ho(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ec,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}jo(e,t){const n=Mv[e];return"".concat(this.Ko,"/v1/").concat(t,":").concat(n)}terminate(){}}class Uv{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}const jv="WebChannelConnection";class Vv extends Fv{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,i){const s=Ov();return new Promise(((i,o)=>{const a=new uc;a.setWithCredentials(!0),a.listenOnce(dc.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case fc.NO_ERROR:const t=a.getResponseJson();kc(jv,"XHR for RPC '".concat(e,"' ").concat(s," received:"),JSON.stringify(t)),i(t);break;case fc.TIMEOUT:kc(jv,"RPC '".concat(e,"' ").concat(s," timed out")),o(new Lc(Oc.DEADLINE_EXCEEDED,"Request time out"));break;case fc.HTTP_ERROR:const n=a.getStatus();if(kc(jv,"RPC '".concat(e,"' ").concat(s," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Oc).indexOf(t)>=0?t:Oc.UNKNOWN}(t.status);o(new Lc(e,t.message))}else o(new Lc(Oc.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Lc(Oc.UNAVAILABLE,"Connection failed."));break;default:Ac(9055,{l_:e,streamId:s,h_:a.getLastErrorCode(),P_:a.getLastError()})}}finally{kc(jv,"RPC '".concat(e,"' ").concat(s," completed."))}}));const l=JSON.stringify(r);kc(jv,"RPC '".concat(e,"' ").concat(s," sending request:"),r),a.send(t,"POST",l,n,15)}))}T_(e,t,n){const r=Ov(),i=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=yc(),o=mc(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Ho(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");kc(jv,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),a);const u=s.createWebChannel(c,a);let h=!1,d=!1;const f=new Uv({Zo:t=>{d?kc(jv,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(kc(jv,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),h=!0),kc(jv,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},Xo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,hc.EventType.OPEN,(()=>{d||(kc(jv,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.__())})),p(u,hc.EventType.CLOSE,(()=>{d||(d=!0,kc(jv,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.u_())})),p(u,hc.EventType.ERROR,(t=>{d||(d=!0,xc(jv,"RPC '".concat(e,"' stream ").concat(r," transport errored. Name:"),t.name,"Message:",t.message),f.u_(new Lc(Oc.UNAVAILABLE,"The operation could not be completed")))})),p(u,hc.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];Rc(!!i,16349);const s=i,o=(null==s?void 0:s.error)||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){kc(jv,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=$p[e];if(void 0!==t)return eg(t)}(t),i=o.message;void 0===n&&(n=Oc.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.u_(new Lc(n,i)),u.close()}else kc(jv,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.c_(i)}})),p(o,gc.STAT_EVENT,(t=>{t.stat===pc.PROXY?kc(jv,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===pc.NOPROXY&&kc(jv,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.a_()}),0),f}}function zv(){return"undefined"!=typeof window?window:null}function qv(){return"undefined"!=typeof document?document:null}function Bv(e){return new _g(e,!0)}class Hv{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.xi=e,this.timerId=t,this.I_=n,this.E_=r,this.d_=i,this.A_=0,this.R_=null,this.V_=Date.now(),this.reset()}reset(){this.A_=0}m_(){this.A_=this.d_}f_(e){this.cancel();const t=Math.floor(this.A_+this.g_()),n=Math.max(0,Date.now()-this.V_),r=Math.max(0,t-n);r>0&&kc("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.A_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.R_=this.xi.enqueueAfterDelay(this.timerId,r,(()=>(this.V_=Date.now(),e()))),this.A_*=this.E_,this.A_<this.I_&&(this.A_=this.I_),this.A_>this.d_&&(this.A_=this.d_)}p_(){null!==this.R_&&(this.R_.skipDelay(),this.R_=null)}cancel(){null!==this.R_&&(this.R_.cancel(),this.R_=null)}g_(){return(Math.random()-.5)*this.A_}}const Wv="PersistentStream";class Kv{constructor(e,t,n,r,i,s,o,a){this.xi=e,this.y_=n,this.w_=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.S_=0,this.b_=null,this.D_=null,this.stream=null,this.v_=0,this.C_=new Hv(e,t)}F_(){return 1===this.state||5===this.state||this.M_()}M_(){return 2===this.state||3===this.state}start(){this.v_=0,4!==this.state?this.auth():this.x_()}async stop(){this.F_()&&await this.close(0)}O_(){this.state=0,this.C_.reset()}N_(){this.M_()&&null===this.b_&&(this.b_=this.xi.enqueueAfterDelay(this.y_,6e4,(()=>this.B_())))}L_(e){this.k_(),this.stream.send(e)}async B_(){if(this.M_())return this.close(0)}k_(){this.b_&&(this.b_.cancel(),this.b_=null)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}async close(e,t){this.k_(),this.q_(),this.C_.cancel(),this.S_++,4!==e?this.C_.reset():t&&t.code===Oc.RESOURCE_EXHAUSTED?(Cc(t.toString()),Cc("Using maximum backoff delay to prevent overloading the backend."),this.C_.m_()):t&&t.code===Oc.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Q_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(t)}Q_(){}auth(){this.state=1;const e=this.U_(this.S_),t=this.S_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.S_===t&&this.K_(n,r)}),(t=>{e((()=>{const e=new Lc(Oc.UNKNOWN,"Fetching auth token failed: "+t.message);return this.W_(e)}))}))}K_(e,t){const n=this.U_(this.S_);this.stream=this.G_(e,t),this.stream.e_((()=>{n((()=>this.listener.e_()))})),this.stream.n_((()=>{n((()=>(this.state=2,this.D_=this.xi.enqueueAfterDelay(this.w_,1e4,(()=>(this.M_()&&(this.state=3),Promise.resolve()))),this.listener.n_())))})),this.stream.i_((e=>{n((()=>this.W_(e)))})),this.stream.onMessage((e=>{n((()=>1==++this.v_?this.z_(e):this.onNext(e)))}))}x_(){this.state=5,this.C_.f_((async()=>{this.state=0,this.start()}))}W_(e){return kc(Wv,"close with error: ".concat(e)),this.stream=null,this.close(4,e)}U_(e){return t=>{this.xi.enqueueAndForget((()=>this.S_===e?t():(kc(Wv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Gv extends Kv{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}G_(e,t){return this.connection.T_("Listen",e,t)}z_(e){return this.onNext(e)}onNext(e){this.C_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Ac(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Rc(void 0===t||"string"==typeof t,58123),dd.fromBase64String(t||"")):(Rc(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),dd.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Oc.UNKNOWN:eg(e.code);return new Lc(t,e.message||"")}(o);n=new hg(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Ng(e,r.document.name),s=Ig(r.document.updateTime),o=r.document.createTime?Ig(r.document.createTime):ru.min(),a=new nf({mapValue:{fields:r.document.fields}}),l=sf.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new cg(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Ng(e,r.document),s=r.readTime?Ig(r.readTime):ru.min(),o=sf.newNoDocument(i,s),a=r.removedTargetIds||[];n=new cg([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Ng(e,r.document),s=r.removedTargetIds||[];n=new cg([],s,i,null)}else{if(!("filter"in t))return Ac(11601,{Vt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new Jp(r,i),o=e.targetId;n=new ug(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return ru.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?ru.min():t.readTime?Ig(t.readTime):ru.min()}(e);return this.listener.j_(t,n)}H_(e){const t={};t.database=Rg(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Of(r)?{documents:Ug(e,r)}:{query:jg(e,r).gt},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Tg(e,t.resumeToken);const r=wg(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(ru.min())>0){n.readTime=bg(e,t.snapshotVersion.toTimestamp());const r=wg(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ac(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.L_(t)}J_(e){const t={};t.database=Rg(this.serializer),t.removeTarget=e,this.L_(t)}}class Qv extends Kv{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get Y_(){return this.v_>0}start(){this.lastStreamToken=void 0,super.start()}Q_(){this.Y_&&this.Z_([])}G_(e,t){return this.connection.T_("Write",e,t)}z_(e){return Rc(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Rc(!e.writeResults||0===e.writeResults.length,55816),this.listener.X_()}onNext(e){Rc(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.C_.reset();const t=function(e,t){return e&&e.length>0?(Rc(void 0!==t,14353),e.map((e=>function(e,t){let n=e.updateTime?Ig(e.updateTime):Ig(t);return n.isEqual(ru.min())&&(n=Ig(t)),new Pp(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=Ig(e.commitTime);return this.listener.ea(n,t)}ta(){const e={};e.database=Rg(this.serializer),this.L_(e)}Z_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Mg(this.serializer,e)))};this.L_(t)}}class Yv{}class Jv extends Yv{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.na=!1}ra(){if(this.na)throw new Lc(Oc.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,t,n,r){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,o]=i;return this.connection.zo(e,kg(t,n),r,s,o)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Oc.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Lc(Oc.UNKNOWN,e.toString())}))}Yo(e,t,n,r,i){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[o,a]=s;return this.connection.Yo(e,kg(t,n),r,o,a,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Oc.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Lc(Oc.UNKNOWN,e.toString())}))}terminate(){this.na=!0,this.connection.terminate()}}class $v{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ia=0,this.sa=null,this.oa=!0}_a(){0===this.ia&&(this.aa("Unknown"),this.sa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.sa=null,this.ua("Backend didn't respond within 10 seconds."),this.aa("Offline"),Promise.resolve()))))}ca(e){"Online"===this.state?this.aa("Unknown"):(this.ia++,this.ia>=1&&(this.la(),this.ua("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.aa("Offline")))}set(e){this.la(),this.ia=0,"Online"===e&&(this.oa=!1),this.aa(e)}aa(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ua(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.oa?(Cc(t),this.oa=!1):kc("OnlineStateTracker",t)}la(){null!==this.sa&&(this.sa.cancel(),this.sa=null)}}const Xv="RemoteStore";class Zv{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.ha=[],this.Pa=new Map,this.Ta=new Set,this.Ia=[],this.Ea=i,this.Ea.No((e=>{n.enqueueAndForget((async()=>{l_(this)&&(kc(Xv,"Restarting streams for network reachability change."),await async function(e){const t=Dc(e);t.Ta.add(4),await t_(t),t.da.set("Unknown"),t.Ta.delete(4),await e_(t)}(this))}))})),this.da=new $v(n,r)}}async function e_(e){if(l_(e))for(const t of e.Ia)await t(!0)}async function t_(e){for(const t of e.Ia)await t(!1)}function n_(e,t){const n=Dc(e);n.Pa.has(t.targetId)||(n.Pa.set(t.targetId,t),a_(n)?o_(n):C_(n).M_()&&i_(n,t))}function r_(e,t){const n=Dc(e),r=C_(n);n.Pa.delete(t),r.M_()&&s_(n,t),0===n.Pa.size&&(r.M_()?r.N_():l_(n)&&n.da.set("Unknown"))}function i_(e,t){if(e.Aa.Ke(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ru.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}C_(e).H_(t)}function s_(e,t){e.Aa.Ke(t),C_(e).J_(t)}function o_(e){e.Aa=new fg({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Rt:t=>e.Pa.get(t)||null,Pt:()=>e.datastore.serializer.databaseId}),C_(e).start(),e.da._a()}function a_(e){return l_(e)&&!C_(e).F_()&&e.Pa.size>0}function l_(e){return 0===Dc(e).Ta.size}function c_(e){e.Aa=void 0}async function u_(e){e.da.set("Online")}async function h_(e){e.Pa.forEach(((t,n)=>{i_(e,t)}))}async function d_(e,t){c_(e),a_(e)?(e.da.ca(t),o_(e)):e.da.set("Unknown")}async function f_(e,t,n){if(e.da.set("Online"),t instanceof hg&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Pa.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Pa.delete(r),e.Aa.removeTarget(r))}(e,t)}catch(n){kc(Xv,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await p_(e,n)}else if(t instanceof cg?e.Aa.Xe(t):t instanceof ug?e.Aa.ot(t):e.Aa.nt(t),!n.isEqual(ru.min()))try{const t=await ov(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Aa.It(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Pa.get(r);i&&e.Pa.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.Pa.get(t);if(!r)return;e.Pa.set(t,r.withResumeToken(dd.EMPTY_BYTE_STRING,r.snapshotVersion)),s_(e,t);const i=new Jg(r.target,t,n,r.sequenceNumber);i_(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){kc(Xv,"Failed to raise snapshot:",t),await p_(e,t)}}async function p_(e,t,n){if(!Au(t))throw t;e.Ta.add(1),await t_(e),e.da.set("Offline"),n||(n=()=>ov(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{kc(Xv,"Retrying IndexedDB access"),await n(),e.Ta.delete(1),await e_(e)}))}function g_(e,t){return t().catch((n=>p_(e,n,t)))}async function m_(e){const t=Dc(e),n=x_(t);let r=t.ha.length>0?t.ha[t.ha.length-1].batchId:ju;for(;y_(t);)try{const e=await lv(t.localStore,r);if(null===e){0===t.ha.length&&n.N_();break}r=e.batchId,v_(t,e)}catch(e){await p_(t,e)}__(t)&&w_(t)}function y_(e){return l_(e)&&e.ha.length<10}function v_(e,t){e.ha.push(t);const n=x_(e);n.M_()&&n.Y_&&n.Z_(t.mutations)}function __(e){return l_(e)&&!x_(e).F_()&&e.ha.length>0}function w_(e){x_(e).start()}async function b_(e){x_(e).ta()}async function T_(e){const t=x_(e);for(const n of e.ha)t.Z_(n.mutations)}async function E_(e,t,n){const r=e.ha.shift(),i=Qp.from(r,t,n);await g_(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await m_(e)}async function I_(e,t){t&&x_(e).Y_&&await async function(e,t){if(function(e){return Zp(e)&&e!==Oc.ABORTED}(t.code)){const n=e.ha.shift();x_(e).O_(),await g_(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await m_(e)}}(e,t),__(e)&&w_(e)}async function S_(e,t){const n=Dc(e);n.asyncQueue.verifyOperationInProgress(),kc(Xv,"RemoteStore received new credentials");const r=l_(n);n.Ta.add(3),await t_(n),r&&n.da.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ta.delete(3),await e_(n)}async function k_(e,t){const n=Dc(e);t?(n.Ta.delete(2),await e_(n)):t||(n.Ta.add(2),await t_(n),n.da.set("Unknown"))}function C_(e){return e.Ra||(e.Ra=function(e,t,n){const r=Dc(e);return r.ra(),new Gv(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{e_:u_.bind(null,e),n_:h_.bind(null,e),i_:d_.bind(null,e),j_:f_.bind(null,e)}),e.Ia.push((async t=>{t?(e.Ra.O_(),a_(e)?o_(e):e.da.set("Unknown")):(await e.Ra.stop(),c_(e))}))),e.Ra}function x_(e){return e.Va||(e.Va=function(e,t,n){const r=Dc(e);return r.ra(),new Qv(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{e_:()=>Promise.resolve(),n_:b_.bind(null,e),i_:I_.bind(null,e),X_:T_.bind(null,e),ea:E_.bind(null,e)}),e.Ia.push((async t=>{t?(e.Va.O_(),await m_(e)):(await e.Va.stop(),e.ha.length>0&&(kc(Xv,"Stopping write stream with ".concat(e.ha.length," pending writes")),e.ha=[]))}))),e.Va}class N_{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Mc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new N_(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Lc(Oc.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function A_(e,t){if(Cc("AsyncQueue","".concat(t,": ").concat(e)),Au(e))return new Lc(Oc.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class P_{static emptySet(e){return new P_(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||cu.comparator(t.key,n.key):(e,t)=>cu.comparator(e.key,t.key),this.keyedMap=sp(),this.sortedSet=new id(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof P_))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new P_;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class R_{constructor(){this.ma=new id(cu.comparator)}track(e){const t=e.doc.key,n=this.ma.get(t);n?0!==e.type&&3===n.type?this.ma=this.ma.insert(t,e):3===e.type&&1!==n.type?this.ma=this.ma.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.ma=this.ma.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.ma=this.ma.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.ma=this.ma.remove(t):1===e.type&&2===n.type?this.ma=this.ma.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.ma=this.ma.insert(t,{type:2,doc:e.doc}):Ac(63341,{Vt:e,fa:n}):this.ma=this.ma.insert(t,e)}ga(){const e=[];return this.ma.inorderTraversal(((t,n)=>{e.push(n)})),e}}class D_{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new D_(e,t,P_.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Qf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class O_{constructor(){this.pa=void 0,this.ya=[]}wa(){return this.ya.some((e=>e.Sa()))}}class L_{constructor(){this.queries=M_(),this.onlineState="Unknown",this.ba=new Set}terminate(){!function(e,t){const n=Dc(e),r=n.queries;n.queries=M_(),r.forEach(((e,n)=>{for(const r of n.ya)r.onError(t)}))}(this,new Lc(Oc.ABORTED,"Firestore shutting down"))}}function M_(){return new tp((e=>Yf(e)),Qf)}async function F_(e,t){const n=Dc(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.wa()&&t.Sa()&&(r=2):(s=new O_,r=t.Sa()?0:1);try{switch(r){case 0:s.pa=await n.onListen(i,!0);break;case 1:s.pa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=A_(e,"Initialization of query '".concat(Jf(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,s),s.ya.push(t),t.Da(n.onlineState),s.pa&&t.va(s.pa)&&z_(n)}async function U_(e,t){const n=Dc(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.ya.indexOf(t);e>=0&&(s.ya.splice(e,1),0===s.ya.length?i=t.Sa()?0:1:!s.wa()&&t.Sa()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function j_(e,t){const n=Dc(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.ya)e.va(i)&&(r=!0);t.pa=i}}r&&z_(n)}function V_(e,t,n){const r=Dc(e),i=r.queries.get(t);if(i)for(const s of i.ya)s.onError(n);r.queries.delete(t)}function z_(e){e.ba.forEach((e=>{e.next()}))}var q_,B_;(B_=q_||(q_={})).Ca="default",B_.Cache="cache";class H_{constructor(e,t,n){this.query=e,this.Fa=t,this.Ma=!1,this.xa=null,this.onlineState="Unknown",this.options=n||{}}va(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new D_(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Ma?this.Oa(e)&&(this.Fa.next(e),t=!0):this.Na(e,this.onlineState)&&(this.Ba(e),t=!0),this.xa=e,t}onError(e){this.Fa.error(e)}Da(e){this.onlineState=e;let t=!1;return this.xa&&!this.Ma&&this.Na(this.xa,e)&&(this.Ba(this.xa),t=!0),t}Na(e,t){if(!e.fromCache)return!0;if(!this.Sa())return!0;const n="Offline"!==t;return(!this.options.La||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Oa(e){if(e.docChanges.length>0)return!0;const t=this.xa&&this.xa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Ba(e){e=D_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Ma=!0,this.Fa.next(e)}Sa(){return this.options.source!==q_.Cache}}class W_{constructor(e,t){this.ka=e,this.byteLength=t}qa(){return"metadata"in this.ka}}class K_{constructor(e){this.serializer=e}Us(e){return Ng(this.serializer,e)}Ks(e){return e.metadata.exists?Lg(this.serializer,e.document,!1):sf.newNoDocument(this.Us(e.metadata.name),this.Ws(e.metadata.readTime))}Ws(e){return Ig(e)}}class G_{constructor(e,t,n){this.Qa=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Q_(e)}$a(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ka.namedQuery)this.queries.push(e.ka.namedQuery);else if(e.ka.documentMetadata){this.documents.push({metadata:e.ka.documentMetadata}),e.ka.documentMetadata.exists||++t;const n=ou.fromString(e.ka.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.ka.document&&(this.documents[this.documents.length-1].document=e.ka.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Ua(e){const t=new Map,n=new K_(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.Us(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||dp()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=Dc(e);let s=dp(),o=rp();for(const c of n){const e=t.Us(c.metadata.name);c.document&&(s=s.add(e));const n=t.Ks(c);n.setReadTime(t.Ws(c.metadata.readTime)),o=o.insert(e,n)}const a=i.Bs.newChangeBuffer({trackRemovals:!0}),l=await cv(i,function(e){return Hf(Vf(ou.fromString("__bundle__/docs/".concat(e))))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>av(e,a,o).next((t=>(a.apply(e),t))).next((t=>i.Ti.removeMatchingKeysForTargetId(e,l.targetId).next((()=>i.Ti.addMatchingKeys(e,s,l.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(e,t.qs,t.Qs))).next((()=>t.qs))))))}(this.localStore,new K_(this.serializer),this.documents,this.Qa.id),t=this.Ua(this.documents);for(const n of this.queries)await gv(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,Ka:this.collectionGroups,Wa:e}}}function Q_(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class Y_{constructor(e){this.key=e}}class J_{constructor(e){this.key=e}}class $_{constructor(e,t){this.query=e,this.Ga=t,this.za=null,this.hasCachedResults=!1,this.current=!1,this.ja=dp(),this.mutatedKeys=dp(),this.Ha=Zf(e),this.Ja=new P_(this.Ha)}get Ya(){return this.Ga}Za(e,t){const n=t?t.Xa:new R_,r=t?t.Ja:this.Ja;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=$f(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.eu(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.Ha(u,a)>0||l&&this.Ha(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(o=!0)),f&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Ja:s,Xa:n,Cs:o,mutatedKeys:i}}eu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.Ja;this.Ja=e.Ja,this.mutatedKeys=e.mutatedKeys;const s=e.Xa.ga();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ac(20277,{Vt:e})}};return n(e)-n(t)}(e.type,t.type)||this.Ha(e.doc,t.doc))),this.tu(n),r=null!=r&&r;const o=t&&!r?this.nu():[],a=0===this.ja.size&&this.current&&!r?1:0,l=a!==this.za;return this.za=a,0!==s.length||l?{snapshot:new D_(this.query,e.Ja,i,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),ru:o}:{ru:o}}Da(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ja:this.Ja,Xa:new R_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ru:[]}}iu(e){return!this.Ga.has(e)&&!!this.Ja.has(e)&&!this.Ja.get(e).hasLocalMutations}tu(e){e&&(e.addedDocuments.forEach((e=>this.Ga=this.Ga.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.Ga=this.Ga.delete(e))),this.current=e.current)}nu(){if(!this.current)return[];const e=this.ja;this.ja=dp(),this.Ja.forEach((e=>{this.iu(e.key)&&(this.ja=this.ja.add(e.key))}));const t=[];return e.forEach((e=>{this.ja.has(e)||t.push(new J_(e))})),this.ja.forEach((n=>{e.has(n)||t.push(new Y_(n))})),t}su(e){this.Ga=e.$s,this.ja=dp();const t=this.Za(e.documents);return this.applyChanges(t,!0)}ou(){return D_.fromInitialDocuments(this.query,this.Ja,this.mutatedKeys,0===this.za,this.hasCachedResults)}}const X_="SyncEngine";class Z_{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class ew{constructor(e){this.key=e,this._u=!1}}class tw{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.au={},this.uu=new tp((e=>Yf(e)),Qf),this.cu=new Map,this.lu=new Set,this.hu=new id(cu.comparator),this.Pu=new Map,this.Tu=new Ry,this.Iu={},this.Eu=new Map,this.du=iy.lr(),this.onlineState="Unknown",this.Au=void 0}get isPrimaryClient(){return!0===this.Au}}async function nw(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Pw(e);let i;const s=r.uu.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ou()):i=await iw(r,t,n,!0),i}async function rw(e,t){const n=Pw(e);await iw(n,t,!0,!1)}async function iw(e,t,n,r){const i=await cv(e.localStore,Hf(t)),s=i.targetId,o=e.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await sw(e,t,s,"current"===o,i.resumeToken)),e.isPrimaryClient&&n&&n_(e.remoteStore,i),a}async function sw(e,t,n,r,i){e.Ru=(t,n,r)=>async function(e,t,n,r){let i=t.view.Za(n);i.Cs&&(i=await hv(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.Za(n,i)})));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return yw(e,t.targetId,a.ru),a.snapshot}(e,t,n,r);const s=await hv(e.localStore,t,!0),o=new $_(t,s.$s),a=o.Za(s.documents),l=lg.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=o.applyChanges(a,e.isPrimaryClient,l);yw(e,n,c.ru);const u=new Z_(t,n,o);return e.uu.set(t,u),e.cu.has(n)?e.cu.get(n).push(t):e.cu.set(n,[t]),c.snapshot}async function ow(e,t,n){const r=Dc(e),i=r.uu.get(t),s=r.cu.get(i.targetId);if(s.length>1)return r.cu.set(i.targetId,s.filter((e=>!Qf(e,t)))),void r.uu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await uv(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&r_(r.remoteStore,i.targetId),gw(r,i.targetId)})).catch(Tu)):(gw(r,i.targetId),await uv(r.localStore,i.targetId,!0))}async function aw(e,t){const n=Dc(e),r=n.uu.get(t),i=n.cu.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),r_(n.remoteStore,r.targetId))}async function lw(e,t){const n=Dc(e);try{const e=await function(e,t){const n=Dc(e),r=t.snapshotVersion;let i=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.Bs.newChangeBuffer({trackRemovals:!0});i=n.xs;const o=[];t.targetChanges.forEach(((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.Ti.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.Ti.addMatchingKeys(e,s.addedDocuments,a))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(dd.EMPTY_BYTE_STRING,ru.min()).withLastLimboFreeSnapshotVersion(ru.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,s)&&o.push(n.Ti.updateTargetData(e,c))}));let a=rp(),l=dp();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(av(e,s,t.documentUpdates).next((e=>{a=e.qs,l=e.Qs}))),!r.isEqual(ru.min())){const t=n.Ti.getLastRemoteSnapshotVersion(e).next((t=>n.Ti.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return Eu.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.xs=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Pu.get(t);r&&(Rc(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r._u=!0:e.modifiedDocuments.size>0?Rc(r._u,14607):e.removedDocuments.size>0&&(Rc(r._u,42227),r._u=!1))})),await ww(n,e,t)}catch(e){await Tu(e)}}function cw(e,t,n){const r=Dc(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.uu.forEach(((n,r)=>{const i=r.view.Da(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Dc(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.ya)i.Da(t)&&(r=!0)})),r&&z_(n)}(r.eventManager,t),e.length&&r.au.j_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function uw(e,t,n){const r=Dc(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Pu.get(t),s=i&&i.key;if(s){let e=new id(cu.comparator);e=e.insert(s,sf.newNoDocument(s,ru.min()));const n=dp().add(s),i=new ag(ru.min(),new Map,new id(Qc),e,n);await lw(r,i),r.hu=r.hu.remove(s),r.Pu.delete(t),_w(r)}else await uv(r.localStore,t,!1).then((()=>gw(r,t,n))).catch(Tu)}async function hw(e,t){const n=Dc(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Dc(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.Bs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=Eu.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);Rc(null!==s,48541),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=dp();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);pw(n,r,null),fw(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ww(n,e)}catch(e){await Tu(e)}}async function dw(e,t,n){const r=Dc(e);try{const e=await function(e,t){const n=Dc(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Rc(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);pw(r,t,n),fw(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await ww(r,e)}catch(n){await Tu(n)}}function fw(e,t){(e.Eu.get(t)||[]).forEach((e=>{e.resolve()})),e.Eu.delete(t)}function pw(e,t,n){const r=Dc(e);let i=r.Iu[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Iu[r.currentUser.toKey()]=i}}function gw(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.cu.get(t))e.uu.delete(r),n&&e.au.Vu(r,n);e.cu.delete(t),e.isPrimaryClient&&e.Tu.Hr(t).forEach((t=>{e.Tu.containsKey(t)||mw(e,t)}))}function mw(e,t){e.lu.delete(t.path.canonicalString());const n=e.hu.get(t);null!==n&&(r_(e.remoteStore,n),e.hu=e.hu.remove(t),e.Pu.delete(n),_w(e))}function yw(e,t,n){for(const r of n)r instanceof Y_?(e.Tu.addReference(r.key,t),vw(e,r)):r instanceof J_?(kc(X_,"Document no longer in limbo: "+r.key),e.Tu.removeReference(r.key,t),e.Tu.containsKey(r.key)||mw(e,r.key)):Ac(19791,{mu:r})}function vw(e,t){const n=t.key,r=n.path.canonicalString();e.hu.get(n)||e.lu.has(r)||(kc(X_,"New document in limbo: "+n),e.lu.add(r),_w(e))}function _w(e){for(;e.lu.size>0&&e.hu.size<e.maxConcurrentLimboResolutions;){const t=e.lu.values().next().value;e.lu.delete(t);const n=new cu(ou.fromString(t)),r=e.du.next();e.Pu.set(r,new ew(n)),e.hu=e.hu.insert(n,r),n_(e.remoteStore,new Jg(Hf(Vf(n.path)),r,"TargetPurposeLimboResolution",Uu.le))}}async function ww(e,t,n){const r=Dc(e),i=[],s=[],o=[];r.uu.isEmpty()||(r.uu.forEach(((e,a)=>{o.push(r.Ru(a,t,n).then((e=>{var t;if((e||n)&&r.isPrimaryClient){const i=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(a.targetId,i?"current":"not-current")}if(e){i.push(e);const t=Zy.Rs(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.au.j_(i),await async function(e,t){const n=Dc(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>Eu.forEach(t,(t=>Eu.forEach(t.ds,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>Eu.forEach(t.As,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!Au(e))throw e;kc(nv,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.xs.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.xs=n.xs.insert(e,i)}}}(r.localStore,s))}async function bw(e,t){const n=Dc(e);if(!n.currentUser.isEqual(t)){kc(X_,"User change. New user:",t.toKey());const e=await sv(n.localStore,t);n.currentUser=t,function(e,t){e.Eu.forEach((e=>{e.forEach((e=>{e.reject(new Lc(Oc.CANCELLED,t))}))})),e.Eu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await ww(n,e.ks)}}function Tw(e,t){const n=Dc(e),r=n.Pu.get(t);if(r&&r._u)return dp().add(r.key);{let e=dp();const r=n.cu.get(t);if(!r)return e;for(const t of r){const r=n.uu.get(t);e=e.unionWith(r.view.Ya)}return e}}async function Ew(e,t){const n=Dc(e),r=await hv(n.localStore,t.query,!0),i=t.view.su(r);return n.isPrimaryClient&&yw(n,t.targetId,i.ru),i}async function Iw(e,t){const n=Dc(e);return fv(n.localStore,t).then((e=>ww(n,e)))}async function Sw(e,t,n,r){const i=Dc(e),s=await function(e,t){const n=Dc(e),r=Dc(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.tr(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):Eu.resolve(null)))))}(i.localStore,t);null!==s?("pending"===n?await m_(i.remoteStore):"acknowledged"===n||"rejected"===n?(pw(i,t,r||null),fw(i,t),function(e,t){Dc(Dc(e).mutationQueue).sr(t)}(i.localStore,t)):Ac(6720,"Unknown batchState",{fu:n}),await ww(i,s)):kc(X_,"Cannot apply mutation batch with id: "+t)}async function kw(e,t,n){const r=Dc(e),i=[],s=[];for(const o of t){let e;const t=r.cu.get(o);if(t&&0!==t.length){e=await cv(r.localStore,Hf(t[0]));for(const e of t){const t=r.uu.get(e),n=await Ew(r,t);n.snapshot&&s.push(n.snapshot)}}else{const t=await dv(r.localStore,o);e=await cv(r.localStore,t),await sw(r,Cw(t),o,!1,e.resumeToken)}i.push(e)}return r.au.j_(s),i}function Cw(e){return jf(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function xw(e){return function(e){return Dc(Dc(e).persistence).Is()}(Dc(e).localStore)}async function Nw(e,t,n,r){const i=Dc(e);if(i.Au)return void kc(X_,"Ignoring unexpected query state notification.");const s=i.cu.get(t);if(s&&s.length>0)switch(n){case"current":case"not-current":{const e=await fv(i.localStore,Xf(s[0])),r=ag.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,dd.EMPTY_BYTE_STRING);await ww(i,e,r);break}case"rejected":await uv(i.localStore,t,!0),gw(i,t,r);break;default:Ac(64155,n)}}async function Aw(e,t,n){const r=Pw(e);if(r.Au){for(const e of t){if(r.cu.has(e)&&r.sharedClientState.isActiveQueryTarget(e)){kc(X_,"Adding an already active target "+e);continue}const t=await dv(r.localStore,e),n=await cv(r.localStore,t);await sw(r,Cw(t),n.targetId,!1,n.resumeToken),n_(r.remoteStore,n)}for(const e of n)r.cu.has(e)&&await uv(r.localStore,e,!1).then((()=>{r_(r.remoteStore,e),gw(r,e)})).catch(Tu)}}function Pw(e){const t=Dc(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=lw.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Tw.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=uw.bind(null,t),t.au.j_=j_.bind(null,t.eventManager),t.au.Vu=V_.bind(null,t.eventManager),t}function Rw(e){const t=Dc(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=hw.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=dw.bind(null,t),t}class Dw{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Bv(e.databaseInfo.databaseId),this.sharedClientState=this.pu(e),this.persistence=this.yu(e),await this.persistence.start(),this.localStore=this.wu(e),this.gcScheduler=this.Su(e,this.localStore),this.indexBackfillerScheduler=this.bu(e,this.localStore)}Su(e,t){return null}bu(e,t){return null}wu(e){return iv(this.persistence,new tv,e.initialUser,this.serializer)}yu(e){return new Uy(Vy.fi,this.serializer)}pu(e){return new Nv}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Dw.provider={build:()=>new Dw};class Ow extends Dw{constructor(e){super(),this.cacheSizeBytes=e}Su(e,t){Rc(this.persistence.referenceDelegate instanceof zy,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new fy(n,e.asyncQueue,t)}yu(e){const t=void 0!==this.cacheSizeBytes?Jm.withCacheSize(this.cacheSizeBytes):Jm.DEFAULT;return new Uy((e=>zy.fi(e,t)),this.serializer)}}class Lw extends Dw{constructor(e,t,n){super(),this.Du=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Du.initialize(this,e),await Rw(this.Du.syncEngine),await m_(this.Du.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}wu(e){return iv(this.persistence,new tv,e.initialUser,this.serializer)}Su(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new fy(n,e.asyncQueue,t)}bu(e,t){const n=new Fu(t,this.persistence);return new Mu(e.asyncQueue,n)}yu(e){const t=Xy(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Jm.withCacheSize(this.cacheSizeBytes):Jm.DEFAULT;return new Yy(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,zv(),qv(),this.serializer,this.sharedClientState,!!this.forceOwnership)}pu(e){return new Nv}}class Mw extends Lw{constructor(e,t){super(e,t,!1),this.Du=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Du.syncEngine;this.sharedClientState instanceof xv&&(this.sharedClientState.syncEngine={Co:Sw.bind(null,t),Fo:Nw.bind(null,t),Mo:Aw.bind(null,t),Is:xw.bind(null,t),vo:Iw.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ji((async e=>{await async function(e,t){const n=Dc(e);if(Pw(n),Rw(n),!0===t&&!0!==n.Au){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await kw(n,e.toArray());n.Au=!0,await k_(n.remoteStore,!0);for(const r of t)n_(n.remoteStore,r)}else if(!1===t&&!1!==n.Au){const e=[];let t=Promise.resolve();n.cu.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(gw(n,i),uv(n.localStore,i,!0)))),r_(n.remoteStore,i)})),await t,await kw(n,e),function(e){const t=Dc(e);t.Pu.forEach(((e,n)=>{r_(t.remoteStore,n)})),t.Tu.Jr(),t.Pu=new Map,t.hu=new id(cu.comparator)}(n),n.Au=!1,await k_(n.remoteStore,!1)}}(this.Du.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}pu(e){const t=zv();if(!xv.C(t))throw new Lc(Oc.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Xy(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new xv(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class Fw{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>cw(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=bw.bind(null,this.syncEngine),await k_(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new L_}createDatastore(e){const t=Bv(e.databaseInfo.databaseId),n=function(e){return new Vv(e)}(e.databaseInfo);return function(e,t,n,r){return new Jv(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Zv(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>cw(this.syncEngine,e,0)),Rv.C()?new Rv:new Av)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new tw(e,t,n,r,i,s);return o&&(a.Au=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=Dc(e);kc(Xv,"RemoteStore shutting down."),t.Ta.add(5),await t_(t),t.Ea.shutdown(),t.da.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}function Uw(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}Fw.provider={build:()=>new Fw};class jw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.vu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.vu(this.observer.error,e):Cc("Uncaught Error in snapshot listener:",e.toString()))}Cu(){this.muted=!0}vu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class Vw{constructor(e,t){this.Fu=e,this.serializer=t,this.metadata=new Mc,this.buffer=new Uint8Array,this.Mu=new TextDecoder("utf-8"),this.xu().then((e=>{e&&e.qa()?this.metadata.resolve(e.ka.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.ka))))}),(e=>this.metadata.reject(e)))}close(){return this.Fu.cancel()}async getMetadata(){return this.metadata.promise}async gu(){return await this.getMetadata(),this.xu()}async xu(){const e=await this.Ou();if(null===e)return null;const t=this.Mu.decode(e),n=Number(t);isNaN(n)&&this.Nu("length string (".concat(t,") is not valid number"));const r=await this.Bu(n);return new W_(JSON.parse(r),e.length+n)}Lu(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async Ou(){for(;this.Lu()<0&&!await this.ku(););if(0===this.buffer.length)return null;const e=this.Lu();e<0&&this.Nu("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Bu(e){for(;this.buffer.length<e;)await this.ku()&&this.Nu("Reached the end of bundle when more is expected.");const t=this.Mu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}Nu(e){throw this.Fu.cancel(),new Error("Invalid bundle format: ".concat(e))}async ku(){const e=await this.Fu.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class zw{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Lc(Oc.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=Dc(e),r={documents:t.map((e=>xg(n.serializer,e)))},i=await n.Yo("BatchGetDocuments",n.serializer.databaseId,ou.emptyPath(),r,t.length),s=new Map;i.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){Rc(!!t.found,43571),t.found.name,t.found.updateTime;const n=Ng(e,t.found.name),r=Ig(t.found.updateTime),i=t.found.createTime?Ig(t.found.createTime):ru.min(),s=new nf({mapValue:{fields:t.found.fields}});return sf.newFoundDocument(n,r,i,s)}(e,t):"missing"in t?function(e,t){Rc(!!t.missing,3894),Rc(!!t.readTime,22933);const n=Ng(e,t.missing),r=Ig(t.readTime);return sf.newNoDocument(n,r)}(e,t):Ac(7234,{result:t})}(n.serializer,e);s.set(t.key.toString(),t)}));const o=[];return t.forEach((e=>{const t=s.get(e.toString());Rc(!!t,55234,{key:e}),o.push(t)})),o}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new Wp(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=cu.fromPath(t);this.mutations.push(new Kp(n,this.precondition(n)))})),await async function(e,t){const n=Dc(e),r={writes:t.map((e=>Mg(n.serializer,e)))};await n.zo("Commit",n.serializer.databaseId,ou.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ac(50498,{qu:e.constructor.name});t=ru.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Lc(Oc.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ru.min())?Rp.exists(!1):Rp.updateTime(t):Rp.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ru.min()))throw new Lc(Oc.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Rp.updateTime(t)}return Rp.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class qw{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.Qu=n.maxAttempts,this.C_=new Hv(this.asyncQueue,"transaction_retry")}$u(){this.Qu-=1,this.Uu()}Uu(){this.C_.f_((async()=>{const e=new zw(this.datastore),t=this.Ku(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.Wu(e)}))))})).catch((e=>{this.Wu(e)}))}))}Ku(e){try{const t=this.updateFunction(e);return!Vu(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Wu(e){this.Qu>0&&this.Gu(e)?(this.Qu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Uu(),Promise.resolve())))):this.deferred.reject(e)}Gu(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Zp(t)}return!1}}const Bw="FirestoreClient";class Hw{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Tc.UNAUTHENTICATED,this.clientId=Gc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async e=>{kc(Bw,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(kc(Bw,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Mc;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(JM){const n=A_(JM,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Ww(e,t){e.asyncQueue.verifyOperationInProgress(),kc(Bw,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await sv(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function Kw(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Gw(e);kc(Bw,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>S_(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>S_(t.remoteStore,n))),e._onlineComponents=t}async function Gw(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){kc(Bw,"Using user provided OfflineComponentProvider");try{await Ww(e,e._uninitializedComponentsProvider._offline)}catch(JM){const n=JM;if(!function(e){return"FirebaseError"===e.name?e.code===Oc.FAILED_PRECONDITION||e.code===Oc.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;xc("Error using user provided cache. Falling back to memory cache: "+n),await Ww(e,new Dw)}}else kc(Bw,"Using default OfflineComponentProvider"),await Ww(e,new Ow(void 0));return e._offlineComponents}async function Qw(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(kc(Bw,"Using user provided OnlineComponentProvider"),await Kw(e,e._uninitializedComponentsProvider._online)):(kc(Bw,"Using default OnlineComponentProvider"),await Kw(e,new Fw))),e._onlineComponents}function Yw(e){return Gw(e).then((e=>e.persistence))}function Jw(e){return Gw(e).then((e=>e.localStore))}function $w(e){return Qw(e).then((e=>e.remoteStore))}function Xw(e){return Qw(e).then((e=>e.syncEngine))}function Zw(e){return Qw(e).then((e=>e.datastore))}async function eb(e){const t=await Qw(e),n=t.eventManager;return n.onListen=nw.bind(null,t.syncEngine),n.onUnlisten=ow.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=rw.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=aw.bind(null,t.syncEngine),n}function tb(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Mc;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new jw({next:a=>{s.Cu(),t.enqueueAndForget((()=>U_(e,o)));const l=a.docs.has(n);!l&&a.fromCache?i.reject(new Lc(Oc.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&a.fromCache&&r&&"server"===r.source?i.reject(new Lc(Oc.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:e=>i.reject(e)}),o=new H_(Vf(n.path),s,{includeMetadataChanges:!0,La:!0});return F_(e,o)}(await eb(e),e.asyncQueue,t,n,r))),r.promise}function nb(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Mc;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new jw({next:n=>{s.Cu(),t.enqueueAndForget((()=>U_(e,o))),n.fromCache&&"server"===r.source?i.reject(new Lc(Oc.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new H_(n,s,{includeMetadataChanges:!0,La:!0});return F_(e,o)}(await eb(e),e.asyncQueue,t,n,r))),r.promise}function rb(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?Kc().encode(e):e,function(e,t){return new Vw(e,t)}(function(e,t){if(e instanceof Uint8Array)return Uw(e,t);if(e instanceof ArrayBuffer)return Uw(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,Bv(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=Dc(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=Dc(e),r=Ig(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.Ei.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(Q_(r));const i=new G_(r,e.localStore,t.serializer);let s=await t.gu();for(;s;){const e=await i.$a(s);e&&n._updateProgress(e),s=await t.gu()}const o=await i.complete();return await ww(e,o.Wa,void 0),await function(e,t){const n=Dc(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.Ei.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(o.progress),Promise.resolve(o.Ka)}catch(e){return xc(X_,"Loading bundle failed with ".concat(e)),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then((e=>{r.sharedClientState.notifyBundleLoaded(e)}))}(await Xw(e),i,r)}))}function ib(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const sb=new Map;function ob(e,t,n){if(!n)throw new Lc(Oc.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function ab(e,t,n,r){if(!0===t&&!0===r)throw new Lc(Oc.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function lb(e){if(!cu.isDocumentKey(e))throw new Lc(Oc.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function cb(e){if(cu.isDocumentKey(e))throw new Lc(Oc.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function ub(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Ac(12329,{type:typeof e})}function hb(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Lc(Oc.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ub(e);throw new Lc(Oc.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function db(e,t){if(t<=0)throw new Lc(Oc.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}const fb="firestore.googleapis.com",pb=!0;class gb{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Lc(Oc.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=fb,this.ssl=pb}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:pb;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=Ym;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<uy)throw new Lc(Oc.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ab("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ib(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Lc(Oc.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Lc(Oc.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Lc(Oc.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class mb{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Lc(Oc.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Lc(Oc.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gb(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Uc;switch(e.type){case"firstParty":return new qc(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Lc(Oc.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,Gt("Firestore",this._settings.isUsingEmulator),this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=sb.get(e);t&&(kc("ComponentProvider","Removing Datastore"),sb.delete(e),t.terminate())}(this),Promise.resolve()}}function yb(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;e=hb(e,mb);const s=qt(t),o=e._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:e._getEmulatorOptions()}),l="".concat(t,":").concat(n);o.host!==fb&&o.host!==l&&xc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},o),{host:l,ssl:s,emulatorOptions:r});if(!vn(c,a)&&(e._setSettings(c),s&&(Bt("https://".concat(l)),Gt("Firestore",!0)),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Tc.MOCK_USER;else{t=Ht(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Lc(Oc.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Tc(s)}e._authCredentials=new jc(new Fc(t,n))}}class vb{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new vb(this.firestore,e,this._query)}}class _b{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wb(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new _b(this.firestore,e,this._key)}}class wb extends vb{constructor(e,t,n){super(e,t,Vf(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new _b(this.firestore,null,new cu(e))}withConverter(e){return new wb(this.firestore,e,this._path)}}function bb(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Dn(e),ob("collection","path",t),e instanceof mb){const n=ou.fromString(t,...r);return cb(n),new wb(e,null,n)}{if(!(e instanceof _b||e instanceof wb))throw new Lc(Oc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ou.fromString(t,...r));return cb(n),new wb(e.firestore,null,n)}}function Tb(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Dn(e),1===arguments.length&&(t=Gc.newId()),ob("doc","path",t),e instanceof mb){const n=ou.fromString(t,...r);return lb(n),new _b(e,null,new cu(n))}{if(!(e instanceof _b||e instanceof wb))throw new Lc(Oc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ou.fromString(t,...r));return lb(n),new _b(e.firestore,e instanceof wb?e.converter:null,new cu(n))}}function Eb(e,t){return e=Dn(e),t=Dn(t),(e instanceof _b||e instanceof wb)&&(t instanceof _b||t instanceof wb)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Ib(e,t){return e=Dn(e),t=Dn(t),e instanceof vb&&t instanceof vb&&e.firestore===t.firestore&&Qf(e._query,t._query)&&e.converter===t.converter}const Sb="AsyncQueue";class kb{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.zu=[],this.ju=!1,this.Hu=[],this.Ju=null,this.Yu=!1,this.Zu=!1,this.Xu=[],this.C_=new Hv(this,"async_queue_retry"),this.ec=()=>{const e=qv();e&&kc(Sb,"Visibility state changed to "+e.visibilityState),this.C_.p_()},this.tc=e;const t=qv();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.ec)}get isShuttingDown(){return this.ju}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.nc(),this.rc(e)}enterRestrictedMode(e){if(!this.ju){this.ju=!0,this.Zu=e||!1;const t=qv();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.ec)}}enqueue(e){if(this.nc(),this.ju)return new Promise((()=>{}));const t=new Mc;return this.rc((()=>this.ju&&this.Zu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.zu.push(e),this.sc())))}async sc(){if(0!==this.zu.length){try{await this.zu[0](),this.zu.shift(),this.C_.reset()}catch($M){if(!Au($M))throw $M;kc(Sb,"Operation failed with retryable error: "+$M)}this.zu.length>0&&this.C_.f_((()=>this.sc()))}}rc(e){const t=this.tc.then((()=>(this.Yu=!0,e().catch((e=>{throw this.Ju=e,this.Yu=!1,Cc("INTERNAL UNHANDLED ERROR: ",Cb(e)),e})).then((e=>(this.Yu=!1,e))))));return this.tc=t,t}enqueueAfterDelay(e,t,n){this.nc(),this.Xu.indexOf(e)>-1&&(t=0);const r=N_.createAndSchedule(this,e,t,n,(e=>this.oc(e)));return this.Hu.push(r),r}nc(){this.Ju&&Ac(47125,{_c:Cb(this.Ju)})}verifyOperationInProgress(){}async ac(){let e;do{e=this.tc,await e}while(e!==this.tc)}uc(e){for(const t of this.Hu)if(t.timerId===e)return!0;return!1}cc(e){return this.ac().then((()=>{this.Hu.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.Hu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ac()}))}lc(e){this.Xu.push(e)}oc(e){const t=this.Hu.indexOf(e);this.Hu.splice(t,1)}}function Cb(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}function xb(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class Nb{constructor(){this._progressObserver={},this._taskCompletionResolver=new Mc,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ab extends mb{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new kb,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new kb(e),this._firestoreClient=void 0,await e}}}function Pb(e){if(e._terminated)throw new Lc(Oc.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Rb(e),e._firestoreClient}function Rb(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new Id(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,ib(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new Hw(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}function Db(e,t,n){if((e=hb(e,Ab))._firestoreClient||e._terminated)throw new Lc(Oc.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(e._componentsProvider||e._getSettings().localCache)throw new Lc(Oc.FAILED_PRECONDITION,"SDK cache is already specified.");e._componentsProvider={_online:t,_offline:n},Rb(e)}function Ob(e){return function(e){const t=new Mc;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=Dc(e);l_(n.remoteStore)||kc(X_,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=Dc(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(e===ju)return void t.resolve();const r=n.Eu.get(e)||[];r.push(t),n.Eu.set(e,r)}catch(e){const n=A_(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await Xw(e),t))),t.promise}(Pb(e=hb(e,Ab)))}function Lb(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await Yw(e),n=await $w(e);return t.setNetworkEnabled(!0),function(e){const t=Dc(e);return t.Ta.delete(0),e_(t)}(n)}))}(Pb(e=hb(e,Ab)))}function Mb(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await Yw(e),n=await $w(e);return t.setNetworkEnabled(!1),async function(e){const t=Dc(e);t.Ta.add(0),await t_(t),t.da.set("Offline")}(n)}))}(Pb(e=hb(e,Ab)))}function Fb(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=Dc(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.Ei.getNamedQuery(e,t)))}(await Jw(e),t)))}(Pb(e=hb(e,Ab)),t).then((t=>t?new vb(e,null,t.query):null))}class Ub{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ub(dd.fromBase64String(e))}catch(e){throw new Lc(Oc.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Ub(dd.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class jb{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Lc(Oc.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new lu(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Vb{constructor(e){this._methodName=e}}class zb{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Lc(Oc.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Lc(Oc.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Qc(this._lat,e._lat)||Qc(this._long,e._long)}}class qb{constructor(e){this._values=(e||[]).map((e=>e))}toArray(){return this._values.map((e=>e))}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const Bb=/^__.*__$/;class Hb{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new zp(e,this.data,this.fieldMask,t,this.fieldTransforms):new Vp(e,this.data,t,this.fieldTransforms)}}class Wb{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new zp(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Kb(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ac(40011,{hc:e})}}class Gb{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Pc(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get hc(){return this.settings.hc}Tc(e){return new Gb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ic(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Tc({path:n,Ec:!1});return r.dc(e),r}Ac(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Tc({path:n,Ec:!1});return r.Pc(),r}Rc(e){return this.Tc({path:void 0,Ec:!0})}Vc(e){return fT(e,this.settings.methodName,this.settings.mc||!1,this.path,this.settings.fc)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Pc(){if(this.path)for(let e=0;e<this.path.length;e++)this.dc(this.path.get(e))}dc(e){if(0===e.length)throw this.Vc("Document fields must not be empty");if(Kb(this.hc)&&Bb.test(e))throw this.Vc('Document fields cannot begin and end with "__"')}}class Qb{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Bv(e)}gc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Gb({hc:e,methodName:t,fc:n,path:lu.emptyPath(),Ec:!1,mc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Yb(e){const t=e._freezeSettings(),n=Bv(e._databaseId);return new Qb(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Jb(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.gc(s.merge||s.mergeFields?2:0,t,n,i);cT("Data must be an object, but it was:",o,r);const a=aT(r,o);let l,c;if(s.merge)l=new ud(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=uT(t,r,n);if(!o.contains(i))throw new Lc(Oc.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));pT(e,i)||e.push(i)}l=new ud(e),c=o.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=o.fieldTransforms;return new Hb(new nf(a),l,c)}class $b extends Vb{_toFieldTransform(e){if(2!==e.hc)throw 1===e.hc?e.Vc("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Vc("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $b}}function Xb(e,t,n){return new Gb({hc:3,fc:t.settings.fc,methodName:e._methodName,Ec:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class Zb extends Vb{_toFieldTransform(e){return new Ap(e.path,new Tp)}isEqual(e){return e instanceof Zb}}class eT extends Vb{constructor(e,t){super(e),this.yc=t}_toFieldTransform(e){const t=Xb(this,e,!0),n=this.yc.map((e=>oT(e,t))),r=new Ep(n);return new Ap(e.path,r)}isEqual(e){return e instanceof eT&&vn(this.yc,e.yc)}}class tT extends Vb{constructor(e,t){super(e),this.yc=t}_toFieldTransform(e){const t=Xb(this,e,!0),n=this.yc.map((e=>oT(e,t))),r=new Sp(n);return new Ap(e.path,r)}isEqual(e){return e instanceof tT&&vn(this.yc,e.yc)}}class nT extends Vb{constructor(e,t){super(e),this.wc=t}_toFieldTransform(e){const t=new Cp(e.serializer,yp(e.serializer,this.wc));return new Ap(e.path,t)}isEqual(e){return e instanceof nT&&this.wc===e.wc}}function rT(e,t,n,r){const i=e.gc(1,t,n);cT("Data must be an object, but it was:",i,r);const s=[],o=nf.empty();nd(r,((e,r)=>{const a=dT(t,e,n);r=Dn(r);const l=i.Ac(a);if(r instanceof $b)s.push(a);else{const e=oT(r,l);null!=e&&(s.push(a),o.set(a,e))}}));const a=new ud(s);return new Wb(o,a,i.fieldTransforms)}function iT(e,t,n,r,i,s){const o=e.gc(1,t,n),a=[uT(t,r,n)],l=[i];if(s.length%2!=0)throw new Lc(Oc.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<s.length;d+=2)a.push(uT(t,s[d])),l.push(s[d+1]);const c=[],u=nf.empty();for(let d=a.length-1;d>=0;--d)if(!pT(c,a[d])){const e=a[d];let t=l[d];t=Dn(t);const n=o.Ac(e);if(t instanceof $b)c.push(e);else{const r=oT(t,n);null!=r&&(c.push(e),u.set(e,r))}}const h=new ud(c);return new Wb(u,h,o.fieldTransforms)}function sT(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return oT(n,e.gc(r?4:3,t))}function oT(e,t){if(lT(e=Dn(e)))return cT("Unsupported field value:",t,e),aT(e,t);if(e instanceof Vb)return function(e,t){if(!Kb(t.hc))throw t.Vc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Vc("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Ec&&4!==t.hc)throw t.Vc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=oT(i,t.Rc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Dn(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return yp(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=nu.fromDate(e);return{timestampValue:bg(t.serializer,n)}}if(e instanceof nu){const n=new nu(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:bg(t.serializer,n)}}if(e instanceof zb)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Ub)return{bytesValue:Tg(t.serializer,e._byteString)};if(e instanceof _b){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Vc("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Sg(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof qb)return function(e,t){return{mapValue:{fields:{[Cd]:{stringValue:Ad},[Pd]:{arrayValue:{values:e.toArray().map((e=>{if("number"!=typeof e)throw t.Vc("VectorValues must only contain numeric values.");return gp(t.serializer,e)}))}}}}}}(e,t);throw t.Vc("Unsupported field value: ".concat(ub(e)))}(e,t)}function aT(e,t){const n={};return rd(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):nd(e,((e,r)=>{const i=oT(r,t.Ic(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function lT(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof nu||e instanceof zb||e instanceof Ub||e instanceof _b||e instanceof Vb||e instanceof qb)}function cT(e,t,n){if(!lT(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=ub(n);throw"an object"===r?t.Vc(e+" a custom object"):t.Vc(e+" "+r)}}function uT(e,t,n){if((t=Dn(t))instanceof jb)return t._internalPath;if("string"==typeof t)return dT(e,t);throw fT("Field path arguments must be of type string or ",e,!1,void 0,n)}const hT=new RegExp("[~\\*/\\[\\]]");function dT(e,t,n){if(t.search(hT)>=0)throw fT("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new jb(...t.split("."))._internalPath}catch(ZM){throw fT("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function fT(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=" in field ".concat(r)),o&&(l+=" in document ".concat(i)),l+=")"),new Lc(Oc.INVALID_ARGUMENT,a+e+l)}function pT(e,t){return e.some((e=>e.isEqual(t)))}class gT{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new _b(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new mT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(yT("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class mT extends gT{data(){return super.data()}}function yT(e,t){return"string"==typeof t?dT(e,t):t instanceof jb?t._internalPath:t._delegate._internalPath}function vT(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Lc(Oc.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _T{}class wT extends _T{}function bT(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof _T&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof IT)).length,n=e.filter((e=>e instanceof TT)).length;if(t>1||t>0&&n>0)throw new Lc(Oc.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class TT extends wT{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new TT(e,t,n)}_apply(e){const t=this._parse(e);return RT(e._query,t),new vb(e.firestore,e.converter,Kf(e._query,t))}_parse(e){const t=Yb(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Lc(Oc.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){PT(o,s);const t=[];for(const n of o)t.push(AT(r,e,n));a={arrayValue:{values:t}}}else a=AT(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||PT(o,s),a=sT(n,t,o,"in"===s||"not-in"===s);return df.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function ET(e,t,n){const r=t,i=yT("where",e);return TT._create(i,r,n)}class IT extends _T{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new IT(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:ff.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)RT(n,i),n=Kf(n,i)}(e._query,t),new vb(e.firestore,e.converter,Kf(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class ST extends wT{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new ST(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Lc(Oc.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Lc(Oc.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new cf(t,n)}(e._query,this._field,this._direction);return new vb(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Uf(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class kT extends wT{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new kT(e,t,n)}_apply(e){return new vb(e.firestore,e.converter,Gf(e._query,this._limit,this._limitType))}}class CT extends wT{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new CT(e,t,n)}_apply(e){const t=NT(e,this.type,this._docOrFields,this._inclusive);return new vb(e.firestore,e.converter,function(e,t){return new Uf(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class xT extends wT{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new xT(e,t,n)}_apply(e){const t=NT(e,this.type,this._docOrFields,this._inclusive);return new vb(e.firestore,e.converter,function(e,t){return new Uf(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function NT(e,t,n,r){if(n[0]=Dn(n[0]),n[0]instanceof gT)return function(e,t,n,r,i){if(!r)throw new Lc(Oc.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const s=[];for(const o of Bf(e))if(o.field.isKeyField())s.push(qd(t,r.key));else{const e=r.data.field(o.field);if(bd(e))throw new Lc(Oc.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new Lc(Oc.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}s.push(e)}return new of(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=Yb(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new Lc(Oc.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const a=[];for(let l=0;l<i.length;l++){const s=i[l];if(o[l].field.isKeyField()){if("string"!=typeof s)throw new Lc(Oc.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof s));if(!qf(e)&&-1!==s.indexOf("/"))throw new Lc(Oc.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(s,"' contains a slash."));const n=e.path.child(ou.fromString(s));if(!cu.isDocumentKey(n))throw new Lc(Oc.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const i=new cu(n);a.push(qd(t,i))}else{const e=sT(n,r,s);a.push(e)}}return new of(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function AT(e,t,n){if("string"==typeof(n=Dn(n))){if(""===n)throw new Lc(Oc.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qf(t)&&-1!==n.indexOf("/"))throw new Lc(Oc.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(ou.fromString(n));if(!cu.isDocumentKey(r))throw new Lc(Oc.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return qd(e,new cu(r))}if(n instanceof _b)return qd(e,n._key);throw new Lc(Oc.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(ub(n),"."))}function PT(e,t){if(!Array.isArray(e)||0===e.length)throw new Lc(Oc.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function RT(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Lc(Oc.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Lc(Oc.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class DT{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Dd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gd(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(md(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ac(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return nd(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertVectorValue(e){var t,n,r;const i=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t[Pd].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map((e=>gd(e.doubleValue)));return new qb(i)}convertGeoPoint(e){return new zb(gd(e.latitude),gd(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Td(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Ed(e));default:return null}}convertTimestamp(e){const t=pd(e);return new nu(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=ou.fromString(e);Rc(Yg(n),9688,{name:e});const r=new kd(n.get(1),n.get(3)),i=new cu(n.popFirst(5));return r.isEqual(t)||Cc("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function OT(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class LT extends DT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ub(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new _b(this.firestore,null,t)}}class MT{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class FT extends gT{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new UT(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(yT("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class UT extends FT{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class jT{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new MT(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new UT(this._firestore,this._userDataWriter,n.key,n,new MT(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Lc(Oc.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new UT(e._firestore,e._userDataWriter,n.doc.key,n.doc,new MT(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new UT(e._firestore,e._userDataWriter,t.doc.key,t.doc,new MT(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:VT(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function VT(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ac(61501,{type:e})}}function zT(e,t){return e instanceof FT&&t instanceof FT?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof jT&&t instanceof jT&&e._firestore===t._firestore&&Ib(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function qT(e){e=hb(e,_b);const t=hb(e.firestore,Ab);return tb(Pb(t),e._key).then((n=>ZT(t,e,n)))}class BT extends DT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ub(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new _b(this.firestore,null,t)}}function HT(e){e=hb(e,_b);const t=hb(e.firestore,Ab),n=Pb(t),r=new BT(t);return function(e,t){const n=new Mc;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=Dc(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new Lc(Oc.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=A_(e,"Failed to get document '".concat(t," from cache"));n.reject(r)}}(await Jw(e),t,n))),n.promise}(n,e._key).then((n=>new FT(t,r,e._key,n,new MT(null!==n&&n.hasLocalMutations,!0),e.converter)))}function WT(e){e=hb(e,vb);const t=hb(e.firestore,Ab),n=Pb(t),r=new BT(t);return function(e,t){const n=new Mc;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await hv(e,t,!0),i=new $_(t,r.$s),s=i.Za(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=A_(e,"Failed to execute query '".concat(t," against cache"));n.reject(r)}}(await Jw(e),t,n))),n.promise}(n,e._query).then((n=>new jT(t,r,e,n)))}function KT(e,t,n){e=hb(e,_b);const r=hb(e.firestore,Ab),i=OT(e.converter,t,n);return XT(r,[Jb(Yb(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Rp.none())])}function GT(e,t,n){e=hb(e,_b);const r=hb(e.firestore,Ab),i=Yb(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=Dn(t))||t instanceof jb?iT(i,"updateDoc",e._key,t,n,a):rT(i,"updateDoc",e._key,t),XT(r,[s.toMutation(e._key,Rp.exists(!0))])}function QT(e){return XT(hb(e.firestore,Ab),[new Wp(e._key,Rp.none())])}function YT(e,t){const n=hb(e.firestore,Ab),r=Tb(e),i=OT(e.converter,t);return XT(n,[Jb(Yb(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Rp.exists(!1))]).then((()=>r))}function JT(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,o;e=Dn(e);let a={includeMetadataChanges:!1,source:"default"},l=0;"object"!=typeof n[l]||xb(n[l])||(a=n[l],l++);const c={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(xb(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[l+2]=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}let u,h,d;if(e instanceof _b)h=hb(e.firestore,Ab),d=Vf(e._key.path),u={next:t=>{n[l]&&n[l](ZT(h,e,t))},error:n[l+1],complete:n[l+2]};else{const t=hb(e,vb);h=hb(t.firestore,Ab),d=t._query;const r=new BT(h);u={next:e=>{n[l]&&n[l](new jT(h,r,t,e))},error:n[l+1],complete:n[l+2]},vT(e._query)}return function(e,t,n,r){const i=new jw(r),s=new H_(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>F_(await eb(e),s))),()=>{i.Cu(),e.asyncQueue.enqueueAndForget((async()=>U_(await eb(e),s)))}}(Pb(h),d,c,u)}function $T(e,t){return function(e,t){const n=new jw(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){Dc(e).ba.add(t),t.next()}(await eb(e),n))),()=>{n.Cu(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){Dc(e).ba.delete(t)}(await eb(e),n)))}}(Pb(e=hb(e,Ab)),xb(t)?t:{next:t})}function XT(e,t){return function(e,t){const n=new Mc;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=Rw(e);try{const e=await function(e,t){const n=Dc(e),r=nu.now(),i=t.reduce(((e,t)=>e.add(t.key)),dp());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=rp(),l=dp();return n.Bs.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=Up(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new zp(e.key,t,rf(t.value.mapValue),Rp.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:op(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Iu[e.currentUser.toKey()];r||(r=new id(Qc)),r=r.insert(t,n),e.Iu[e.currentUser.toKey()]=r}(r,e.batchId,n),await ww(r,e.changes),await m_(r.remoteStore)}catch(e){const t=A_(e,"Failed to persist write");n.reject(t)}}(await Xw(e),t,n))),n.promise}(Pb(e),t)}function ZT(e,t,n){const r=n.docs.get(t._key),i=new BT(e);return new FT(e,i,t._key,r,new MT(n.hasPendingWrites,n.fromCache),t.converter)}const eE={maxAttempts:5};class tE{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Yb(e)}set(e,t,n){this._verifyNotCommitted();const r=nE(e,this._firestore),i=OT(r.converter,t,n),s=Jb(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,Rp.none())),this}update(e,t,n){this._verifyNotCommitted();const r=nE(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=Dn(t))||t instanceof jb?iT(this._dataReader,"WriteBatch.update",r._key,t,n,o):rT(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,Rp.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=nE(e,this._firestore);return this._mutations=this._mutations.concat(new Wp(t._key,Rp.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Lc(Oc.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function nE(e,t){if((e=Dn(e)).firestore!==t)throw new Lc(Oc.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class rE{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Yb(e)}get(e){const t=nE(e,this._firestore),n=new LT(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return Ac(24041);const r=e[0];if(r.isFoundDocument())return new gT(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new gT(this._firestore,n,t._key,null,t.converter);throw Ac(18433,{doc:r})}))}set(e,t,n){const r=nE(e,this._firestore),i=OT(r.converter,t,n),s=Jb(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n){const r=nE(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=Dn(t))||t instanceof jb?iT(this._dataReader,"Transaction.update",r._key,t,n,o):rT(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=nE(e,this._firestore);return this._transaction.delete(t._key),this}}class iE extends rE{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=nE(e,this._firestore),n=new BT(this._firestore);return super.get(e).then((e=>new FT(this._firestore,n,t._key,e._document,new MT(!1,!1),t.converter)))}}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Ec=e}(ni),Kr(new On("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new Ab(new Vc(e.getProvider("auth-internal")),new Hc(s,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Lc(Oc.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new kd(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),li(wc,bc,e),li(wc,bc,"esm2017")}();const sE=ri({apiKey:"AIzaSyBq-fFZc02anVs21f2TK5R36Lhet4LYqfg",authDomain:"web-labs-713bc.firebaseapp.com",projectId:"web-labs-713bc",storageBucket:"web-labs-713bc.firebasestorage.app",messagingSenderId:"179529533146",appId:"1:179529533146:web:2affe03423b2141d2407e3",measurementId:"G-V198GRXTH1"}),oE=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:si();const t=Gr(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Gr(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(vn(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;ji(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Jl,persistence:[Qa,xa,Da]}),r=Vt("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>rc)return;const r=null===t||void 0===t?void 0:t.token;ic!==r&&(ic=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){Dn(e).beforeAuthStateChanged(t,n)}(n,t,(()=>t(n.currentUser))),function(e,t,n,r){Dn(e).onIdTokenChanged(t,n,r)}(n,(e=>t(e)))}}var i;const s=Ut("auth");return s?co(n,"http://".concat(s)):Gt("Auth",!1),n}(sE),aE=function(e,t){const n="object"==typeof e?e:si(),r="string"==typeof e?e:t||Sd,i=Gr(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const e=(e=>{const t=Ut(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]})("firestore");e&&yb(i,...e)}return i}(sE);var lE=n(579);const cE=function(){const[e,t]=(0,i.useState)(null),n=ge();return(0,i.useEffect)((()=>{const e=_a(oE,(e=>{t(e)}));return()=>e()}),[]),(0,lE.jsx)("nav",{className:"navbar",children:(0,lE.jsxs)("div",{className:"navdiv",children:[(0,lE.jsx)("div",{className:"logo",children:(0,lE.jsx)(mt,{to:"/",children:"LetsAchive"})}),(0,lE.jsxs)("ul",{children:[(0,lE.jsx)("li",{className:"navbar-li",children:(0,lE.jsx)(mt,{to:"/",children:"Home"})}),(0,lE.jsx)("li",{className:"navbar-li",children:(0,lE.jsx)(mt,{to:"/goals",children:"Goals"})}),(0,lE.jsx)("li",{className:"navbar-li",children:(0,lE.jsx)(mt,{to:"/progress",children:"Progress"})}),(0,lE.jsx)("li",{className:"navbar-li",children:(0,lE.jsx)(mt,{to:"/community",children:"Community"})})]}),(0,lE.jsx)("div",{className:"sign-buttons",children:e?(0,lE.jsxs)(lE.Fragment,{children:[(0,lE.jsx)(mt,{to:"/account",children:(0,lE.jsx)("button",{children:"Account"})}),(0,lE.jsx)("button",{onClick:async()=>{try{await function(e){return Dn(e).signOut()}(oE),n("/")}catch(qI){console.error("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0432\u0438\u0445\u043e\u0434\u0443:",qI.message)}},children:"Sign Out"})]}):(0,lE.jsxs)(lE.Fragment,{children:[(0,lE.jsx)(mt,{to:"/login",children:(0,lE.jsx)("button",{children:"Sign In"})}),(0,lE.jsx)(mt,{to:"/register",children:(0,lE.jsx)("button",{children:"Sign Up"})})]})})]})})};const uE=function(){return(0,lE.jsx)("footer",{className:"footer",children:(0,lE.jsx)("div",{className:"container",children:(0,lE.jsxs)("div",{className:"row",children:[(0,lE.jsxs)("div",{className:"footer-col",children:[(0,lE.jsx)("h4",{children:"Company"}),(0,lE.jsxs)("ul",{children:[(0,lE.jsx)("li",{children:(0,lE.jsx)("a",{href:"#",children:"about us"})}),(0,lE.jsx)("li",{children:(0,lE.jsx)("a",{href:"#",children:"privacy policy"})})]})]}),(0,lE.jsxs)("div",{className:"footer-col",children:[(0,lE.jsx)("h4",{children:"Get help"}),(0,lE.jsxs)("ul",{children:[(0,lE.jsx)("li",{children:(0,lE.jsx)("a",{href:"#",children:"FAQ"})}),(0,lE.jsx)("li",{children:(0,lE.jsx)("a",{href:"#",children:"returns"})}),(0,lE.jsx)("li",{children:(0,lE.jsx)("a",{href:"#",children:"payment options"})})]})]}),(0,lE.jsxs)("div",{className:"footer-col",children:[(0,lE.jsx)("h4",{children:"Follow us"}),(0,lE.jsxs)("div",{className:"social-links",children:[(0,lE.jsx)("a",{className:"facebook",href:"#",children:(0,lE.jsx)("i",{className:"fab fa-facebook-f"})}),(0,lE.jsx)("a",{className:"x",href:"#",children:(0,lE.jsx)("i",{className:"fab fa-x"})}),(0,lE.jsx)("a",{className:"instagram",href:"#",children:(0,lE.jsx)("i",{className:"fab fa-instagram"})}),(0,lE.jsx)("a",{className:"linkedin",href:"#",children:(0,lE.jsx)("i",{className:"fab fa-linkedin"})})]})]})]})})})},hE=n.p+"static/media/discipline-focus.a7724e47e9e9a21dd7af.jpg";const dE=function(){const e=ge();return(0,lE.jsx)("main",{children:(0,lE.jsxs)("div",{className:"home-container",children:[(0,lE.jsx)("img",{src:hE,alt:""}),(0,lE.jsx)("h2",{children:"\u201cSmart people learn from everything and everyone, average people from their experiences, stupid people already have all the answers.\u201d \u2014 Socrates"}),(0,lE.jsx)("h1",{children:"LetsAchive"}),(0,lE.jsx)("p",{children:"LetsAchive is a platform for people who want to achieve their goals."}),(0,lE.jsx)("button",{onClick:()=>e("/goals"),children:"Get Started"})]})})};function fE(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{l(r.next(e))}catch($M){s($M)}}function a(e){try{l(r.throw(e))}catch($M){s($M)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))}function pE(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch($M){s=[6,$M],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}var gE=function(){return gE=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},gE.apply(this,arguments)},mE=function(e){return{loading:void 0===e||null===e,value:e}},yE=function(e){var t=e?e():void 0,n=(0,i.useReducer)((function(e,t){switch(t.type){case"error":return gE(gE({},e),{error:t.error,loading:!1,value:void 0});case"reset":return mE(t.defaultValue);case"value":return gE(gE({},e),{error:void 0,loading:!1,value:t.value});default:return e}}),mE(t)),r=n[0],s=n[1],o=(0,i.useCallback)((function(){var t=e?e():void 0;s({type:"reset",defaultValue:t})}),[e]),a=(0,i.useCallback)((function(e){s({type:"error",error:e})}),[]),l=(0,i.useCallback)((function(e){s({type:"value",value:e})}),[]);return(0,i.useMemo)((function(){return{error:r.error,loading:r.loading,reset:o,setError:a,setValue:l,value:r.value}}),[r.error,r.loading,o,a,l,r.value])},vE=function(e,t){var n=yE((function(){return e.currentUser})),r=n.error,s=n.loading,o=n.setError,a=n.setValue,l=n.value;return(0,i.useEffect)((function(){var n=_a(e,(function(e){return fE(void 0,void 0,void 0,(function(){var n;return pE(this,(function(r){switch(r.label){case 0:if(!(null===t||void 0===t?void 0:t.onUserChanged))return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,t.onUserChanged(e)];case 2:return r.sent(),[3,4];case 3:return n=r.sent(),o(n),[3,4];case 4:return a(e),[2]}}))}))}),o);return function(){n()}}),[e]),[l,s,r]};const _E=function(e){let{goal:t,onNotify:n,onDelete:r,onEdit:i,onToggleDone:s}=e;const o=parseInt(t.streak)||0,a=t.totalDays||1,l=Math.min(o/a*100,100);return(0,lE.jsxs)("div",{className:"goal-card ".concat(t.completed?"completed":t.postponed?"postponed":""),"data-id":t.id,children:[(0,lE.jsxs)("div",{className:"card-header",children:[(0,lE.jsx)("h3",{children:t.title}),(0,lE.jsxs)("span",{className:"deadline",children:["\u23f3 ",t.deadline]}),(0,lE.jsxs)("div",{className:"dropdown",children:[(0,lE.jsx)("button",{className:"dropbtn",children:"\u22ee"}),(0,lE.jsxs)("div",{className:"dropdown-content",children:[(0,lE.jsx)("a",{href:"#",className:"edit",onClick:()=>i(t),children:"Edit"}),(0,lE.jsx)("a",{href:"#",className:"delete",onClick:()=>r(t),children:"Delete"})]})]})]}),(0,lE.jsxs)("div",{className:"card-body",children:[(0,lE.jsx)("img",{src:t.image,alt:t.title}),(0,lE.jsx)("div",{className:"progress-bar-container",children:(0,lE.jsx)("div",{className:"progress-bar",style:{width:"".concat(l,"%")}})}),(0,lE.jsxs)("p",{children:["Progress: ",l.toFixed(0),"%"]})]}),(0,lE.jsxs)("div",{className:"card-footer",children:[(0,lE.jsxs)("button",{className:"notify-btn",onClick:()=>n(t),children:["Notify Me ",t.notificationInterval?"(".concat(t.notificationInterval," min)"):""]}),(0,lE.jsx)("a",{href:"/progress",className:"progress-btn",children:"Check Progress"}),(0,lE.jsx)("button",{className:"done-btn","data-completed":t.completed,onClick:()=>s(t),children:t.completed?"Undone":"Done"})]})]})},wE=e=>{let{message:t,type:n,onClose:r}=e;return(0,i.useEffect)((()=>{const e=setTimeout((()=>{r()}),3e3);return()=>clearTimeout(e)}),[r]),(0,lE.jsxs)("div",{className:"notification ".concat(n),children:[(0,lE.jsx)("p",{children:t}),(0,lE.jsx)("button",{className:"notification-close",onClick:r,children:"\xd7"})]})},bE=n.p+"static/media/push-ups.d7400113388785f78a2f.jpg",TE=()=>{const[e]=vE(oE),[t,n]=(0,i.useState)([]),[r,s]=(0,i.useState)("active"),[o,a]=(0,i.useState)(!1),[l,c]=(0,i.useState)(""),[u,d]=(0,i.useState)([]);(0,i.useEffect)((()=>{if(e){const t=JT(bT(bb(aE,"goals"),ET("userId","==",e.uid)),(e=>{const t=e.docs.map((e=>h({id:e.id},e.data())));n(t)}));return()=>t()}}),[e]);const f=t.filter((e=>"active"===r?!e.completed&&!e.postponed:"completed"===r?e.completed:"postponed"!==r||e.postponed&&!e.completed)),p=e=>{c('\u041d\u0435 \u0437\u0430\u0431\u0443\u0434\u044c\u0442\u0435 \u0432\u0438\u043a\u043e\u043d\u0430\u0442\u0438 "'.concat(e,'"! \u0417\u0430\u043b\u0438\u0448\u0430\u0439\u0442\u0435\u0441\u044c \u043c\u043e\u0442\u0438\u0432\u043e\u0432\u0430\u043d\u0438\u043c\u0438!')),a(!0);new Audio("/src/sounds/notification-22-270130.mp3").play().catch((e=>console.error("Audio error:",e))),"granted"===wE.permission?new wE("\u0427\u0430\u0441 \u0434\u0456\u044f\u0442\u0438!",{body:'\u041d\u0435 \u0437\u0430\u0431\u0443\u0434\u044c\u0442\u0435 \u0432\u0438\u043a\u043e\u043d\u0430\u0442\u0438 "'.concat(e,'"!'),icon:"images/push-ups.jpg"}):"denied"!==wE.permission&&wE.requestPermission().then((t=>{"granted"===t&&new wE("\u0427\u0430\u0441 \u0434\u0456\u044f\u0442\u0438!",{body:'\u041d\u0435 \u0437\u0430\u0431\u0443\u0434\u044c\u0442\u0435 \u0432\u0438\u043a\u043e\u043d\u0430\u0442\u0438 "'.concat(e,'"!'),icon:"images/push-ups.jpg"})}))},g=e=>{e.timerId&&clearInterval(e.timerId);const t=60*e.notificationInterval*1e3,n=setInterval((()=>{e.completed?(clearInterval(n),m(e.id,null)):p(e.title)}),t);m(e.id,n),p(e.title)},m=async(e,t)=>{try{const n=Tb(aE,"goals",e);await GT(n,{timerId:t})}catch(qI){console.error("Error updating timerId:",qI.message)}},y=async e=>{const t=prompt("\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u0456\u043d\u0442\u0435\u0440\u0432\u0430\u043b \u0441\u043f\u043e\u0432\u0456\u0449\u0435\u043d\u044c \u0443 \u0445\u0432\u0438\u043b\u0438\u043d\u0430\u0445 (\u043d\u0430\u043f\u0440\u0438\u043a\u043b\u0430\u0434, 5):",e.notificationInterval||""),n=parseInt(t);if(!isNaN(n)&&n>0)try{const t=Tb(aE,"goals",e.id);await GT(t,{notificationInterval:n,postponed:!0}),g(h(h({},e),{},{notificationInterval:n})),d((t=>[...t,{id:Date.now(),message:'Goal "'.concat(e.title,'" moved to postponed!'),type:"postponed"}]))}catch(qI){console.error("Error setting notification:",qI.message)}else alert("\u0411\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u0432\u0432\u0435\u0434\u0456\u0442\u044c \u043a\u043e\u0440\u0435\u043a\u0442\u043d\u0435 \u0447\u0438\u0441\u043b\u043e \u0431\u0456\u043b\u044c\u0448\u0435 0.")},v=async e=>{e.timerId&&clearInterval(e.timerId);try{await QT(Tb(aE,"goals",e.id))}catch(qI){console.error("Error deleting goal:",qI.message)}},_=async e=>{const t=prompt("Edit goal title:",e.title),n=b();if(t||n)try{const r=Tb(aE,"goals",e.id);await GT(r,{title:t||e.title,deadline:n||e.deadline})}catch(qI){console.error("Error editing goal:",qI.message)}},w=async e=>{const t=parseInt(e.streak)||0,n=h(h({},e),{},{completed:!e.completed,postponed:!1,streak:"".concat(e.completed?Math.max(0,t-1):t+1,"-day streak")});n.completed&&n.timerId?(clearInterval(n.timerId),n.timerId=null):!n.completed&&n.notificationInterval&&g(n);try{const t=Tb(aE,"goals",e.id);await GT(t,{completed:n.completed,postponed:n.postponed,streak:n.streak,timerId:n.timerId}),e.completed||d((t=>[...t,{id:Date.now(),message:'Goal "'.concat(e.title,'" marked as completed!'),type:"completed"}]))}catch(qI){console.error("Error updating goal:",qI.message)}},b=()=>{let e=parseInt(prompt("Enter a number (1-30):"),10);if(isNaN(e)||e<1||e>30)return null;let t=parseInt(prompt("Choose unit: \n1 - \u0434\u043d\u0456\u0432 \n2 - \u0442\u0438\u0436\u043d\u0456\u0432 \n3 - \u043c\u0456\u0441\u044f\u0446\u0456\u0432 \n4 - \u0440\u043e\u043a\u0456\u0432"),10);return[1,2,3,4].includes(t)?"".concat(e," ").concat(["\u0434\u043d\u0456\u0432","\u0442\u0438\u0436\u043d\u0456\u0432","\u043c\u0456\u0441\u044f\u0446\u0456\u0432","\u0440\u043e\u043a\u0456\u0432"][t-1]):null},T=async(t,n,r)=>{if(!e)return;const[i,s]=n.split(" ");try{await YT(bb(aE,"goals"),{userId:e.uid,title:t,image:r,streak:"0-day streak",deadline:n,completed:!1,postponed:!1,totalDays:E(parseInt(i),s),notificationInterval:null,timerId:null}),c('Goal "'.concat(t,'" created successfully!')),a(!0)}catch(qI){c("Failed to create goal: ".concat(qI.message)),a(!0)}},E=(e,t)=>{switch(t){case"\u0434\u043d\u0456\u0432":default:return e;case"\u0442\u0438\u0436\u043d\u0456\u0432":return 7*e;case"\u043c\u0456\u0441\u044f\u0446\u0456\u0432":return 30*e;case"\u0440\u043e\u043a\u0456\u0432":return 365*e}};return(0,lE.jsxs)("main",{children:[e?(0,lE.jsxs)("div",{className:"s-container",children:[(0,lE.jsx)("div",{className:"div-create-goal",children:(0,lE.jsx)("button",{className:"create-goal-button",onClick:()=>{const e=prompt("Enter goal title:");if(!e)return;const t=b();t&&T(e,t,bE)},children:"Create goal"})}),(0,lE.jsxs)("div",{className:"goals-filter",style:{marginTop:"20px",textAlign:"center"},children:[(0,lE.jsx)("button",{onClick:()=>s("active"),children:"Active"}),(0,lE.jsx)("button",{onClick:()=>s("completed"),children:"Completed"}),(0,lE.jsx)("button",{onClick:()=>s("postponed"),children:"Postponed"})]}),(0,lE.jsx)("div",{className:"goals-container",children:f.map((e=>(0,lE.jsx)(_E,{goal:e,onNotify:y,onDelete:v,onEdit:_,onToggleDone:w},e.id)))})]}):(0,lE.jsx)("p",{children:"Please log in to view and create goals."}),(0,lE.jsx)("div",{className:"overlay ".concat(o?"active":""),onClick:()=>a(!1)}),(0,lE.jsxs)("div",{className:"notification-modal ".concat(o?"active":""),children:[(0,lE.jsx)("h3",{children:"\u0427\u0430\u0441 \u0434\u0456\u044f\u0442\u0438!"}),(0,lE.jsx)("p",{className:"notification-text",children:l}),(0,lE.jsx)("button",{className:"close-notification",onClick:()=>a(!1),children:"OK"})]}),u.map((e=>(0,lE.jsx)(wE,{message:e.message,type:e.type,onClose:()=>d((t=>t.filter((t=>t.id!==e.id))))},e.id)))]})};const EE=function(e){let{goal:t}=e;const n=parseInt(t.streak)||0,r=t.totalDays||1,i=Math.min(n/r*100,100);return(0,lE.jsxs)("div",{className:"progress-box",children:[(0,lE.jsx)("div",{className:"progress-image",children:(0,lE.jsx)("img",{src:t.image,alt:t.title})}),(0,lE.jsxs)("div",{className:"progress-info",children:[(0,lE.jsx)("div",{className:"progress-title",children:t.title}),(0,lE.jsx)("div",{className:"progress-streak",children:t.streak}),(0,lE.jsx)("div",{className:"progress-bar-container",children:(0,lE.jsx)("div",{className:"progress-bar",style:{width:"".concat(i,"%")}})}),(0,lE.jsxs)("p",{children:["Progress: ",i.toFixed(0),"%"]})]})]})};const IE=function(){const[e]=vE(oE),[t,n]=(0,i.useState)([]);return(0,i.useEffect)((()=>{if(e){const t=JT(bT(bb(aE,"goals"),ET("userId","==",e.uid)),(e=>{const t=e.docs.map((e=>h({id:e.id},e.data())));n(t)}));return()=>t()}}),[e]),(0,lE.jsx)("main",{children:e?(0,lE.jsxs)("div",{className:"progress-container",children:[(0,lE.jsx)("div",{className:"progress-title-container",children:(0,lE.jsx)("h1",{children:"Your progress"})}),(0,lE.jsx)("div",{className:"progress-boxes",children:t.length>0?t.map((e=>(0,lE.jsx)(EE,{goal:e},e.id))):(0,lE.jsx)("p",{children:"No goals yet!"})})]}):(0,lE.jsx)("p",{children:"Please log in to view your progress."})})};const SE=function(){const[e]=vE(oE),[t,n]=(0,i.useState)([]),[r,s]=(0,i.useState)(""),[o,a]=(0,i.useState)({firstName:"",lastName:""});return(0,i.useEffect)((()=>{if(e){qT(Tb(aE,"users",e.uid)).then((e=>{e.exists()&&a({firstName:e.data().firstName||"\u041d\u0435\u0432\u0456\u0434\u043e\u043c\u0438\u0439",lastName:e.data().lastName||""})})).catch((e=>{console.error("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f \u043f\u0440\u043e\u0444\u0456\u043b\u044e:",e.message)}))}}),[e]),(0,i.useEffect)((()=>{const e=JT(bb(aE,"messages"),(e=>{const t=e.docs.map((e=>h({id:e.id},e.data())));n(t)}));return()=>e()}),[]),(0,lE.jsxs)("main",{className:"chat-container",children:[(0,lE.jsx)("div",{className:"chat-box",children:t.map((e=>(0,lE.jsxs)("div",{children:[(0,lE.jsx)("h5",{children:e.time}),(0,lE.jsxs)("h3",{children:[e.user,": ",e.text]})]},e.id)))}),(0,lE.jsxs)("div",{className:"chat-input",children:[(0,lE.jsx)("input",{type:"text",placeholder:"Enter message...",value:r,onChange:e=>s(e.target.value)}),(0,lE.jsx)("button",{onClick:async()=>{if(r.trim()){const n="".concat(o.firstName," ").concat(o.lastName).trim();try{await YT(bb(aE,"messages"),{time:(new Date).toLocaleTimeString().slice(0,5),user:n||"\u041a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447",text:r,userId:e.uid,timestamp:new Date}),s("")}catch(t){console.error("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0432\u0456\u0434\u043f\u0440\u0430\u0432\u043a\u0438 \u043f\u043e\u0432\u0456\u0434\u043e\u043c\u043b\u0435\u043d\u043d\u044f:",t.message)}}},children:"Send"})]})]})};const kE=function(){return(0,lE.jsx)(SE,{})},CE=()=>{const[e,t]=(0,i.useState)(""),[n,r]=(0,i.useState)(""),[s,o]=(0,i.useState)(null),a=ge();return(0,lE.jsxs)("div",{className:"auth-container",children:[(0,lE.jsx)("h2",{children:"Sign In"}),(0,lE.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),o(null);try{await oa(oE,e,n),a("/goals")}catch(s){o(s.message)}},children:[(0,lE.jsxs)("div",{children:[(0,lE.jsx)("label",{children:"Email:"}),(0,lE.jsx)("input",{type:"email",value:e,onChange:e=>t(e.target.value),required:!0})]}),(0,lE.jsxs)("div",{children:[(0,lE.jsx)("label",{children:"Password:"}),(0,lE.jsx)("input",{type:"password",value:n,onChange:e=>r(e.target.value),required:!0})]}),s&&(0,lE.jsx)("p",{style:{color:"red"},children:s}),(0,lE.jsx)("button",{type:"submit",children:"Sign In"}),(0,lE.jsxs)("p",{children:["Don't have an account? ",(0,lE.jsx)(mt,{to:"/register",children:"Sign Up"})]})]})]})},xE=()=>{const[e,t]=(0,i.useState)(""),[n,r]=(0,i.useState)(""),[s,o]=(0,i.useState)(null),a=ge();return(0,lE.jsxs)("div",{className:"auth-container",children:[(0,lE.jsx)("h2",{children:"Sign Up"}),(0,lE.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),o(null);try{await sa(oE,e,n),a("/goals")}catch(s){o(s.message)}},children:[(0,lE.jsxs)("div",{children:[(0,lE.jsx)("label",{children:"Email:"}),(0,lE.jsx)("input",{type:"email",value:e,onChange:e=>t(e.target.value),required:!0})]}),(0,lE.jsxs)("div",{children:[(0,lE.jsx)("label",{children:"Password:"}),(0,lE.jsx)("input",{type:"password",value:n,onChange:e=>r(e.target.value),required:!0})]}),s&&(0,lE.jsx)("p",{style:{color:"red"},children:s}),(0,lE.jsx)("button",{type:"submit",children:"Sign Up"}),(0,lE.jsxs)("p",{children:["Already have an account? ",(0,lE.jsx)(mt,{to:"/login",children:"Sign In"})]})]})]})};const NE=function(){const[e,t]=vE(oE),n=ge(),[r,s]=(0,i.useState)({firstName:"",lastName:"",dateOfBirth:"",email:""}),[o,a]=(0,i.useState)("");(0,i.useEffect)((()=>{if(t)return;if(!e)return void n("/login");(async()=>{try{const t=Tb(aE,"users",e.uid),n=await qT(t);n.exists()?s({firstName:n.data().firstName||"",lastName:n.data().lastName||"",dateOfBirth:n.data().dateOfBirth||"",email:e.email||""}):s((t=>h(h({},t),{},{email:e.email||""})))}catch(t){a("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f \u043f\u0440\u043e\u0444\u0456\u043b\u044e: "+t.message)}})()}),[e,t,n]);const l=e=>{const{name:t,value:n}=e.target;s((e=>h(h({},e),{},{[t]:n})))};return t?(0,lE.jsx)("div",{children:"Loading..."}):(0,lE.jsxs)("div",{className:"account-page",children:[(0,lE.jsx)("h2",{children:"\u041f\u0440\u043e\u0444\u0456\u043b\u044c \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430"}),o&&(0,lE.jsx)("p",{style:{color:"red"},children:o}),(0,lE.jsxs)("form",{onSubmit:async t=>{t.preventDefault();try{const t=Tb(aE,"users",e.uid);await KT(t,{firstName:r.firstName,lastName:r.lastName,dateOfBirth:r.dateOfBirth,email:e.email},{merge:!0}),alert("\u041f\u0440\u043e\u0444\u0456\u043b\u044c \u0443\u0441\u043f\u0456\u0448\u043d\u043e \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043e!")}catch(n){a("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u044f \u043f\u0440\u043e\u0444\u0456\u043b\u044e: "+n.message)}},children:[(0,lE.jsxs)("div",{children:[(0,lE.jsx)("label",{children:"\u0406\u043c'\u044f:"}),(0,lE.jsx)("input",{type:"text",name:"firstName",value:r.firstName,onChange:l,placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u0432\u0430\u0448\u0435 \u0456\u043c'\u044f"})]}),(0,lE.jsxs)("div",{children:[(0,lE.jsx)("label",{children:"\u041f\u0440\u0456\u0437\u0432\u0438\u0449\u0435:"}),(0,lE.jsx)("input",{type:"text",name:"lastName",value:r.lastName,onChange:l,placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u0432\u0430\u0448\u0435 \u043f\u0440\u0456\u0437\u0432\u0438\u0449\u0435"})]}),(0,lE.jsxs)("div",{children:[(0,lE.jsx)("label",{children:"\u0414\u0430\u0442\u0430 \u043d\u0430\u0440\u043e\u0434\u0436\u0435\u043d\u043d\u044f:"}),(0,lE.jsx)("input",{type:"date",name:"dateOfBirth",value:r.dateOfBirth,onChange:l})]}),(0,lE.jsxs)("div",{children:[(0,lE.jsx)("label",{children:"\u0415\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430 \u043f\u043e\u0448\u0442\u0430:"}),(0,lE.jsx)("input",{type:"email",name:"email",value:r.email,disabled:!0})]}),(0,lE.jsx)("button",{type:"submit",children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"})]})]})},AE=e=>{let{children:t}=e;const[n,r]=vE(oE);return r?(0,lE.jsx)("div",{children:"Loading..."}):n?t:(0,lE.jsx)(Ae,{to:"/login"})};const PE=function(){return(0,lE.jsx)(pt,{basename:"/weblaba4",children:(0,lE.jsxs)("div",{className:"App",children:[(0,lE.jsx)(cE,{}),(0,lE.jsxs)(De,{children:[(0,lE.jsx)(Pe,{path:"/",element:(0,lE.jsx)(dE,{})}),(0,lE.jsx)(Pe,{path:"/goals",element:(0,lE.jsx)(AE,{children:(0,lE.jsx)(TE,{})})}),(0,lE.jsx)(Pe,{path:"/progress",element:(0,lE.jsx)(AE,{children:(0,lE.jsx)(IE,{})})}),(0,lE.jsx)(Pe,{path:"/community",element:(0,lE.jsx)(AE,{children:(0,lE.jsx)(kE,{})})}),(0,lE.jsx)(Pe,{path:"/login",element:(0,lE.jsx)(CE,{})}),(0,lE.jsx)(Pe,{path:"/register",element:(0,lE.jsx)(xE,{})}),(0,lE.jsx)(Pe,{path:"/account",element:(0,lE.jsx)(AE,{children:(0,lE.jsx)(NE,{})})}),(0,lE.jsx)(Pe,{path:"*",element:(0,lE.jsxs)("div",{children:[(0,lE.jsx)("h1",{children:"404 - Page Not Found"}),(0,lE.jsx)("a",{href:"/weblaba4",children:"Go to Home"})]})})]}),(0,lE.jsx)(uE,{})]})})};class RE{constructor(e,t){this._delegate=e,this.firebase=t,Hr(e,new On("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),ai(this._delegate))))}_getService(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:jr;var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:jr;this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Hr(this._delegate,e)}_addOrOverwriteComponent(e){Wr(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const DE=new cn("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const OE=function e(){const t=function(e){const t={},n={__esModule:!0,initializeApp:function(r){const i=ri(r,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(pn(t,i.name))return t[i.name];const s=new e(i,n);return t[i.name]=s,s},app:i,registerVersion:li,setLogLevel:ui,onLog:ci,apps:null,SDK_VERSION:ni,INTERNAL:{registerComponent:function(t){const r=t.name,s=r.replace("-compat","");if(Kr(t)&&"PUBLIC"===t.type){const o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[s])throw DE.create("invalid-app-argument",{appName:r});return e[s]()};void 0!==t.serviceProps&&Lt(o,t.serviceProps),n[s]=o,e.prototype[s]=function(){const e=this._getService.bind(this,r);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e.apply(this,t.multipleInstances?i:[])}}return"PUBLIC"===t.type?n[s]:null},removeApp:function(e){delete t[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:r}};function i(e){if(!pn(t,e=e||jr))throw DE.create("no-app",{appName:e});return t[e]}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(t).map((e=>t[e]))}}),i.App=e,n}(RE);return t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){Lt(t,e)},createSubscribe:In,ErrorFactory:cn,deepExtend:Lt}),t}(),LE=new Hn("@firebase/app-compat");try{const e=Mt();if(void 0!==e.firebase){LE.warn("\n      Warning: Firebase is already defined in the global scope. Please make sure\n      Firebase library is only loaded once.\n    ");const t=e.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&LE.warn("\n        Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n        ")}}catch(hj){}const ME=OE;!function(e){li("@firebase/app-compat","0.4.0",e)}();function FE(){return window}ME.registerVersion("firebase","11.8.0","app-compat");async function UE(e,t,n){var r;const{BuildInfo:i}=FE();Gi(t.sessionId,"AuthEvent did not contain a session ID");const s=await async function(e){const t=function(e){if(Gi(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(t.sessionId),o={};return qs()?o.ibi=i.packageName:js()?o.apn=i.packageName:ji(e,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,Ql(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,o)}function jE(e){const{cordova:t}=FE();return new Promise((n=>{t.plugins.browsertab.isAvailable((r=>{let i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qt();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}class VE extends kl{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise((e=>{this.resolveInitialized=e}))}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach((t=>t(e))),super.onEvent(e)}async initialized(){await this.initPromise}}async function zE(e){const t=await HE()._get(WE(e));return t&&await HE()._remove(WE(e)),t}function qE(e,t){var n,r;const i=function(e){const t=KE(e),n=t.link?decodeURIComponent(t.link):void 0,r=KE(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return KE(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){const t=KE(i),s=t.firebaseError?function(e){try{return JSON.parse(e)}catch($M){return null}}(decodeURIComponent(t.firebaseError)):null,o=null===(r=null===(n=null===s||void 0===s?void 0:s.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],a=o?Vi(o):null;return a?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function BE(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<20;n++){const n=Math.floor(62*Math.random());e.push(t.charAt(n))}return e.join("")}function HE(){return Ns(xa)}function WE(e){return Rs("authEvent",e.config.apiKey,e.name)}function KE(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return bn(n.join("?"))}const GE=class{constructor(){this._redirectPersistence=Da,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Il,this._overrideRedirectResult=vl}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new VE(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){ji(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,r){!function(e){var t,n,r,i,s,o,a,l,c,u;const h=FE();Wi("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Wi("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Wi("function"===typeof(null===(s=null===(i=null===(r=null===h||void 0===h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===s?void 0:s.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Wi("function"===typeof(null===(l=null===(a=null===(o=null===h||void 0===h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===a?void 0:a.browsertab)||void 0===l?void 0:l.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Wi("function"===typeof(null===(u=null===(c=null===h||void 0===h?void 0:h.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===u?void 0:u.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const i=await this._initialize(e);await i.initialized(),i.resetRedirect(),gl.clear(),await this._originValidation(e);const s=function(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:BE(),postBody:null,tenantId:e.tenantId,error:Vi(e,"no-auth-event")}}(e,n,r);await function(e,t){return HE()._set(WE(e),t)}(e,s);const o=await UE(e,s,t);return async function(e,t,n){const{cordova:r}=FE();let i=()=>{};try{await new Promise(((s,o)=>{let a=null;function l(){var e;s();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"===typeof t&&t(),"function"===typeof(null===n||void 0===n?void 0:n.close)&&n.close()}function c(){a||(a=window.setTimeout((()=>{o(Vi(e,"redirect-cancelled-by-user"))}),2e3))}function u(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}t.addPassiveListener(l),document.addEventListener("resume",c,!1),js()&&document.addEventListener("visibilitychange",u,!1),i=()=>{t.removePassiveListener(l),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",u,!1),a&&window.clearTimeout(a)}}))}finally{i()}}(e,i,await jE(o))}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){const{BuildInfo:t}=FE(),n={};qs()?n.iosBundleId=t.packageName:js()?n.androidPackageName=t.packageName:ji(e,"operation-not-supported-in-this-environment"),await Nl(e,n)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:r,BuildInfo:i}=FE(),s=setTimeout((async()=>{await zE(e),t.onEvent(QE())}),500),o=async n=>{clearTimeout(s);const r=await zE(e);let i=null;r&&(null===n||void 0===n?void 0:n.url)&&(i=qE(r,n.url)),t.onEvent(i||QE())};"undefined"!==typeof n&&"function"===typeof n.subscribe&&n.subscribe(null,o);const a=r,l="".concat(i.packageName.toLowerCase(),"://");FE().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(l)&&o({url:e}),"function"===typeof a)try{a(e)}catch($M){console.error($M)}}}};function QE(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Vi("no-auth-event")}}function YE(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function JE(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qt();return!("file:"!==YE()&&"ionic:"!==YE()&&"capacitor:"!==YE()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function $E(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qt();return en()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qt();return/Edge\/\d+/.test(e)}(e)}function XE(){try{const e=self.localStorage,t=La();if(e)return e.setItem(t,"1"),e.removeItem(t),!$E()||sn()}catch($M){return ZE()&&sn()}return!1}function ZE(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function eI(){return("http:"===YE()||"https:"===YE()||Xt()||JE())&&!(Zt()||Jt())&&XE()&&!ZE()}function tI(){return JE()&&"undefined"!==typeof document}const nI={LOCAL:"local",NONE:"none",SESSION:"session"},rI=Wi,iI="persistence";async function sI(e){await e._initializationPromise;const t=oI(),n=Rs(iI,e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistenceType())}function oI(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch($M){return null}}const aI=Wi;class lI{constructor(){this.browserResolver=Ns(Jl),this.cordovaResolver=Ns(GE),this.underlyingResolver=null,this._redirectPersistence=Da,this._completeRedirectFn=Il,this._overrideRedirectResult=vl}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,r)}async _openRedirect(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,r)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return tI()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return aI(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await async function(){return!!tI()&&new Promise((e=>{const t=setTimeout((()=>{e(!1)}),1e3);document.addEventListener("deviceready",(()=>{clearTimeout(t),e(!0)}))}))}();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function cI(e){return e.unwrap()}function uI(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code)){t.resolver=new pI(e,function(e,t){var n;const r=Dn(e),i=t;return Wi(t.customData.operationType,r,"argument-error"),Wi(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),ba._fromError(r,i)}(e,t))}else if(r){const e=hI(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}function hI(e){const{_tokenResponse:t}=e instanceof ln?e.customData:e;if(!t)return null;if(!(e instanceof ln)&&"temporaryProof"in t&&"phoneNumber"in t)return ol.credentialFromResult(e);const n=t.providerId;if(!n||n===Si)return null;let r;switch(n){case Ii:r=Ro;break;case Ti:r=Po;break;case Ei:r=Do;break;case ki:r=Mo;break;default:const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:s,pendingToken:o,nonce:a}=t;return i||s||e||o?o?n.startsWith("saml.")?Oo._create(n,o):To._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:e,accessToken:i}):new Ao(n).credential({idToken:e,accessToken:i,rawNonce:a}):null}return e instanceof ln?r.credentialFromError(e):r.credentialFromResult(e)}function dI(e,t){return t.catch((t=>{throw t instanceof ln&&uI(e,t),t})).then((e=>{const t=e.operationType,n=e.user;return{operationType:t,credential:(r=e,hI(r)),additionalUserInfo:va(e),user:gI.getOrCreate(n)};var r}))}async function fI(e,t){const n=await t;return{verificationId:n.verificationId,confirm:t=>dI(e,n.confirm(t))}}class pI{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return dI(cI(this.auth),this.resolver.resolveSignIn(e))}}class gI{constructor(e){this._delegate=e,this.multiFactor=function(e){const t=Dn(e);return Ia.has(t)||Ia.set(t,Ea._fromUser(t)),Ia.get(t)}(e)}static getOrCreate(e){return gI.USER_MAP.has(e)||gI.USER_MAP.set(e,new gI(e)),gI.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return dI(this.auth,Yo(this._delegate,e))}async linkWithPhoneNumber(e,t){return fI(this.auth,async function(e,t,n){const r=Dn(e);await Wo(!1,r,"phone");const i=await il(r.auth,t,Dn(n));return new rl(i,(e=>Yo(r,e)))}(this._delegate,e,t))}async linkWithPopup(e){return dI(this.auth,async function(e,t,n){const r=Dn(e);Bi(r.auth,t,xo);const i=al(r.auth,n);return new pl(r.auth,"linkViaPopup",t,i,r).executeNotNull()}(this._delegate,e,lI))}async linkWithRedirect(e){return await sI(Qs(this.auth)),El(this._delegate,e,lI)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return dI(this.auth,Jo(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return fI(this.auth,async function(e,t,n){const r=Dn(e);if(Jr(r.auth.app))return Promise.reject(qi(r.auth));const i=await il(r.auth,t,Dn(n));return new rl(i,(e=>Jo(r,e)))}(this._delegate,e,t))}reauthenticateWithPopup(e){return dI(this.auth,async function(e,t,n){const r=Dn(e);if(Jr(r.auth.app))return Promise.reject(Vi(r.auth,"operation-not-supported-in-this-environment"));Bi(r.auth,t,xo);const i=al(r.auth,n);return new pl(r.auth,"reauthViaPopup",t,i,r).executeNotNull()}(this._delegate,e,lI))}async reauthenticateWithRedirect(e){return await sI(Qs(this.auth)),Tl(this._delegate,e,lI)}sendEmailVerification(e){return la(this._delegate,e)}async unlink(e){return await Bo(this._delegate,e),this}updateEmail(e){return function(e,t){const n=Dn(e);return Jr(n.auth.app)?Promise.reject(qi(n.auth)):ha(n,t,null)}(this._delegate,e)}updatePassword(e){return function(e,t){return ha(Dn(e),null,t)}(this._delegate,e)}updatePhoneNumber(e){return async function(e,t){const n=Dn(e);if(Jr(n.auth.app))return Promise.reject(qi(n.auth));await Ho(n,t)}(this._delegate,e)}updateProfile(e){return ua(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return ca(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}gI.USER_MAP=new WeakMap;const mI=Wi;class yI{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;mI(n,"invalid-api-key",{appName:e.name}),mI(n,"invalid-api-key",{appName:e.name});const r="undefined"!==typeof window?lI:void 0;this._delegate=t.initialize({options:{persistence:_I(n,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(Oi),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?gI.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){co(this._delegate,e,t)}applyActionCode(e){return ra(this._delegate,e)}checkActionCode(e){return ia(this._delegate,e)}confirmPasswordReset(e,t){return async function(e,t,n){await po(Dn(e),{oobCode:t,newPassword:n}).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&na(e),t}))}(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return dI(this._delegate,sa(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return aa(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){const n=ko.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}async getRedirectResult(){mI(eI(),this._delegate,"operation-not-supported-in-this-environment");const e=await async function(e,t){return await Qs(e)._initializationPromise,Il(e,t,!1)}(this._delegate,lI);return e?dI(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){!function(e,t){Qs(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:s}=vI(e,t,n);return this._delegate.onAuthStateChanged(r,i,s)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:s}=vI(e,t,n);return this._delegate.onIdTokenChanged(r,i,s)}sendSignInLinkToEmail(e,t){return async function(e,t,n){const r=Qs(e),i={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};!function(e,t){Wi(t.handleCodeInApp,r,"argument-error"),t&&ta(r,e,t)}(i,n),await ao(r,i,"getOobCode",_o,"EMAIL_PASSWORD_PROVIDER")}(this._delegate,e,t)}sendPasswordResetEmail(e,t){return async function(e,t,n){const r=Qs(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&ta(r,i,n),await ao(r,i,"getOobCode",vo,"EMAIL_PASSWORD_PROVIDER")}(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(function(e,t){rI(Object.values(nI).includes(t),e,"invalid-persistence-type"),Zt()?rI(t!==nI.SESSION,e,"unsupported-persistence-type"):Jt()?rI(t===nI.NONE,e,"unsupported-persistence-type"):ZE()?rI(t===nI.NONE||t===nI.LOCAL&&sn(),e,"unsupported-persistence-type"):rI(t===nI.NONE||XE(),e,"unsupported-persistence-type")}(this._delegate,e),e){case nI.SESSION:t=Da;break;case nI.LOCAL:t=await Ns(Qa)._isAvailable()?Qa:xa;break;case nI.NONE:t=Ps;break;default:return ji("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return dI(this._delegate,async function(e){var t;if(Jr(e.app))return Promise.reject(qi(e));const n=Qs(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new Uo({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await Fo(n,{returnSecureToken:!0}),i=await Uo._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}(this._delegate))}signInWithCredential(e){return dI(this._delegate,Qo(this._delegate,e))}signInWithCustomToken(e){return dI(this._delegate,$o(this._delegate,e))}signInWithEmailAndPassword(e,t){return dI(this._delegate,oa(this._delegate,e,t))}signInWithEmailLink(e,t){return dI(this._delegate,async function(e,t,n){if(Jr(e.app))return Promise.reject(qi(e));const r=Dn(e),i=Co.credentialWithLink(t,n||Qi());return Wi(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Qo(r,i)}(this._delegate,e,t))}signInWithPhoneNumber(e,t){return fI(this._delegate,async function(e,t,n){if(Jr(e.app))return Promise.reject(qi(e));const r=Qs(e),i=await il(r,t,Dn(n));return new rl(i,(e=>Qo(r,e)))}(this._delegate,e,t))}async signInWithPopup(e){return mI(eI(),this._delegate,"operation-not-supported-in-this-environment"),dI(this._delegate,async function(e,t,n){if(Jr(e.app))return Promise.reject(Vi(e,"operation-not-supported-in-this-environment"));const r=Qs(e);Bi(e,t,xo);const i=al(r,n);return new pl(r,"signInViaPopup",t,i).executeNotNull()}(this._delegate,e,lI))}async signInWithRedirect(e){return mI(eI(),this._delegate,"operation-not-supported-in-this-environment"),await sI(this._delegate),bl(this._delegate,e,lI)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return async function(e,t){const{data:n}=await ia(Dn(e),t);return n.email}(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function vI(e,t,n){let r=e;"function"!==typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&gI.getOrCreate(e)),error:t,complete:n}}function _I(e,t){const n=function(e,t){const n=oI();if(!n)return[];const r=Rs(iI,e,t);switch(n.getItem(r)){case nI.NONE:return[Ps];case nI.LOCAL:return[Qa,Da];case nI.SESSION:return[Da];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(Qa)||n.push(Qa),"undefined"!==typeof window)for(const r of[xa,Da])n.includes(r)||n.push(r);return n.includes(Ps)||n.push(Ps),n}yI.Persistence=nI;class wI{static credential(e,t){return ol.credential(e,t)}constructor(){this.providerId="phone",this._delegate=new ol(cI(ME.auth()))}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}wI.PHONE_SIGN_IN_METHOD=ol.PHONE_SIGN_IN_METHOD,wI.PROVIDER_ID=ol.PROVIDER_ID;const bI=Wi;class TI{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ME.app();var r;bI(null===(r=n.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new nl(n.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}var EI;(EI=ME).INTERNAL.registerComponent(new On("auth-compat",(e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new yI(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Ci,PASSWORD_RESET:xi,RECOVER_EMAIL:Ni,REVERT_SECOND_FACTOR_ADDITION:Ai,VERIFY_AND_CHANGE_EMAIL:Pi,VERIFY_EMAIL:Ri}},EmailAuthProvider:Co,FacebookAuthProvider:Po,GithubAuthProvider:Do,GoogleAuthProvider:Ro,OAuthProvider:Ao,SAMLAuthProvider:Lo,PhoneAuthProvider:wI,PhoneMultiFactorGenerator:Zl,RecaptchaVerifier:TI,TwitterAuthProvider:Mo,Auth:yI,AuthCredential:fo,Error:ln}).setInstantiationMode("LAZY").setMultipleInstances(!1)),EI.registerVersion("@firebase/auth-compat","0.5.25");const II="@firebase/database",SI="1.0.18";let kI="";function CI(e){kI=e}class xI{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),dn(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:hn(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class NI{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return pn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const AI=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new xI(t)}}catch($M){}return new NI},PI=AI("localStorage"),RI=AI("sessionStorage"),DI=new Hn("@firebase/database"),OI=function(){let e=1;return function(){return e++}}(),LI=function(e){const t=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){const t=i-55296;r++,Ct(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(t<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new En;n.update(t);const r=n.digest();return At.encodeByteArray(r)},MI=function(){let e="";for(let t=0;t<arguments.length;t++){const n=t<0||arguments.length<=t?void 0:arguments[t];Array.isArray(n)||n&&"object"===typeof n&&"number"===typeof n.length?e+=MI.apply(null,n):e+="object"===typeof n?dn(n):n,e+=" "}return e};let FI=null,UI=!0;const jI=function(e,t){Ct(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(DI.logLevel=jn.VERBOSE,FI=DI.log.bind(DI),t&&RI.set("logging_enabled",!0)):"function"===typeof e?FI=e:(FI=null,RI.remove("logging_enabled"))},VI=function(){if(!0===UI&&(UI=!1,null===FI&&!0===RI.get("logging_enabled")&&jI(!0)),FI){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=MI.apply(null,t);FI(r)}},zI=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];VI(e,...n)}},qI=function(){const e="FIREBASE INTERNAL ERROR: "+MI(...arguments);DI.error(e)},BI=function(){const e="FIREBASE FATAL ERROR: ".concat(MI(...arguments));throw DI.error(e),new Error(e)},HI=function(){const e="FIREBASE WARNING: "+MI(...arguments);DI.warn(e)},WI=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},KI="[MIN_NAME]",GI="[MAX_NAME]",QI=function(e,t){if(e===t)return 0;if(e===KI||t===GI)return-1;if(t===KI||e===GI)return 1;{const n=nS(e),r=nS(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1}},YI=function(e,t){return e===t?0:e<t?-1:1},JI=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+dn(t))},$I=function(e){if("object"!==typeof e||null===e)return dn(e);const t=[];for(const r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)0!==r&&(n+=","),n+=dn(t[r]),n+=":",n+=$I(e[t[r]]);return n+="}",n},XI=function(e,t){const n=e.length;if(n<=t)return[e];const r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function ZI(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const eS=function(e){Ct(!WI(e),"Invalid JSON number");const t=1023;let n,r,i,s,o;0===e?(r=0,i=0,n=1/e===-1/0?1:0):(n=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(s=Math.min(Math.floor(Math.log(e)/Math.LN2),t),r=s+t,i=Math.round(e*Math.pow(2,52-s)-Math.pow(2,52))):(r=0,i=Math.round(e/Math.pow(2,-1074))));const a=[];for(o=52;o;o-=1)a.push(i%2?1:0),i=Math.floor(i/2);for(o=11;o;o-=1)a.push(r%2?1:0),r=Math.floor(r/2);a.push(n?1:0),a.reverse();const l=a.join("");let c="";for(o=0;o<64;o+=8){let e=parseInt(l.substr(o,8),2).toString(16);1===e.length&&(e="0"+e),c+=e}return c.toLowerCase()};const tS=new RegExp("^-?(0*)\\d{1,10}$"),nS=function(e){if(tS.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},rS=function(e){try{e()}catch($M){setTimeout((()=>{const t=$M.stack||"";throw HI("Exception was thrown by user callback.",t),$M}),Math.floor(0))}},iS=function(e,t){const n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n};class sS{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,Jr(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=null===t||void 0===t?void 0:t.getImmediate({optional:!0}),this.appCheck||null===t||void 0===t||t.get().then((e=>this.appCheck=e))}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise(((t,n)=>{setTimeout((()=>{this.appCheck?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((t=>t.addTokenListener(e)))}notifyForInvalidToken(){HI('Provided AppCheck credentials for the app named "'.concat(this.appName,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}class oS{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((e=>this.auth_=e))}getToken(e){return this.auth_?this.auth_.getToken(e).catch((e=>e&&"auth/token-not-initialized"===e.code?(VI("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e))):new Promise(((t,n)=>{setTimeout((()=>{this.auth_?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((t=>t.addAuthTokenListener(e)))}removeTokenChangeListener(e){this.authProvider_.get().then((t=>t.removeAuthTokenListener(e)))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',HI(e)}}class aS{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}aS.OWNER="owner";const lS="5",cS=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,uS="ac",hS="websocket",dS="long_polling";class fS{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],a=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null;this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=s,this.includeNamespaceInQueryParams=o,this.isUsingEmulator=a,this.emulatorOptions=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=PI.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&PI.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}function pS(e,t,n){let r;if(Ct("string"===typeof t,"typeof type must == string"),Ct("object"===typeof n,"typeof params must == object"),t===hS)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==dS)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const i=[];return ZI(n,((e,t)=>{i.push(e+"="+t)})),r+i.join("&")}class gS{constructor(){this.counters_={}}incrementCounter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;pn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return Lt(void 0,this.counters_)}}const mS={},yS={};function vS(e){const t=e.toString();return mS[t]||(mS[t]=new gS),mS[t]}class _S{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&rS((()=>{this.onMessage_(e[t])}));if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const wS="start";class bS{constructor(e,t,n,r,i,s,o){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=s,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=zI(e),this.stats_=vS(t),this.urlFn=e=>(this.appCheckToken&&(e[uS]=this.appCheckToken),pS(t,dS,e))}open(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new _S(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(tn()||"complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((()=>{if(this.isClosed_)return;this.scriptTagHolder=new TS((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,s,o,a,l]=t;if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===wS)n.id=s,n.password=o;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,(()=>{n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,s]=t;n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,s)}),(()=>{this.onClosed_()}),this.urlFn);const e={};e[wS]="t",e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v=lS,this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e[uS]=this.appCheckToken),"undefined"!==typeof location&&location.hostname&&cS.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,(()=>{}))}))}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){bS.forceAllow_=!0}static forceDisallow(){bS.forceDisallow_=!0}static isAvailable(){return!tn()&&(!!bS.forceAllow_||!bS.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=dn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=Rt(t),r=XI(n,1840);for(let i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(tn())return;this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=dn(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class TS{constructor(e,t,n,r){if(this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,tn())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=OI(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=TS.createIFrame_();let n="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)){n='<script>document.domain="'+document.domain+'";<\/script>'}const r="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(r),this.myIFrame.doc.close()}catch($M){VI("frame writing exception"),$M.stack&&VI($M.stack),VI($M)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||VI("No IE domain setting required")}catch($M){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)}),Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",r=0;for(;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;{const e=this.pendingSegs.shift();n=n+"&seg"+r+"="+e.seg+"&ts"+r+"="+e.ts+"&d"+r+"="+e.d,r++}}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(n,Math.floor(25e3));this.addTag(e,(()=>{clearTimeout(r),n()}))}addTag(e,t){tn()?this.doNodeLongPoll(e,t):setTimeout((()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{VI("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch($M){}}),Math.floor(1))}}let ES=null;"undefined"!==typeof MozWebSocket?ES=MozWebSocket:"undefined"!==typeof WebSocket&&(ES=WebSocket);class IS{constructor(e,t,n,r,i,s,o){this.connId=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=zI(this.connId),this.stats_=vS(t),this.connURL=IS.connectionURL_(t,s,o,r,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,r,i){const s={};return s.v=lS,!tn()&&"undefined"!==typeof location&&location.hostname&&cS.test(location.hostname)&&(s.r="f"),t&&(s.s=t),n&&(s.ls=n),r&&(s[uS]=r),i&&(s.p=i),pS(e,hS,s)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,PI.set("previous_websocket_failure",!0);try{let e;if(tn()){const t=this.nodeAdmin?"AdminNode":"Node";e={headers:{"User-Agent":"Firebase/".concat(lS,"/").concat(kI,"/").concat(process.platform,"/").concat(t),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(e.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(e.headers["X-Firebase-AppCheck"]=this.appCheckToken);const n={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},r=0===this.connURL.indexOf("wss://")?n.HTTPS_PROXY||n.https_proxy:n.HTTP_PROXY||n.http_proxy;r&&(e.proxy={origin:r})}this.mySock=new ES(this.connURL,[],e)}catch($M){this.log_("Error instantiating WebSocket.");const t=$M.message||$M.data;return t&&this.log_(t),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){IS.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!==typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==ES&&!IS.forceDisallow_}static previouslyFailed(){return PI.isInMemoryStorage||!0===PI.get("previous_websocket_failure")}markConnectionHealthy(){PI.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=hn(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Ct(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=dn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=XI(t,16384);n.length>1&&this.sendString_(String(n.length));for(let r=0;r<n.length;r++)this.sendString_(n[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()}),Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch($M){this.log_("Exception thrown from WebSocket.send():",$M.message||$M.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}IS.responsesRequiredToBeHealthy=2,IS.healthyTimeout=3e4;class SS{static get ALL_TRANSPORTS(){return[bS,IS]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=IS&&IS.isAvailable();let n=t&&!IS.previouslyFailed();if(e.webSocketOnly&&(t||HI("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[IS];else{const e=this.transports_=[];for(const t of SS.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);SS.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}SS.globalTransportInitialized_=!1;class kS{constructor(e,t,n,r,i,s,o,a,l,c){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=s,this.onReady_=o,this.onDisconnect_=a,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=zI("c:"+this.id+":"),this.transportManager_=new SS(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((()=>{this.conn_&&this.conn_.open(t,n)}),Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=iS((()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))}),Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=JI("t",e),n=JI("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=JI("t",e),n=JI("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=JI("t",e);if("d"in e){const n=e.d;if("h"===t){const e=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?qI("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):qI("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),lS!==n&&HI("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),iS((()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())}),Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):iS((()=>{this.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(PI.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class CS{put(e,t,n,r){}merge(e,t,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class xS{constructor(e){this.allowedEvents_=e,this.listeners_={},Ct(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(let e=0;e<i.length;e++)i[e].callback.apply(i[e].context,n)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const r=this.getInitialEvent(e);r&&t.apply(n,r)}off(e,t,n){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}validateEventType_(e){Ct(this.allowedEvents_.find((t=>t===e)),"Unknown event: "+e)}}class NS extends xS{static getInstance(){return new NS}constructor(){super(["online"]),this.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||Yt()||(window.addEventListener("online",(()=>{this.online_||(this.online_=!0,this.trigger("online",!0))}),!1),window.addEventListener("offline",(()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))}),!1))}getInitialEvent(e){return Ct("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class AS{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function PS(){return new AS("")}function RS(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function DS(e){return e.pieces_.length-e.pieceNum_}function OS(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new AS(e.pieces_,t)}function LS(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function MS(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function FS(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new AS(t,0)}function US(e,t){const n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof AS)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new AS(n,0)}function jS(e){return e.pieceNum_>=e.pieces_.length}function VS(e,t){const n=RS(e),r=RS(t);if(null===n)return t;if(n===r)return VS(OS(e),OS(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function zS(e,t){const n=MS(e,0),r=MS(t,0);for(let i=0;i<n.length&&i<r.length;i++){const e=QI(n[i],r[i]);if(0!==e)return e}return n.length===r.length?0:n.length<r.length?-1:1}function qS(e,t){if(DS(e)!==DS(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function BS(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(DS(e)>DS(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class HS{constructor(e,t){this.errorPrefix_=t,this.parts_=MS(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=Pn(this.parts_[n]);WS(this)}}function WS(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+KS(e))}function KS(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class GS extends xS{static getInstance(){return new GS}constructor(){let e,t;super(["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(t="visibilitychange",e="hidden"):"undefined"!==typeof document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):"undefined"!==typeof document.msHidden?(t="msvisibilitychange",e="msHidden"):"undefined"!==typeof document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,(()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))}),!1)}getInitialEvent(e){return Ct("visible"===e,"Unknown event type: "+e),[this.visible_]}}const QS=1e3;class YS extends CS{constructor(e,t,n,r,i,s,o,a){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=s,this.appCheckTokenProvider_=o,this.authOverride_=a,this.id=YS.nextPersistentConnectionId_++,this.log_=zI("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=QS,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a&&!tn())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");GS.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&NS.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(dn(i)),Ct(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}get(e){this.initConnection_();const t=new zt,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:e=>{const n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}listen(e,t,n,r){this.initConnection_();const i=e._queryIdentifier,s=e._path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),Ct(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Ct(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");const o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(s).set(i,o),this.connected_&&this.sendListen_(o)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,(n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)}))}sendListen_(e){const t=e.query,n=t._path.toString(),r=t._queryIdentifier;this.log_("Listen on "+n+" for "+r);const i={p:n};e.tag&&(i.q=t._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest("q",i,(i=>{const s=i.d,o=i.s;YS.warnOnListenWarnings_(s,t);(this.listens.get(n)&&this.listens.get(n).get(r))===e&&(this.log_("listen response",i),"ok"!==o&&this.removeListen_(n,r),e.onComplete&&e.onComplete(o,s))}))}static warnOnListenWarnings_(e,t){if(e&&"object"===typeof e&&pn(e,"w")){const n=gn(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();HI("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(e," at ")+"".concat(n," to your security rules for better performance."))}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(()=>{})),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||function(e){const t=fn(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(()=>{}))}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=function(e){const t=fn(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"===typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,(t=>{const n=t.s,r=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,r))}))}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)}))}unlisten(e,t){const n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Ct(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}sendUnlisten_(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);const i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,r){const i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(e=>{r&&setTimeout((()=>{r(e.s,e.d)}),Math.floor(0))}))}put(e,t,n,r){this.putInternal("p",e,t,n,r)}merge(e,t,n,r){this.putInternal("m",e,t,n,r)}putInternal(e,t,n,r,i){this.initConnection_();const s={p:t,d:n};void 0!==i&&(s.h=i),this.outstandingPuts_.push({action:e,request:s,onComplete:r}),this.outstandingPutCount_++;const o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,(n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),r&&r(n.s,n.d)}))}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,(e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}}))}}onDataMessage_(e){if("r"in e){this.log_("from server: "+dn(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):qI("Unrecognized action received from server: "+dn(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Ct(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((()=>{this.establishConnectionTimer_=null,this.establishConnection_()}),Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=QS,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=QS,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=QS),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();const e=Math.max(0,(new Date).getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+YS.nextConnectionId_++,i=this.lastSessionId;let s=!1,o=null;const a=function(){o?o.close():(s=!0,n())},l=function(e){Ct(o,"sendRequest call when we're not connected not allowed."),o.sendRequest(e)};this.realtime_={close:a,sendRequest:l};const c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[a,l]=await Promise.all([this.authTokenProvider_.getToken(c),this.appCheckTokenProvider_.getToken(c)]);s?VI("getToken() completed but was canceled"):(VI("getToken() completed. Creating connection."),this.authToken_=a&&a.accessToken,this.appCheckToken_=l&&l.token,o=new kS(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,n,(e=>{HI(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")}),i))}catch(qI){this.log_("Failed to get token: "+qI),s||(this.repoInfo_.nodeAdmin&&HI(qI),a())}}}interrupt(e){VI("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){VI("Resuming connection for reason: "+e),delete this.interruptReasons_[e],mn(this.interruptReasons_)&&(this.reconnectDelay_=QS,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map((e=>$I(e))).join("$"):"default";const r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,t){const n=new AS(e).toString();let r;if(this.listens.has(n)){const e=this.listens.get(n);r=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(e,t){VI("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){VI("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";tn()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+kI.replace(/\./g,"-")]=1,Yt()?e["framework.cordova"]=1:Zt()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=NS.getInstance().currentlyOnline();return mn(this.interruptReasons_)&&e}}YS.nextPersistentConnectionId_=0,YS.nextConnectionId_=0;class JS{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new JS(e,t)}}class $S{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new JS(KI,e),r=new JS(KI,t);return 0!==this.compare(n,r)}minPost(){return JS.MIN}}let XS;class ZS extends $S{static get __EMPTY_NODE(){return XS}static set __EMPTY_NODE(e){XS=e}compare(e,t){return QI(e.name,t.name)}isDefinedOn(e){throw xt("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return JS.MIN}maxPost(){return new JS(GI,XS)}makePost(e,t){return Ct("string"===typeof e,"KeyIndex indexValue must always be a string."),new JS(e,XS)}toString(){return".key"}}const ek=new ZS;class tk{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,r&&(s*=-1),s<0)e=this.isReverse_?e.left:e.right;else{if(0===s){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class nk{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:nk.RED,this.left=null!=r?r:rk.EMPTY_NODE,this.right=null!=i?i:rk.EMPTY_NODE}copy(e,t,n,r,i){return new nk(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return rk.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,r;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return rk.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,nk.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,nk.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}nk.RED=!0,nk.BLACK=!1;class rk{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:rk.EMPTY_NODE;this.comparator_=e,this.root_=t}insert(e,t){return new rk(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,nk.BLACK,null,null))}remove(e){return new rk(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,nk.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,r=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new tk(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new tk(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new tk(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new tk(this.root_,null,this.comparator_,!0,e)}}function ik(e,t){return QI(e.name,t.name)}function sk(e,t){return QI(e,t)}let ok;rk.EMPTY_NODE=new class{copy(e,t,n,r,i){return this}insert(e,t,n){return new nk(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const ak=function(e){return"number"===typeof e?"number:"+eS(e):"string:"+e},lk=function(e){if(e.isLeafNode()){const t=e.val();Ct("string"===typeof t||"number"===typeof t||"object"===typeof t&&pn(t,".sv"),"Priority must be a string or number.")}else Ct(e===ok||e.isEmpty(),"priority of unexpected type.");Ct(e===ok||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let ck,uk,hk;class dk{static set __childrenNodeConstructor(e){ck=e}static get __childrenNodeConstructor(){return ck}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:dk.__childrenNodeConstructor.EMPTY_NODE;this.value_=e,this.priorityNode_=t,this.lazyHash_=null,Ct(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),lk(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new dk(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:dk.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return jS(e)?this:".priority"===RS(e)?this.priorityNode_:dk.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:dk.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const n=RS(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:(Ct(".priority"!==n||1===DS(e),".priority must be the last token in a path"),this.updateImmediateChild(n,dk.__childrenNodeConstructor.EMPTY_NODE.updateChild(OS(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+ak(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?eS(this.value_):this.value_,this.lazyHash_=LI(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===dk.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof dk.__childrenNodeConstructor?-1:(Ct(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,n=typeof this.value_,r=dk.VALUE_TYPE_ORDER.indexOf(t),i=dk.VALUE_TYPE_ORDER.indexOf(n);return Ct(r>=0,"Unknown leaf type: "+t),Ct(i>=0,"Unknown leaf type: "+n),r===i?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}dk.VALUE_TYPE_ORDER=["object","boolean","number","string"];const fk=new class extends $S{compare(e,t){const n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?QI(e.name,t.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return JS.MIN}maxPost(){return new JS(GI,new dk("[PRIORITY-POST]",hk))}makePost(e,t){const n=uk(e);return new JS(t,new dk("[PRIORITY-POST]",n))}toString(){return".priority"}},pk=Math.log(2);class gk{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/pk,10)),this.current_=this.count-1;const n=(r=this.count,parseInt(Array(r+1).join("1"),2));var r;this.bits_=e+1&n}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const mk=function(e,t,n,r){e.sort(t);const i=function(t,r){const s=r-t;let o,a;if(0===s)return null;if(1===s)return o=e[t],a=n?n(o):o,new nk(a,o.node,nk.BLACK,null,null);{const l=parseInt(s/2,10)+t,c=i(t,l),u=i(l+1,r);return o=e[l],a=n?n(o):o,new nk(a,o.node,nk.BLACK,c,u)}},s=function(t){let r=null,s=null,o=e.length;const a=function(t,r){const s=o-t,a=o;o-=t;const c=i(s+1,a),u=e[s],h=n?n(u):u;l(new nk(h,u.node,r,null,c))},l=function(e){r?(r.left=e,r=e):(s=e,r=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),r=Math.pow(2,t.count-(e+1));n?a(r,nk.BLACK):(a(r,nk.BLACK),a(r,nk.RED))}return s}(new gk(e.length));return new rk(r||t,s)};let yk;const vk={};class _k{static get Default(){return Ct(vk&&fk,"ChildrenNode.ts has not been loaded"),yk=yk||new _k({".priority":vk},{".priority":fk}),yk}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=gn(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof rk?t:null}hasIndex(e){return pn(this.indexSet_,e.toString())}addIndex(e,t){Ct(e!==ek,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let r=!1;const i=t.getIterator(JS.Wrap);let s,o=i.getNext();for(;o;)r=r||e.isDefinedOn(o.node),n.push(o),o=i.getNext();s=r?mk(n,e.getCompare()):vk;const a=e.toString(),l=Object.assign({},this.indexSet_);l[a]=e;const c=Object.assign({},this.indexes_);return c[a]=s,new _k(c,l)}addToIndexes(e,t){const n=yn(this.indexes_,((n,r)=>{const i=gn(this.indexSet_,r);if(Ct(i,"Missing index implementation for "+r),n===vk){if(i.isDefinedOn(e.node)){const n=[],r=t.getIterator(JS.Wrap);let s=r.getNext();for(;s;)s.name!==e.name&&n.push(s),s=r.getNext();return n.push(e),mk(n,i.getCompare())}return vk}{const r=t.get(e.name);let i=n;return r&&(i=i.remove(new JS(e.name,r))),i.insert(e,e.node)}}));return new _k(n,this.indexSet_)}removeFromIndexes(e,t){const n=yn(this.indexes_,(n=>{if(n===vk)return n;{const r=t.get(e.name);return r?n.remove(new JS(e.name,r)):n}}));return new _k(n,this.indexSet_)}}let wk;class bk{static get EMPTY_NODE(){return wk||(wk=new bk(new rk(sk),null,_k.Default))}constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&lk(this.priorityNode_),this.children_.isEmpty()&&Ct(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||wk}updatePriority(e){return this.children_.isEmpty()?this:new bk(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?wk:t}}getChild(e){const t=RS(e);return null===t?this:this.getImmediateChild(t).getChild(OS(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if(Ct(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const n=new JS(e,t);let r,i;t.isEmpty()?(r=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(e,t),i=this.indexMap_.addToIndexes(n,this.children_));const s=r.isEmpty()?wk:this.priorityNode_;return new bk(r,s,i)}}updateChild(e,t){const n=RS(e);if(null===n)return t;{Ct(".priority"!==RS(e)||1===DS(e),".priority must be the last token in a path");const r=this.getImmediateChild(n).updateChild(OS(e),t);return this.updateImmediateChild(n,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,r=0,i=!0;if(this.forEachChild(fk,((s,o)=>{t[s]=o.val(e),n++,i&&bk.INTEGER_REGEXP_.test(s)?r=Math.max(r,Number(s)):i=!1})),!e&&i&&r<2*n){const e=[];for(const n in t)e[n]=t[n];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+ak(this.getPriority().val())+":"),this.forEachChild(fk,((t,n)=>{const r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":LI(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const r=this.resolveIndex_(n);if(r){const n=r.getPredecessorKey(new JS(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new JS(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new JS(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal((e=>t(e.name,e.node))):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(e=>e));{const n=this.children_.getIteratorFrom(e.name,JS.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)<0;)n.getNext(),r=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(e=>e));{const n=this.children_.getReverseIteratorFrom(e.name,JS.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)>0;)n.getNext(),r=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Tk?-1:0}withIndex(e){if(e===ek||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new bk(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===ek||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(fk),n=t.getIterator(fk);let r=e.getNext(),i=n.getNext();for(;r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1}return!1}}resolveIndex_(e){return e===ek?null:this.indexMap_.get(e.toString())}}bk.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const Tk=new class extends bk{constructor(){super(new rk(sk),bk.EMPTY_NODE,_k.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return bk.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(JS,{MIN:{value:new JS(KI,bk.EMPTY_NODE)},MAX:{value:new JS(GI,Tk)}}),ZS.__EMPTY_NODE=bk.EMPTY_NODE,dk.__childrenNodeConstructor=bk,ok=Tk,function(e){hk=e}(Tk);function Ek(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return bk.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),Ct(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){return new dk(e,Ek(t))}if(e instanceof Array){let n=bk.EMPTY_NODE;return ZI(e,((t,r)=>{if(pn(e,t)&&"."!==t.substring(0,1)){const e=Ek(r);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}})),n.updatePriority(Ek(t))}{const n=[];let r=!1;if(ZI(e,((e,t)=>{if("."!==e.substring(0,1)){const i=Ek(t);i.isEmpty()||(r=r||!i.getPriority().isEmpty(),n.push(new JS(e,i)))}})),0===n.length)return bk.EMPTY_NODE;const i=mk(n,ik,(e=>e.name),sk);if(r){const e=mk(n,fk.getCompare());return new bk(i,Ek(t),new _k({".priority":e},{".priority":fk}))}return new bk(i,Ek(t),_k.Default)}}!function(e){uk=e}(Ek);class Ik extends $S{constructor(e){super(),this.indexPath_=e,Ct(!jS(e)&&".priority"!==RS(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?QI(e.name,t.name):i}makePost(e,t){const n=Ek(e),r=bk.EMPTY_NODE.updateChild(this.indexPath_,n);return new JS(t,r)}maxPost(){const e=bk.EMPTY_NODE.updateChild(this.indexPath_,Tk);return new JS(GI,e)}toString(){return MS(this.indexPath_,0).join("/")}}const Sk=new class extends $S{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?QI(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return JS.MIN}maxPost(){return JS.MAX}makePost(e,t){const n=Ek(e);return new JS(t,n)}toString(){return".value"}};function kk(e){return{type:"value",snapshotNode:e}}function Ck(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function xk(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Nk(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class Ak{constructor(e){this.index_=e}updateChild(e,t,n,r,i,s){Ct(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=s&&(n.isEmpty()?e.hasChild(t)?s.trackChildChange(xk(t,o)):Ct(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?s.trackChildChange(Ck(t,n)):s.trackChildChange(Nk(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}updateFullNode(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(fk,((e,r)=>{t.hasChild(e)||n.trackChildChange(xk(e,r))})),t.isLeafNode()||t.forEachChild(fk,((t,r)=>{if(e.hasChild(t)){const i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(Nk(t,r,i))}else n.trackChildChange(Ck(t,r))}))),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?bk.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Pk{constructor(e){this.indexedFilter_=new Ak(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Pk.getStartPost_(e),this.endPost_=Pk.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}updateChild(e,t,n,r,i,s){return this.matches(new JS(t,n))||(n=bk.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,s)}updateFullNode(e,t,n){t.isLeafNode()&&(t=bk.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(bk.EMPTY_NODE);const i=this;return t.forEachChild(fk,((e,t)=>{i.matches(new JS(e,t))||(r=r.updateImmediateChild(e,bk.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class Rk{constructor(e){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const t=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?t<=0:t<0},this.withinEndPost=e=>{const t=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new Pk(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,n,r,i,s){return this.rangedFilter_.matches(new JS(t,n))||(n=bk.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,s):this.fullLimitUpdateChild_(e,t,n,i,s)}updateFullNode(e,t,n){let r;if(t.isLeafNode()||t.isEmpty())r=bk.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let e;r=bk.EMPTY_NODE.withIndex(this.index_),e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;e.hasNext()&&n<this.limit_;){const t=e.getNext();if(this.withinDirectionalStart(t)){if(!this.withinDirectionalEnd(t))break;r=r.updateImmediateChild(t.name,t.node),n++}}}else{let e;r=t.withIndex(this.index_),r=r.updatePriority(bk.EMPTY_NODE),e=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let n=0;for(;e.hasNext();){const t=e.getNext();n<this.limit_&&this.withinDirectionalStart(t)&&this.withinDirectionalEnd(t)?n++:r=r.updateImmediateChild(t.name,bk.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,r,i){let s;if(this.reverse_){const e=this.index_.getCompare();s=(t,n)=>e(n,t)}else s=this.index_.getCompare();const o=e;Ct(o.numChildren()===this.limit_,"");const a=new JS(t,n),l=this.reverse_?o.getFirstChild(this.index_):o.getLastChild(this.index_),c=this.rangedFilter_.matches(a);if(o.hasChild(t)){const e=o.getImmediateChild(t);let u=r.getChildAfterChild(this.index_,l,this.reverse_);for(;null!=u&&(u.name===t||o.hasChild(u.name));)u=r.getChildAfterChild(this.index_,u,this.reverse_);const h=null==u?1:s(u,a);if(c&&!n.isEmpty()&&h>=0)return null!=i&&i.trackChildChange(Nk(t,n,e)),o.updateImmediateChild(t,n);{null!=i&&i.trackChildChange(xk(t,e));const n=o.updateImmediateChild(t,bk.EMPTY_NODE);return null!=u&&this.rangedFilter_.matches(u)?(null!=i&&i.trackChildChange(Ck(u.name,u.node)),n.updateImmediateChild(u.name,u.node)):n}}return n.isEmpty()?e:c&&s(l,a)>=0?(null!=i&&(i.trackChildChange(xk(l.name,l.node)),i.trackChildChange(Ck(t,n))),o.updateImmediateChild(t,n).updateImmediateChild(l.name,bk.EMPTY_NODE)):e}}class Dk{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=fk}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return Ct(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Ct(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:KI}hasEnd(){return this.endSet_}getIndexEndValue(){return Ct(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Ct(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:GI}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return Ct(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===fk}copy(){const e=new Dk;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Ok(e,t,n){const r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Lk(e,t,n){const r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function Mk(e,t){const n=e.copy();return n.index_=t,n}function Fk(e){const t={};if(e.isDefault())return t;let n;if(e.index_===fk?n="$priority":e.index_===Sk?n="$value":e.index_===ek?n="$key":(Ct(e.index_ instanceof Ik,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=dn(n),e.startSet_){const n=e.startAfterSet_?"startAfter":"startAt";t[n]=dn(e.indexStartValue_),e.startNameSet_&&(t[n]+=","+dn(e.indexStartName_))}if(e.endSet_){const n=e.endBeforeSet_?"endBefore":"endAt";t[n]=dn(e.indexEndValue_),e.endNameSet_&&(t[n]+=","+dn(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function Uk(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==fk&&(t.i=e.index_.toString()),t}class jk extends CS{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(Ct(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=zI("p:rest:"),this.listens_={}}listen(e,t,n,r){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const s=jk.getListenId_(e,n),o={};this.listens_[s]=o;const a=Fk(e._queryParams);this.restRequest_(i+".json",a,((e,t)=>{let a=t;if(404===e&&(a=null,e=null),null===e&&this.onDataUpdate_(i,a,!1,n),gn(this.listens_,s)===o){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",r(t,null)}}))}unlisten(e,t){const n=jk.getListenId_(e,t);delete this.listens_[n]}get(e){const t=Fk(e._queryParams),n=e._path.toString(),r=new zt;return this.restRequest_(n+".json",t,((e,t)=>{let i=t;404===e&&(i=null,e=null),null===e?(this.onDataUpdate_(n,i,!1,null),r.resolve(i)):r.reject(new Error(i))})),r.promise}refreshAuthToken(e){}restRequest_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((r=>{let[i,s]=r;i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+wn(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(n&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let e=null;if(a.status>=200&&a.status<300){try{e=hn(a.responseText)}catch($M){HI("Failed to parse JSON response for "+o+": "+a.responseText)}n(null,e)}else 401!==a.status&&404!==a.status&&HI("Got unsuccessful REST response for "+o+" Status: "+a.status),n(a.status);n=null}},a.open("GET",o,!0),a.send()}))}}class Vk{constructor(){this.rootNode_=bk.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function zk(){return{value:null,children:new Map}}function qk(e,t,n){if(jS(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const r=RS(t);e.children.has(r)||e.children.set(r,zk());qk(e.children.get(r),t=OS(t),n)}}function Bk(e,t){if(jS(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;{const n=e.value;return e.value=null,n.forEachChild(fk,((t,n)=>{qk(e,new AS(t),n)})),Bk(e,t)}}if(e.children.size>0){const n=RS(t);if(t=OS(t),e.children.has(n)){Bk(e.children.get(n),t)&&e.children.delete(n)}return 0===e.children.size}return!0}function Hk(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach(((e,n)=>{t(n,e)}))}(e,((e,r)=>{Hk(r,new AS(t.toString()+"/"+e),n)}))}class Wk{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&ZI(this.last_,((e,n)=>{t[e]=t[e]-n})),this.last_=e,t}}class Kk{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Wk(e);const n=1e4+2e4*Math.random();iS(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;ZI(e,((e,r)=>{r>0&&pn(this.statsToReport_,e)&&(t[e]=r,n=!0)})),n&&this.server_.reportStats(t),iS(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Gk;function Qk(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Gk||(Gk={}));class Yk{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=Gk.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(jS(this.path)){if(null!=this.affectedTree.value)return Ct(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new AS(e));return new Yk(PS(),t,this.revert)}}return Ct(RS(this.path)===e,"operationForChild called for unrelated child."),new Yk(OS(this.path),this.affectedTree,this.revert)}}class Jk{constructor(e,t){this.source=e,this.path=t,this.type=Gk.LISTEN_COMPLETE}operationForChild(e){return jS(this.path)?new Jk(this.source,PS()):new Jk(this.source,OS(this.path))}}class $k{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=Gk.OVERWRITE}operationForChild(e){return jS(this.path)?new $k(this.source,PS(),this.snap.getImmediateChild(e)):new $k(this.source,OS(this.path),this.snap)}}class Xk{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=Gk.MERGE}operationForChild(e){if(jS(this.path)){const t=this.children.subtree(new AS(e));return t.isEmpty()?null:t.value?new $k(this.source,PS(),t.value):new Xk(this.source,PS(),t)}return Ct(RS(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Xk(this.source,OS(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Zk{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(jS(e))return this.isFullyInitialized()&&!this.filtered_;const t=RS(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class eC{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function tC(e,t,n,r,i,s){const o=r.filter((e=>e.type===n));o.sort(((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw xt("Should only compare child_ events.");const r=new JS(t.childName,t.snapshotNode),i=new JS(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n))),o.forEach((n=>{const r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,s);i.forEach((i=>{i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function nC(e,t){return{eventCache:e,serverCache:t}}function rC(e,t,n,r){return nC(new Zk(t,n,r),e.serverCache)}function iC(e,t,n,r){return nC(e.eventCache,new Zk(t,n,r))}function sC(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function oC(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let aC;class lC{static fromObject(e){let t=new lC(null);return ZI(e,((e,n)=>{t=t.set(new AS(e),n)})),t}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(aC||(aC=new rk(YI)),aC);this.value=e,this.children=t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:PS(),value:this.value};if(jS(e))return null;{const n=RS(e),r=this.children.get(n);if(null!==r){const i=r.findRootMostMatchingPathAndValue(OS(e),t);if(null!=i){return{path:US(new AS(n),i.path),value:i.value}}return null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,(()=>!0))}subtree(e){if(jS(e))return this;{const t=RS(e),n=this.children.get(t);return null!==n?n.subtree(OS(e)):new lC(null)}}set(e,t){if(jS(e))return new lC(t,this.children);{const n=RS(e),r=(this.children.get(n)||new lC(null)).set(OS(e),t),i=this.children.insert(n,r);return new lC(this.value,i)}}remove(e){if(jS(e))return this.children.isEmpty()?new lC(null):new lC(null,this.children);{const t=RS(e),n=this.children.get(t);if(n){const r=n.remove(OS(e));let i;return i=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&i.isEmpty()?new lC(null):new lC(this.value,i)}return this}}get(e){if(jS(e))return this.value;{const t=RS(e),n=this.children.get(t);return n?n.get(OS(e)):null}}setTree(e,t){if(jS(e))return t;{const n=RS(e),r=(this.children.get(n)||new lC(null)).setTree(OS(e),t);let i;return i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new lC(this.value,i)}}fold(e){return this.fold_(PS(),e)}fold_(e,t){const n={};return this.children.inorderTraversal(((r,i)=>{n[r]=i.fold_(US(e,r),t)})),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,PS(),t)}findOnPath_(e,t,n){const r=!!this.value&&n(t,this.value);if(r)return r;if(jS(e))return null;{const r=RS(e),i=this.children.get(r);return i?i.findOnPath_(OS(e),US(t,r),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,PS(),t)}foreachOnPath_(e,t,n){if(jS(e))return this;{this.value&&n(t,this.value);const r=RS(e),i=this.children.get(r);return i?i.foreachOnPath_(OS(e),US(t,r),n):new lC(null)}}foreach(e){this.foreach_(PS(),e)}foreach_(e,t){this.children.inorderTraversal(((n,r)=>{r.foreach_(US(e,n),t)})),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal(((t,n)=>{n.value&&e(t,n.value)}))}}class cC{constructor(e){this.writeTree_=e}static empty(){return new cC(new lC(null))}}function uC(e,t,n){if(jS(t))return new cC(new lC(n));{const r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){const i=r.path;let s=r.value;const o=VS(i,t);return s=s.updateChild(o,n),new cC(e.writeTree_.set(i,s))}{const r=new lC(n),i=e.writeTree_.setTree(t,r);return new cC(i)}}}function hC(e,t,n){let r=e;return ZI(n,((e,n)=>{r=uC(r,US(t,e),n)})),r}function dC(e,t){if(jS(t))return cC.empty();{const n=e.writeTree_.setTree(t,new lC(null));return new cC(n)}}function fC(e,t){return null!=pC(e,t)}function pC(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(VS(n.path,t)):null}function gC(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(fk,((e,n)=>{t.push(new JS(e,n))})):e.writeTree_.children.inorderTraversal(((e,n)=>{null!=n.value&&t.push(new JS(e,n.value))})),t}function mC(e,t){if(jS(t))return e;{const n=pC(e,t);return new cC(null!=n?new lC(n):e.writeTree_.subtree(t))}}function yC(e){return e.writeTree_.isEmpty()}function vC(e,t){return _C(PS(),e.writeTree_,t)}function _C(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal(((t,i)=>{".priority"===t?(Ct(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=_C(US(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(US(e,".priority"),r)),n}}function wC(e,t){return DC(t,e)}function bC(e,t){const n=e.allWrites.findIndex((e=>e.writeId===t));Ct(n>=0,"removeWrite called with nonexistent writeId.");const r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,s=!1,o=e.allWrites.length-1;for(;i&&o>=0;){const t=e.allWrites[o];t.visible&&(o>=n&&TC(t,r.path)?i=!1:BS(r.path,t.path)&&(s=!0)),o--}if(i){if(s)return function(e){e.visibleWrites=IC(e.allWrites,EC,PS()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;if(r.snap)e.visibleWrites=dC(e.visibleWrites,r.path);else{ZI(r.children,(t=>{e.visibleWrites=dC(e.visibleWrites,US(r.path,t))}))}return!0}return!1}function TC(e,t){if(e.snap)return BS(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&BS(US(e.path,n),t))return!0;return!1}function EC(e){return e.visible}function IC(e,t,n){let r=cC.empty();for(let i=0;i<e.length;++i){const s=e[i];if(t(s)){const e=s.path;let t;if(s.snap)BS(n,e)?(t=VS(n,e),r=uC(r,t,s.snap)):BS(e,n)&&(t=VS(e,n),r=uC(r,PS(),s.snap.getChild(t)));else{if(!s.children)throw xt("WriteRecord should have .snap or .children");if(BS(n,e))t=VS(n,e),r=hC(r,t,s.children);else if(BS(e,n))if(t=VS(e,n),jS(t))r=hC(r,PS(),s.children);else{const e=gn(s.children,RS(t));if(e){const n=e.getChild(OS(t));r=uC(r,PS(),n)}}}}}return r}function SC(e,t,n,r,i){if(r||i){const s=mC(e.visibleWrites,t);if(!i&&yC(s))return n;if(i||null!=n||fC(s,PS())){const s=function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(BS(e.path,t)||BS(t,e.path))};return vC(IC(e.allWrites,s,t),n||bk.EMPTY_NODE)}return null}{const r=pC(e.visibleWrites,t);if(null!=r)return r;{const r=mC(e.visibleWrites,t);if(yC(r))return n;if(null!=n||fC(r,PS())){return vC(r,n||bk.EMPTY_NODE)}return null}}}function kC(e,t,n,r){return SC(e.writeTree,e.treePath,t,n,r)}function CC(e,t){return function(e,t,n){let r=bk.EMPTY_NODE;const i=pC(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(fk,((e,t)=>{r=r.updateImmediateChild(e,t)})),r;if(n){const i=mC(e.visibleWrites,t);return n.forEachChild(fk,((e,t)=>{const n=vC(mC(i,new AS(e)),t);r=r.updateImmediateChild(e,n)})),gC(i).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}return gC(mC(e.visibleWrites,t)).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function xC(e,t,n,r){return function(e,t,n,r,i){Ct(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=US(t,n);if(fC(e.visibleWrites,s))return null;{const t=mC(e.visibleWrites,s);return yC(t)?i.getChild(n):vC(t,i.getChild(n))}}(e.writeTree,e.treePath,t,n,r)}function NC(e,t){return function(e,t){return pC(e.visibleWrites,t)}(e.writeTree,US(e.treePath,t))}function AC(e,t,n,r,i,s){return function(e,t,n,r,i,s,o){let a;const l=mC(e.visibleWrites,t),c=pC(l,PS());if(null!=c)a=c;else{if(null==n)return[];a=vC(l,n)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const e=[],t=o.getCompare(),n=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let l=n.getNext();for(;l&&e.length<i;)0!==t(l,r)&&e.push(l),l=n.getNext();return e}}(e.writeTree,e.treePath,t,n,r,i,s)}function PC(e,t,n){return function(e,t,n,r){const i=US(t,n),s=pC(e.visibleWrites,i);if(null!=s)return s;if(r.isCompleteForChild(n))return vC(mC(e.visibleWrites,i),r.getNode().getImmediateChild(n));return null}(e.writeTree,e.treePath,t,n)}function RC(e,t){return DC(US(e.treePath,t),e.writeTree)}function DC(e,t){return{treePath:e,writeTree:t}}class OC{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;Ct("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),Ct(".priority"!==n,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(n);if(r){const i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,Nk(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,xk(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,Ck(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw xt("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,Nk(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}const LC=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class MC{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new Zk(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return PC(this.writes_,e,t)}}getChildAfterChild(e,t,n){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:oC(this.viewCache_),i=AC(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}function FC(e,t,n,r,i){const s=new OC;let o,a;if(n.type===Gk.OVERWRITE){const l=n;l.source.fromUser?o=VC(e,t,l.path,l.snap,r,i,s):(Ct(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered()&&!jS(l.path),o=jC(e,t,l.path,l.snap,r,i,a,s))}else if(n.type===Gk.MERGE){const l=n;l.source.fromUser?o=function(e,t,n,r,i,s,o){let a=t;return r.foreach(((r,l)=>{const c=US(n,r);zC(t,RS(c))&&(a=VC(e,a,c,l,i,s,o))})),r.foreach(((r,l)=>{const c=US(n,r);zC(t,RS(c))||(a=VC(e,a,c,l,i,s,o))})),a}(e,t,l.path,l.children,r,i,s):(Ct(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered(),o=BC(e,t,l.path,l.children,r,i,a,s))}else if(n.type===Gk.ACK_USER_WRITE){const a=n;o=a.revert?function(e,t,n,r,i,s){let o;if(null!=NC(r,n))return t;{const a=new MC(r,t,i),l=t.eventCache.getNode();let c;if(jS(n)||".priority"===RS(n)){let n;if(t.serverCache.isFullyInitialized())n=kC(r,oC(t));else{const e=t.serverCache.getNode();Ct(e instanceof bk,"serverChildren would be complete if leaf node"),n=CC(r,e)}c=e.filter.updateFullNode(l,n,s)}else{const i=RS(n);let u=PC(r,i,t.serverCache);null==u&&t.serverCache.isCompleteForChild(i)&&(u=l.getImmediateChild(i)),c=null!=u?e.filter.updateChild(l,i,u,OS(n),a,s):t.eventCache.getNode().hasChild(i)?e.filter.updateChild(l,i,bk.EMPTY_NODE,OS(n),a,s):l,c.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=kC(r,oC(t)),o.isLeafNode()&&(c=e.filter.updateFullNode(c,o,s)))}return o=t.serverCache.isFullyInitialized()||null!=NC(r,PS()),rC(t,c,o,e.filter.filtersNodes())}}(e,t,a.path,r,i,s):function(e,t,n,r,i,s,o){if(null!=NC(i,n))return t;const a=t.serverCache.isFiltered(),l=t.serverCache;if(null!=r.value){if(jS(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return jC(e,t,n,l.getNode().getChild(n),i,s,a,o);if(jS(n)){let r=new lC(null);return l.getNode().forEachChild(ek,((e,t)=>{r=r.set(new AS(e),t)})),BC(e,t,n,r,i,s,a,o)}return t}{let c=new lC(null);return r.foreach(((e,t)=>{const r=US(n,e);l.isCompleteForPath(r)&&(c=c.set(e,l.getNode().getChild(r)))})),BC(e,t,n,c,i,s,a,o)}}(e,t,a.path,a.affectedTree,r,i,s)}else{if(n.type!==Gk.LISTEN_COMPLETE)throw xt("Unknown operation type: "+n.type);o=function(e,t,n,r,i){const s=t.serverCache,o=iC(t,s.getNode(),s.isFullyInitialized()||jS(n),s.isFiltered());return UC(e,o,n,r,LC,i)}(e,t,n.path,r,s)}const l=s.getChanges();return function(e,t,n){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=sC(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(kk(sC(t)))}}(t,o,l),{viewCache:o,changes:l}}function UC(e,t,n,r,i,s){const o=t.eventCache;if(null!=NC(r,n))return t;{let a,l;if(jS(n))if(Ct(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=oC(t),i=CC(r,n instanceof bk?n:bk.EMPTY_NODE);a=e.filter.updateFullNode(t.eventCache.getNode(),i,s)}else{const n=kC(r,oC(t));a=e.filter.updateFullNode(t.eventCache.getNode(),n,s)}else{const c=RS(n);if(".priority"===c){Ct(1===DS(n),"Can't have a priority with additional path components");const i=o.getNode();l=t.serverCache.getNode();const s=xC(r,n,i,l);a=null!=s?e.filter.updatePriority(i,s):o.getNode()}else{const u=OS(n);let h;if(o.isCompleteForChild(c)){l=t.serverCache.getNode();const e=xC(r,n,o.getNode(),l);h=null!=e?o.getNode().getImmediateChild(c).updateChild(u,e):o.getNode().getImmediateChild(c)}else h=PC(r,c,t.serverCache);a=null!=h?e.filter.updateChild(o.getNode(),c,h,u,i,s):o.getNode()}}return rC(t,a,o.isFullyInitialized()||jS(n),e.filter.filtersNodes())}}function jC(e,t,n,r,i,s,o,a){const l=t.serverCache;let c;const u=o?e.filter:e.filter.getIndexedFilter();if(jS(n))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const e=l.getNode().updateChild(n,r);c=u.updateFullNode(l.getNode(),e,null)}else{const e=RS(n);if(!l.isCompleteForPath(n)&&DS(n)>1)return t;const i=OS(n),s=l.getNode().getImmediateChild(e).updateChild(i,r);c=".priority"===e?u.updatePriority(l.getNode(),s):u.updateChild(l.getNode(),e,s,i,LC,null)}const h=iC(t,c,l.isFullyInitialized()||jS(n),u.filtersNodes());return UC(e,h,n,i,new MC(i,h,s),a)}function VC(e,t,n,r,i,s,o){const a=t.eventCache;let l,c;const u=new MC(i,t,s);if(jS(n))c=e.filter.updateFullNode(t.eventCache.getNode(),r,o),l=rC(t,c,!0,e.filter.filtersNodes());else{const i=RS(n);if(".priority"===i)c=e.filter.updatePriority(t.eventCache.getNode(),r),l=rC(t,c,a.isFullyInitialized(),a.isFiltered());else{const s=OS(n),c=a.getNode().getImmediateChild(i);let h;if(jS(s))h=r;else{const e=u.getCompleteChild(i);h=null!=e?".priority"===LS(s)&&e.getChild(FS(s)).isEmpty()?e:e.updateChild(s,r):bk.EMPTY_NODE}if(c.equals(h))l=t;else{l=rC(t,e.filter.updateChild(a.getNode(),i,h,s,u,o),a.isFullyInitialized(),e.filter.filtersNodes())}}}return l}function zC(e,t){return e.eventCache.isCompleteForChild(t)}function qC(e,t,n){return n.foreach(((e,n)=>{t=t.updateChild(e,n)})),t}function BC(e,t,n,r,i,s,o,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l,c=t;l=jS(n)?r:new lC(null).setTree(n,r);const u=t.serverCache.getNode();return l.children.inorderTraversal(((n,r)=>{if(u.hasChild(n)){const l=qC(0,t.serverCache.getNode().getImmediateChild(n),r);c=jC(e,c,new AS(n),l,i,s,o,a)}})),l.children.inorderTraversal(((n,r)=>{const l=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!u.hasChild(n)&&!l){const l=qC(0,t.serverCache.getNode().getImmediateChild(n),r);c=jC(e,c,new AS(n),l,i,s,o,a)}})),c}class HC{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,r=new Ak(n.getIndex()),i=(s=n).loadsAllData()?new Ak(s.getIndex()):s.hasLimit()?new Rk(s):new Pk(s);var s;this.processor_=function(e){return{filter:e}}(i);const o=t.serverCache,a=t.eventCache,l=r.updateFullNode(bk.EMPTY_NODE,o.getNode(),null),c=i.updateFullNode(bk.EMPTY_NODE,a.getNode(),null),u=new Zk(l,o.isFullyInitialized(),r.filtersNodes()),h=new Zk(c,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=nC(h,u),this.eventGenerator_=new eC(this.query_)}get query(){return this.query_}}function WC(e,t){const n=oC(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!jS(t)&&!n.getImmediateChild(RS(t)).isEmpty())?n.getChild(t):null}function KC(e){return 0===e.eventRegistrations_.length}function GC(e,t,n){const r=[];if(n){Ct(null==t,"A cancel should cancel all event registrations.");const i=e.query._path;e.eventRegistrations_.forEach((e=>{const t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){let n=[];for(let r=0;r<e.eventRegistrations_.length;++r){const i=e.eventRegistrations_[r];if(i.matches(t)){if(t.hasAnyCallback()){n=n.concat(e.eventRegistrations_.slice(r+1));break}}else n.push(i)}e.eventRegistrations_=n}else e.eventRegistrations_=[];return r}function QC(e,t,n,r){t.type===Gk.MERGE&&null!==t.source.queryId&&(Ct(oC(e.viewCache_),"We should always have a full cache before handling merges"),Ct(sC(e.viewCache_),"Missing event cache, even though we have a server cache"));const i=e.viewCache_,s=FC(e.processor_,i,t,n,r);var o,a;return o=e.processor_,a=s.viewCache,Ct(a.eventCache.getNode().isIndexed(o.filter.getIndex()),"Event snap not indexed"),Ct(a.serverCache.getNode().isIndexed(o.filter.getIndex()),"Server snap not indexed"),Ct(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,YC(e,s.changes,s.viewCache.eventCache.getNode(),null)}function YC(e,t,n,r){const i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){const i=[],s=[];return t.forEach((t=>{var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&s.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),tC(e,i,"child_removed",t,r,n),tC(e,i,"child_added",t,r,n),tC(e,i,"child_moved",s,r,n),tC(e,i,"child_changed",t,r,n),tC(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}let JC,$C;class XC{constructor(){this.views=new Map}}function ZC(e,t,n,r){const i=t.source.queryId;if(null!==i){const s=e.views.get(i);return Ct(null!=s,"SyncTree gave us an op for an invalid query."),QC(s,t,n,r)}{let i=[];for(const s of e.views.values())i=i.concat(QC(s,t,n,r));return i}}function ex(e,t,n,r,i){const s=t._queryIdentifier,o=e.views.get(s);if(!o){let e=kC(n,i?r:null),s=!1;e?s=!0:r instanceof bk?(e=CC(n,r),s=!1):(e=bk.EMPTY_NODE,s=!1);const o=nC(new Zk(e,s,!1),new Zk(r,i,!1));return new HC(t,o)}return o}function tx(e,t,n,r,i,s){const o=ex(e,t,r,i,s);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){const n=e.viewCache_.eventCache,r=[];n.getNode().isLeafNode()||n.getNode().forEachChild(fk,((e,t)=>{r.push(Ck(e,t))}));return n.isFullyInitialized()&&r.push(kk(n.getNode())),YC(e,r,n.getNode(),t)}(o,n)}function nx(e,t,n,r){const i=t._queryIdentifier,s=[];let o=[];const a=ax(e);if("default"===i)for(const[l,c]of e.views.entries())o=o.concat(GC(c,n,r)),KC(c)&&(e.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const t=e.views.get(i);t&&(o=o.concat(GC(t,n,r)),KC(t)&&(e.views.delete(i),t.query._queryParams.loadsAllData()||s.push(t.query)))}return a&&!ax(e)&&s.push(new(Ct(JC,"Reference.ts has not been loaded"),JC)(t._repo,t._path)),{removed:s,events:o}}function rx(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function ix(e,t){let n=null;for(const r of e.views.values())n=n||WC(r,t);return n}function sx(e,t){if(t._queryParams.loadsAllData())return lx(e);{const n=t._queryIdentifier;return e.views.get(n)}}function ox(e,t){return null!=sx(e,t)}function ax(e){return null!=lx(e)}function lx(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let cx=1;class ux{constructor(e){this.listenProvider_=e,this.syncPointTree_=new lC(null),this.pendingWriteTree_={visibleWrites:cC.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function hx(e,t,n,r,i){return function(e,t,n,r,i){Ct(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=uC(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?wx(e,new $k({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function dx(e,t,n,r){!function(e,t,n,r){Ct(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=hC(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);const i=lC.fromObject(n);return wx(e,new Xk({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function fx(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=function(e,t){for(let n=0;n<e.allWrites.length;n++){const r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(bC(e.pendingWriteTree_,t)){let t=new lC(null);return null!=r.snap?t=t.set(PS(),!0):ZI(r.children,(e=>{t=t.set(new AS(e),!0)})),wx(e,new Yk(r.path,t,n))}return[]}function px(e,t,n){return wx(e,new $k({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function gx(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=t._path,o=e.syncPointTree_.get(s);let a=[];if(o&&("default"===t._queryIdentifier||ox(o,t))){const l=nx(o,t,n,r);0===o.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(s));const c=l.removed;if(a=l.events,!i){const n=-1!==c.findIndex((e=>e._queryParams.loadsAllData())),i=e.syncPointTree_.findOnPath(s,((e,t)=>ax(t)));if(n&&!i){const t=e.syncPointTree_.subtree(s);if(!t.isEmpty()){const n=function(e){return e.fold(((e,t,n)=>{if(t&&ax(t)){return[lx(t)]}{let e=[];return t&&(e=rx(t)),ZI(n,((t,n)=>{e=e.concat(n)})),e}}))}(t);for(let t=0;t<n.length;++t){const r=n[t],i=r.query,s=Ex(e,r);e.listenProvider_.startListening(Nx(i),Ix(e,i),s.hashFn,s.onComplete)}}}if(!i&&c.length>0&&!r)if(n){const n=null;e.listenProvider_.stopListening(Nx(t),n)}else c.forEach((t=>{const n=e.queryToTagMap.get(Sx(t));e.listenProvider_.stopListening(Nx(t),n)}))}!function(e,t){for(let n=0;n<t.length;++n){const r=t[n];if(!r._queryParams.loadsAllData()){const t=Sx(r),n=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(n)}}}(e,c)}return a}function mx(e,t,n,r){const i=kx(e,r);if(null!=i){const r=Cx(i),s=r.path,o=r.queryId,a=VS(s,t);return xx(e,s,new $k(Qk(o),a,n))}return[]}function yx(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=t._path;let s=null,o=!1;e.syncPointTree_.foreachOnPath(i,((e,t)=>{const n=VS(e,i);s=s||ix(t,n),o=o||ax(t)}));let a,l=e.syncPointTree_.get(i);if(l?(o=o||ax(l),s=s||ix(l,PS())):(l=new XC,e.syncPointTree_=e.syncPointTree_.set(i,l)),null!=s)a=!0;else{a=!1,s=bk.EMPTY_NODE;e.syncPointTree_.subtree(i).foreachChild(((e,t)=>{const n=ix(t,PS());n&&(s=s.updateImmediateChild(e,n))}))}const c=ox(l,t);if(!c&&!t._queryParams.loadsAllData()){const n=Sx(t);Ct(!e.queryToTagMap.has(n),"View does not exist, but we have a tag");const r=cx++;e.queryToTagMap.set(n,r),e.tagToQueryMap.set(r,n)}let u=tx(l,t,n,wC(e.pendingWriteTree_,i),s,a);if(!c&&!o&&!r){const n=sx(l,t);u=u.concat(function(e,t,n){const r=t._path,i=Ix(e,t),s=Ex(e,n),o=e.listenProvider_.startListening(Nx(t),i,s.hashFn,s.onComplete),a=e.syncPointTree_.subtree(r);if(i)Ct(!ax(a.value),"If we're adding a query, it shouldn't be shadowed");else{const t=a.fold(((e,t,n)=>{if(!jS(e)&&t&&ax(t))return[lx(t).query];{let e=[];return t&&(e=e.concat(rx(t).map((e=>e.query)))),ZI(n,((t,n)=>{e=e.concat(n)})),e}}));for(let n=0;n<t.length;++n){const r=t[n];e.listenProvider_.stopListening(Nx(r),Ix(e,r))}}return o}(e,t,n))}return u}function vx(e,t,n){const r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,((e,n)=>{const r=ix(n,VS(e,t));if(r)return r}));return SC(r,t,i,n,!0)}function _x(e,t){const n=t._path;let r=null;e.syncPointTree_.foreachOnPath(n,((e,t)=>{const i=VS(e,n);r=r||ix(t,i)}));let i=e.syncPointTree_.get(n);i?r=r||ix(i,PS()):(i=new XC,e.syncPointTree_=e.syncPointTree_.set(n,i));const s=null!=r,o=s?new Zk(r,!0,!1):null;return function(e){return sC(e.viewCache_)}(ex(i,t,wC(e.pendingWriteTree_,t._path),s?o.getNode():bk.EMPTY_NODE,s))}function wx(e,t){return bx(t,e.syncPointTree_,null,wC(e.pendingWriteTree_,PS()))}function bx(e,t,n,r){if(jS(e.path))return Tx(e,t,n,r);{const i=t.get(PS());null==n&&null!=i&&(n=ix(i,PS()));let s=[];const o=RS(e.path),a=e.operationForChild(o),l=t.children.get(o);if(l&&a){const e=n?n.getImmediateChild(o):null,t=RC(r,o);s=s.concat(bx(a,l,e,t))}return i&&(s=s.concat(ZC(i,e,r,n))),s}}function Tx(e,t,n,r){const i=t.get(PS());null==n&&null!=i&&(n=ix(i,PS()));let s=[];return t.children.inorderTraversal(((t,i)=>{const o=n?n.getImmediateChild(t):null,a=RC(r,t),l=e.operationForChild(t);l&&(s=s.concat(Tx(l,i,o,a)))})),i&&(s=s.concat(ZC(i,e,r,n))),s}function Ex(e,t){const n=t.query,r=Ix(e,n);return{hashFn:()=>{const e=function(e){return e.viewCache_.serverCache.getNode()}(t)||bk.EMPTY_NODE;return e.hash()},onComplete:t=>{if("ok"===t)return r?function(e,t,n){const r=kx(e,n);if(r){const n=Cx(r),i=n.path,s=n.queryId,o=VS(i,t);return xx(e,i,new Jk(Qk(s),o))}return[]}(e,n._path,r):function(e,t){return wx(e,new Jk({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);{const r=function(e,t){let n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");const r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return gx(e,n,null,r)}}}}function Ix(e,t){const n=Sx(t);return e.queryToTagMap.get(n)}function Sx(e){return e._path.toString()+"$"+e._queryIdentifier}function kx(e,t){return e.tagToQueryMap.get(t)}function Cx(e){const t=e.indexOf("$");return Ct(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new AS(e.substr(0,t))}}function xx(e,t,n){const r=e.syncPointTree_.get(t);Ct(r,"Missing sync point for query tag that we're tracking");return ZC(r,n,wC(e.pendingWriteTree_,t),null)}function Nx(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(Ct($C,"Reference.ts has not been loaded"),$C)(e._repo,e._path):e}class Ax{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Ax(t)}node(){return this.node_}}class Px{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=US(this.path_,e);return new Px(this.syncTree_,t)}node(){return vx(this.syncTree_,this.path_)}}const Rx=function(e,t,n){return e&&"object"===typeof e?(Ct(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?Dx(e[".sv"],t,n):"object"===typeof e[".sv"]?Ox(e[".sv"],t):void Ct(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},Dx=function(e,t,n){if("timestamp"===e)return n.timestamp;Ct(!1,"Unexpected server value: "+e)},Ox=function(e,t,n){e.hasOwnProperty("increment")||Ct(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const r=e.increment;"number"!==typeof r&&Ct(!1,"Unexpected increment value: "+r);const i=t.node();if(Ct(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const s=i.getValue();return"number"!==typeof s?r:s+r},Lx=function(e,t,n,r){return Fx(t,new Px(n,e),r)},Mx=function(e,t,n){return Fx(e,new Ax(t),n)};function Fx(e,t,n){const r=e.getPriority().val(),i=Rx(r,t.getImmediateChild(".priority"),n);let s;if(e.isLeafNode()){const r=e,s=Rx(r.getValue(),t,n);return s!==r.getValue()||i!==r.getPriority().val()?new dk(s,Ek(i)):e}{const r=e;return s=r,i!==r.getPriority().val()&&(s=s.updatePriority(new dk(i))),r.forEachChild(fk,((e,r)=>{const i=Fx(r,t.getImmediateChild(e),n);i!==r&&(s=s.updateImmediateChild(e,i))})),s}}class Ux{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};this.name=e,this.parent=t,this.node=n}}function jx(e,t){let n=t instanceof AS?t:new AS(t),r=e,i=RS(n);for(;null!==i;){const e=gn(r.node.children,i)||{children:{},childCount:0};r=new Ux(i,r,e),n=OS(n),i=RS(n)}return r}function Vx(e){return e.node.value}function zx(e,t){e.node.value=t,Kx(e)}function qx(e){return e.node.childCount>0}function Bx(e,t){ZI(e.node.children,((n,r)=>{t(new Ux(n,e,r))}))}function Hx(e,t,n,r){n&&!r&&t(e),Bx(e,(e=>{Hx(e,t,!0,r)})),n&&r&&t(e)}function Wx(e){return new AS(null===e.parent?e.name:Wx(e.parent)+"/"+e.name)}function Kx(e){null!==e.parent&&function(e,t,n){const r=function(e){return void 0===Vx(e)&&!qx(e)}(n),i=pn(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,Kx(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,Kx(e))}(e.parent,e.name,e)}const Gx=/[\[\].#$\/\u0000-\u001F\u007F]/,Qx=/[\[\].#$\u0000-\u001F\u007F]/,Yx=10485760,Jx=function(e){return"string"===typeof e&&0!==e.length&&!Gx.test(e)},$x=function(e){return"string"===typeof e&&0!==e.length&&!Qx.test(e)},Xx=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!WI(e)||e&&"object"===typeof e&&pn(e,".sv")},Zx=function(e,t,n,r){r&&void 0===t||eN(xn(e,"value"),t,n)},eN=function(e,t,n){const r=n instanceof AS?new HS(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+KS(r));if("function"===typeof t)throw new Error(e+"contains a function "+KS(r)+" with contents = "+t.toString());if(WI(t))throw new Error(e+"contains "+t.toString()+" "+KS(r));if("string"===typeof t&&t.length>Yx/3&&Pn(t)>Yx)throw new Error(e+"contains a string greater than "+Yx+" utf8 bytes "+KS(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"===typeof t){let n=!1,i=!1;if(ZI(t,((t,s)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(i=!0,!Jx(t)))throw new Error(e+" contains an invalid key ("+t+") "+KS(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=Pn(t),WS(e)}(r,t),eN(e,s,r),function(e){const t=e.parts_.pop();e.byteLength_-=Pn(t),e.parts_.length>0&&(e.byteLength_-=1)}(r)})),n&&i)throw new Error(e+' contains ".value" child '+KS(r)+" in addition to actual children.")}},tN=function(e,t,n,r){if(r&&void 0===t)return;const i=xn(e,"values");if(!t||"object"!==typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");const s=[];ZI(t,((e,t)=>{const r=new AS(e);if(eN(i,t,US(n,r)),".priority"===LS(r)&&!Xx(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(r)})),function(e,t){let n,r;for(n=0;n<t.length;n++){r=t[n];const i=MS(r);for(let t=0;t<i.length;t++)if(".priority"===i[t]&&t===i.length-1);else if(!Jx(i[t]))throw new Error(e+"contains an invalid key ("+i[t]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(zS);let i=null;for(n=0;n<t.length;n++){if(r=t[n],null!==i&&BS(i,r))throw new Error(e+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,s)},nN=function(e,t,n){if(!n||void 0!==t){if(WI(t))throw new Error(xn(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Xx(t))throw new Error(xn(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},rN=function(e,t,n,r){if((!r||void 0!==n)&&!Jx(n))throw new Error(xn(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},iN=function(e,t,n,r){if((!r||void 0!==n)&&!$x(n))throw new Error(xn(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},sN=function(e,t){if(".info"===RS(t))throw new Error(e+" failed = Can't modify data under /.info/")},oN=function(e,t){const n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!Jx(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),$x(e)}(n))throw new Error(xn(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class aN{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function lN(e,t){let n=null;for(let r=0;r<t.length;r++){const i=t[r],s=i.getPath();null===n||qS(s,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(i)}n&&e.eventLists_.push(n)}function cN(e,t,n){lN(e,n),hN(e,(e=>qS(e,t)))}function uN(e,t,n){lN(e,n),hN(e,(e=>BS(e,t)||BS(t,e)))}function hN(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){const i=e.eventLists_[r];if(i){t(i.path)?(dN(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function dN(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const r=n.getEventRunner();FI&&VI("event: "+n.toString()),rS(r)}}}const fN="repo_interrupt";class pN{constructor(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new aN,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=zk(),this.transactionQueueTree_=new Ux,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function gN(e,t,n){if(e.stats_=vS(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new jk(e.repoInfo_,((t,n,r,i)=>{vN(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((()=>_N(e,!0)),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{dn(n)}catch($M){throw new Error("Invalid authOverride provided: "+$M)}}e.persistentConnection_=new YS(e.repoInfo_,t,((t,n,r,i)=>{vN(e,t,n,r,i)}),(t=>{_N(e,t)}),(t=>{!function(e,t){ZI(t,((t,n)=>{wN(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((t=>{e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((t=>{e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){const n=e.toString();return yS[n]||(yS[n]=t()),yS[n]}(e.repoInfo_,(()=>new Kk(e.stats_,e.server_))),e.infoData_=new Vk,e.infoSyncTree_=new ux({startListening:(t,n,r,i)=>{let s=[];const o=e.infoData_.getNode(t._path);return o.isEmpty()||(s=px(e.infoSyncTree_,t._path,o),setTimeout((()=>{i("ok")}),0)),s},stopListening:()=>{}}),wN(e,"connected",!1),e.serverSyncTree_=new ux({startListening:(t,n,r,i)=>(e.server_.listen(t,r,n,((n,r)=>{const s=i(n,r);uN(e.eventQueue_,t._path,s)})),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function mN(e){const t=e.infoData_.getNode(new AS(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function yN(e){return(t=(t={timestamp:mN(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function vN(e,t,n,r,i){e.dataUpdateCount++;const s=new AS(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let o=[];if(i)if(r){const t=yn(n,(e=>Ek(e)));o=function(e,t,n,r){const i=kx(e,r);if(i){const r=Cx(i),s=r.path,o=r.queryId,a=VS(s,t),l=lC.fromObject(n);return xx(e,s,new Xk(Qk(o),a,l))}return[]}(e.serverSyncTree_,s,t,i)}else{const t=Ek(n);o=mx(e.serverSyncTree_,s,t,i)}else if(r){const t=yn(n,(e=>Ek(e)));o=function(e,t,n){const r=lC.fromObject(n);return wx(e,new Xk({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,s,t)}else{const t=Ek(n);o=px(e.serverSyncTree_,s,t)}let a=s;o.length>0&&(a=PN(e,s)),uN(e.eventQueue_,a,o)}function _N(e,t){wN(e,"connected",t),!1===t&&function(e){CN(e,"onDisconnectEvents");const t=yN(e),n=zk();Hk(e.onDisconnect_,PS(),((r,i)=>{const s=Lx(r,i,e.serverSyncTree_,t);qk(n,r,s)}));let r=[];Hk(n,PS(),((t,n)=>{r=r.concat(px(e.serverSyncTree_,t,n));const i=MN(e,t);PN(e,i)})),e.onDisconnect_=zk(),uN(e.eventQueue_,PS(),r)}(e)}function wN(e,t,n){const r=new AS("/.info/"+t),i=Ek(n);e.infoData_.updateSnapshot(r,i);const s=px(e.infoSyncTree_,r,i);uN(e.eventQueue_,r,s)}function bN(e){return e.nextWriteId_++}function TN(e,t,n,r,i){CN(e,"set",{path:t.toString(),value:n,priority:r});const s=yN(e),o=Ek(n,r),a=vx(e.serverSyncTree_,t),l=Mx(o,a,s),c=bN(e),u=hx(e.serverSyncTree_,t,l,c,!0);lN(e.eventQueue_,u),e.server_.put(t.toString(),o.val(!0),((n,r)=>{const s="ok"===n;s||HI("set at "+t+" failed: "+n);const o=fx(e.serverSyncTree_,c,!s);uN(e.eventQueue_,t,o),xN(e,i,n,r)}));const h=MN(e,t);PN(e,h),uN(e.eventQueue_,h,[])}function EN(e,t,n){e.server_.onDisconnectCancel(t.toString(),((r,i)=>{"ok"===r&&Bk(e.onDisconnect_,t),xN(e,n,r,i)}))}function IN(e,t,n,r){const i=Ek(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),((n,s)=>{"ok"===n&&qk(e.onDisconnect_,t,i),xN(e,r,n,s)}))}function SN(e,t,n){let r;r=".info"===RS(t._path)?gx(e.infoSyncTree_,t,n):gx(e.serverSyncTree_,t,n),cN(e.eventQueue_,t._path,r)}function kN(e){e.persistentConnection_&&e.persistentConnection_.interrupt(fN)}function CN(e){let t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];VI(t,...r)}function xN(e,t,n,r){t&&rS((()=>{if("ok"===n)t(null);else{const e=(n||"error").toUpperCase();let i=e;r&&(i+=": "+r);const s=new Error(i);s.code=e,t(s)}}))}function NN(e,t,n){return vx(e.serverSyncTree_,t,n)||bk.EMPTY_NODE}function AN(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||LN(e,t),Vx(t)){const n=DN(e,t);Ct(n.length>0,"Sending zero length transaction queue");n.every((e=>0===e.status))&&function(e,t,n){const r=n.map((e=>e.currentWriteId)),i=NN(e,t,r);let s=i;const o=i.hash();for(let c=0;c<n.length;c++){const e=n[c];Ct(0===e.status,"tryToSendTransactionQueue_: items in queue should all be run."),e.status=1,e.retryCount++;const r=VS(t,e.path);s=s.updateChild(r,e.currentOutputSnapshotRaw)}const a=s.val(!0),l=t;e.server_.put(l.toString(),a,(r=>{CN(e,"transaction put response",{path:l.toString(),status:r});let i=[];if("ok"===r){const r=[];for(let t=0;t<n.length;t++)n[t].status=2,i=i.concat(fx(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&r.push((()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved))),n[t].unwatcher();LN(e,jx(e.transactionQueueTree_,t)),AN(e,e.transactionQueueTree_),uN(e.eventQueue_,t,i);for(let e=0;e<r.length;e++)rS(r[e])}else{if("datastale"===r)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{HI("transaction at "+l.toString()+" failed: "+r);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=r}PN(e,t)}}),o)}(e,Wx(t),n)}else qx(t)&&Bx(t,(t=>{AN(e,t)}))}function PN(e,t){const n=RN(e,t),r=Wx(n);return function(e,t,n){if(0===t.length)return;const r=[];let i=[];const s=t.filter((e=>0===e.status)),o=s.map((e=>e.currentWriteId));for(let l=0;l<t.length;l++){const s=t[l],c=VS(n,s.path);let u,h=!1;if(Ct(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===s.status)h=!0,u=s.abortReason,i=i.concat(fx(e.serverSyncTree_,s.currentWriteId,!0));else if(0===s.status)if(s.retryCount>=25)h=!0,u="maxretry",i=i.concat(fx(e.serverSyncTree_,s.currentWriteId,!0));else{const n=NN(e,s.path,o);s.currentInputSnapshot=n;const r=t[l].update(n.val());if(void 0!==r){eN("transaction failed: Data returned ",r,s.path);let t=Ek(r);"object"===typeof r&&null!=r&&pn(r,".priority")||(t=t.updatePriority(n.getPriority()));const a=s.currentWriteId,l=yN(e),c=Mx(t,n,l);s.currentOutputSnapshotRaw=t,s.currentOutputSnapshotResolved=c,s.currentWriteId=bN(e),o.splice(o.indexOf(a),1),i=i.concat(hx(e.serverSyncTree_,s.path,c,s.currentWriteId,s.applyLocally)),i=i.concat(fx(e.serverSyncTree_,a,!0))}else h=!0,u="nodata",i=i.concat(fx(e.serverSyncTree_,s.currentWriteId,!0))}uN(e.eventQueue_,n,i),i=[],h&&(t[l].status=2,a=t[l].unwatcher,setTimeout(a,Math.floor(0)),t[l].onComplete&&("nodata"===u?r.push((()=>t[l].onComplete(null,!1,t[l].currentInputSnapshot))):r.push((()=>t[l].onComplete(new Error(u),!1,null)))))}var a;LN(e,e.transactionQueueTree_);for(let l=0;l<r.length;l++)rS(r[l]);AN(e,e.transactionQueueTree_)}(e,DN(e,n),r),r}function RN(e,t){let n,r=e.transactionQueueTree_;for(n=RS(t);null!==n&&void 0===Vx(r);)r=jx(r,n),n=RS(t=OS(t));return r}function DN(e,t){const n=[];return ON(e,t,n),n.sort(((e,t)=>e.order-t.order)),n}function ON(e,t,n){const r=Vx(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Bx(t,(t=>{ON(e,t,n)}))}function LN(e,t){const n=Vx(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,zx(t,n.length>0?n:void 0)}Bx(t,(t=>{LN(e,t)}))}function MN(e,t){const n=Wx(RN(e,t)),r=jx(e.transactionQueueTree_,t);return function(e,t,n){let r=n?e:e.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(r,(t=>{FN(e,t)})),FN(e,r),Hx(r,(t=>{FN(e,t)})),n}function FN(e,t){const n=Vx(t);if(n){const r=[];let i=[],s=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?(Ct(s===t-1,"All SENT items should be at beginning of queue."),s=t,n[t].status=3,n[t].abortReason="set"):(Ct(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),i=i.concat(fx(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&r.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===s?zx(t,void 0):n.length=s+1,uN(e.eventQueue_,Wx(t),i);for(let e=0;e<r.length;e++)rS(r[e])}}const UN=function(e,t){const n=jN(e),r=n.namespace;"firebase.com"===n.domain&&BI(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||BI("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&HI("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new fS(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new AS(n.pathString)}},jN=function(e){let t="",n="",r="",i="",s="",o=!0,a="https",l=443;if("string"===typeof e){let c=e.indexOf("//");c>=0&&(a=e.substring(0,c-1),e=e.substring(c+2));let u=e.indexOf("/");-1===u&&(u=e.length);let h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(u,h)),u<h&&(i=function(e){let t="";const n=e.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let e=n[r];try{e=decodeURIComponent(e.replace(/\+/g," "))}catch($M){}t+="/"+e}return t}(e.substring(u,h)));const d=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):HI("Invalid query segment '".concat(n,"' in query '").concat(e,"'"))}return t}(e.substring(Math.min(e.length,h)));c=t.indexOf(":"),c>=0?(o="https"===a||"wss"===a,l=parseInt(t.substring(c+1),10)):c=t.length;const f=t.slice(0,c);if("localhost"===f.toLowerCase())n="localhost";else if(f.split(".").length<=2)n=f;else{const e=t.indexOf(".");r=t.substring(0,e).toLowerCase(),n=t.substring(e+1),s=r}"ns"in d&&(s=d.ns)}return{host:t,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}},VN="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",zN=function(){let e=0;const t=[];return function(n){const r=n===e;let i;e=n;const s=new Array(8);for(i=7;i>=0;i--)s[i]=VN.charAt(n%64),n=Math.floor(n/64);Ct(0===n,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&63===t[i];i--)t[i]=0;t[i]++}else for(i=0;i<12;i++)t[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)o+=VN.charAt(t[i]);return Ct(20===o.length,"nextPushId: Length should be 20."),o}}();class qN{constructor(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+dn(this.snapshot.exportVal())}}class BN{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class HN{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return Ct(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class WN{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new zt;return EN(this._repo,this._path,e.wrapCallback((()=>{}))),e.promise}remove(){sN("OnDisconnect.remove",this._path);const e=new zt;return IN(this._repo,this._path,null,e.wrapCallback((()=>{}))),e.promise}set(e){sN("OnDisconnect.set",this._path),Zx("OnDisconnect.set",e,this._path,!1);const t=new zt;return IN(this._repo,this._path,e,t.wrapCallback((()=>{}))),t.promise}setWithPriority(e,t){sN("OnDisconnect.setWithPriority",this._path),Zx("OnDisconnect.setWithPriority",e,this._path,!1),nN("OnDisconnect.setWithPriority",t,!1);const n=new zt;return function(e,t,n,r,i){const s=Ek(n,r);e.server_.onDisconnectPut(t.toString(),s.val(!0),((n,r)=>{"ok"===n&&qk(e.onDisconnect_,t,s),xN(0,i,n,r)}))}(this._repo,this._path,e,t,n.wrapCallback((()=>{}))),n.promise}update(e){sN("OnDisconnect.update",this._path),tN("OnDisconnect.update",e,this._path,!1);const t=new zt;return function(e,t,n,r){if(mn(n))return VI("onDisconnect().update() called with empty data.  Don't do anything."),void xN(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,((i,s)=>{"ok"===i&&ZI(n,((n,r)=>{const i=Ek(r);qk(e.onDisconnect_,US(t,n),i)})),xN(0,r,i,s)}))}(this._repo,this._path,e,t.wrapCallback((()=>{}))),t.promise}}class KN{constructor(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}get key(){return jS(this._path)?null:LS(this._path)}get ref(){return new JN(this._repo,this._path)}get _queryIdentifier(){const e=Uk(this._queryParams),t=$I(e);return"{}"===t?"default":t}get _queryObject(){return Uk(this._queryParams)}isEqual(e){if(!((e=Dn(e))instanceof KN))return!1;const t=this._repo===e._repo,n=qS(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}function GN(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function QN(e){let t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===ek){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==KI)throw new Error(r);if("string"!==typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==GI)throw new Error(r);if("string"!==typeof n)throw new Error(i)}}else if(e.getIndex()===fk){if(null!=t&&!Xx(t)||null!=n&&!Xx(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Ct(e.getIndex()instanceof Ik||e.getIndex()===Sk,"unknown index type."),null!=t&&"object"===typeof t||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function YN(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class JN extends KN{constructor(e,t){super(e,t,new Dk,!1)}get parent(){const e=FS(this._path);return null===e?null:new JN(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class $N{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new AS(e),n=eA(this.ref,e);return new $N(this._node.getChild(t),n,fk)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){if(this._node.isLeafNode())return!1;return!!this._node.forEachChild(this._index,((t,n)=>e(new $N(n,eA(this.ref,t),fk))))}hasChild(e){const t=new AS(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function XN(e,t){return(e=Dn(e))._checkNotDeleted("ref"),void 0!==t?eA(e._root,t):e._root}function ZN(e,t){(e=Dn(e))._checkNotDeleted("refFromURL");const n=UN(t,e._repo.repoInfo_.nodeAdmin);oN("refFromURL",n);const r=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||r.host===e._repo.repoInfo_.host||BI("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),XN(e,n.path.toString())}function eA(e,t){var n,r,i,s;return null===RS((e=Dn(e))._path)?(n="child",r="path",s=!1,(i=t)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),iN(n,r,i,s)):iN("child","path",t,!1),new JN(e._repo,US(e._path,t))}function tA(e,t){e=Dn(e),sN("set",e._path),Zx("set",t,e._path,!1);const n=new zt;return TN(e._repo,e._path,t,null,n.wrapCallback((()=>{}))),n.promise}function nA(e,t){tN("update",t,e._path,!1);const n=new zt;return function(e,t,n,r){CN(e,"update",{path:t.toString(),value:n});let i=!0;const s=yN(e),o={};if(ZI(n,((n,r)=>{i=!1,o[n]=Lx(US(t,n),Ek(r),e.serverSyncTree_,s)})),i)VI("update() called with empty data.  Don't do anything."),xN(0,r,"ok",void 0);else{const i=bN(e),s=dx(e.serverSyncTree_,t,o,i);lN(e.eventQueue_,s),e.server_.merge(t.toString(),n,((n,s)=>{const o="ok"===n;o||HI("update at "+t+" failed: "+n);const a=fx(e.serverSyncTree_,i,!o),l=a.length>0?PN(e,t):t;uN(e.eventQueue_,l,a),xN(0,r,n,s)})),ZI(n,(n=>{const r=MN(e,US(t,n));PN(e,r)})),uN(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback((()=>{}))),n.promise}function rA(e){e=Dn(e);const t=new HN((()=>{})),n=new iA(t);return function(e,t,n){const r=_x(e.serverSyncTree_,t);return null!=r?Promise.resolve(r):e.server_.get(t).then((r=>{const i=Ek(r).withIndex(t._queryParams.getIndex());let s;if(yx(e.serverSyncTree_,t,n,!0),t._queryParams.loadsAllData())s=px(e.serverSyncTree_,t._path,i);else{const n=Ix(e.serverSyncTree_,t);s=mx(e.serverSyncTree_,t._path,i,n)}return uN(e.eventQueue_,t._path,s),gx(e.serverSyncTree_,t,n,null,!0),i}),(n=>(CN(e,"get for query "+dn(t)+" failed: "+n),Promise.reject(new Error(n)))))}(e._repo,e,n).then((t=>new $N(t,new JN(e._repo,e._path),e._queryParams.getIndex())))}class iA{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const n=t._queryParams.getIndex();return new qN("value",this,new $N(e.snapshotNode,new JN(t._repo,t._path),n))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new BN(this,e,t):null}matches(e){return e instanceof iA&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class sA{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new BN(this,e,t):null}createEvent(e,t){Ct(null!=e.childName,"Child events should have a childName.");const n=eA(new JN(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new qN(e.type,this,new $N(e.snapshotNode,n,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof sA&&(this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)))}hasAnyCallback(){return!!this.callbackContext}}function oA(e,t,n,r,i){let s;if("object"===typeof r&&(s=void 0,i=r),"function"===typeof r&&(s=r),i&&i.onlyOnce){const t=n,r=(n,r)=>{SN(e._repo,e,a),t(n,r)};r.userCallback=n.userCallback,r.context=n.context,n=r}const o=new HN(n,s||void 0),a="value"===t?new iA(o):new sA(t,o);return function(e,t,n){let r;r=".info"===RS(t._path)?yx(e.infoSyncTree_,t,n):yx(e.serverSyncTree_,t,n),cN(e.eventQueue_,t._path,r)}(e._repo,e,a),()=>SN(e._repo,e,a)}function aA(e,t,n,r){return oA(e,"value",t,n,r)}function lA(e,t,n,r){return oA(e,"child_added",t,n,r)}function cA(e,t,n,r){return oA(e,"child_changed",t,n,r)}function uA(e,t,n,r){return oA(e,"child_moved",t,n,r)}function hA(e,t,n,r){return oA(e,"child_removed",t,n,r)}function dA(e,t,n){let r=null;const i=n?new HN(n):null;"value"===t?r=new iA(i):t&&(r=new sA(t,i)),SN(e._repo,e,r)}class fA{}class pA extends fA{constructor(e,t){super(),this._value=e,this._key=t,this.type="endAt"}_apply(e){Zx("endAt",this._value,e._path,!0);const t=Lk(e._queryParams,this._value,this._key);if(YN(t),QN(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new KN(e._repo,e._path,t,e._orderByCalled)}}class gA extends fA{constructor(e,t){super(),this._value=e,this._key=t,this.type="endBefore"}_apply(e){Zx("endBefore",this._value,e._path,!1);const t=function(e,t,n){let r;return r=e.index_===ek||n?Lk(e,t,n):Lk(e,t,KI),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(YN(t),QN(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new KN(e._repo,e._path,t,e._orderByCalled)}}class mA extends fA{constructor(e,t){super(),this._value=e,this._key=t,this.type="startAt"}_apply(e){Zx("startAt",this._value,e._path,!0);const t=Ok(e._queryParams,this._value,this._key);if(YN(t),QN(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new KN(e._repo,e._path,t,e._orderByCalled)}}class yA extends fA{constructor(e,t){super(),this._value=e,this._key=t,this.type="startAfter"}_apply(e){Zx("startAfter",this._value,e._path,!1);const t=function(e,t,n){let r;return r=e.index_===ek||n?Ok(e,t,n):Ok(e,t,GI),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(YN(t),QN(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new KN(e._repo,e._path,t,e._orderByCalled)}}class vA extends fA{constructor(e){super(),this._limit=e,this.type="limitToFirst"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new KN(e._repo,e._path,function(e,t){const n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}(e._queryParams,this._limit),e._orderByCalled)}}class _A extends fA{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new KN(e._repo,e._path,function(e,t){const n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)}}class wA extends fA{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){GN(e,"orderByChild");const t=new AS(this._path);if(jS(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const n=new Ik(t),r=Mk(e._queryParams,n);return QN(r),new KN(e._repo,e._path,r,!0)}}class bA extends fA{constructor(){super(...arguments),this.type="orderByKey"}_apply(e){GN(e,"orderByKey");const t=Mk(e._queryParams,ek);return QN(t),new KN(e._repo,e._path,t,!0)}}class TA extends fA{constructor(){super(...arguments),this.type="orderByPriority"}_apply(e){GN(e,"orderByPriority");const t=Mk(e._queryParams,fk);return QN(t),new KN(e._repo,e._path,t,!0)}}class EA extends fA{constructor(){super(...arguments),this.type="orderByValue"}_apply(e){GN(e,"orderByValue");const t=Mk(e._queryParams,Sk);return QN(t),new KN(e._repo,e._path,t,!0)}}class IA extends fA{constructor(e,t){super(),this._value=e,this._key=t,this.type="equalTo"}_apply(e){if(Zx("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new pA(this._value,this._key)._apply(new mA(this._value,this._key)._apply(e))}}function SA(e){let t=Dn(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(const s of r)t=s._apply(t);return t}!function(e){Ct(!JC,"__referenceConstructor has already been defined"),JC=e}(JN),function(e){Ct(!$C,"__referenceConstructor has already been defined"),$C=e}(JN);const kA={};let CA=!1;function xA(e,t,n,r,i){let s=r||e.options.databaseURL;void 0===s&&(e.options.projectId||BI("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),VI("Using default host for project ",e.options.projectId),s="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));let o,a,l=UN(s,i),c=l.repoInfo;"undefined"!==typeof process&&(a={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FIREBASE_DATABASE_EMULATOR_HOST),a?(o=!0,s="http://".concat(a,"?ns=").concat(c.namespace),l=UN(s,i),c=l.repoInfo):o=!l.repoInfo.secure;const u=i&&o?new aS(aS.OWNER):new oS(e.name,e.options,t);oN("Invalid Firebase Database URL",l),jS(l.path)||BI("Database URL must point to the root of a Firebase Database (not including a child path).");const h=function(e,t,n,r){let i=kA[t.name];i||(i={},kA[t.name]=i);let s=i[e.toURLString()];s&&BI("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return s=new pN(e,CA,n,r),i[e.toURLString()]=s,s}(c,e,u,new sS(e,n));return new NA(h,e)}class NA{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(gN(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0,Gt("Database",null!==this._repo.repoInfo_.emulatorOptions)),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new JN(this._repo,PS())),this._rootInternal}_delete(){return null!==this._rootInternal&&(!function(e,t){const n=kA[t];n&&n[e.key]===e||BI("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),kN(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&BI("Cannot call "+e+" on a deleted database.")}}function AA(){SS.IS_TRANSPORT_INITIALIZED&&HI("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function PA(){AA(),bS.forceDisallow()}function RA(){AA(),IS.forceDisallow(),bS.forceAllow()}function DA(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(e=Dn(e))._checkNotDeleted("useEmulator");const i="".concat(t,":").concat(n),s=e._repoInternal;if(e._instanceStarted){if(i===e._repoInternal.repoInfo_.host&&vn(r,s.repoInfo_.emulatorOptions))return;BI("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&BI('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new aS(aS.OWNER);else if(r.mockUserToken){const t="string"===typeof r.mockUserToken?r.mockUserToken:Ht(r.mockUserToken,e.app.options.projectId);o=new aS(t)}qt(t)&&(Bt(t),Gt("Database",!0)),function(e,t,n,r){const i=t.lastIndexOf(":"),s=qt(t.substring(0,i));e.repoInfo_=new fS(t,s,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(e.authTokenProvider_=r)}(s,i,r,o)}function OA(e){var t;(e=Dn(e))._checkNotDeleted("goOnline"),(t=e._repo).persistentConnection_&&t.persistentConnection_.resume(fN)}function LA(e,t){jI(e,t)}const MA={".sv":"timestamp"};class FA{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}function UA(e,t,n){var r;if(e=Dn(e),sN("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";const i=null===(r=null===n||void 0===n?void 0:n.applyLocally)||void 0===r||r,s=new zt,o=aA(e,(()=>{}));return function(e,t,n,r,i,s){CN(e,"transaction on "+t);const o={path:t,update:n,onComplete:r,status:null,order:OI(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=NN(e,t,void 0);o.currentInputSnapshot=a;const l=o.update(a.val());if(void 0===l)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{eN("transaction failed: Data returned ",l,o.path),o.status=0;const n=jx(e.transactionQueueTree_,t),r=Vx(n)||[];let i;r.push(o),zx(n,r),"object"===typeof l&&null!==l&&pn(l,".priority")?(i=gn(l,".priority"),Ct(Xx(i),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):i=(vx(e.serverSyncTree_,t)||bk.EMPTY_NODE).getPriority().val();const s=yN(e),c=Ek(l,i),u=Mx(c,a,s);o.currentOutputSnapshotRaw=c,o.currentOutputSnapshotResolved=u,o.currentWriteId=bN(e);const h=hx(e.serverSyncTree_,t,u,o.currentWriteId,o.applyLocally);uN(e.eventQueue_,t,h),AN(e,e.transactionQueueTree_)}}(e._repo,e._path,t,((t,n,r)=>{let i=null;t?s.reject(t):(i=new $N(r,new JN(e._repo,e._path),fk),s.resolve(new FA(n,i)))}),o,i),s.promise}YS.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},YS.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){CI(ni),Kr(new On("database",((e,t)=>{let{instanceIdentifier:n}=t;return xA(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),li(II,SI,e),li(II,SI,"esm2017")}();const jA=new Hn("@firebase/database-compat"),VA=function(e){const t="FIREBASE WARNING: "+e;jA.warn(t)};class zA{constructor(e){this._delegate=e}cancel(e){Cn("OnDisconnect.cancel",0,1,arguments.length),Nn("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then((()=>e(null)),(t=>e(t))),t}remove(e){Cn("OnDisconnect.remove",0,1,arguments.length),Nn("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then((()=>e(null)),(t=>e(t))),t}set(e,t){Cn("OnDisconnect.set",1,2,arguments.length),Nn("OnDisconnect.set","onComplete",t,!0);const n=this._delegate.set(e);return t&&n.then((()=>t(null)),(e=>t(e))),n}setWithPriority(e,t,n){Cn("OnDisconnect.setWithPriority",2,3,arguments.length),Nn("OnDisconnect.setWithPriority","onComplete",n,!0);const r=this._delegate.setWithPriority(e,t);return n&&r.then((()=>n(null)),(e=>n(e))),r}update(e,t){if(Cn("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const t={};for(let n=0;n<e.length;++n)t[""+n]=e[n];e=t,VA("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Nn("OnDisconnect.update","onComplete",t,!0);const n=this._delegate.update(e);return t&&n.then((()=>t(null)),(e=>t(e))),n}}class qA{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return Cn("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class BA{constructor(e,t){this._database=e,this._delegate=t}val(){return Cn("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return Cn("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return Cn("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return Cn("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return Cn("DataSnapshot.child",0,1,arguments.length),e=String(e),iN("DataSnapshot.child","path",e,!1),new BA(this._database,this._delegate.child(e))}hasChild(e){return Cn("DataSnapshot.hasChild",1,1,arguments.length),iN("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return Cn("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return Cn("DataSnapshot.forEach",1,1,arguments.length),Nn("DataSnapshot.forEach","action",e,!1),this._delegate.forEach((t=>e(new BA(this._database,t))))}hasChildren(){return Cn("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return Cn("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return Cn("DataSnapshot.ref",0,0,arguments.length),new WA(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class HA{constructor(e,t){this.database=e,this._delegate=t}on(e,t,n,r){var i;Cn("Query.on",2,4,arguments.length),Nn("Query.on","callback",t,!1);const s=HA.getCancelAndContextArgs_("Query.on",n,r),o=(e,n)=>{t.call(s.context,new BA(this.database,e),n)};o.userCallback=t,o.context=s.context;const a=null===(i=s.cancel)||void 0===i?void 0:i.bind(s.context);switch(e){case"value":return aA(this._delegate,o,a),t;case"child_added":return lA(this._delegate,o,a),t;case"child_removed":return hA(this._delegate,o,a),t;case"child_changed":return cA(this._delegate,o,a),t;case"child_moved":return uA(this._delegate,o,a),t;default:throw new Error(xn("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,n){if(Cn("Query.off",0,3,arguments.length),function(e,t,n){if(!n||void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(xn(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}("Query.off",e,!0),Nn("Query.off","callback",t,!0),An("Query.off","context",n,!0),t){const r=()=>{};r.userCallback=t,r.context=n,dA(this._delegate,e,r)}else dA(this._delegate,e)}get(){return rA(this._delegate).then((e=>new BA(this.database,e)))}once(e,t,n,r){Cn("Query.once",1,4,arguments.length),Nn("Query.once","callback",t,!0);const i=HA.getCancelAndContextArgs_("Query.once",n,r),s=new zt,o=(e,n)=>{const r=new BA(this.database,e);t&&t.call(i.context,r,n),s.resolve(r)};o.userCallback=t,o.context=i.context;const a=e=>{i.cancel&&i.cancel.call(i.context,e),s.reject(e)};switch(e){case"value":aA(this._delegate,o,a,{onlyOnce:!0});break;case"child_added":lA(this._delegate,o,a,{onlyOnce:!0});break;case"child_removed":hA(this._delegate,o,a,{onlyOnce:!0});break;case"child_changed":cA(this._delegate,o,a,{onlyOnce:!0});break;case"child_moved":uA(this._delegate,o,a,{onlyOnce:!0});break;default:throw new Error(xn("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise}limitToFirst(e){return Cn("Query.limitToFirst",1,1,arguments.length),new HA(this.database,SA(this._delegate,function(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new vA(e)}(e)))}limitToLast(e){return Cn("Query.limitToLast",1,1,arguments.length),new HA(this.database,SA(this._delegate,function(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new _A(e)}(e)))}orderByChild(e){return Cn("Query.orderByChild",1,1,arguments.length),new HA(this.database,SA(this._delegate,function(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return iN("orderByChild","path",e,!1),new wA(e)}(e)))}orderByKey(){return Cn("Query.orderByKey",0,0,arguments.length),new HA(this.database,SA(this._delegate,new bA))}orderByPriority(){return Cn("Query.orderByPriority",0,0,arguments.length),new HA(this.database,SA(this._delegate,new TA))}orderByValue(){return Cn("Query.orderByValue",0,0,arguments.length),new HA(this.database,SA(this._delegate,new EA))}startAt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return Cn("Query.startAt",0,2,arguments.length),new HA(this.database,SA(this._delegate,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return rN("startAt","key",t,!0),new mA(e,t)}(e,t)))}startAfter(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return Cn("Query.startAfter",0,2,arguments.length),new HA(this.database,SA(this._delegate,function(e,t){return rN("startAfter","key",t,!0),new yA(e,t)}(e,t)))}endAt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return Cn("Query.endAt",0,2,arguments.length),new HA(this.database,SA(this._delegate,function(e,t){return rN("endAt","key",t,!0),new pA(e,t)}(e,t)))}endBefore(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return Cn("Query.endBefore",0,2,arguments.length),new HA(this.database,SA(this._delegate,function(e,t){return rN("endBefore","key",t,!0),new gA(e,t)}(e,t)))}equalTo(e,t){return Cn("Query.equalTo",1,2,arguments.length),new HA(this.database,SA(this._delegate,function(e,t){return rN("equalTo","key",t,!0),new IA(e,t)}(e,t)))}toString(){return Cn("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return Cn("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if(Cn("Query.isEqual",1,1,arguments.length),!(e instanceof HA)){throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.")}return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,n){const r={cancel:void 0,context:void 0};if(t&&n)r.cancel=t,Nn(e,"cancel",r.cancel,!0),r.context=n,An(e,"context",r.context,!0);else if(t)if("object"===typeof t&&null!==t)r.context=t;else{if("function"!==typeof t)throw new Error(xn(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}get ref(){return new WA(this.database,new JN(this._delegate._repo,this._delegate._path))}}class WA extends HA{constructor(e,t){super(e,new KN(t._repo,t._path,new Dk,!1)),this.database=e,this._delegate=t}getKey(){return Cn("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return Cn("Reference.child",1,1,arguments.length),"number"===typeof e&&(e=String(e)),new WA(this.database,eA(this._delegate,e))}getParent(){Cn("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new WA(this.database,e):null}getRoot(){return Cn("Reference.root",0,0,arguments.length),new WA(this.database,this._delegate.root)}set(e,t){Cn("Reference.set",1,2,arguments.length),Nn("Reference.set","onComplete",t,!0);const n=tA(this._delegate,e);return t&&n.then((()=>t(null)),(e=>t(e))),n}update(e,t){if(Cn("Reference.update",1,2,arguments.length),Array.isArray(e)){const t={};for(let n=0;n<e.length;++n)t[""+n]=e[n];e=t,VA("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}sN("Reference.update",this._delegate._path),Nn("Reference.update","onComplete",t,!0);const n=nA(this._delegate,e);return t&&n.then((()=>t(null)),(e=>t(e))),n}setWithPriority(e,t,n){Cn("Reference.setWithPriority",2,3,arguments.length),Nn("Reference.setWithPriority","onComplete",n,!0);const r=function(e,t,n){if(sN("setWithPriority",e._path),Zx("setWithPriority",t,e._path,!1),nN("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";const r=new zt;return TN(e._repo,e._path,t,n,r.wrapCallback((()=>{}))),r.promise}(this._delegate,e,t);return n&&r.then((()=>n(null)),(e=>n(e))),r}remove(e){Cn("Reference.remove",0,1,arguments.length),Nn("Reference.remove","onComplete",e,!0);const t=function(e){return sN("remove",e._path),tA(e,null)}(this._delegate);return e&&t.then((()=>e(null)),(t=>e(t))),t}transaction(e,t,n){Cn("Reference.transaction",1,3,arguments.length),Nn("Reference.transaction","transactionUpdate",e,!1),Nn("Reference.transaction","onComplete",t,!0),function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!==typeof n)throw new Error(xn(e,t)+"must be a boolean.")}("Reference.transaction","applyLocally",n,!0);const r=UA(this._delegate,e,{applyLocally:n}).then((e=>new qA(e.committed,new BA(this.database,e.snapshot))));return t&&r.then((e=>t(null,e.committed,e.snapshot)),(e=>t(e,!1,null))),r}setPriority(e,t){Cn("Reference.setPriority",1,2,arguments.length),Nn("Reference.setPriority","onComplete",t,!0);const n=function(e,t){e=Dn(e),sN("setPriority",e._path),nN("setPriority",t,!1);const n=new zt;return TN(e._repo,US(e._path,".priority"),t,null,n.wrapCallback((()=>{}))),n.promise}(this._delegate,e);return t&&n.then((()=>t(null)),(e=>t(e))),n}push(e,t){Cn("Reference.push",0,2,arguments.length),Nn("Reference.push","onComplete",t,!0);const n=function(e,t){e=Dn(e),sN("push",e._path),Zx("push",t,e._path,!0);const n=mN(e._repo),r=zN(n),i=eA(e,r),s=eA(e,r);let o;return o=null!=t?tA(s,t).then((()=>s)):Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}(this._delegate,e),r=n.then((e=>new WA(this.database,e)));t&&r.then((()=>t(null)),(e=>t(e)));const i=new WA(this.database,n);return i.then=r.then.bind(r),i.catch=r.catch.bind(r,void 0),i}onDisconnect(){return sN("Reference.onDisconnect",this._delegate._path),new zA(new WN(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class KA{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:PA,forceLongPolling:RA}}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};DA(this._delegate,e,t,n)}ref(e){if(Cn("database.ref",0,1,arguments.length),e instanceof WA){const t=ZN(this._delegate,e.toString());return new WA(this,t)}{const t=XN(this._delegate,e);return new WA(this,t)}}refFromURL(e){Cn("database.refFromURL",1,1,arguments.length);const t=ZN(this._delegate,e);return new WA(this,t)}goOffline(){return Cn("database.goOffline",0,0,arguments.length),function(e){(e=Dn(e))._checkNotDeleted("goOffline"),kN(e._repo)}(this._delegate)}goOnline(){return Cn("database.goOnline",0,0,arguments.length),OA(this._delegate)}}KA.ServerValue={TIMESTAMP:MA,increment:e=>function(e){return{".sv":{increment:e}}}(e)};var GA=Object.freeze({__proto__:null,initStandalone:function(e){let{app:t,url:n,version:r,customAuthImpl:i,customAppCheckImpl:s,namespace:o,nodeAdmin:a=!1}=e;CI(r);const l=new Fn("database-standalone"),c=new Mn("auth-internal",l);let u;return c.setComponent(new On("auth-internal",(()=>i),"PRIVATE")),s&&(u=new Mn("app-check-internal",l),u.setComponent(new On("app-check-internal",(()=>s),"PRIVATE"))),{instance:new KA(xA(t,c,u,n,a),t),namespace:o}}});const QA=KA.ServerValue;!function(e){e.INTERNAL.registerComponent(new On("database-compat",((e,t)=>{let{instanceIdentifier:n}=t;const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:n});return new KA(i,r)}),"PUBLIC").setServiceProps({Reference:WA,Query:HA,Database:KA,DataSnapshot:BA,enableLogging:LA,INTERNAL:GA,ServerValue:QA}).setMultipleInstances(!0)),e.registerVersion("@firebase/database-compat","2.0.9")}(ME);function YA(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Lc("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function JA(){if("undefined"===typeof Uint8Array)throw new Lc("unimplemented","Uint8Arrays are not available in this environment.")}function $A(){if("undefined"==typeof atob)throw new Lc("unimplemented","Blobs are unavailable in Firestore in this environment.")}class XA{constructor(e){this._delegate=e}static fromBase64String(e){return $A(),new XA(Ub.fromBase64String(e))}static fromUint8Array(e){return JA(),new XA(Ub.fromUint8Array(e))}toBase64(){return $A(),this._delegate.toBase64()}toUint8Array(){return JA(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function ZA(e){return function(e,t){if("object"!==typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"===typeof n[r])return!0;return!1}(e,["next","error","complete"])}class eP{enableIndexedDbPersistence(e,t){return function(e,t){xc("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings();return Db(e,Fw.provider,{build:e=>new Lw(e,n.cacheSizeBytes,null==t?void 0:t.forceOwnership)}),Promise.resolve()}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return async function(e){xc("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=e._freezeSettings();Db(e,Fw.provider,{build:e=>new Mw(e,t.cacheSizeBytes)})}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new Lc(Oc.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Mc;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!ku.C())return Promise.resolve();const t=e+Qy;await ku.delete(t)}(Xy(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class tP{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof kd||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||xc("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};yb(this._delegate,e,t,n)}enableNetwork(){return Lb(this._delegate)}disableNetwork(){return Mb(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,ab("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return Ob(this._delegate)}onSnapshotsInSync(e){return $T(this._delegate,e)}get app(){if(!this._appCompat)throw new Lc("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new gP(this,bb(this._delegate,e))}catch($M){throw aP($M,"collection()","Firestore.collection()")}}doc(e){try{return new oP(this,Tb(this._delegate,e))}catch($M){throw aP($M,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new dP(this,function(e,t){if(e=hb(e,mb),ob("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Lc(Oc.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new vb(e,null,function(e){return new Uf(ou.emptyPath(),e)}(t))}(this._delegate,e))}catch($M){throw aP($M,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t,n){e=hb(e,Ab);const r=Object.assign(Object.assign({},eE),n);return function(e){if(e.maxAttempts<1)throw new Lc(Oc.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new Mc;return e.asyncQueue.enqueueAndForget((async()=>{const i=await Zw(e);new qw(e.asyncQueue,i,n,t,r).$u()})),r.promise}(Pb(e),(n=>t(new iE(e,n))),r)}(this._delegate,(t=>e(new rP(this,t))))}batch(){return Pb(this._delegate),new iP(new tE(this._delegate,(e=>XT(this._delegate,e))))}loadBundle(e){return function(e,t){const n=Pb(e=hb(e,Ab)),r=new Nb;return rb(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return Fb(this._delegate,e).then((e=>e?new dP(this,e):null))}}class nP extends DT{constructor(e){super(),this.firestore=e}convertBytes(e){return new XA(new Ub(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return oP.forKey(t,this.firestore,null)}}class rP{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new nP(e)}get(e){const t=mP(e);return this._delegate.get(t).then((e=>new uP(this._firestore,new FT(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const r=mP(e);return n?(YA("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=mP(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=mP(e);return this._delegate.delete(t),this}}class iP{constructor(e){this._delegate=e}set(e,t,n){const r=mP(e);return n?(YA("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=mP(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=mP(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class sP{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new UT(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new hP(this._firestore,n),null!==t&&void 0!==t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=sP.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new sP(e,new nP(e),t),r.set(t,i)),i}}sP.INSTANCES=new WeakMap;class oP{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new nP(e)}static forPath(e,t,n){if(e.length%2!==0)throw new Lc("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(e.canonicalString()," has ").concat(e.length));return new oP(t,new _b(t._delegate,n,new cu(e)))}static forKey(e,t,n){return new oP(t,new _b(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new gP(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new gP(this.firestore,bb(this._delegate,e))}catch($M){throw aP($M,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=Dn(e))instanceof _b&&Eb(this._delegate,e)}set(e,t){t=YA("DocumentReference.set",t);try{return t?KT(this._delegate,e,t):KT(this._delegate,e)}catch($M){throw aP($M,"setDoc()","DocumentReference.set()")}}update(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?GT(this._delegate,e):GT(this._delegate,e,t,...r)}catch($M){throw aP($M,"updateDoc()","DocumentReference.update()")}}delete(){return QT(this._delegate)}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=lP(t),i=cP(t,(e=>new uP(this.firestore,new FT(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return JT(this._delegate,r,i)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?HT(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=hb(e,_b);const t=hb(e.firestore,Ab);return tb(Pb(t),e._key,{source:"server"}).then((n=>ZT(t,e,n)))}(this._delegate):qT(this._delegate),t.then((e=>new uP(this.firestore,new FT(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new oP(this.firestore,e?this._delegate.withConverter(sP.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function aP(e,t,n){return e.message=e.message.replace(t,n),e}function lP(e){for(const t of e)if("object"===typeof t&&!ZA(t))return t;return{}}function cP(e,t){var n,r;let i;return i=ZA(e[0])?e[0]:ZA(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class uP{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new oP(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return zT(this._delegate,e._delegate)}}class hP extends uP{data(e){const t=this._delegate.data(e);return this._delegate._converter||function(e,t){e||Ac(57014,t)}(void 0!==t,"Document in a QueryDocumentSnapshot should exist"),t}}class dP{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new nP(e)}where(e,t,n){try{return new dP(this.firestore,bT(this._delegate,ET(e,t,n)))}catch($M){throw aP($M,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new dP(this.firestore,bT(this._delegate,function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=yT("orderBy",e);return ST._create(n,t)}(e,t)))}catch($M){throw aP($M,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new dP(this.firestore,bT(this._delegate,function(e){return db("limit",e),kT._create("limit",e,"F")}(e)))}catch($M){throw aP($M,"limit()","Query.limit()")}}limitToLast(e){try{return new dP(this.firestore,bT(this._delegate,function(e){return db("limitToLast",e),kT._create("limitToLast",e,"L")}(e)))}catch($M){throw aP($M,"limitToLast()","Query.limitToLast()")}}startAt(){try{return new dP(this.firestore,bT(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return CT._create("startAt",t,!0)}(...arguments)))}catch($M){throw aP($M,"startAt()","Query.startAt()")}}startAfter(){try{return new dP(this.firestore,bT(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return CT._create("startAfter",t,!1)}(...arguments)))}catch($M){throw aP($M,"startAfter()","Query.startAfter()")}}endBefore(){try{return new dP(this.firestore,bT(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return xT._create("endBefore",t,!1)}(...arguments)))}catch($M){throw aP($M,"endBefore()","Query.endBefore()")}}endAt(){try{return new dP(this.firestore,bT(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return xT._create("endAt",t,!0)}(...arguments)))}catch($M){throw aP($M,"endAt()","Query.endAt()")}}isEqual(e){return Ib(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?WT(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=hb(e,vb);const t=hb(e.firestore,Ab),n=Pb(t),r=new BT(t);return nb(n,e._query,{source:"server"}).then((n=>new jT(t,r,e,n)))}(this._delegate):function(e){e=hb(e,vb);const t=hb(e.firestore,Ab),n=Pb(t),r=new BT(t);return vT(e._query),nb(n,e._query).then((n=>new jT(t,r,e,n)))}(this._delegate),t.then((e=>new pP(this.firestore,new jT(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=lP(t),i=cP(t,(e=>new pP(this.firestore,new jT(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return JT(this._delegate,r,i)}withConverter(e){return new dP(this.firestore,e?this._delegate.withConverter(sP.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class fP{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new hP(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class pP{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new dP(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new hP(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new fP(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new hP(this._firestore,n))}))}isEqual(e){return zT(this._delegate,e._delegate)}}class gP extends dP{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new oP(this.firestore,e):null}doc(e){try{return new oP(this.firestore,void 0===e?Tb(this._delegate):Tb(this._delegate,e))}catch($M){throw aP($M,"doc()","CollectionReference.doc()")}}add(e){return YT(this._delegate,e).then((e=>new oP(this.firestore,e)))}isEqual(e){return Eb(this._delegate,e._delegate)}withConverter(e){return new gP(this.firestore,e?this._delegate.withConverter(sP.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function mP(e){return hb(e,_b)}class yP{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._delegate=new jb(...t)}static documentId(){return new yP(lu.keyField().canonicalString())}isEqual(e){return(e=Dn(e))instanceof jb&&this._delegate._internalPath.isEqual(e._internalPath)}}class vP{static serverTimestamp(){const e=new Zb("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new vP(e)}static delete(){const e=new $b("deleteField");return e._methodName="FieldValue.delete",new vP(e)}static arrayUnion(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new eT("arrayUnion",t)}(...arguments);return e._methodName="FieldValue.arrayUnion",new vP(e)}static arrayRemove(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new tT("arrayRemove",t)}(...arguments);return e._methodName="FieldValue.arrayRemove",new vP(e)}static increment(e){const t=function(e){return new nT("increment",e)}(e);return t._methodName="FieldValue.increment",new vP(t)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}const _P={Firestore:tP,GeoPoint:zb,Timestamp:nu,Blob:XA,Transaction:rP,WriteBatch:iP,DocumentReference:oP,DocumentSnapshot:uP,Query:dP,QueryDocumentSnapshot:hP,QuerySnapshot:pP,CollectionReference:gP,FieldPath:yP,FieldValue:vP,setLogLevel:function(e){!function(e){Ic.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new On("firestore-compat",(e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},_P)))}(e,((e,t)=>new tP(e,t,new eP))),e.registerVersion("@firebase/firestore-compat","0.3.50")}(ME);function wP(e,t){const n={};for(const r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r]));return n}function bP(e){if(null==e)return null;if(e instanceof Number&&(e=e.valueOf()),"number"===typeof e&&isFinite(e))return e;if(!0===e||!1===e)return e;if("[object String]"===Object.prototype.toString.call(e))return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map((e=>bP(e)));if("function"===typeof e||"object"===typeof e)return wP(e,(e=>bP(e)));throw new Error("Data cannot be encoded in JSON: "+e)}function TP(e){if(null==e)return e;if(e["@type"])switch(e["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":{const t=Number(e.value);if(isNaN(t))throw new Error("Data cannot be decoded from JSON: "+e);return t}default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map((e=>TP(e))):"function"===typeof e||"object"===typeof e?wP(e,(e=>TP(e))):e}const EP="functions",IP={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class SP extends ln{constructor(e,t,n){super("".concat(EP,"/").concat(e),t||""),this.details=n,Object.setPrototypeOf(this,SP.prototype)}}function kP(e,t){let n,r=function(e){if(e>=200&&e<300)return"ok";switch(e){case 0:case 500:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(e),i=r;try{const e=t&&t.error;if(e){const t=e.status;if("string"===typeof t){if(!IP[t])return new SP("internal","internal");r=IP[t],i=t}const s=e.message;"string"===typeof s&&(i=s),n=e.details,void 0!==n&&(n=TP(n))}}catch($M){}return"ok"===r?null:new SP(r,i,n)}class CP{constructor(e,t,n,r){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Jr(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||t.get().then((e=>this.auth=e),(()=>{})),this.messaging||n.get().then((e=>this.messaging=e),(()=>{})),this.appCheck||null===r||void 0===r||r.get().then((e=>this.appCheck=e),(()=>{}))}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return null===e||void 0===e?void 0:e.accessToken}catch($M){return}}async getMessagingToken(){if(this.messaging&&"Notification"in self&&"granted"===Notification.permission)try{return await this.messaging.getToken()}catch($M){return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){return{authToken:await this.getAuthToken(),messagingToken:await this.getMessagingToken(),appCheckToken:await this.getAppCheckToken(e)}}}const xP="us-central1",NP=/^data: (.*?)(?:\n|$)/;class AP{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:xP,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:function(){return fetch(...arguments)};this.app=e,this.fetchImpl=s,this.emulatorOrigin=null,this.contextProvider=new CP(e,t,n,r),this.cancelAllRequests=new Promise((e=>{this.deleteService=()=>Promise.resolve(e())}));try{const e=new URL(i);this.customDomain=e.origin+("/"===e.pathname?"":e.pathname),this.region=xP}catch($M){this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;if(null!==this.emulatorOrigin){const n=this.emulatorOrigin;return"".concat(n,"/").concat(t,"/").concat(this.region,"/").concat(e)}return null!==this.customDomain?"".concat(this.customDomain,"/").concat(e):"https://".concat(this.region,"-").concat(t,".cloudfunctions.net/").concat(e)}}function PP(e,t,n){const r=r=>function(e,t,n,r){const i=e._url(t);return OP(e,i,n,r)}(e,t,r,n||{});return r.stream=(n,r)=>function(e,t,n,r){const i=e._url(t);return LP(e,i,n,r||{})}(e,t,n,r),r}async function RP(e,t,n,r){let i;n["Content-Type"]="application/json";try{i=await r(e,{method:"POST",body:JSON.stringify(t),headers:n})}catch($M){return{status:0,json:null}}let s=null;try{s=await i.json()}catch($M){}return{status:i.status,json:s}}async function DP(e,t){const n={},r=await e.contextProvider.getContext(t.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),null!==r.appCheckToken&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}async function OP(e,t,n,r){const i={data:n=bP(n)},s=await DP(e,r),o=function(e){let t=null;return{promise:new Promise(((n,r)=>{t=setTimeout((()=>{r(new SP("deadline-exceeded","deadline-exceeded"))}),e)})),cancel:()=>{t&&clearTimeout(t)}}}(r.timeout||7e4),a=await Promise.race([RP(t,i,s,e.fetchImpl),o.promise,e.cancelAllRequests]);if(o.cancel(),!a)throw new SP("cancelled","Firebase Functions instance was deleted.");const l=kP(a.status,a.json);if(l)throw l;if(!a.json)throw new SP("internal","Response is not valid JSON object.");let c=a.json.data;if("undefined"===typeof c&&(c=a.json.result),"undefined"===typeof c)throw new SP("internal","Response is missing data field.");return{data:TP(c)}}async function LP(e,t,n,r){var i;const s={data:n=bP(n)},o=await DP(e,r);let a,l,c;o["Content-Type"]="application/json",o.Accept="text/event-stream";try{a=await e.fetchImpl(t,{method:"POST",body:JSON.stringify(s),headers:o,signal:null===r||void 0===r?void 0:r.signal})}catch($M){if($M instanceof Error&&"AbortError"===$M.name){const e=new SP("cancelled","Request was cancelled.");return{data:Promise.reject(e),stream:{[Symbol.asyncIterator]:()=>({next:()=>Promise.reject(e)})}}}const t=kP(0,null);return{data:Promise.reject(t),stream:{[Symbol.asyncIterator]:()=>({next:()=>Promise.reject(t)})}}}const u=new Promise(((e,t)=>{l=e,c=t}));null===(i=null===r||void 0===r?void 0:r.signal)||void 0===i||i.addEventListener("abort",(()=>{const e=new SP("cancelled","Request was cancelled.");c(e)}));const h=function(e,t,n,r){const i=(e,r)=>{const i=e.match(NP);if(!i)return;const s=i[1];try{const e=JSON.parse(s);if("result"in e)return void t(TP(e.result));if("message"in e)return void r.enqueue(TP(e.message));if("error"in e){const t=kP(0,e);return r.error(t),void n(t)}}catch(qI){if(qI instanceof SP)return r.error(qI),void n(qI)}},s=new TextDecoder;return new ReadableStream({start(t){let o="";return a();async function a(){if(null===r||void 0===r?void 0:r.aborted){const e=new SP("cancelled","Request was cancelled");return t.error(e),n(e),Promise.resolve()}try{const{value:l,done:c}=await e.read();if(c)return o.trim()&&i(o.trim(),t),void t.close();if(null===r||void 0===r?void 0:r.aborted){const r=new SP("cancelled","Request was cancelled");return t.error(r),n(r),void await e.cancel()}o+=s.decode(l,{stream:!0});const u=o.split("\n");o=u.pop()||"";for(const e of u)e.trim()&&i(e.trim(),t);return a()}catch(qI){const r=qI instanceof SP?qI:kP(0,null);t.error(r),n(r)}}},cancel:()=>e.cancel()})}(a.body.getReader(),l,c,null===r||void 0===r?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const e=h.getReader();return{async next(){const{value:t,done:n}=await e.read();return{value:t,done:n}},return:async()=>(await e.cancel(),{done:!0,value:void 0})}}},data:u}}const MP="@firebase/functions",FP="0.12.7";function UP(e,t,n){!function(e,t,n){const r=qt(t);e.emulatorOrigin="http".concat(r?"s":"","://").concat(t,":").concat(n),r&&(Bt(e.emulatorOrigin),Gt("Functions",!0))}(Dn(e),t,n)}function jP(e,t,n){return function(e,t,n){const r=r=>OP(e,t,r,n||{});return r.stream=(n,r)=>LP(e,t,n,r||{}),r}(Dn(e),t,n)}!function(e){Kr(new On(EP,((e,t)=>{let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("messaging-internal"),o=e.getProvider("app-check-internal");return new AP(r,i,s,o,n)}),"PUBLIC").setMultipleInstances(!0)),li(MP,FP,e),li(MP,FP,"esm2017")}();class VP{constructor(e,t){this.app=e,this._delegate=t,this._region=this._delegate.region,this._customDomain=this._delegate.customDomain}httpsCallable(e,t){return function(e,t,n){return PP(Dn(e),t,n)}(this._delegate,e,t)}httpsCallableFromURL(e,t){return jP(this._delegate,e,t)}useFunctionsEmulator(e){const t=e.match("[a-zA-Z]+://([a-zA-Z0-9.-]+)(?::([0-9]+))?");if(null==t)throw new ln("functions","No origin provided to useFunctionsEmulator()");if(null==t[2])throw new ln("functions","Port missing in origin provided to useFunctionsEmulator()");return UP(this._delegate,t[1],Number(t[2]))}useEmulator(e,t){return UP(this._delegate,e,t)}}const zP=(e,t)=>{let{instanceIdentifier:n}=t;const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("functions").getImmediate({identifier:null!==n&&void 0!==n?n:"us-central1"});return new VP(r,i)};!function(){const e={Functions:VP};ME.INTERNAL.registerComponent(new On("functions-compat",zP,"PUBLIC").setServiceProps(e).setMultipleInstances(!0))}(),ME.registerVersion("@firebase/functions-compat","0.3.24");const qP="@firebase/installations",BP="0.6.17",HP=1e4,WP="w:".concat(BP),KP="FIS_v2",GP=36e5,QP=new cn("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function YP(e){return e instanceof ln&&e.code.includes("request-failed")}function JP(e){let{projectId:t}=e;return"".concat("https://firebaseinstallations.googleapis.com/v1","/projects/").concat(t,"/installations")}function $P(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function XP(e,t){const n=(await t.json()).error;return QP.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function ZP(e){let{apiKey:t}=e;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function eR(e,t){let{refreshToken:n}=t;const r=ZP(e);return r.append("Authorization",function(e){return"".concat(KP," ").concat(e)}(n)),r}async function tR(e){const t=await e();return t.status>=500&&t.status<600?e():t}function nR(e){return new Promise((t=>{setTimeout(t,e)}))}const rR=/^[cdef][\w-]{21}$/;function iR(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){const t=(n=e,btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_"));var n;return t.substr(0,22)}(e);return rR.test(t)?t:""}catch(hj){return""}}function sR(e){return"".concat(e.appName,"!").concat(e.appId)}const oR=new Map;function aR(e,t){const n=sR(e);lR(n,t),function(e,t){const n=uR();n&&n.postMessage({key:e,fid:t});hR()}(n,t)}function lR(e,t){const n=oR.get(e);if(n)for(const r of n)r(t)}let cR=null;function uR(){return!cR&&"BroadcastChannel"in self&&(cR=new BroadcastChannel("[Firebase] FID Change"),cR.onmessage=e=>{lR(e.data.key,e.data.fid)}),cR}function hR(){0===oR.size&&cR&&(cR.close(),cR=null)}const dR="firebase-installations-store";let fR=null;function pR(){return fR||(fR=rr("firebase-installations-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(dR)}})),fR}async function gR(e,t){const n=sR(e),r=(await pR()).transaction(dR,"readwrite"),i=r.objectStore(dR),s=await i.get(n);return await i.put(t,n),await r.done,s&&s.fid===t.fid||aR(e,t.fid),t}async function mR(e){const t=sR(e),n=(await pR()).transaction(dR,"readwrite");await n.objectStore(dR).delete(t),await n.done}async function yR(e,t){const n=sR(e),r=(await pR()).transaction(dR,"readwrite"),i=r.objectStore(dR),s=await i.get(n),o=t(s);return void 0===o?await i.delete(n):await i.put(o,n),await r.done,!o||s&&s.fid===o.fid||aR(e,o.fid),o}async function vR(e){let t;const n=await yR(e.appConfig,(n=>{const r=function(e){const t=e||{fid:iR(),registrationStatus:0};return bR(t)}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(QP.create("app-offline"))}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(e,t){try{const n=await async function(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e,{fid:i}=t;const s=JP(n),o=ZP(n),a=r.getImmediate({optional:!0});if(a){const e=await a.getHeartbeatsHeader();e&&o.append("x-firebase-client",e)}const l={fid:i,authVersion:KP,appId:n.appId,sdkVersion:WP},c={method:"POST",headers:o,body:JSON.stringify(l)},u=await tR((()=>fetch(s,c)));if(u.ok){const e=await u.json();return{fid:e.fid||i,registrationStatus:2,refreshToken:e.refreshToken,authToken:$P(e.authToken)}}throw await XP("Create Installation",u)}(e,t);return gR(e.appConfig,n)}catch($M){throw YP($M)&&409===$M.customData.serverCode?await mR(e.appConfig):await gR(e.appConfig,{fid:t.fid,registrationStatus:0}),$M}}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:_R(e)}:{installationEntry:t}}(e,r);return t=i.registrationPromise,i.installationEntry}));return""===n.fid?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function _R(e){let t=await wR(e.appConfig);for(;1===t.registrationStatus;)await nR(100),t=await wR(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await vR(e);return n||t}return t}function wR(e){return yR(e,(e=>{if(!e)throw QP.create("installation-not-found");return bR(e)}))}function bR(e){return 1===(t=e).registrationStatus&&t.registrationTime+HP<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function TR(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e;const i=function(e,t){let{fid:n}=t;return"".concat(JP(e),"/").concat(n,"/authTokens:generate")}(n,t),s=eR(n,t),o=r.getImmediate({optional:!0});if(o){const e=await o.getHeartbeatsHeader();e&&s.append("x-firebase-client",e)}const a={installation:{sdkVersion:WP,appId:n.appId}},l={method:"POST",headers:s,body:JSON.stringify(a)},c=await tR((()=>fetch(i,l)));if(c.ok){return $P(await c.json())}throw await XP("Generate Auth Token",c)}async function ER(e){let t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=await yR(e.appConfig,(r=>{if(!SR(r))throw QP.create("not-registered");const i=r.authToken;if(!n&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+GP}(e)}(i))return r;if(1===i.requestStatus)return t=async function(e,t){let n=await IR(e.appConfig);for(;1===n.authToken.requestStatus;)await nR(100),n=await IR(e.appConfig);const r=n.authToken;return 0===r.requestStatus?ER(e,t):r}(e,n),r;{if(!navigator.onLine)throw QP.create("app-offline");const n=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(r);return t=async function(e,t){try{const n=await TR(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return await gR(e.appConfig,r),n}catch($M){if(!YP($M)||401!==$M.customData.serverCode&&404!==$M.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await gR(e.appConfig,n)}else await mR(e.appConfig);throw $M}}(e,n),n}}));return t?await t:r.authToken}function IR(e){return yR(e,(e=>{if(!SR(e))throw QP.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+HP<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var n}))}function SR(e){return void 0!==e&&2===e.registrationStatus}async function kR(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e;await async function(e){const{registrationPromise:t}=await vR(e);t&&await t}(n);return(await ER(n,t)).token}function CR(e){return QP.create("missing-app-config-values",{valueName:e})}const xR="installations",NR=e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw CR("App Configuration");if(!e.name)throw CR("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw CR(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:Gr(t,"heartbeat"),_delete:()=>Promise.resolve()}},AR=e=>{const t=Gr(e.getProvider("app").getImmediate(),xR).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await vR(t);return r?r.catch(console.error):ER(t).catch(console.error),n.fid}(t),getToken:e=>kR(t,e)}};Kr(new On(xR,NR,"PUBLIC")),Kr(new On("installations-internal",AR,"PRIVATE")),li(qP,BP),li(qP,BP,"esm2017");const PR="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",RR="google.c.a.c_id",DR=1e4;var OR,LR;function MR(e){const t=new Uint8Array(e);return btoa(String.fromCharCode(...t)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function FR(e){const t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),r=new Uint8Array(n.length);for(let i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}!function(e){e[e.DATA_MESSAGE=1]="DATA_MESSAGE",e[e.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"}(OR||(OR={})),function(e){e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked"}(LR||(LR={}));const UR="fcm_token_details_db",jR="fcm_token_object_Store";const VR="firebase-messaging-store";let zR=null;function qR(){return zR||(zR=rr("firebase-messaging-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(VR)}})),zR}async function BR(e){const t=WR(e),n=await qR(),r=await n.transaction(VR).objectStore(VR).get(t);if(r)return r;{const t=await async function(e){if("databases"in indexedDB){const e=(await indexedDB.databases()).map((e=>e.name));if(!e.includes(UR))return null}let t=null;return(await rr(UR,5,{upgrade:async(n,r,i,s)=>{var o;if(r<2)return;if(!n.objectStoreNames.contains(jR))return;const a=s.objectStore(jR),l=await a.index("fcmSenderId").get(e);if(await a.clear(),l)if(2===r){const e=l;if(!e.auth||!e.p256dh||!e.endpoint)return;t={token:e.fcmToken,createTime:null!==(o=e.createTime)&&void 0!==o?o:Date.now(),subscriptionOptions:{auth:e.auth,p256dh:e.p256dh,endpoint:e.endpoint,swScope:e.swScope,vapidKey:"string"===typeof e.vapidKey?e.vapidKey:MR(e.vapidKey)}}}else if(3===r){const e=l;t={token:e.fcmToken,createTime:e.createTime,subscriptionOptions:{auth:MR(e.auth),p256dh:MR(e.p256dh),endpoint:e.endpoint,swScope:e.swScope,vapidKey:MR(e.vapidKey)}}}else if(4===r){const e=l;t={token:e.fcmToken,createTime:e.createTime,subscriptionOptions:{auth:MR(e.auth),p256dh:MR(e.p256dh),endpoint:e.endpoint,swScope:e.swScope,vapidKey:MR(e.vapidKey)}}}}})).close(),await ir(UR),await ir("fcm_vapid_details_db"),await ir("undefined"),function(e){if(!e||!e.subscriptionOptions)return!1;const{subscriptionOptions:t}=e;return"number"===typeof e.createTime&&e.createTime>0&&"string"===typeof e.token&&e.token.length>0&&"string"===typeof t.auth&&t.auth.length>0&&"string"===typeof t.p256dh&&t.p256dh.length>0&&"string"===typeof t.endpoint&&t.endpoint.length>0&&"string"===typeof t.swScope&&t.swScope.length>0&&"string"===typeof t.vapidKey&&t.vapidKey.length>0}(t)?t:null}(e.appConfig.senderId);if(t)return await HR(e,t),t}}async function HR(e,t){const n=WR(e),r=(await qR()).transaction(VR,"readwrite");return await r.objectStore(VR).put(t,n),await r.done,t}function WR(e){let{appConfig:t}=e;return t.appId}const KR=new cn("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});async function GR(e,t){const n={method:"DELETE",headers:await YR(e)};try{const r=await fetch("".concat(QR(e.appConfig),"/").concat(t),n),i=await r.json();if(i.error){const e=i.error.message;throw KR.create("token-unsubscribe-failed",{errorInfo:e})}}catch(r){throw KR.create("token-unsubscribe-failed",{errorInfo:null===r||void 0===r?void 0:r.toString()})}}function QR(e){let{projectId:t}=e;return"".concat("https://fcmregistrations.googleapis.com/v1","/projects/").concat(t,"/registrations")}async function YR(e){let{appConfig:t,installations:n}=e;const r=await n.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":"FIS ".concat(r)})}function JR(e){let{p256dh:t,auth:n,endpoint:r,vapidKey:i}=e;const s={web:{endpoint:r,auth:n,p256dh:t}};return i!==PR&&(s.web.applicationPubKey=i),s}async function $R(e){const t=await async function(e,t){const n=await e.pushManager.getSubscription();if(n)return n;return e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:FR(t)})}(e.swRegistration,e.vapidKey),n={vapidKey:e.vapidKey,swScope:e.swRegistration.scope,endpoint:t.endpoint,auth:MR(t.getKey("auth")),p256dh:MR(t.getKey("p256dh"))},r=await BR(e.firebaseDependencies);if(r){if(function(e,t){const n=t.vapidKey===e.vapidKey,r=t.endpoint===e.endpoint,i=t.auth===e.auth,s=t.p256dh===e.p256dh;return n&&r&&i&&s}(r.subscriptionOptions,n))return Date.now()>=r.createTime+6048e5?async function(e,t){try{const n=await async function(e,t){const n=await YR(e),r=JR(t.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)};let s;try{const n=await fetch("".concat(QR(e.appConfig),"/").concat(t.token),i);s=await n.json()}catch(o){throw KR.create("token-update-failed",{errorInfo:null===o||void 0===o?void 0:o.toString()})}if(s.error){const e=s.error.message;throw KR.create("token-update-failed",{errorInfo:e})}if(!s.token)throw KR.create("token-update-no-token");return s.token}(e.firebaseDependencies,t),r=Object.assign(Object.assign({},t),{token:n,createTime:Date.now()});return await HR(e.firebaseDependencies,r),n}catch($M){throw $M}}(e,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await GR(e.firebaseDependencies,r.token)}catch($M){console.warn($M)}return ZR(e.firebaseDependencies,n)}return ZR(e.firebaseDependencies,n)}async function XR(e){const t=await BR(e.firebaseDependencies);t&&(await GR(e.firebaseDependencies,t.token),await async function(e){const t=WR(e),n=(await qR()).transaction(VR,"readwrite");await n.objectStore(VR).delete(t),await n.done}(e.firebaseDependencies));const n=await e.swRegistration.pushManager.getSubscription();return!n||n.unsubscribe()}async function ZR(e,t){const n=await async function(e,t){const n=await YR(e),r=JR(t),i={method:"POST",headers:n,body:JSON.stringify(r)};let s;try{const t=await fetch(QR(e.appConfig),i);s=await t.json()}catch(o){throw KR.create("token-subscribe-failed",{errorInfo:null===o||void 0===o?void 0:o.toString()})}if(s.error){const e=s.error.message;throw KR.create("token-subscribe-failed",{errorInfo:e})}if(!s.token)throw KR.create("token-subscribe-no-token");return s.token}(e,t),r={token:n,createTime:Date.now(),subscriptionOptions:t};return await HR(e,r),r.token}function eD(e){const t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcmMessageId};return function(e,t){if(!t.notification)return;e.notification={};const n=t.notification.title;n&&(e.notification.title=n);const r=t.notification.body;r&&(e.notification.body=r);const i=t.notification.image;i&&(e.notification.image=i);const s=t.notification.icon;s&&(e.notification.icon=s)}(t,e),function(e,t){if(!t.data)return;e.data=t.data}(t,e),function(e,t){var n,r,i,s,o;if(!t.fcmOptions&&!(null===(n=t.notification)||void 0===n?void 0:n.click_action))return;e.fcmOptions={};const a=null!==(i=null===(r=t.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==i?i:null===(s=t.notification)||void 0===s?void 0:s.click_action;a&&(e.fcmOptions.link=a);const l=null===(o=t.fcmOptions)||void 0===o?void 0:o.analytics_label;l&&(e.fcmOptions.analyticsLabel=l)}(t,e),t}function tD(e){return KR.create("missing-app-config-values",{valueName:e})}!function(e,t){const n=[];for(let r=0;r<e.length;r++)n.push(e.charAt(r)),r<t.length&&n.push(t.charAt(r));n.join("")}("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class nD{constructor(e,t,n){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const r=function(e){if(!e||!e.options)throw tD("App Configuration Object");if(!e.name)throw tD("App Name");const t=["projectId","apiKey","appId","messagingSenderId"],{options:n}=e;for(const r of t)if(!n[r])throw tD(r);return{appName:e.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:r,installations:t,analyticsProvider:n}}_delete(){return Promise.resolve()}}async function rD(e){try{e.swRegistration=await navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"}),e.swRegistration.update().catch((()=>{})),await async function(e){return new Promise(((t,n)=>{const r=setTimeout((()=>n(new Error("Service worker not registered after ".concat(DR," ms")))),DR),i=e.installing||e.waiting;e.active?(clearTimeout(r),t()):i?i.onstatechange=e=>{var n;"activated"===(null===(n=e.target)||void 0===n?void 0:n.state)&&(i.onstatechange=null,clearTimeout(r),t())}:(clearTimeout(r),n(new Error("No incoming service worker found.")))}))}(e.swRegistration)}catch($M){throw KR.create("failed-service-worker-registration",{browserErrorMessage:null===$M||void 0===$M?void 0:$M.message})}}async function iD(e,t){if(!navigator)throw KR.create("only-available-in-window");if("default"===Notification.permission&&await Notification.requestPermission(),"granted"!==Notification.permission)throw KR.create("permission-blocked");return await async function(e,t){t?e.vapidKey=t:e.vapidKey||(e.vapidKey=PR)}(e,null===t||void 0===t?void 0:t.vapidKey),await async function(e,t){if(t||e.swRegistration||await rD(e),t||!e.swRegistration){if(!(t instanceof ServiceWorkerRegistration))throw KR.create("invalid-sw-registration");e.swRegistration=t}}(e,null===t||void 0===t?void 0:t.serviceWorkerRegistration),$R(e)}async function sD(e,t,n){const r=function(e){switch(e){case LR.NOTIFICATION_CLICKED:return"notification_open";case LR.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(t);(await e.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[RR],message_name:n["google.c.a.c_l"],message_time:n["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)})}async function oD(e,t){const n=t.data;if(!n.isFirebaseMessaging)return;e.onMessageHandler&&n.messageType===LR.PUSH_RECEIVED&&("function"===typeof e.onMessageHandler?e.onMessageHandler(eD(n)):e.onMessageHandler.next(eD(n)));const r=n.data;(function(e){return"object"===typeof e&&!!e&&RR in e})(r)&&"1"===r["google.c.a.e"]&&await sD(e,n.messageType,r)}const aD="@firebase/messaging",lD="0.12.21",cD=e=>{const t=new nD(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",(e=>oD(t,e))),t},uD=e=>{const t=e.getProvider("messaging").getImmediate();return{getToken:e=>iD(t,e)}};function hD(e){return async function(e){if(!navigator)throw KR.create("only-available-in-window");return e.swRegistration||await rD(e),XR(e)}(e=Dn(e))}function dD(e,t){return function(e,t){if(!navigator)throw KR.create("only-available-in-window");return e.onMessageHandler=t,()=>{e.onMessageHandler=null}}(e=Dn(e),t)}Kr(new On("messaging",cD,"PUBLIC")),Kr(new On("messaging-internal",uD,"PRIVATE")),li(aD,lD),li(aD,lD,"esm2017");const fD="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",pD="FCM_MSG";var gD,mD;function yD(e){const t=new Uint8Array(e);return btoa(String.fromCharCode(...t)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function vD(e){const t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),r=new Uint8Array(n.length);for(let i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}!function(e){e[e.DATA_MESSAGE=1]="DATA_MESSAGE",e[e.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"}(gD||(gD={})),function(e){e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked"}(mD||(mD={}));const _D="fcm_token_details_db",wD="fcm_token_object_Store";const bD="firebase-messaging-store";let TD=null;function ED(){return TD||(TD=rr("firebase-messaging-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(bD)}})),TD}async function ID(e){const t=kD(e),n=await ED(),r=await n.transaction(bD).objectStore(bD).get(t);if(r)return r;{const t=await async function(e){if("databases"in indexedDB){const e=(await indexedDB.databases()).map((e=>e.name));if(!e.includes(_D))return null}let t=null;return(await rr(_D,5,{upgrade:async(n,r,i,s)=>{var o;if(r<2)return;if(!n.objectStoreNames.contains(wD))return;const a=s.objectStore(wD),l=await a.index("fcmSenderId").get(e);if(await a.clear(),l)if(2===r){const e=l;if(!e.auth||!e.p256dh||!e.endpoint)return;t={token:e.fcmToken,createTime:null!==(o=e.createTime)&&void 0!==o?o:Date.now(),subscriptionOptions:{auth:e.auth,p256dh:e.p256dh,endpoint:e.endpoint,swScope:e.swScope,vapidKey:"string"===typeof e.vapidKey?e.vapidKey:yD(e.vapidKey)}}}else if(3===r){const e=l;t={token:e.fcmToken,createTime:e.createTime,subscriptionOptions:{auth:yD(e.auth),p256dh:yD(e.p256dh),endpoint:e.endpoint,swScope:e.swScope,vapidKey:yD(e.vapidKey)}}}else if(4===r){const e=l;t={token:e.fcmToken,createTime:e.createTime,subscriptionOptions:{auth:yD(e.auth),p256dh:yD(e.p256dh),endpoint:e.endpoint,swScope:e.swScope,vapidKey:yD(e.vapidKey)}}}}})).close(),await ir(_D),await ir("fcm_vapid_details_db"),await ir("undefined"),function(e){if(!e||!e.subscriptionOptions)return!1;const{subscriptionOptions:t}=e;return"number"===typeof e.createTime&&e.createTime>0&&"string"===typeof e.token&&e.token.length>0&&"string"===typeof t.auth&&t.auth.length>0&&"string"===typeof t.p256dh&&t.p256dh.length>0&&"string"===typeof t.endpoint&&t.endpoint.length>0&&"string"===typeof t.swScope&&t.swScope.length>0&&"string"===typeof t.vapidKey&&t.vapidKey.length>0}(t)?t:null}(e.appConfig.senderId);if(t)return await SD(e,t),t}}async function SD(e,t){const n=kD(e),r=(await ED()).transaction(bD,"readwrite");return await r.objectStore(bD).put(t,n),await r.done,t}function kD(e){let{appConfig:t}=e;return t.appId}const CD=new cn("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});async function xD(e,t){const n={method:"DELETE",headers:await AD(e)};try{const r=await fetch("".concat(ND(e.appConfig),"/").concat(t),n),i=await r.json();if(i.error){const e=i.error.message;throw CD.create("token-unsubscribe-failed",{errorInfo:e})}}catch(r){throw CD.create("token-unsubscribe-failed",{errorInfo:null===r||void 0===r?void 0:r.toString()})}}function ND(e){let{projectId:t}=e;return"".concat("https://fcmregistrations.googleapis.com/v1","/projects/").concat(t,"/registrations")}async function AD(e){let{appConfig:t,installations:n}=e;const r=await n.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":"FIS ".concat(r)})}function PD(e){let{p256dh:t,auth:n,endpoint:r,vapidKey:i}=e;const s={web:{endpoint:r,auth:n,p256dh:t}};return i!==fD&&(s.web.applicationPubKey=i),s}async function RD(e){const t=await async function(e,t){const n=await e.pushManager.getSubscription();if(n)return n;return e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:vD(t)})}(e.swRegistration,e.vapidKey),n={vapidKey:e.vapidKey,swScope:e.swRegistration.scope,endpoint:t.endpoint,auth:yD(t.getKey("auth")),p256dh:yD(t.getKey("p256dh"))},r=await ID(e.firebaseDependencies);if(r){if(function(e,t){const n=t.vapidKey===e.vapidKey,r=t.endpoint===e.endpoint,i=t.auth===e.auth,s=t.p256dh===e.p256dh;return n&&r&&i&&s}(r.subscriptionOptions,n))return Date.now()>=r.createTime+6048e5?async function(e,t){try{const n=await async function(e,t){const n=await AD(e),r=PD(t.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)};let s;try{const n=await fetch("".concat(ND(e.appConfig),"/").concat(t.token),i);s=await n.json()}catch(o){throw CD.create("token-update-failed",{errorInfo:null===o||void 0===o?void 0:o.toString()})}if(s.error){const e=s.error.message;throw CD.create("token-update-failed",{errorInfo:e})}if(!s.token)throw CD.create("token-update-no-token");return s.token}(e.firebaseDependencies,t),r=Object.assign(Object.assign({},t),{token:n,createTime:Date.now()});return await SD(e.firebaseDependencies,r),n}catch($M){throw $M}}(e,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await xD(e.firebaseDependencies,r.token)}catch($M){console.warn($M)}return OD(e.firebaseDependencies,n)}return OD(e.firebaseDependencies,n)}async function DD(e){const t=await ID(e.firebaseDependencies);t&&(await xD(e.firebaseDependencies,t.token),await async function(e){const t=kD(e),n=(await ED()).transaction(bD,"readwrite");await n.objectStore(bD).delete(t),await n.done}(e.firebaseDependencies));const n=await e.swRegistration.pushManager.getSubscription();return!n||n.unsubscribe()}async function OD(e,t){const n=await async function(e,t){const n=await AD(e),r=PD(t),i={method:"POST",headers:n,body:JSON.stringify(r)};let s;try{const t=await fetch(ND(e.appConfig),i);s=await t.json()}catch(o){throw CD.create("token-subscribe-failed",{errorInfo:null===o||void 0===o?void 0:o.toString()})}if(s.error){const e=s.error.message;throw CD.create("token-subscribe-failed",{errorInfo:e})}if(!s.token)throw CD.create("token-subscribe-no-token");return s.token}(e,t),r={token:n,createTime:Date.now(),subscriptionOptions:t};return await SD(e,r),r.token}async function LD(e,t){const n=function(e,t){var n,r;const i={};e.from&&(i.project_number=e.from);e.fcmMessageId&&(i.message_id=e.fcmMessageId);i.instance_id=t,e.notification?i.message_type=gD.DISPLAY_NOTIFICATION.toString():i.message_type=gD.DATA_MESSAGE.toString();i.sdk_platform=3..toString(),i.package_name=self.origin.replace(/(^\w+:|^)\/\//,""),!e.collapse_key||(i.collapse_key=e.collapse_key);i.event=1..toString(),!(null===(n=e.fcmOptions)||void 0===n?void 0:n.analytics_label)||(i.analytics_label=null===(r=e.fcmOptions)||void 0===r?void 0:r.analytics_label);return i}(t,await e.firebaseDependencies.installations.getId());!function(e,t,n){const r={};r.event_time_ms=Math.floor(Date.now()).toString(),r.source_extension_json_proto3=JSON.stringify({messaging_client_event:t}),!n||(r.compliance_data=function(e){const t={privacy_context:{prequest:{origin_associated_product_id:e}}};return t}(n));e.logEvents.push(r)}(e,n,t.productId)}async function MD(e,t){const n=function(e){let{data:t}=e;if(!t)return null;try{return t.json()}catch(n){return null}}(e);if(!n)return;t.deliveryMetricsExportedToBigQueryEnabled&&await LD(t,n);const r=await UD();if(function(e){return e.some((e=>"visible"===e.visibilityState&&!e.url.startsWith("chrome-extension://")))}(r))return function(e,t){t.isFirebaseMessaging=!0,t.messageType=mD.PUSH_RECEIVED;for(const n of e)n.postMessage(t)}(r,n);if(n.notification&&await function(e){var t;const{actions:n}=e,{maxActions:r}=Notification;n&&r&&n.length>r&&console.warn("This browser only supports ".concat(r," actions. The remaining actions will not be displayed."));return self.registration.showNotification(null!==(t=e.title)&&void 0!==t?t:"",e)}(function(e){const t=Object.assign({},e.notification);return t.data={[pD]:e},t}(n)),t&&t.onBackgroundMessageHandler){const e=function(e){const t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcmMessageId};return function(e,t){if(!t.notification)return;e.notification={};const n=t.notification.title;n&&(e.notification.title=n);const r=t.notification.body;r&&(e.notification.body=r);const i=t.notification.image;i&&(e.notification.image=i);const s=t.notification.icon;s&&(e.notification.icon=s)}(t,e),function(e,t){t.data&&(e.data=t.data)}(t,e),function(e,t){var n,r,i,s,o;if(!t.fcmOptions&&!(null===(n=t.notification)||void 0===n?void 0:n.click_action))return;e.fcmOptions={};const a=null!==(i=null===(r=t.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==i?i:null===(s=t.notification)||void 0===s?void 0:s.click_action;a&&(e.fcmOptions.link=a);const l=null===(o=t.fcmOptions)||void 0===o?void 0:o.analytics_label;l&&(e.fcmOptions.analyticsLabel=l)}(t,e),t}(n);"function"===typeof t.onBackgroundMessageHandler?await t.onBackgroundMessageHandler(e):t.onBackgroundMessageHandler.next(e)}}async function FD(e){var t,n;const r=null===(n=null===(t=e.notification)||void 0===t?void 0:t.data)||void 0===n?void 0:n[pD];if(!r)return;if(e.action)return;e.stopImmediatePropagation(),e.notification.close();const i=function(e){var t,n,r;const i=null!==(n=null===(t=e.fcmOptions)||void 0===t?void 0:t.link)&&void 0!==n?n:null===(r=e.notification)||void 0===r?void 0:r.click_action;if(i)return i;return function(e){return"object"===typeof e&&!!e&&"google.c.a.c_id"in e}(e.data)?self.location.origin:null}(r);if(!i)return;const s=new URL(i,self.location.href),o=new URL(self.location.origin);if(s.host!==o.host)return;let a=await async function(e){const t=await UD();for(const n of t){const t=new URL(n.url,self.location.href);if(e.host===t.host)return n}return null}(s);var l;return a?a=await a.focus():(a=await self.clients.openWindow(i),await(l=3e3,new Promise((e=>{setTimeout(e,l)})))),a?(r.messageType=mD.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,a.postMessage(r)):void 0}function UD(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function jD(e){return CD.create("missing-app-config-values",{valueName:e})}!function(e,t){const n=[];for(let r=0;r<e.length;r++)n.push(e.charAt(r)),r<t.length&&n.push(t.charAt(r));n.join("")}("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class VD{constructor(e,t,n){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const r=function(e){if(!e||!e.options)throw jD("App Configuration Object");if(!e.name)throw jD("App Name");const t=["projectId","apiKey","appId","messagingSenderId"],{options:n}=e;for(const r of t)if(!n[r])throw jD(r);return{appName:e.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:r,installations:t,analyticsProvider:n}}_delete(){return Promise.resolve()}}const zD=e=>{const t=new VD(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));return self.addEventListener("push",(e=>{e.waitUntil(MD(e,t))})),self.addEventListener("pushsubscriptionchange",(e=>{e.waitUntil(async function(e,t){var n,r;const{newSubscription:i}=e;if(!i)return void await DD(t);const s=await ID(t.firebaseDependencies);await DD(t),t.vapidKey=null!==(r=null===(n=null===s||void 0===s?void 0:s.subscriptionOptions)||void 0===n?void 0:n.vapidKey)&&void 0!==r?r:fD,await RD(t)}(e,t))})),self.addEventListener("notificationclick",(e=>{e.waitUntil(FD(e))})),t};function qD(e,t){return function(e,t){if(void 0!==self.document)throw CD.create("only-available-in-sw");return e.onBackgroundMessageHandler=t,()=>{e.onBackgroundMessageHandler=null}}(e=Dn(e),t)}Kr(new On("messaging-sw",zD,"PUBLIC"));class BD{constructor(e,t){this.app=e,this._delegate=t,this.app=e,this._delegate=t}async getToken(e){return async function(e,t){return iD(e=Dn(e),t)}(this._delegate,e)}async deleteToken(){return hD(this._delegate)}onMessage(e){return dD(this._delegate,e)}onBackgroundMessage(e){return qD(this._delegate,e)}}const HD=e=>self&&"ServiceWorkerGlobalScope"in self?new BD(e.getProvider("app-compat").getImmediate(),e.getProvider("messaging-sw").getImmediate()):new BD(e.getProvider("app-compat").getImmediate(),e.getProvider("messaging").getImmediate()),WD={isSupported:function(){return self&&"ServiceWorkerGlobalScope"in self?sn()&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"undefined"!==typeof window&&sn()&&an()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}};ME.INTERNAL.registerComponent(new On("messaging-compat",HD,"PUBLIC").setServiceProps(WD)),ME.registerVersion("@firebase/messaging-compat","0.2.21");const KD="firebasestorage.googleapis.com",GD="storageBucket";class QD extends ln{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super($D(e),"Firebase Storage: ".concat(t," (").concat($D(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,QD.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return $D(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var YD,JD;function $D(e){return"storage/"+e}function XD(){return new QD(YD.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function ZD(){return new QD(YD.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function eO(){return new QD(YD.CANCELED,"User canceled the upload/download.")}function tO(){return new QD(YD.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function nO(e){return new QD(YD.INVALID_ARGUMENT,e)}function rO(){return new QD(YD.APP_DELETED,"The Firebase app was deleted.")}function iO(e){return new QD(YD.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function sO(e,t){return new QD(YD.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function oO(e){throw new QD(YD.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(YD||(YD={}));class aO{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=aO.makeFromUrl(e,t)}catch($M){return new aO(e,"")}if(""===n.path)return n;throw r=e,new QD(YD.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function s(e){e.path_=decodeURIComponent(e.path)}const o=t.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(o,"/").concat("v[A-Za-z0-9_]+","/b/").concat(r,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp("^https?://".concat(t===KD?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(r,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:s}];for(let l=0;l<a.length;l++){const t=a[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new aO(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new QD(YD.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class lO{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function cO(e){return"string"===typeof e||e instanceof String}function uO(e){return hO()&&e instanceof Blob}function hO(){return"undefined"!==typeof Blob}function dO(e,t,n,r){if(r<t)throw nO("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw nO("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function fO(e,t,n){let r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function pO(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function gO(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(JD||(JD={}));class mO{constructor(e,t,n,r,i,s,o,a,l,c,u){let h=!(arguments.length>11&&void 0!==arguments[11])||arguments[11],d=arguments.length>12&&void 0!==arguments[12]&&arguments[12];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=s,this.callback_=o,this.errorCallback_=a,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=h,this.isUsingEmulator=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{if(t)return void e(!1,new yO(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===JD.NO_ERROR,i=n.getStatus();if(!t||gO(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===JD.ABORT;return void e(!1,new yO(!1,null,t))}const s=-1!==this.successCodes_.indexOf(i);e(!0,new yO(s,n))}))},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch($M){r($M)}else if(null!==i){const e=XD();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?rO():eO())}else{r(ZD())}};this.canceled_?t(0,new yO(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return 2===a}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function h(t){i=setTimeout((()=>{i=null,e(f,l())}),t)}function d(){s&&clearTimeout(s)}function f(e){if(c)return void d();for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return d(),void u.call(null,e,...n);if(l()||o)return d(),void u.call(null,e,...n);let s;r<64&&(r*=2),1===a?(a=2,s=0):s=1e3*(r+Math.random()),h(s)}let p=!1;function g(e){p||(p=!0,d(),c||(null!==i?(e||(a=2),clearTimeout(i),h(0)):e||(a=1)))}return h(0),s=setTimeout((()=>{o=!0,g(!0)}),n),g}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class yO{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function vO(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function _O(){const e=vO();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(hO())return new Blob(n);throw new QD(YD.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function wO(e){if("undefined"===typeof atob)throw t="base-64",new QD(YD.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}const bO={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class TO{constructor(e,t){this.data=e,this.contentType=t||null}}function EO(e,t){switch(e){case bO.RAW:return new TO(IO(t));case bO.BASE64:case bO.BASE64URL:return new TO(SO(e,t));case bO.DATA_URL:return new TO(function(e){const t=new kO(e);return t.base64?SO(bO.BASE64,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch($M){throw sO(bO.DATA_URL,"Malformed data URL.")}return IO(t)}(t.rest)}(t),new kO(t).contentType)}throw XD()}function IO(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function SO(e,t){switch(e){case bO.BASE64:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw sO(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case bO.BASE64URL:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw sO(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=wO(t)}catch($M){if($M.message.includes("polyfill"))throw $M;throw sO(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class kO{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw sO(bO.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){const n=e.length>=t.length;if(!n)return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class CO{constructor(e,t){let n=0,r="";uO(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(uO(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new CO(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new CO(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(hO()){const e=t.map((e=>e instanceof CO?e.data_:e));return new CO(_O.apply(null,e))}{const e=t.map((e=>cO(e)?EO(bO.RAW,e).data:e.data_));let n=0;e.forEach((e=>{n+=e.byteLength}));const r=new Uint8Array(n);let i=0;return e.forEach((e=>{for(let t=0;t<e.length;t++)r[i++]=e[t]})),new CO(r,!0)}}uploadData(){return this.data_}}function xO(e){let t;try{t=JSON.parse(e)}catch($M){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function NO(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function AO(e,t){return t}class PO{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||AO}}let RO=null;function DO(){if(RO)return RO;const e=[];e.push(new PO("bucket")),e.push(new PO("generation")),e.push(new PO("metageneration")),e.push(new PO("name","fullPath",!0));const t=new PO("name");t.xform=function(e,t){return function(e){return!cO(e)||e.length<2?e:NO(e)}(t)},e.push(t);const n=new PO("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new PO("timeCreated")),e.push(new PO("updated")),e.push(new PO("md5Hash",null,!0)),e.push(new PO("cacheControl",null,!0)),e.push(new PO("contentDisposition",null,!0)),e.push(new PO("contentEncoding",null,!0)),e.push(new PO("contentLanguage",null,!0)),e.push(new PO("contentType",null,!0)),e.push(new PO("metadata","customMetadata",!0)),RO=e,RO}function OO(e,t,n){const r={type:"file"},i=n.length;for(let s=0;s<i;s++){const e=n[s];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,i=new aO(n,r);return t._makeStorageReference(i)}})}(r,e),r}function LO(e,t,n){const r=xO(t);if(null===r)return null;return OO(e,r,n)}function MO(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const r=t[i];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}const FO="prefixes",UO="items";function jO(e,t,n){const r=xO(n);if(null===r)return null;return function(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[FO])for(const i of n[FO]){const n=i.replace(/\/$/,""),s=e._makeStorageReference(new aO(t,n));r.prefixes.push(s)}if(n[UO])for(const i of n[UO]){const n=e._makeStorageReference(new aO(t,i.name));r.items.push(n)}return r}(e,t,r)}class VO{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function zO(e){if(!e)throw XD()}function qO(e,t){return function(n,r){const i=LO(e,r,t);return zO(null!==i),i}}function BO(e,t){return function(n,r){const i=LO(e,r,t);return zO(null!==i),function(e,t,n,r){const i=xO(t);if(null===i)return null;if(!cO(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map((t=>{const i=e.bucket,s=e.fullPath;return fO("/b/"+o(i)+"/o/"+o(s),n,r)+pO({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function HO(e){return function(t,n){let r;var i,s;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new QD(YD.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new QD(YD.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(s=e.bucket,r=new QD(YD.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new QD(YD.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function WO(e){const t=HO(e);return function(n,r){let i=t(n,r);var s;return 404===n.getStatus()&&(s=e.path,i=new QD(YD.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function KO(e,t,n){const r=fO(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,s=new VO(r,"GET",qO(e,n),i);return s.errorHandler=WO(t),s}function GO(e,t,n,r,i){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",n&&n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=fO(t.bucketOnlyServerUrl(),e.host,e._protocol),a=e.maxOperationRetryTime,l=new VO(o,"GET",function(e,t){return function(n,r){const i=jO(e,t,r);return zO(null!==i),i}}(e,t.bucket),a);return l.urlParams=s,l.errorHandler=HO(t),l}function QO(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function YO(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};const a=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+a;const l=QO(t,r,i),c="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+MO(l,n)+"\r\n--"+a+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",u="\r\n--"+a+"--",h=CO.getBlob(c,r,u);if(null===h)throw tO();const d={name:l.fullPath},f=fO(s,e.host,e._protocol),p=e.maxUploadRetryTime,g=new VO(f,"POST",qO(e,n),p);return g.urlParams=d,g.headers=o,g.body=h.uploadData(),g.errorHandler=HO(t),g}class JO{constructor(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null}}function $O(e,t){let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch($M){zO(!1)}return zO(!!n&&-1!==(t||["active"]).indexOf(n)),n}const XO=262144;function ZO(e,t,n,r,i,s,o,a){const l=new JO(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw new QD(YD.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");const c=l.total-l.current;let u=c;i>0&&(u=Math.min(u,i));const h=l.current,d=h+u;let f="";f=0===u?"finalize":c===u?"upload, finalize":"upload";const p={"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":"".concat(l.current)},g=r.slice(h,d);if(null===g)throw tO();const m=t.maxUploadRetryTime,y=new VO(n,"POST",(function(e,n){const i=$O(e,["active","final"]),o=l.current+u,a=r.size();let c;return c="final"===i?qO(t,s)(e,n):null,new JO(o,a,"final"===i,c)}),m);return y.headers=p,y.body=g.uploadData(),y.progressCallback=a||null,y.errorHandler=HO(e),y}const eL={STATE_CHANGED:"state_changed"},tL={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function nL(e){switch(e){case"running":case"pausing":case"canceling":return tL.RUNNING;case"paused":return tL.PAUSED;case"success":return tL.SUCCESS;case"canceled":return tL.CANCELED;default:return tL.ERROR}}class rL{constructor(e,t,n){const r=function(e){return"function"===typeof e}(e)||null!=t||null!=n;if(r)this.next=e,this.error=null!==t&&void 0!==t?t:void 0,this.complete=null!==n&&void 0!==n?n:void 0;else{const t=e;this.next=t.next,this.error=t.error,this.complete=t.complete}}}function iL(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((()=>e(...n)))}}class sL{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=JD.NO_ERROR,this.sendPromise_=new Promise((e=>{this.xhr_.addEventListener("abort",(()=>{this.errorCode_=JD.ABORT,e()})),this.xhr_.addEventListener("error",(()=>{this.errorCode_=JD.NETWORK_ERROR,e()})),this.xhr_.addEventListener("load",(()=>{e()}))}))}send(e,t,n,r,i){if(this.sent_)throw oO("cannot .send() more than once");if(qt(e)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw oO("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw oO("cannot .getStatus() before sending");try{return this.xhr_.status}catch($M){return-1}}getResponse(){if(!this.sent_)throw oO("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw oO("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class oL extends sL{initXhr(){this.xhr_.responseType="text"}}function aL(){return new oL}class lL{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=n,this._mappings=DO(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=e=>{if(this._request=void 0,this._chunkMultiplier=1,e._codeEquals(YD.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const t=this.isExponentialBackoffExpired();if(gO(e.status,[])){if(!t)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();e=ZD()}this._error=e,this._transition("error")}},this._metadataErrorHandler=e=>{this._request=void 0,e._codeEquals(YD.CANCELED)?this.completeTransitions_():(this._error=e,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise(((e,t)=>{this._resolve=e,this._reject=t,this._start()})),this._promise.then(null,(()=>{}))}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout((()=>{this.pendingTimeout=void 0,this._continueUpload()}),this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((t=>{let[n,r]=t;switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}}))}_createResumable(){this._resolveToken(((e,t)=>{const n=function(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o=QO(t,r,i),a={name:o.fullPath},l=fO(s,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},u=MO(o,n),h=e.maxUploadRetryTime,d=new VO(l,"POST",(function(e){let t;$O(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch($M){zO(!1)}return zO(cO(t)),t}),h);return d.urlParams=a,d.headers=c,d.body=u,d.errorHandler=HO(t),d}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,aL,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._uploadUrl=e,this._needToFetchStatus=!1,this.completeTransitions_()}),this._errorHandler)}))}_fetchStatus(){const e=this._uploadUrl;this._resolveToken(((t,n)=>{const r=function(e,t,n,r){const i=e.maxUploadRetryTime,s=new VO(n,"POST",(function(e){const t=$O(e,["active","final"]);let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch($M){zO(!1)}n||zO(!1);const i=Number(n);return zO(!isNaN(i)),new JO(i,r.size(),"final"===t)}),i);return s.headers={"X-Goog-Upload-Command":"query"},s.errorHandler=HO(t),s}(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(r,aL,t,n);this._request=i,i.getPromise().then((e=>{this._request=void 0,this._updateProgress(e.current),this._needToFetchStatus=!1,e.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()}),this._errorHandler)}))}_continueUpload(){const e=XO*this._chunkMultiplier,t=new JO(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken(((r,i)=>{let s;try{s=ZO(this._ref._location,this._ref.storage,n,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch($M){return this._error=$M,void this._transition("error")}const o=this._ref.storage._makeRequest(s,aL,r,i,!1);this._request=o,o.getPromise().then((e=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(e.current),e.finalized?(this._metadata=e.metadata,this._transition("success")):this.completeTransitions_()}),this._errorHandler)}))}_increaseMultiplier(){2*(XO*this._chunkMultiplier)<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken(((e,t)=>{const n=KO(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(n,aL,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._metadata=e,this._transition("success")}),this._metadataErrorHandler)}))}_oneShotUpload(){this._resolveToken(((e,t)=>{const n=YO(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,aL,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._metadata=e,this._updateProgress(this._blob.size()),this._transition("success")}),this._errorHandler)}))}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=eO(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=nL(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,n,r){const i=new rL(t||void 0,n||void 0,r||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise();this._observers.slice().forEach((e=>{this._notifyObserver(e)}))}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(nL(this._state)){case tL.SUCCESS:iL(this._resolve.bind(null,this.snapshot))();break;case tL.CANCELED:case tL.ERROR:iL(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(nL(this._state)){case tL.RUNNING:case tL.PAUSED:e.next&&iL(e.next.bind(e,this.snapshot))();break;case tL.SUCCESS:e.complete&&iL(e.complete.bind(e))();break;default:e.error&&iL(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class cL{constructor(e,t){this._service=e,this._location=t instanceof aO?t:aO.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new cL(e,t)}get root(){const e=new aO(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return NO(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new aO(this._location.bucket,e);return new cL(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw iO(e)}}function uL(e){const t={prefixes:[],items:[]};return hL(e,t).then((()=>t))}async function hL(e,t,n){const r={pageToken:n},i=await dL(e,r);t.prefixes.push(...i.prefixes),t.items.push(...i.items),null!=i.nextPageToken&&await hL(e,t,i.nextPageToken)}function dL(e,t){null!=t&&"number"===typeof t.maxResults&&dO("options.maxResults",1,1e3,t.maxResults);const n=t||{},r=GO(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,aL)}function fL(e,t){e._throwIfRoot("updateMetadata");const n=function(e,t,n,r){const i=fO(t.fullServerUrl(),e.host,e._protocol),s=MO(n,r),o=e.maxOperationRetryTime,a=new VO(i,"PATCH",qO(e,r),o);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=s,a.errorHandler=WO(t),a}(e.storage,e._location,t,DO());return e.storage.makeRequestWithTokens(n,aL)}function pL(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=fO(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,s=new VO(r,"GET",BO(e,n),i);return s.errorHandler=WO(t),s}(e.storage,e._location,DO());return e.storage.makeRequestWithTokens(t,aL).then((e=>{if(null===e)throw new QD(YD.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function gL(e){e._throwIfRoot("deleteObject");const t=function(e,t){const n=fO(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new VO(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=WO(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,aL)}function mL(e,t){const n=function(e,t){const n=t.split("/").filter((e=>e.length>0)).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new aO(e._location.bucket,n);return new cL(e.storage,r)}function yL(e,t){if(e instanceof wL){const n=e;if(null==n._bucket)throw new QD(YD.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+GD+"' property when initializing the app?");const r=new cL(n,n._bucket);return null!=t?yL(r,t):r}return void 0!==t?mL(e,t):e}function vL(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof wL)return new cL(e,t);throw nO("To use ref(service, url), the first argument must be a Storage instance.")}return yL(e,t)}function _L(e,t){const n=null===t||void 0===t?void 0:t[GD];return null==n?null:aO.makeFromBucketSpec(n,e)}class wL{constructor(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._isUsingEmulator=s,this._bucket=null,this._host=KD,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?aO.makeFromBucketSpec(r,this._host):_L(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=aO.makeFromBucketSpec(this._url,e):this._bucket=_L(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){dO("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){dO("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){if(Jr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new cL(this,e)}_makeRequest(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new lO(rO());{const s=function(e,t,n,r,i,s){let o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],a=arguments.length>7&&void 0!==arguments[7]&&arguments[7];const l=pO(e.urlParams),c=e.url+l,u=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(u,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(u,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(u,s),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(u,r),new mO(c,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o,a)}(e,this._appId,n,r,t,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(s),s.getPromise().then((()=>this._requests.delete(s)),(()=>this._requests.delete(s))),s}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const bL="@firebase/storage",TL="0.13.11",EL="storage";function IL(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new lL(e,new CO(t),n)}(e=Dn(e),t,n)}function SL(e){return function(e){e._throwIfRoot("getMetadata");const t=KO(e.storage,e._location,DO());return e.storage.makeRequestWithTokens(t,aL)}(e=Dn(e))}function kL(e,t){return vL(e=Dn(e),t)}function CL(e,t,n){!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n);const i=qt(t);i&&(Bt("https://".concat(e.host)),Gt("Storage",!0)),e._isUsingEmulator=!0,e._protocol=i?"https":"http";const{mockUserToken:s}=r;s&&(e._overrideAuthToken="string"===typeof s?s:Ht(s,e.app.options.projectId))}(e,t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})}function xL(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return new wL(r,i,s,n,ni)}Kr(new On(EL,xL,"PUBLIC").setMultipleInstances(!0)),li(bL,TL,""),li(bL,TL,"esm2017");class NL{constructor(e,t,n){this._delegate=e,this.task=t,this.ref=n}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class AL{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new NL(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then((t=>{if(e)return e(new NL(t,this,this._ref))}),t)}on(e,t,n,r){let i;return t&&(i="function"===typeof t?e=>t(new NL(e,this,this._ref)):{next:t.next?e=>t.next(new NL(e,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,i,n||void 0,r||void 0)}}class PL{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map((e=>new RL(e,this._service)))}get items(){return this._delegate.items.map((e=>new RL(e,this._service)))}get nextPageToken(){return this._delegate.nextPageToken||null}}class RL{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function(e,t){return mL(e,t)}(this._delegate,e);return new RL(t,this.storage)}get root(){return new RL(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new RL(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new AL(IL(this._delegate,e,t),this)}putString(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bO.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");const r=EO(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new AL(new lL(this._delegate,new CO(r.data,!0),i),this)}listAll(){return function(e){return uL(e=Dn(e))}(this._delegate).then((e=>new PL(e,this.storage)))}list(e){return function(e,t){return dL(e=Dn(e),t)}(this._delegate,e||void 0).then((e=>new PL(e,this.storage)))}getMetadata(){return SL(this._delegate)}updateMetadata(e){return function(e,t){return fL(e=Dn(e),t)}(this._delegate,e)}getDownloadURL(){return function(e){return pL(e=Dn(e))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function(e){return gL(e=Dn(e))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw iO(e)}}class DL{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(OL(e))throw nO("ref() expected a child path but got a URL, use refFromURL instead.");return new RL(kL(this._delegate,e),this)}refFromURL(e){if(!OL(e))throw nO("refFromURL() expected a full URL but got a child path, use ref() instead.");try{aO.makeFromUrl(e,this._delegate.host)}catch($M){throw nO("refFromUrl() expected a valid full URL but got an invalid one.")}return new RL(kL(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};CL(this._delegate,e,t,n)}}function OL(e){return/^[A-Za-z]+:\/\//.test(e)}function LL(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new DL(r,i)}!function(e){const t={TaskState:tL,TaskEvent:eL,StringFormat:bO,Storage:DL,Reference:RL};e.INTERNAL.registerComponent(new On("storage-compat",LL,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.3.21")}(ME);const ML="analytics",FL="https://www.googletagmanager.com/gtag/js",UL=new Hn("@firebase/analytics"),jL=new cn("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function VL(e){if(!e.startsWith(FL)){const t=jL.create("invalid-gtag-resource",{gtagURL:e});return UL.warn(t.message),""}return e}function zL(e){return Promise.all(e.map((e=>e.catch((e=>e)))))}function qL(e,t){const n=function(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}("firebase-js-sdk-policy",{createScriptURL:VL}),r=document.createElement("script"),i="".concat(FL,"?l=").concat(e,"&id=").concat(t);r.src=n?null===n||void 0===n?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function BL(e,t,n,r){return async function(i){try{for(var s=arguments.length,o=new Array(s>1?s-1:0),a=1;a<s;a++)o[a-1]=arguments[a];if("event"===i){const[r,i]=o;await async function(e,t,n,r,i){try{let s=[];if(i&&i.send_to){let e=i.send_to;Array.isArray(e)||(e=[e]);const r=await zL(n);for(const n of e){const e=r.find((e=>e.measurementId===n)),i=e&&t[e.appId];if(!i){s=[];break}s.push(i)}}0===s.length&&(s=Object.values(t)),await Promise.all(s),e("event",r,i||{})}catch($M){UL.error($M)}}(e,t,n,r,i)}else if("config"===i){const[i,s]=o;await async function(e,t,n,r,i,s){const o=r[i];try{if(o)await t[o];else{const e=(await zL(n)).find((e=>e.measurementId===i));e&&await t[e.appId]}}catch($M){UL.error($M)}e("config",i,s)}(e,t,n,r,i,s)}else if("consent"===i){const[t,n]=o;e("consent",t,n)}else if("get"===i){const[t,n,r]=o;e("get",t,n,r)}else if("set"===i){const[t]=o;e("set",t)}else e(i,...o)}catch($M){UL.error($M)}}}const HL=new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function WL(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function KL(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:HL,n=arguments.length>2?arguments[2]:void 0;const{appId:r,apiKey:i,measurementId:s}=e.options;if(!r)throw jL.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw jL.create("no-api-key")}const o=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new QL;return setTimeout((async()=>{a.abort()}),void 0!==n?n:6e4),GL({appId:r,apiKey:i,measurementId:s},o,a,t)}async function GL(e,t,n){let{throttleEndTimeMillis:r,backoffCount:i}=t,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:HL;var o;const{appId:a,measurementId:l}=e;try{await function(e,t){return new Promise(((n,r)=>{const i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener((()=>{clearTimeout(s),r(jL.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}(n,r)}catch($M){if(l)return UL.warn("Timed out fetching this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(l)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null===$M||void 0===$M?void 0:$M.message,"]")),{appId:a,measurementId:l};throw $M}try{const t=await async function(e){var t;const{appId:n,apiKey:r}=e,i={method:"GET",headers:WL(r)},s="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),o=await fetch(s,i);if(200!==o.status&&304!==o.status){let e="";try{const n=await o.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(a){}throw jL.create("config-fetch-failed",{httpStatus:o.status,responseMessage:e})}return o.json()}(e);return s.deleteThrottleMetadata(a),t}catch($M){const r=$M;if(!function(e){if(!(e instanceof ln)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(r)){if(s.deleteThrottleMetadata(a),l)return UL.warn("Failed to fetch this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(l)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null===r||void 0===r?void 0:r.message,"]")),{appId:a,measurementId:l};throw $M}const c=503===Number(null===(o=null===r||void 0===r?void 0:r.customData)||void 0===o?void 0:o.httpStatus)?Rn(i,s.intervalMillis,30):Rn(i,s.intervalMillis),u={throttleEndTimeMillis:Date.now()+c,backoffCount:i+1};return s.setThrottleMetadata(a,u),UL.debug("Calling attemptFetch again in ".concat(c," millis")),GL(e,u,n,s)}}class QL{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach((e=>e()))}}let YL,JL;function $L(e){JL=e}function XL(e){YL=e}async function ZL(e,t,n,r,i,s,o){var a;const l=KL(e);l.then((t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&UL.warn("The measurement ID in the local Firebase config (".concat(e.options.measurementId,")")+" does not match the measurement ID fetched from the server (".concat(t.measurementId,").")+" To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((e=>UL.error(e))),t.push(l);const c=async function(){if(!sn())return UL.warn(jL.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await on()}catch($M){return UL.warn(jL.create("indexeddb-unavailable",{errorInfo:null===$M||void 0===$M?void 0:$M.toString()}).message),!1}return!0}().then((e=>e?r.getId():void 0)),[u,h]=await Promise.all([l,c]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(FL)&&n.src.includes(e))return n;return null})(s)||qL(s,u.measurementId),JL&&(i("consent","default",JL),$L(void 0)),i("js",new Date);const d=null!==(a=null===o||void 0===o?void 0:o.config)&&void 0!==a?a:{};return d.origin="firebase",d.update=!0,null!=h&&(d.firebase_id=h),i("config",u.measurementId,d),YL&&(i("set",YL),XL(void 0)),u.measurementId}class eM{constructor(e){this.app=e}_delete(){return delete tM[this.app.options.appId],Promise.resolve()}}let tM={},nM=[];const rM={};let iM,sM,oM="dataLayer",aM="gtag",lM=!1;function cM(e){if(lM)throw jL.create("already-initialized");e.dataLayerName&&(oM=e.dataLayerName),e.gtagName&&(aM=e.gtagName)}function uM(e,t,n){!function(){const e=[];if(Xt()&&e.push("This is a browser extension environment."),an()||e.push("Cookies are not available."),e.length>0){const t=e.map(((e,t)=>"(".concat(t+1,") ").concat(e))).join(" "),n=jL.create("invalid-analytics-context",{errorInfo:t});UL.warn(n.message)}}();const r=e.options.appId;if(!r)throw jL.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw jL.create("no-api-key");UL.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest'+" measurement ID for this Firebase app. Falling back to the measurement ID ".concat(e.options.measurementId)+' provided in the "measurementId" field in the local Firebase config.')}if(null!=tM[r])throw jL.create("already-exists",{id:r});if(!lM){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(oM);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,r,i){let s=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window[r].push(arguments)};return window[i]&&"function"===typeof window[i]&&(s=window[i]),window[i]=BL(s,e,t,n),{gtagCore:s,wrappedGtag:window[i]}}(tM,nM,rM,oM,aM);sM=e,iM=t,lM=!0}tM[r]=ZL(e,nM,rM,t,iM,oM,n);return new eM(e)}async function hM(){if(Xt())return!1;if(!an())return!1;if(!sn())return!1;try{return await on()}catch(qI){return!1}}function dM(e,t,n){e=Dn(e),async function(e,t,n,r){if(r&&r.global)return e("set",{screen_name:n}),Promise.resolve();e("config",await t,{update:!0,screen_name:n})}(sM,tM[e.app.options.appId],t,n).catch((e=>UL.error(e)))}function fM(e,t,n){e=Dn(e),async function(e,t,n,r){if(r&&r.global)return e("set",{user_id:n}),Promise.resolve();e("config",await t,{update:!0,user_id:n})}(sM,tM[e.app.options.appId],t,n).catch((e=>UL.error(e)))}function pM(e,t,n){e=Dn(e),async function(e,t,n,r){if(r&&r.global){const t={};for(const e of Object.keys(n))t["user_properties.".concat(e)]=n[e];return e("set",t),Promise.resolve()}e("config",await t,{update:!0,user_properties:n})}(sM,tM[e.app.options.appId],t,n).catch((e=>UL.error(e)))}function gM(e,t){e=Dn(e),async function(e,t){const n=await e;window["ga-disable-".concat(n)]=!t}(tM[e.app.options.appId],t).catch((e=>UL.error(e)))}function mM(e,t,n,r){e=Dn(e),async function(e,t,n,r,i){if(i&&i.global)e("event",n,r);else{const i=await t;e("event",n,Object.assign(Object.assign({},r),{send_to:i}))}}(sM,tM[e.app.options.appId],t,n,r).catch((e=>UL.error(e)))}const yM="@firebase/analytics",vM="0.10.16";Kr(new On(ML,((e,t)=>{let{options:n}=t;return uM(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n)}),"PUBLIC")),Kr(new On("analytics-internal",(function(e){try{const t=e.getProvider(ML).getImmediate();return{logEvent:(e,n,r)=>mM(t,e,n,r)}}catch($M){throw jL.create("interop-component-reg-failed",{reason:$M})}}),"PRIVATE")),li(yM,vM),li(yM,vM,"esm2017");class _M{constructor(e,t){this.app=e,this._delegate=t}logEvent(e,t,n){mM(this._delegate,e,t,n)}setCurrentScreen(e,t){dM(this._delegate,e,t)}setUserId(e,t){fM(this._delegate,e,t)}setUserProperties(e,t){pM(this._delegate,e,t)}setAnalyticsCollectionEnabled(e){gM(this._delegate,e)}}var wM;!function(e){e.ADD_SHIPPING_INFO="add_shipping_info",e.ADD_PAYMENT_INFO="add_payment_info",e.ADD_TO_CART="add_to_cart",e.ADD_TO_WISHLIST="add_to_wishlist",e.BEGIN_CHECKOUT="begin_checkout",e.CHECKOUT_PROGRESS="checkout_progress",e.EXCEPTION="exception",e.GENERATE_LEAD="generate_lead",e.LOGIN="login",e.PAGE_VIEW="page_view",e.PURCHASE="purchase",e.REFUND="refund",e.REMOVE_FROM_CART="remove_from_cart",e.SCREEN_VIEW="screen_view",e.SEARCH="search",e.SELECT_CONTENT="select_content",e.SELECT_ITEM="select_item",e.SELECT_PROMOTION="select_promotion",e.SET_CHECKOUT_OPTION="set_checkout_option",e.SHARE="share",e.SIGN_UP="sign_up",e.TIMING_COMPLETE="timing_complete",e.VIEW_CART="view_cart",e.VIEW_ITEM="view_item",e.VIEW_ITEM_LIST="view_item_list",e.VIEW_PROMOTION="view_promotion",e.VIEW_SEARCH_RESULTS="view_search_results"}(wM||(wM={}));const bM=e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("analytics").getImmediate();return new _M(t,n)};!function(){const e={Analytics:_M,settings:cM,isSupported:hM,EventName:wM};ME.INTERNAL.registerComponent(new On("analytics-compat",bM,"PUBLIC").setServiceProps(e).setMultipleInstances(!0))}(),ME.registerVersion("@firebase/analytics-compat","0.2.22");const TM="@firebase/remote-config",EM="0.6.4";class IM{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach((e=>e()))}}const SM="remote-config",kM=new cn("remoteconfig","Remote Config",{"already-initialized":"Remote Config already initialized","registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser","custom-signal-max-allowed-signals":"Setting more than {$maxSignals} custom signals is not supported."});const CM=["1","true","t","yes","y","on"];class xM{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this._source=e,this._value=t}asString(){return this._value}asBoolean(){return"static"!==this._source&&CM.indexOf(this._value.toLowerCase())>=0}asNumber(){if("static"===this._source)return 0;let e=Number(this._value);return isNaN(e)&&(e=0),e}getSource(){return this._source}}async function NM(e){const t=Dn(e),[n,r]=await Promise.all([t._storage.getLastSuccessfulFetchResponse(),t._storage.getActiveConfigEtag()]);return!!(n&&n.config&&n.eTag&&n.eTag!==r)&&(await Promise.all([t._storageCache.setActiveConfig(n.config),t._storage.setActiveConfigEtag(n.eTag)]),!0)}function AM(e){const t=Dn(e);return t._initializePromise||(t._initializePromise=t._storageCache.loadFromStorage().then((()=>{t._isInitializationComplete=!0}))),t._initializePromise}async function PM(e){const t=Dn(e),n=new IM;setTimeout((async()=>{n.abort()}),t.settings.fetchTimeoutMillis);const r=t._storageCache.getCustomSignals();r&&t._logger.debug("Fetching config with custom signals: ".concat(JSON.stringify(r)));try{await t._client.fetch({cacheMaxAgeMillis:t.settings.minimumFetchIntervalMillis,signal:n,customSignals:r}),await t._storageCache.setLastFetchStatus("success")}catch($M){const n=function(e,t){return e instanceof ln&&-1!==e.code.indexOf(t)}($M,"fetch-throttle")?"throttle":"failure";throw await t._storageCache.setLastFetchStatus(n),$M}}function RM(e){const t=Dn(e);return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(Object.assign(Object.assign({},e),t))}(t._storageCache.getActiveConfig(),t.defaultConfig).reduce(((t,n)=>(t[n]=DM(e,n),t)),{})}function DM(e,t){const n=Dn(e);n._isInitializationComplete||n._logger.debug('A value was requested for key "'.concat(t,'" before SDK initialization completed.')+" Await on ensureInitialized if the intent was to get a previously activated value.");const r=n._storageCache.getActiveConfig();return r&&void 0!==r[t]?new xM("remote",r[t]):n.defaultConfig&&void 0!==n.defaultConfig[t]?new xM("default",String(n.defaultConfig[t])):(n._logger.debug('Returning static value for key "'.concat(t,'".')+" Define a default or remote value if this is unintentional."),new xM("static"))}class OM{constructor(e,t,n,r){this.client=e,this.storage=t,this.storageCache=n,this.logger=r}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const n=Date.now()-t,r=n<=e;return this.logger.debug("Config fetch cache check."+" Cache age millis: ".concat(n,".")+" Cache max age millis (minimumFetchIntervalMillis setting): ".concat(e,".")+" Is cache hit: ".concat(r,".")),r}async fetch(e){const[t,n]=await Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()]);if(n&&this.isCachedDataFresh(e.cacheMaxAgeMillis,t))return n;e.eTag=n&&n.eTag;const r=await this.client.fetch(e),i=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===r.status&&i.push(this.storage.setLastSuccessfulFetchResponse(r)),await Promise.all(i),r}}function LM(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:navigator;return e.languages&&e.languages[0]||e.language}class MM{constructor(e,t,n,r,i,s){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=s}async fetch(e){const[t,n]=await Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()]),r=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",i="".concat(r,"/v1/projects/").concat(this.projectId,"/namespaces/").concat(this.namespace,":fetch?key=").concat(this.apiKey),s={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},o={sdk_version:this.sdkVersion,app_instance_id:t,app_instance_id_token:n,app_id:this.appId,language_code:LM(),custom_signals:e.customSignals},a={method:"POST",headers:s,body:JSON.stringify(o)},l=fetch(i,a),c=new Promise(((t,n)=>{e.signal.addEventListener((()=>{const e=new Error("The operation was aborted.");e.name="AbortError",n(e)}))}));let u;try{await Promise.race([l,c]),u=await l}catch(g){let e="fetch-client-network";throw"AbortError"===(null===g||void 0===g?void 0:g.name)&&(e="fetch-timeout"),kM.create(e,{originalErrorMessage:null===g||void 0===g?void 0:g.message})}let h=u.status;const d=u.headers.get("ETag")||void 0;let f,p;if(200===u.status){let e;try{e=await u.json()}catch(g){throw kM.create("fetch-client-parse",{originalErrorMessage:null===g||void 0===g?void 0:g.message})}f=e.entries,p=e.state}if("INSTANCE_STATE_UNSPECIFIED"===p?h=500:"NO_CHANGE"===p?h=304:"NO_TEMPLATE"!==p&&"EMPTY_CONFIG"!==p||(f={}),304!==h&&200!==h)throw kM.create("fetch-status",{httpStatus:h});return{status:h,eTag:d,config:f}}}class FM{constructor(e,t){this.client=e,this.storage=t}async fetch(e){const t=await this.storage.getThrottleMetadata()||{backoffCount:0,throttleEndTimeMillis:Date.now()};return this.attemptFetch(e,t)}async attemptFetch(e,t){let{throttleEndTimeMillis:n,backoffCount:r}=t;await function(e,t){return new Promise(((n,r)=>{const i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener((()=>{clearTimeout(s),r(kM.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}(e.signal,n);try{const t=await this.client.fetch(e);return await this.storage.deleteThrottleMetadata(),t}catch($M){if(!function(e){if(!(e instanceof ln)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}($M))throw $M;const n={throttleEndTimeMillis:Date.now()+Rn(r),backoffCount:r+1};return await this.storage.setThrottleMetadata(n),this.attemptFetch(e,n)}}}class UM{get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}constructor(e,t,n,r,i){this.app=e,this._client=t,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}}function jM(e,t){const n=e.target.error||void 0;return kM.create(t,{originalErrorMessage:n&&(null===n||void 0===n?void 0:n.message)})}const VM="app_namespace_store";class zM{getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}getCustomSignals(){return this.get("custom_signals")}}class qM extends zM{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Promise(((e,t)=>{try{const n=indexedDB.open("firebase_remote_config",1);n.onerror=e=>{t(jM(e,"storage-open"))},n.onsuccess=t=>{e(t.target.result)},n.onupgradeneeded=e=>{const t=e.target.result;0===e.oldVersion&&t.createObjectStore(VM,{keyPath:"compositeKey"})}}catch(qI){t(kM.create("storage-open",{originalErrorMessage:null===qI||void 0===qI?void 0:qI.message}))}}));super(),this.appId=e,this.appName=t,this.namespace=n,this.openDbPromise=r}async setCustomSignals(e){const t=(await this.openDbPromise).transaction([VM],"readwrite"),n=HM(e,await this.getWithTransaction("custom_signals",t)||{});return await this.setWithTransaction("custom_signals",n,t),n}async getWithTransaction(e,t){return new Promise(((n,r)=>{const i=t.objectStore(VM),s=this.createCompositeKey(e);try{const e=i.get(s);e.onerror=e=>{r(jM(e,"storage-get"))},e.onsuccess=e=>{const t=e.target.result;n(t?t.value:void 0)}}catch($M){r(kM.create("storage-get",{originalErrorMessage:null===$M||void 0===$M?void 0:$M.message}))}}))}async setWithTransaction(e,t,n){return new Promise(((r,i)=>{const s=n.objectStore(VM),o=this.createCompositeKey(e);try{const e=s.put({compositeKey:o,value:t});e.onerror=e=>{i(jM(e,"storage-set"))},e.onsuccess=()=>{r()}}catch($M){i(kM.create("storage-set",{originalErrorMessage:null===$M||void 0===$M?void 0:$M.message}))}}))}async get(e){const t=(await this.openDbPromise).transaction([VM],"readonly");return this.getWithTransaction(e,t)}async set(e,t){const n=(await this.openDbPromise).transaction([VM],"readwrite");return this.setWithTransaction(e,t,n)}async delete(e){const t=await this.openDbPromise;return new Promise(((n,r)=>{const i=t.transaction([VM],"readwrite").objectStore(VM),s=this.createCompositeKey(e);try{const e=i.delete(s);e.onerror=e=>{r(jM(e,"storage-delete"))},e.onsuccess=()=>{n()}}catch($M){r(kM.create("storage-delete",{originalErrorMessage:null===$M||void 0===$M?void 0:$M.message}))}}))}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class BM extends zM{constructor(){super(...arguments),this.storage={}}async get(e){return Promise.resolve(this.storage[e])}async set(e,t){return this.storage[e]=t,Promise.resolve(void 0)}async delete(e){return this.storage[e]=void 0,Promise.resolve()}async setCustomSignals(e){const t=this.storage.custom_signals||{};return this.storage.custom_signals=HM(e,t),Promise.resolve(this.storage.custom_signals)}}function HM(e,t){const n=Object.assign(Object.assign({},t),e),r=Object.fromEntries(Object.entries(n).filter((e=>{let[t,n]=e;return null!==n})).map((e=>{let[t,n]=e;return"number"===typeof n?[t,n.toString()]:[t,n]})));if(Object.keys(r).length>100)throw kM.create("custom-signal-max-allowed-signals",{maxSignals:100});return r}class WM{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}getCustomSignals(){return this.customSignals}async loadFromStorage(){const e=this.storage.getLastFetchStatus(),t=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),r=this.storage.getCustomSignals(),i=await e;i&&(this.lastFetchStatus=i);const s=await t;s&&(this.lastSuccessfulFetchTimestampMillis=s);const o=await n;o&&(this.activeConfig=o);const a=await r;a&&(this.customSignals=a)}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}async setCustomSignals(e){this.customSignals=await this.storage.setCustomSignals(e)}}async function KM(){if(!sn())return!1;try{return await on()}catch(qI){return!1}}Kr(new On(SM,(function(e,t){let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate(),{projectId:s,apiKey:o,appId:a}=r.options;if(!s)throw kM.create("registration-project-id");if(!o)throw kM.create("registration-api-key");if(!a)throw kM.create("registration-app-id");const l=(null===n||void 0===n?void 0:n.templateId)||"firebase",c=sn()?new qM(a,r.name,l):new BM,u=new WM(c),h=new Hn(TM);h.logLevel=jn.ERROR;const d=new MM(i,ni,l,s,o,a),f=new FM(d,c),p=new OM(f,c,u,h),g=new UM(r,p,u,c,h);return AM(g),g}),"PUBLIC").setMultipleInstances(!0)),li(TM,EM),li(TM,EM,"esm2017");class GM{constructor(e,t){this.app=e,this._delegate=t}get defaultConfig(){return this._delegate.defaultConfig}set defaultConfig(e){this._delegate.defaultConfig=e}get fetchTimeMillis(){return this._delegate.fetchTimeMillis}get lastFetchStatus(){return this._delegate.lastFetchStatus}get settings(){return this._delegate.settings}set settings(e){this._delegate.settings=e}activate(){return NM(this._delegate)}ensureInitialized(){return AM(this._delegate)}fetch(){return PM(this._delegate)}fetchAndActivate(){return async function(e){return e=Dn(e),await PM(e),NM(e)}(this._delegate)}getAll(){return RM(this._delegate)}getBoolean(e){return function(e,t){return DM(Dn(e),t).asBoolean()}(this._delegate,e)}getNumber(e){return function(e,t){return DM(Dn(e),t).asNumber()}(this._delegate,e)}getString(e){return function(e,t){return DM(Dn(e),t).asString()}(this._delegate,e)}getValue(e){return DM(this._delegate,e)}setLogLevel(e){!function(e,t){const n=Dn(e);switch(t){case"debug":n._logger.logLevel=jn.DEBUG;break;case"silent":n._logger.logLevel=jn.SILENT;break;default:n._logger.logLevel=jn.ERROR}}(this._delegate,e)}}function QM(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("remote-config").getImmediate({identifier:n});return new GM(r,i)}var YM;(YM=ME).INTERNAL.registerComponent(new On("remoteConfig-compat",QM,"PUBLIC").setMultipleInstances(!0).setServiceProps({isSupported:KM})),YM.registerVersion("@firebase/remote-config-compat","0.2.17");var JM,$M,XM=function(){var e=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(e&&e.responseStart>0&&e.responseStart<performance.now())return e},ZM=function(e){if("loading"===document.readyState)return"loading";var t=XM();if(t){if(e<t.domInteractive)return"loading";if(0===t.domContentLoadedEventStart||e<t.domContentLoadedEventStart)return"dom-interactive";if(0===t.domComplete||e<t.domComplete)return"dom-content-loaded"}return"complete"},eF=function(e){var t=e.nodeName;return 1===e.nodeType?t.toLowerCase():t.toUpperCase().replace(/^#/,"")},tF=function(e,t){var n="";try{for(;e&&9!==e.nodeType;){var r=e,i=r.id?"#"+r.id:eF(r)+(r.classList&&r.classList.value&&r.classList.value.trim()&&r.classList.value.trim().length?"."+r.classList.value.trim().replace(/\s+/g,"."):"");if(n.length+i.length>(t||100)-1)return n||i;if(n=n?i+">"+n:i,r.id)break;e=r.parentNode}}catch(e){}return n},nF=-1,rF=function(){return nF},iF=function(e){addEventListener("pageshow",(function(t){t.persisted&&(nF=t.timeStamp,e(t))}),!0)},sF=function(){var e=XM();return e&&e.activationStart||0},oF=function(e,t){var n=XM(),r="navigate";return rF()>=0?r="back-forward-cache":n&&(document.prerendering||sF()>0?r="prerender":document.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},aF=function(e,t,n){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var r=new PerformanceObserver((function(e){Promise.resolve().then((function(){t(e.getEntries())}))}));return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch(e){}},lF=function(e,t,n,r){var i,s;return function(o){t.value>=0&&(o||r)&&((s=t.value-(i||0))||void 0===i)&&(i=t.value,t.delta=s,t.rating=function(e,t){return e>t[1]?"poor":e>t[0]?"needs-improvement":"good"}(t.value,n),e(t))}},cF=function(e){requestAnimationFrame((function(){return requestAnimationFrame((function(){return e()}))}))},uF=function(e){document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&e()}))},hF=function(e){var t=!1;return function(){t||(e(),t=!0)}},dF=-1,fF=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},pF=function(e){"hidden"===document.visibilityState&&dF>-1&&(dF="visibilitychange"===e.type?e.timeStamp:0,mF())},gF=function(){addEventListener("visibilitychange",pF,!0),addEventListener("prerenderingchange",pF,!0)},mF=function(){removeEventListener("visibilitychange",pF,!0),removeEventListener("prerenderingchange",pF,!0)},yF=function(){return dF<0&&(dF=fF(),gF(),iF((function(){setTimeout((function(){dF=fF(),gF()}),0)}))),{get firstHiddenTime(){return dF}}},vF=function(e){document.prerendering?addEventListener("prerenderingchange",(function(){return e()}),!0):e()},_F=[1800,3e3],wF=function(e,t){t=t||{},vF((function(){var n,r=yF(),i=oF("FCP"),s=aF("paint",(function(e){e.forEach((function(e){"first-contentful-paint"===e.name&&(s.disconnect(),e.startTime<r.firstHiddenTime&&(i.value=Math.max(e.startTime-sF(),0),i.entries.push(e),n(!0)))}))}));s&&(n=lF(e,i,_F,t.reportAllChanges),iF((function(r){i=oF("FCP"),n=lF(e,i,_F,t.reportAllChanges),cF((function(){i.value=performance.now()-r.timeStamp,n(!0)}))})))}))},bF=[.1,.25],TF=function(e,t){!function(e,t){t=t||{},wF(hF((function(){var n,r=oF("CLS",0),i=0,s=[],o=function(e){e.forEach((function(e){if(!e.hadRecentInput){var t=s[0],n=s[s.length-1];i&&e.startTime-n.startTime<1e3&&e.startTime-t.startTime<5e3?(i+=e.value,s.push(e)):(i=e.value,s=[e])}})),i>r.value&&(r.value=i,r.entries=s,n())},a=aF("layout-shift",o);a&&(n=lF(e,r,bF,t.reportAllChanges),uF((function(){o(a.takeRecords()),n(!0)})),iF((function(){i=0,r=oF("CLS",0),n=lF(e,r,bF,t.reportAllChanges),cF((function(){return n()}))})),setTimeout(n,0))})))}((function(t){var n=function(e){var t,n={};if(e.entries.length){var r=e.entries.reduce((function(e,t){return e&&e.value>t.value?e:t}));if(r&&r.sources&&r.sources.length){var i=(t=r.sources).find((function(e){return e.node&&1===e.node.nodeType}))||t[0];i&&(n={largestShiftTarget:tF(i.node),largestShiftTime:r.startTime,largestShiftValue:r.value,largestShiftSource:i,largestShiftEntry:r,loadState:ZM(r.startTime)})}}return Object.assign(e,{attribution:n})}(t);e(n)}),t)},EF=0,IF=1/0,SF=0,kF=function(e){e.forEach((function(e){e.interactionId&&(IF=Math.min(IF,e.interactionId),SF=Math.max(SF,e.interactionId),EF=SF?(SF-IF)/7+1:0)}))},CF=function(){return JM?EF:performance.interactionCount||0},xF=function(){"interactionCount"in performance||JM||(JM=aF("event",kF,{type:"event",buffered:!0,durationThreshold:0}))},NF=[],AF=new Map,PF=0,RF=[],DF=function(e){if(RF.forEach((function(t){return t(e)})),e.interactionId||"first-input"===e.entryType){var t=NF[NF.length-1],n=AF.get(e.interactionId);if(n||NF.length<10||e.duration>t.latency){if(n)e.duration>n.latency?(n.entries=[e],n.latency=e.duration):e.duration===n.latency&&e.startTime===n.entries[0].startTime&&n.entries.push(e);else{var r={id:e.interactionId,latency:e.duration,entries:[e]};AF.set(r.id,r),NF.push(r)}NF.sort((function(e,t){return t.latency-e.latency})),NF.length>10&&NF.splice(10).forEach((function(e){return AF.delete(e.id)}))}}},OF=function(e){var t=self.requestIdleCallback||self.setTimeout,n=-1;return e=hF(e),"hidden"===document.visibilityState?e():(n=t(e),uF(e)),n},LF=[200,500],MF=function(e,t){"PerformanceEventTiming"in self&&"interactionId"in PerformanceEventTiming.prototype&&(t=t||{},vF((function(){var n;xF();var r,i=oF("INP"),s=function(e){OF((function(){e.forEach(DF);var t=function(){var e=Math.min(NF.length-1,Math.floor((CF()-PF)/50));return NF[e]}();t&&t.latency!==i.value&&(i.value=t.latency,i.entries=t.entries,r())}))},o=aF("event",s,{durationThreshold:null!==(n=t.durationThreshold)&&void 0!==n?n:40});r=lF(e,i,LF,t.reportAllChanges),o&&(o.observe({type:"first-input",buffered:!0}),uF((function(){s(o.takeRecords()),r(!0)})),iF((function(){PF=CF(),NF.length=0,AF.clear(),i=oF("INP"),r=lF(e,i,LF,t.reportAllChanges)})))})))},FF=[],UF=[],jF=0,VF=new WeakMap,zF=new Map,qF=-1,BF=function(e){FF=FF.concat(e),HF()},HF=function(){qF<0&&(qF=OF(WF))},WF=function(){zF.size>10&&zF.forEach((function(e,t){AF.has(t)||zF.delete(t)}));var e=NF.map((function(e){return VF.get(e.entries[0])})),t=UF.length-50;UF=UF.filter((function(n,r){return r>=t||e.includes(n)}));for(var n=new Set,r=0;r<UF.length;r++){var i=UF[r];KF(i.startTime,i.processingEnd).forEach((function(e){n.add(e)}))}var s=FF.length-1-50;FF=FF.filter((function(e,t){return e.startTime>jF&&t>s||n.has(e)})),qF=-1};RF.push((function(e){e.interactionId&&e.target&&!zF.has(e.interactionId)&&zF.set(e.interactionId,e.target)}),(function(e){var t,n=e.startTime+e.duration;jF=Math.max(jF,e.processingEnd);for(var r=UF.length-1;r>=0;r--){var i=UF[r];if(Math.abs(n-i.renderTime)<=8){(t=i).startTime=Math.min(e.startTime,t.startTime),t.processingStart=Math.min(e.processingStart,t.processingStart),t.processingEnd=Math.max(e.processingEnd,t.processingEnd),t.entries.push(e);break}}t||(t={startTime:e.startTime,processingStart:e.processingStart,processingEnd:e.processingEnd,renderTime:n,entries:[e]},UF.push(t)),(e.interactionId||"first-input"===e.entryType)&&VF.set(e,t),HF()}));var KF=function(e,t){for(var n,r=[],i=0;n=FF[i];i++)if(!(n.startTime+n.duration<e)){if(n.startTime>t)break;r.push(n)}return r},GF=function(e,t){$M||($M=aF("long-animation-frame",BF)),MF((function(t){var n=function(e){var t=e.entries[0],n=VF.get(t),r=t.processingStart,i=n.processingEnd,s=n.entries.sort((function(e,t){return e.processingStart-t.processingStart})),o=KF(t.startTime,i),a=e.entries.find((function(e){return e.target})),l=a&&a.target||zF.get(t.interactionId),c=[t.startTime+t.duration,i].concat(o.map((function(e){return e.startTime+e.duration}))),u=Math.max.apply(Math,c),h={interactionTarget:tF(l),interactionTargetElement:l,interactionType:t.name.startsWith("key")?"keyboard":"pointer",interactionTime:t.startTime,nextPaintTime:u,processedEventEntries:s,longAnimationFrameEntries:o,inputDelay:r-t.startTime,processingDuration:i-r,presentationDelay:Math.max(u-i,0),loadState:ZM(t.startTime)};return Object.assign(e,{attribution:h})}(t);e(n)}),t)},QF=[2500,4e3],YF={},JF=function(e,t){!function(e,t){t=t||{},vF((function(){var n,r=yF(),i=oF("LCP"),s=function(e){t.reportAllChanges||(e=e.slice(-1)),e.forEach((function(e){e.startTime<r.firstHiddenTime&&(i.value=Math.max(e.startTime-sF(),0),i.entries=[e],n())}))},o=aF("largest-contentful-paint",s);if(o){n=lF(e,i,QF,t.reportAllChanges);var a=hF((function(){YF[i.id]||(s(o.takeRecords()),o.disconnect(),YF[i.id]=!0,n(!0))}));["keydown","click"].forEach((function(e){addEventListener(e,(function(){return OF(a)}),{once:!0,capture:!0})})),uF(a),iF((function(r){i=oF("LCP"),n=lF(e,i,QF,t.reportAllChanges),cF((function(){i.value=performance.now()-r.timeStamp,YF[i.id]=!0,n(!0)}))}))}}))}((function(t){var n=function(e){var t={timeToFirstByte:0,resourceLoadDelay:0,resourceLoadDuration:0,elementRenderDelay:e.value};if(e.entries.length){var n=XM();if(n){var r=n.activationStart||0,i=e.entries[e.entries.length-1],s=i.url&&performance.getEntriesByType("resource").filter((function(e){return e.name===i.url}))[0],o=Math.max(0,n.responseStart-r),a=Math.max(o,s?(s.requestStart||s.startTime)-r:0),l=Math.max(a,s?s.responseEnd-r:0),c=Math.max(l,i.startTime-r);t={element:tF(i.element),timeToFirstByte:o,resourceLoadDelay:a-o,resourceLoadDuration:l-a,elementRenderDelay:c-l,navigationEntry:n,lcpEntry:i},i.url&&(t.url=i.url),s&&(t.lcpResourceEntry=s)}}return Object.assign(e,{attribution:t})}(t);e(n)}),t)};new Date;const $F="@firebase/performance",XF="0.7.6",ZF=XF,eU="FB-PERF-TRACE-MEASURE",tU="_wt_",nU="_fcp",rU="_fid",iU="_lcp",sU="_inp",oU="_cls",aU="@firebase/performance/config",lU="@firebase/performance/configexpire",cU="Performance",uU=new cn("performance",cU,{"trace started":"Trace {$traceName} was started before.","trace stopped":"Trace {$traceName} is not running.","nonpositive trace startTime":"Trace {$traceName} startTime should be positive.","nonpositive trace duration":"Trace {$traceName} duration should be positive.","no window":"Window is not available.","no app id":"App id is not available.","no project id":"Project id is not available.","no api key":"Api key is not available.","invalid cc log":"Attempted to queue invalid cc event","FB not default":"Performance can only start when Firebase app instance is the default one.","RC response not ok":"RC response is not ok","invalid attribute name":"Attribute name {$attributeName} is invalid.","invalid attribute value":"Attribute value {$attributeValue} is invalid.","invalid custom metric name":"Custom metric name {$customMetricName} is invalid","invalid String merger input":"Input for String merger is invalid, contact support team to resolve.","already initialized":"initializePerformance() has already been called with different options. To avoid this error, call initializePerformance() with the same options as when it was originally called, or call getPerformance() to return the already initialized instance."}),hU=new Hn(cU);let dU,fU,pU,gU;hU.logLevel=jn.INFO;class mU{constructor(e){if(this.window=e,!e)throw uU.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay),this.onLCP=JF,this.onINP=GF,this.onCLS=TF}getUrl(){return this.windowLocation.href.split("?")[0]}mark(e){this.performance&&this.performance.mark&&this.performance.mark(e)}measure(e,t,n){this.performance&&this.performance.measure&&this.performance.measure(e,t,n)}getEntriesByType(e){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(e):[]}getEntriesByName(e){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(e):[]}getTimeOrigin(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)}requiredApisAvailable(){return fetch&&Promise&&an()?!!sn()||(hU.info("IndexedDB is not supported by current browser"),!1):(hU.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)}setupObserver(e,t){if(!this.PerformanceObserver)return;const n=new this.PerformanceObserver((e=>{for(const n of e.getEntries())t(n)}));n.observe({entryTypes:[e]})}static getInstance(){return void 0===dU&&(dU=new mU(fU)),dU}}function yU(){return pU}function vU(e,t){const n=e.length-t.length;if(n<0||n>1)throw uU.create("invalid String merger input");const r=[];for(let i=0;i<e.length;i++)r.push(e.charAt(i)),t.length>i&&r.push(t.charAt(i));return r.join("")}class _U{constructor(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=vU("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=vU("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}getFlTransportFullUrl(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)}static getInstance(){return void 0===gU&&(gU=new _U),gU}}var wU;!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.VISIBLE=1]="VISIBLE",e[e.HIDDEN=2]="HIDDEN"}(wU||(wU={}));const bU=["firebase_","google_","ga_"],TU=new RegExp("^[a-zA-Z]\\w*$");function EU(){const e=mU.getInstance().navigator;return(null===e||void 0===e?void 0:e.serviceWorker)?e.serviceWorker.controller?2:3:1}function IU(){switch(mU.getInstance().document.visibilityState){case"visible":return wU.VISIBLE;case"hidden":return wU.HIDDEN;default:return wU.UNKNOWN}}function SU(){const e=mU.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function kU(e){var t;const n=null===(t=e.options)||void 0===t?void 0:t.appId;if(!n)throw uU.create("no app id");return n}const CU="0.0.1",xU={loggingEnabled:!0},NU="FIREBASE_INSTALLATIONS_AUTH";function AU(e,t){const n=function(){const e=mU.getInstance().localStorage;if(!e)return;const t=e.getItem(lU);if(!t||(n=t,!(Number(n)>Date.now())))return;var n;const r=e.getItem(aU);if(!r)return;try{return JSON.parse(r)}catch(hj){return}}();return n?(RU(n),Promise.resolve()):function(e,t){return function(e){const t=e.getToken();return t.then((e=>{})),t}(e.installations).then((n=>{const r=function(e){var t;const n=null===(t=e.options)||void 0===t?void 0:t.projectId;if(!n)throw uU.create("no project id");return n}(e.app),i=function(e){var t;const n=null===(t=e.options)||void 0===t?void 0:t.apiKey;if(!n)throw uU.create("no api key");return n}(e.app),s="https://firebaseremoteconfig.googleapis.com/v1/projects/".concat(r,"/namespaces/fireperf:fetch?key=").concat(i),o=new Request(s,{method:"POST",headers:{Authorization:"".concat(NU," ").concat(n)},body:JSON.stringify({app_instance_id:t,app_instance_id_token:n,app_id:kU(e.app),app_version:ZF,sdk_version:CU})});return fetch(o).then((e=>{if(e.ok)return e.json();throw uU.create("RC response not ok")}))})).catch((()=>{hU.info(PU)}))}(e,t).then(RU).then((e=>function(e){const t=mU.getInstance().localStorage;if(!e||!t)return;t.setItem(aU,JSON.stringify(e)),t.setItem(lU,String(Date.now()+60*_U.getInstance().configTimeToLive*60*1e3))}(e)),(()=>{}))}const PU="Could not fetch config, will use default configs";function RU(e){if(!e)return e;const t=_U.getInstance(),n=e.entries||{};return void 0!==n.fpr_enabled?t.loggingEnabled="true"===String(n.fpr_enabled):t.loggingEnabled=xU.loggingEnabled,n.fpr_log_source?t.logSource=Number(n.fpr_log_source):xU.logSource&&(t.logSource=xU.logSource),n.fpr_log_endpoint_url?t.logEndPointUrl=n.fpr_log_endpoint_url:xU.logEndPointUrl&&(t.logEndPointUrl=xU.logEndPointUrl),n.fpr_log_transport_key?t.transportKey=n.fpr_log_transport_key:xU.transportKey&&(t.transportKey=xU.transportKey),void 0!==n.fpr_vc_network_request_sampling_rate?t.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate):void 0!==xU.networkRequestsSamplingRate&&(t.networkRequestsSamplingRate=xU.networkRequestsSamplingRate),void 0!==n.fpr_vc_trace_sampling_rate?t.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate):void 0!==xU.tracesSamplingRate&&(t.tracesSamplingRate=xU.tracesSamplingRate),t.logTraceAfterSampling=DU(t.tracesSamplingRate),t.logNetworkAfterSampling=DU(t.networkRequestsSamplingRate),e}function DU(e){return Math.random()<=e}let OU,LU=1;function MU(e){return LU=2,OU=OU||function(e){return function(){const e=mU.getInstance().document;return new Promise((t=>{if(e&&"complete"!==e.readyState){const n=()=>{"complete"===e.readyState&&(e.removeEventListener("readystatechange",n),t())};e.addEventListener("readystatechange",n)}else t()}))}().then((()=>function(e){const t=e.getId();return t.then((e=>{pU=e})),t}(e.installations))).then((t=>AU(e,t))).then((()=>FU()),(()=>FU()))}(e),OU}function FU(){LU=3}let UU,jU=3,VU=[],zU=!1;function qU(e){setTimeout((()=>{jU<=0||(VU.length>0&&BU(),qU(1e4))}),e)}function BU(){const e=VU.splice(0,1e3),t=e.map((e=>({source_extension_json_proto3:e.message,event_time_ms:String(e.eventTime)})));(function(e){const t=_U.getInstance().getFlTransportFullUrl(),n=JSON.stringify(e);return navigator.sendBeacon&&navigator.sendBeacon(t,n)?Promise.resolve():fetch(t,{method:"POST",body:n,keepalive:!0}).then()})({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:_U.getInstance().logSource,log_event:t}).then((()=>{jU=3})).catch((()=>{VU=[...e,...VU],jU--,hU.info("Tries left: ".concat(jU,".")),qU(1e4)}))}function HU(e){return function(){!function(e){if(!e.eventTime||!e.message)throw uU.create("invalid cc log");VU=[...VU,e]}({message:e(...arguments),eventTime:Date.now()})}}function WU(){for(;VU.length>0;)BU()}function KU(e,t){UU||(UU={send:HU(YU),flush:WU}),UU.send(e,t)}function GU(e){const t=_U.getInstance();!t.instrumentationEnabled&&e.isAuto||(t.dataCollectionEnabled||e.isAuto)&&mU.getInstance().requiredApisAvailable()&&(3===LU?QU(e):MU(e.performanceController).then((()=>QU(e)),(()=>QU(e))))}function QU(e){if(!yU())return;const t=_U.getInstance();t.loggingEnabled&&t.logTraceAfterSampling&&KU(e,1)}function YU(e,t){return 0===t?function(e){const t={url:e.url,http_method:e.httpMethod||0,http_response_code:200,response_payload_bytes:e.responsePayloadBytes,client_start_time_us:e.startTimeUs,time_to_response_initiated_us:e.timeToResponseInitiatedUs,time_to_response_completed_us:e.timeToResponseCompletedUs},n={application_info:JU(e.performanceController.app),network_request_metric:t};return JSON.stringify(n)}(e):function(e){const t={name:e.name,is_auto:e.isAuto,client_start_time_us:e.startTimeUs,duration_us:e.durationUs};0!==Object.keys(e.counters).length&&(t.counters=e.counters);const n=e.getAttributes();0!==Object.keys(n).length&&(t.custom_attributes=n);const r={application_info:JU(e.performanceController.app),trace_metric:t};return JSON.stringify(r)}(e)}function JU(e){return{google_app_id:kU(e),app_instance_id:yU(),web_app_info:{sdk_version:ZF,page_url:mU.getInstance().getUrl(),service_worker_status:EU(),visibility_state:IU(),effective_connection_type:SU()},application_process_state:0}}function $U(e,t){const n=t;if(!n||void 0===n.responseStart)return;const r=mU.getInstance().getTimeOrigin(),i=Math.floor(1e3*(n.startTime+r)),s=n.responseStart?Math.floor(1e3*(n.responseStart-n.startTime)):void 0,o=Math.floor(1e3*(n.responseEnd-n.startTime));!function(e){const t=_U.getInstance();if(!t.instrumentationEnabled)return;const n=e.url,r=t.logEndPointUrl.split("?")[0],i=t.flTransportEndpointUrl.split("?")[0];n!==r&&n!==i&&t.loggingEnabled&&t.logNetworkAfterSampling&&KU(e,0)}({performanceController:e,url:n.name&&n.name.split("?")[0],responsePayloadBytes:n.transferSize,startTimeUs:i,timeToResponseInitiatedUs:s,timeToResponseCompletedUs:o})}const XU=["_fp",nU,rU,iU,oU,sU];class ZU{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0;this.performanceController=e,this.name=t,this.isAuto=n,this.state=1,this.customAttributes={},this.counters={},this.api=mU.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="".concat("FB-PERF-TRACE-START","-").concat(this.randomId,"-").concat(this.name),this.traceStopMark="".concat("FB-PERF-TRACE-STOP","-").concat(this.randomId,"-").concat(this.name),this.traceMeasure=r||"".concat(eU,"-").concat(this.randomId,"-").concat(this.name),r&&this.calculateTraceMetrics())}start(){if(1!==this.state)throw uU.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2}stop(){if(2!==this.state)throw uU.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),GU(this)}record(e,t,n){if(e<=0)throw uU.create("nonpositive trace startTime",{traceName:this.name});if(t<=0)throw uU.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*t),this.startTimeUs=Math.floor(1e3*e),n&&n.attributes&&(this.customAttributes=Object.assign({},n.attributes)),n&&n.metrics)for(const r of Object.keys(n.metrics))isNaN(Number(n.metrics[r]))||(this.counters[r]=Math.floor(Number(n.metrics[r])));GU(this)}incrementMetric(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;void 0===this.counters[e]?this.putMetric(e,t):this.putMetric(e,this.counters[e]+t)}putMetric(e,t){if(n=e,r=this.name,0===n.length||n.length>100||!(r&&r.startsWith(tU)&&XU.indexOf(n)>-1)&&n.startsWith("_"))throw uU.create("invalid custom metric name",{customMetricName:e});var n,r;this.counters[e]=function(e){const t=Math.floor(e);return t<e&&hU.info("Metric value should be an Integer, setting the value as : ".concat(t,".")),t}(null!==t&&void 0!==t?t:0)}getMetric(e){return this.counters[e]||0}putAttribute(e,t){const n=!(0===(r=e).length||r.length>40)&&!bU.some((e=>r.startsWith(e)))&&!!r.match(TU);var r;const i=function(e){return 0!==e.length&&e.length<=100}(t);if(n&&i)this.customAttributes[e]=t;else{if(!n)throw uU.create("invalid attribute name",{attributeName:e});if(!i)throw uU.create("invalid attribute value",{attributeValue:t})}}getAttribute(e){return this.customAttributes[e]}removeAttribute(e){void 0!==this.customAttributes[e]&&delete this.customAttributes[e]}getAttributes(){return Object.assign({},this.customAttributes)}setStartTime(e){this.startTimeUs=e}setDuration(e){this.durationUs=e}calculateTraceMetrics(){const e=this.api.getEntriesByName(this.traceMeasure),t=e&&e[0];t&&(this.durationUs=Math.floor(1e3*t.duration),this.startTimeUs=Math.floor(1e3*(t.startTime+this.api.getTimeOrigin())))}static createOobTrace(e,t,n,r,i){const s=mU.getInstance().getUrl();if(!s)return;const o=new ZU(e,tU+s,!0),a=Math.floor(1e3*mU.getInstance().getTimeOrigin());o.setStartTime(a),t&&t[0]&&(o.setDuration(Math.floor(1e3*t[0].duration)),o.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),o.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),o.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd)));if(n){const e=n.find((e=>"first-paint"===e.name));e&&e.startTime&&o.putMetric("_fp",Math.floor(1e3*e.startTime));const t=n.find((e=>"first-contentful-paint"===e.name));t&&t.startTime&&o.putMetric(nU,Math.floor(1e3*t.startTime)),i&&o.putMetric(rU,Math.floor(1e3*i))}this.addWebVitalMetric(o,iU,"lcp_element",r.lcp),this.addWebVitalMetric(o,oU,"cls_largestShiftTarget",r.cls),this.addWebVitalMetric(o,sU,"inp_interactionTarget",r.inp),GU(o),UU&&UU.flush()}static addWebVitalMetric(e,t,n,r){r&&(e.putMetric(t,Math.floor(1e3*r.value)),r.elementAttribution&&e.putAttribute(n,r.elementAttribution))}static createUserTimingTrace(e,t){GU(new ZU(e,t,!1,t))}}let ej,tj={},nj=!1;function rj(e){yU()&&(setTimeout((()=>function(e){const t=mU.getInstance();"onpagehide"in window?t.document.addEventListener("pagehide",(()=>sj(e))):t.document.addEventListener("unload",(()=>sj(e)));t.document.addEventListener("visibilitychange",(()=>{"hidden"===t.document.visibilityState&&sj(e)})),t.onFirstInputDelay&&t.onFirstInputDelay((e=>{ej=e}));t.onLCP((e=>{var t;tj.lcp={value:e.value,elementAttribution:null===(t=e.attribution)||void 0===t?void 0:t.element}})),t.onCLS((e=>{var t;tj.cls={value:e.value,elementAttribution:null===(t=e.attribution)||void 0===t?void 0:t.largestShiftTarget}})),t.onINP((e=>{var t;tj.inp={value:e.value,elementAttribution:null===(t=e.attribution)||void 0===t?void 0:t.interactionTarget}}))}(e)),0),setTimeout((()=>function(e){const t=mU.getInstance(),n=t.getEntriesByType("resource");for(const r of n)$U(e,r);t.setupObserver("resource",(t=>$U(e,t)))}(e)),0),setTimeout((()=>function(e){const t=mU.getInstance(),n=t.getEntriesByType("measure");for(const r of n)ij(e,r);t.setupObserver("measure",(t=>ij(e,t)))}(e)),0))}function ij(e,t){const n=t.name;n.substring(0,21)!==eU&&ZU.createUserTimingTrace(e,n)}function sj(e){if(!nj){nj=!0;const t=mU.getInstance(),n=t.getEntriesByType("navigation"),r=t.getEntriesByType("paint");setTimeout((()=>{ZU.createOobTrace(e,n,r,tj,ej)}),0)}}class oj{constructor(e,t){this.app=e,this.installations=t,this.initialized=!1}_init(e){this.initialized||(void 0!==(null===e||void 0===e?void 0:e.dataCollectionEnabled)&&(this.dataCollectionEnabled=e.dataCollectionEnabled),void 0!==(null===e||void 0===e?void 0:e.instrumentationEnabled)&&(this.instrumentationEnabled=e.instrumentationEnabled),mU.getInstance().requiredApisAvailable()?on().then((e=>{e&&(zU||(qU(5500),zU=!0),MU(this).then((()=>rj(this)),(()=>rj(this))),this.initialized=!0)})).catch((e=>{hU.info("Environment doesn't support IndexedDB: ".concat(e))})):hU.info('Firebase Performance cannot start if the browser does not support "Fetch" and "Promise", or cookies are disabled.'))}set instrumentationEnabled(e){_U.getInstance().instrumentationEnabled=e}get instrumentationEnabled(){return _U.getInstance().instrumentationEnabled}set dataCollectionEnabled(e){_U.getInstance().dataCollectionEnabled=e}get dataCollectionEnabled(){return _U.getInstance().dataCollectionEnabled}}const aj=(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if("[DEFAULT]"!==r.name)throw uU.create("FB not default");if("undefined"===typeof window)throw uU.create("no window");!function(e){fU=e}(window);const s=new oj(r,i);return s._init(n),s};Kr(new On("performance",aj,"PUBLIC")),li($F,XF),li($F,XF,"esm2017");class lj{constructor(e,t){this.app=e,this._delegate=t}get instrumentationEnabled(){return this._delegate.instrumentationEnabled}set instrumentationEnabled(e){this._delegate.instrumentationEnabled=e}get dataCollectionEnabled(){return this._delegate.dataCollectionEnabled}set dataCollectionEnabled(e){this._delegate.dataCollectionEnabled=e}trace(e){return function(e,t){return e=Dn(e),new ZU(e,t)}(this._delegate,e)}}function cj(e){const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("performance").getImmediate();return new lj(t,n)}!function(e){e.INTERNAL.registerComponent(new On("performance-compat",cj,"PUBLIC")),e.registerVersion("@firebase/performance-compat","0.2.19")}(ME),document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("load");try{let t=ME.app(),n=["auth","database","firestore","functions","messaging","storage","analytics","remoteConfig","performance"].filter((e=>"function"===typeof t[e]));e&&(e.textContent="Firebase SDK loaded with ".concat(n.join(", ")))}catch($M){console.error($M),e&&(e.textContent="Error loading the Firebase SDK, check the console.")}}));const uj=document.getElementById("root");(0,s.createRoot)(uj).render((0,lE.jsx)(PE,{}))})();
//# sourceMappingURL=main.506f783b.js.map